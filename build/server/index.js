import { jsx, jsxs, Fragment } from "react/jsx-runtime";
import { ServerRouter, UNSAFE_withComponentProps, Meta, Links, Outlet, ScrollRestoration, Scripts, UNSAFE_withErrorBoundaryProps, data, useNavigate, Link, redirect, useLocation, useLoaderData, useFetcher, useNavigation, Form, useParams, useActionData } from "react-router";
import { isbot } from "isbot";
import { renderToReadableStream } from "react-dom/server";
import { betterAuth } from "better-auth";
import { admin as admin$1, organization as organization$1, phoneNumber } from "better-auth/plugins";
import { Pool } from "pg";
import crypto$1 from "crypto";
import bcrypt from "bcryptjs";
import * as React from "react";
import React__default, { forwardRef, createElement, useState, createContext, useEffect, useContext, useMemo, isValidElement, useCallback, useRef, useImperativeHandle, PureComponent, useLayoutEffect, cloneElement, Children, Component } from "react";
import { createAuthClient } from "better-auth/react";
import { adminClient, organizationClient, phoneNumberClient } from "better-auth/client/plugins";
import sharp from "sharp";
import path from "path";
import fs from "fs";
import * as SelectPrimitive from "@radix-ui/react-select";
import * as AvatarPrimitive from "@radix-ui/react-avatar";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu";
import { Slot } from "@radix-ui/react-slot";
import { cva } from "class-variance-authority";
import * as SeparatorPrimitive from "@radix-ui/react-separator";
import { drizzle } from "drizzle-orm/postgres-js";
import postgres from "postgres";
import { pgTable, boolean, date, text, varchar, integer, timestamp, decimal, uuid, jsonb, time, serial } from "drizzle-orm/pg-core";
import { relations, eq, desc, sql, count } from "drizzle-orm";
import { parseISO, format, parse, isValid } from "date-fns";
import { ptBR, es, enUS } from "date-fns/locale";
import * as PopoverPrimitive from "@radix-ui/react-popover";
import * as TabsPrimitive from "@radix-ui/react-tabs";
import * as DialogPrimitive from "@radix-ui/react-dialog";
import * as LabelPrimitive from "@radix-ui/react-label";
import { DayPicker } from "react-day-picker";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog";
import throttle from "es-toolkit/compat/throttle";
import get from "es-toolkit/compat/get";
import { createSlice, prepareAutoBatched, current, createListenerMiddleware, createAction, configureStore, combineReducers, autoBatchEnhancer } from "@reduxjs/toolkit";
import { Provider } from "react-redux";
import { castDraft } from "immer";
import { createSelector } from "reselect";
import { useSyncExternalStoreWithSelector } from "use-sync-external-store/shim/with-selector";
import sortBy from "es-toolkit/compat/sortBy";
import { symbol, symbolWye, symbolTriangle, symbolStar, symbolSquare, symbolDiamond, symbolCross, symbolCircle, stack, stackOrderNone, stackOffsetWiggle, stackOffsetSilhouette, stackOffsetNone, stackOffsetExpand, area, line, curveStepBefore, curveStepAfter, curveStep, curveNatural, curveMonotoneY, curveMonotoneX, curveLinear, curveLinearClosed, curveBumpY, curveBumpX, curveBasis, curveBasisOpen, curveBasisClosed } from "victory-vendor/d3-shape";
import range$1 from "es-toolkit/compat/range";
import * as d3Scales from "victory-vendor/d3-scale";
import Decimal from "decimal.js-light";
import EventEmitter from "eventemitter3";
import { createPortal } from "react-dom";
import uniqBy from "es-toolkit/compat/uniqBy";
import last from "es-toolkit/compat/last";
import { isFragment } from "react-is";
import isPlainObject from "es-toolkit/compat/isPlainObject";
import * as SwitchPrimitives from "@radix-ui/react-switch";
import { GoogleGenAI } from "@google/genai";
import invariant from "tiny-invariant";
const ABORT_DELAY = 5e3;
async function handleRequest(request, responseStatusCode, responseHeaders, routerContext) {
  const userAgent = request.headers.get("user-agent");
  const isBot = userAgent ? isbot(userAgent) : false;
  const controller = new AbortController();
  const timeoutId = setTimeout(() => controller.abort(), ABORT_DELAY);
  try {
    const stream = await renderToReadableStream(
      /* @__PURE__ */ jsx(ServerRouter, { context: routerContext, url: request.url }),
      {
        signal: controller.signal,
        onError(error) {
          console.error("SSR Error:", error);
          responseStatusCode = 500;
        }
      }
    );
    if (isBot) {
      await stream.allReady;
    }
    responseHeaders.set("Content-Type", "text/html");
    return new Response(stream, {
      headers: responseHeaders,
      status: responseStatusCode
    });
  } catch (error) {
    console.error("Render error:", error);
    return new Response("Internal Server Error", { status: 500 });
  } finally {
    clearTimeout(timeoutId);
  }
}
const entryServer = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: handleRequest
}, Symbol.toStringTag, { value: "Module" }));
const links = () => [{
  rel: "preconnect",
  href: "https://fonts.googleapis.com"
}, {
  rel: "preconnect",
  href: "https://fonts.gstatic.com",
  crossOrigin: "anonymous"
}, {
  rel: "stylesheet",
  href: "https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
}];
const root = UNSAFE_withComponentProps(function App() {
  return /* @__PURE__ */ jsxs("html", {
    lang: "pt-BR",
    children: [/* @__PURE__ */ jsxs("head", {
      children: [/* @__PURE__ */ jsx("meta", {
        charSet: "utf-8"
      }), /* @__PURE__ */ jsx("meta", {
        name: "viewport",
        content: "width=device-width, initial-scale=1"
      }), /* @__PURE__ */ jsx(Meta, {}), /* @__PURE__ */ jsx(Links, {})]
    }), /* @__PURE__ */ jsxs("body", {
      className: "antialiased",
      children: [/* @__PURE__ */ jsx(Outlet, {}), /* @__PURE__ */ jsx(ScrollRestoration, {}), /* @__PURE__ */ jsx(Scripts, {})]
    })]
  });
});
const ErrorBoundary = UNSAFE_withErrorBoundaryProps(function ErrorBoundary2() {
  return /* @__PURE__ */ jsxs("html", {
    lang: "pt-BR",
    children: [/* @__PURE__ */ jsxs("head", {
      children: [/* @__PURE__ */ jsx("meta", {
        charSet: "utf-8"
      }), /* @__PURE__ */ jsx("meta", {
        name: "viewport",
        content: "width=device-width, initial-scale=1"
      }), /* @__PURE__ */ jsx("title", {
        children: "Erro"
      })]
    }), /* @__PURE__ */ jsx("body", {
      className: "antialiased",
      children: /* @__PURE__ */ jsxs("div", {
        className: "flex flex-col items-center justify-center min-h-screen p-4",
        children: [/* @__PURE__ */ jsx("h1", {
          className: "text-2xl font-bold",
          children: "Oops! Algo deu errado."
        }), /* @__PURE__ */ jsx("p", {
          className: "mt-2 text-muted-foreground",
          children: "Ocorreu um erro inesperado. Por favor, tente novamente mais tarde."
        })]
      })
    })]
  });
});
const route0 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary,
  default: root,
  links
}, Symbol.toStringTag, { value: "Module" }));
const getRequiredEnv = (name) => {
  const value = process.env[name];
  if (!value) {
    console.warn(`‚ö†Ô∏è  AVISO: Vari√°vel de ambiente ${name} n√£o definida.`);
    return "";
  }
  return value;
};
const getArrayEnv = (name, fallback) => {
  const value = process.env[name];
  if (!value) return fallback;
  return value.split(",").map((url) => url.trim());
};
const pool = new Pool({
  connectionString: process.env.DATABASE_URL || "postgresql://admin:admin123@localhost:5432/sgtl_db"
});
const config = {
  databaseUrl: process.env.DATABASE_URL || "postgresql://admin:admin123@localhost:5432/sgtl_db",
  betterAuthSecret: getRequiredEnv("BETTER_AUTH_SECRET"),
  betterAuthUrl: process.env.BETTER_AUTH_URL || "http://localhost:3000",
  clientUrls: getArrayEnv("CLIENT_URL", ["http://localhost:3000", "http://localhost:3001"]),
  isProduction: process.env.NODE_ENV === "production",
  whatsapp: {
    apiUrl: process.env.WHATSAPP_API_URL || "https://evolution-api.a2tec.com.br",
    apiKey: process.env.WHATSAPP_API_KEY || "",
    instanceName: process.env.WHATSAPP_INSTANCE_NAME || "a2tec"
  }
};
async function sendWhatsAppMessage$1(phone, message) {
  console.log(`[WhatsApp] Sending to ${phone}: ${message}`);
}
const auth = betterAuth({
  database: pool,
  secret: config.betterAuthSecret,
  baseURL: config.betterAuthUrl,
  emailAndPassword: {
    enabled: true,
    requireEmailVerification: false,
    async sendResetPassword(data2, request) {
      console.log("========================================");
      console.log("üîë RESET PASSWORD LINK:");
      console.log("   User:", data2.user.email);
      console.log("   Link:", data2.url);
      console.log("========================================");
    }
  },
  user: {
    additionalFields: {
      username: { type: "string", required: false },
      documento: { type: "string", required: false },
      documento_tipo: { type: "string", required: false },
      phone: { type: "string", required: false }
    }
  },
  advanced: {
    useSecureCookies: config.betterAuthUrl.startsWith("https://"),
    crossOriginCookies: {
      enabled: true,
      origin: config.clientUrls
    }
  },
  plugins: [
    admin$1(),
    organization$1(),
    phoneNumber({
      signUpOnVerification: {
        getTempEmail: (phone) => `${phone.replace(/\D/g, "")}@sgtl-customer.com`,
        getTempName: (phone) => `Cliente ${phone}`
      },
      callbackOnVerification: async (data2, request) => {
        console.log(`[AUTH] Telefone verificado com sucesso: ${data2.user.phoneNumber}`);
      },
      sendOTP: async (data2, request) => {
        const message = `Seu c√≥digo de acesso para o Portal do Cliente JJ√™ √©: ${data2.code}`;
        await sendWhatsAppMessage$1(data2.phoneNumber, message);
      }
    })
  ],
  trustedOrigins: config.clientUrls
});
async function getSession(request) {
  return await auth.api.getSession({ headers: request.headers });
}
async function requireAuth(request) {
  const session2 = await getSession(request);
  if (!session2) {
    throw new Response("N√£o autenticado", { status: 401 });
  }
  return session2;
}
async function requireRole(request, allowedRoles) {
  const session2 = await requireAuth(request);
  const userRole = session2.user.role || "user";
  const userRoles = userRole.split(",").map((r2) => r2.trim());
  const hasPermission = allowedRoles.some((role) => userRoles.includes(role));
  if (!hasPermission) {
    throw new Response("Acesso negado", { status: 403 });
  }
  return session2;
}
async function loader$17({
  request
}) {
  const session2 = await requireRole(request, ["admin", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const result = await pool.query(`SELECT 
            id,
            type as tipo,
            description as descricao,
            amount as valor,
            currency as moeda,
            date as data_emissao,
            due_date as data_vencimento,
            payment_date as data_pagamento,
            status,
            payment_method as forma_pagamento,
            category as categoria_despesa,
            category as categoria_receita,
            cost_center as centro_custo,
            accounting_classification as classificacao_contabil,
            document_number as numero_documento,
            notes as observacoes,
            created_by as criado_por,
            created_at as criado_em
        FROM transaction 
        WHERE organization_id = $1 
        ORDER BY date DESC, created_at DESC`, [orgId]);
  return data(result.rows);
}
async function action$1a({
  request
}) {
  const session2 = await requireRole(request, ["admin", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      tipo,
      descricao,
      valor,
      moeda,
      data_emissao,
      data_vencimento,
      data_pagamento,
      status,
      forma_pagamento,
      categoria_receita,
      categoria_despesa,
      centro_custo,
      classificacao_contabil,
      numero_documento,
      observacoes,
      maintenance_id,
      reserva_id
    } = body;
    const category = tipo === "RECEITA" ? categoria_receita : categoria_despesa;
    await pool.query(`INSERT INTO transaction (
                type, description, amount, currency, date,
                due_date, payment_date, status, payment_method, category,
                cost_center, accounting_classification, document_number, notes,
                organization_id, created_by, maintenance_id, reservation_id
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18)`, [tipo || "EXPENSE", descricao, valor, moeda || "BRL", data_emissao, data_vencimento, data_pagamento || null, status || "PENDING", forma_pagamento || null, category || null, centro_custo || null, classificacao_contabil || null, numero_documento || null, observacoes || null, orgId, userId, maintenance_id || null, reserva_id || null]);
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$1a,
  loader: loader$17
}, Symbol.toStringTag, { value: "Module" }));
async function loader$16({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT * FROM transaction WHERE id = $1 AND organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Transaction not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$19({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const check = await pool.query(`SELECT id FROM transaction WHERE id = $1 AND organization_id = $2`, [id, orgId]);
  if (check.rows.length === 0) {
    return data({
      error: "Transaction not found"
    }, {
      status: 404
    });
  }
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      tipo,
      descricao,
      valor,
      moeda,
      data_emissao,
      data_vencimento,
      data_pagamento,
      status,
      forma_pagamento,
      categoria_receita,
      categoria_despesa,
      centro_custo,
      classificacao_contabil,
      numero_documento,
      observacoes
    } = body;
    const category = tipo === "RECEITA" ? categoria_receita : categoria_despesa;
    await pool.query(`UPDATE transaction SET
                type = $1, description = $2, amount = $3, currency = $4, date = $5,
                due_date = $6, payment_date = $7, status = $8, payment_method = $9, category = $10,
                cost_center = $11, accounting_classification = $12, document_number = $13, notes = $14
            WHERE id = $15 AND organization_id = $16`, [tipo || "EXPENSE", descricao, valor, moeda || "BRL", data_emissao, data_vencimento, data_pagamento || null, status || "PENDING", forma_pagamento || null, category || null, centro_custo || null, classificacao_contabil || null, numero_documento || null, observacoes || null, id, orgId]);
    return data({
      success: true
    });
  }
  if (request.method === "DELETE") {
    await pool.query(`DELETE FROM transaction WHERE id = $1`, [id]);
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$19,
  loader: loader$16
}, Symbol.toStringTag, { value: "Module" }));
async function loader$15({
  request
}) {
  await requireRole(request, ["admin"]);
  const result = await pool.query('SELECT * FROM organization ORDER BY "createdAt" DESC');
  return data(result.rows);
}
async function action$18({
  request
}) {
  await requireRole(request, ["admin"]);
  if (request.method === "POST") {
    const body = await request.json();
    const {
      name,
      slug,
      intent,
      id
    } = body;
    if (intent === "delete" || request.method === "DELETE") ;
    const newId = crypto$1.randomUUID();
    const result = await pool.query('INSERT INTO organization (id, name, slug, "createdAt") VALUES ($1, $2, $3, NOW()) RETURNING *', [newId, name, slug]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$18,
  loader: loader$15
}, Symbol.toStringTag, { value: "Module" }));
async function action$17({
  request,
  params
}) {
  await requireRole(request, ["admin"]);
  const {
    id
  } = params;
  if (request.method === "DELETE") {
    const result = await pool.query("DELETE FROM organization WHERE id = $1 RETURNING id", [id]);
    if (result.rowCount === 0) {
      return data({
        error: "Not found"
      }, {
        status: 404
      });
    }
    return data({
      success: true
    });
  }
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      name,
      slug
    } = body;
    const result = await pool.query('UPDATE organization SET name = $1, slug = $2, "updatedAt" = NOW() WHERE id = $3 RETURNING *', [name, slug, id]);
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$17
}, Symbol.toStringTag, { value: "Module" }));
var UserRole = /* @__PURE__ */ ((UserRole2) => {
  UserRole2["ADMIN"] = "admin";
  UserRole2["FINANCEIRO"] = "financeiro";
  UserRole2["OPERACIONAL"] = "operacional";
  UserRole2["USER"] = "user";
  return UserRole2;
})(UserRole || {});
var EmpresaContexto = /* @__PURE__ */ ((EmpresaContexto2) => {
  EmpresaContexto2["TURISMO"] = "TURISMO";
  EmpresaContexto2["EXPRESS"] = "EXPRESS";
  return EmpresaContexto2;
})(EmpresaContexto || {});
var VeiculoStatus = /* @__PURE__ */ ((VeiculoStatus2) => {
  VeiculoStatus2["ACTIVE"] = "ACTIVE";
  VeiculoStatus2["MAINTENANCE"] = "MAINTENANCE";
  VeiculoStatus2["IN_TRANSIT"] = "IN_TRANSIT";
  return VeiculoStatus2;
})(VeiculoStatus || {});
const VeiculoStatusLabel = {
  [
    "ACTIVE"
    /* ACTIVE */
  ]: "Ativo",
  [
    "MAINTENANCE"
    /* MAINTENANCE */
  ]: "Em Manuten√ß√£o",
  [
    "IN_TRANSIT"
    /* IN_TRANSIT */
  ]: "Em Viagem"
};
var AssentoStatus = /* @__PURE__ */ ((AssentoStatus2) => {
  AssentoStatus2["AVAILABLE"] = "AVAILABLE";
  AssentoStatus2["OCCUPIED"] = "OCCUPIED";
  AssentoStatus2["PENDING"] = "PENDING";
  AssentoStatus2["BLOCKED"] = "BLOCKED";
  return AssentoStatus2;
})(AssentoStatus || {});
var TripStatus = /* @__PURE__ */ ((TripStatus2) => {
  TripStatus2["SCHEDULED"] = "SCHEDULED";
  TripStatus2["BOARDING"] = "BOARDING";
  TripStatus2["IN_TRANSIT"] = "IN_TRANSIT";
  TripStatus2["COMPLETED"] = "COMPLETED";
  TripStatus2["CANCELLED"] = "CANCELLED";
  TripStatus2["DELAYED"] = "DELAYED";
  return TripStatus2;
})(TripStatus || {});
const TripStatusLabel = {
  [
    "SCHEDULED"
    /* SCHEDULED */
  ]: "Agendada",
  [
    "BOARDING"
    /* BOARDING */
  ]: "Embarque",
  [
    "IN_TRANSIT"
    /* IN_TRANSIT */
  ]: "Em Curso",
  [
    "COMPLETED"
    /* COMPLETED */
  ]: "Finalizada",
  [
    "CANCELLED"
    /* CANCELLED */
  ]: "Cancelada",
  [
    "DELAYED"
    /* DELAYED */
  ]: "Atrasada"
};
var ReservationStatus = /* @__PURE__ */ ((ReservationStatus2) => {
  ReservationStatus2["PENDING"] = "PENDING";
  ReservationStatus2["CONFIRMED"] = "CONFIRMED";
  ReservationStatus2["CANCELLED"] = "CANCELLED";
  ReservationStatus2["USED"] = "USED";
  ReservationStatus2["CHECKED_IN"] = "CHECKED_IN";
  ReservationStatus2["NO_SHOW"] = "NO_SHOW";
  ReservationStatus2["COMPLETED"] = "COMPLETED";
  return ReservationStatus2;
})(ReservationStatus || {});
const ReservationStatusLabel = {
  [
    "PENDING"
    /* PENDING */
  ]: "Pendente",
  [
    "CONFIRMED"
    /* CONFIRMED */
  ]: "Confirmada",
  [
    "CANCELLED"
    /* CANCELLED */
  ]: "Cancelada",
  [
    "USED"
    /* USED */
  ]: "Utilizada",
  [
    "CHECKED_IN"
    /* CHECKED_IN */
  ]: "Embarcado",
  [
    "NO_SHOW"
    /* NO_SHOW */
  ]: "N√£o Compareceu",
  [
    "COMPLETED"
    /* COMPLETED */
  ]: "Conclu√≠da"
};
var EncomendaStatus = /* @__PURE__ */ ((EncomendaStatus2) => {
  EncomendaStatus2["AWAITING"] = "AWAITING";
  EncomendaStatus2["IN_TRANSIT"] = "IN_TRANSIT";
  EncomendaStatus2["DELIVERED"] = "DELIVERED";
  EncomendaStatus2["RETURNED"] = "RETURNED";
  return EncomendaStatus2;
})(EncomendaStatus || {});
const EncomendaStatusLabel = {
  [
    "AWAITING"
    /* AWAITING */
  ]: "Aguardando",
  [
    "IN_TRANSIT"
    /* IN_TRANSIT */
  ]: "Em Tr√¢nsito",
  [
    "DELIVERED"
    /* DELIVERED */
  ]: "Entregue",
  [
    "RETURNED"
    /* RETURNED */
  ]: "Devolvida"
};
var FretamentoStatus = /* @__PURE__ */ ((FretamentoStatus2) => {
  FretamentoStatus2["REQUEST"] = "REQUEST";
  FretamentoStatus2["QUOTED"] = "QUOTED";
  FretamentoStatus2["CONFIRMED"] = "CONFIRMED";
  FretamentoStatus2["IN_PROGRESS"] = "IN_PROGRESS";
  FretamentoStatus2["COMPLETED"] = "COMPLETED";
  FretamentoStatus2["CANCELLED"] = "CANCELLED";
  return FretamentoStatus2;
})(FretamentoStatus || {});
const FretamentoStatusLabel = {
  [
    "REQUEST"
    /* REQUEST */
  ]: "Solicita√ß√£o",
  [
    "QUOTED"
    /* QUOTED */
  ]: "Or√ßamento Enviado",
  [
    "CONFIRMED"
    /* CONFIRMED */
  ]: "Confirmado",
  [
    "IN_PROGRESS"
    /* IN_PROGRESS */
  ]: "Em Andamento",
  [
    "COMPLETED"
    /* COMPLETED */
  ]: "Conclu√≠do",
  [
    "CANCELLED"
    /* CANCELLED */
  ]: "Cancelado"
};
var TipoEncomenda = /* @__PURE__ */ ((TipoEncomenda2) => {
  TipoEncomenda2["BUS_CARGO"] = "BUS_CARGO";
  TipoEncomenda2["TRUCK_FREIGHT"] = "TRUCK_FREIGHT";
  return TipoEncomenda2;
})(TipoEncomenda || {});
var StatusManutencao = /* @__PURE__ */ ((StatusManutencao2) => {
  StatusManutencao2["SCHEDULED"] = "SCHEDULED";
  StatusManutencao2["IN_PROGRESS"] = "IN_PROGRESS";
  StatusManutencao2["COMPLETED"] = "COMPLETED";
  StatusManutencao2["CANCELLED"] = "CANCELLED";
  return StatusManutencao2;
})(StatusManutencao || {});
const StatusManutencaoLabel = {
  [
    "SCHEDULED"
    /* SCHEDULED */
  ]: "Agendada",
  [
    "IN_PROGRESS"
    /* IN_PROGRESS */
  ]: "Em Andamento",
  [
    "COMPLETED"
    /* COMPLETED */
  ]: "Conclu√≠da",
  [
    "CANCELLED"
    /* CANCELLED */
  ]: "Cancelada"
};
var TipoDocumento = /* @__PURE__ */ ((TipoDocumento2) => {
  TipoDocumento2["CPF"] = "CPF";
  TipoDocumento2["RG"] = "RG";
  TipoDocumento2["CNH"] = "CNH";
  TipoDocumento2["PASSAPORTE"] = "PASSAPORTE";
  TipoDocumento2["RNE"] = "RNE";
  TipoDocumento2["CNPJ"] = "CNPJ";
  TipoDocumento2["OUTRO"] = "OUTRO";
  return TipoDocumento2;
})(TipoDocumento || {});
var TipoCliente = /* @__PURE__ */ ((TipoCliente2) => {
  TipoCliente2["PESSOA_FISICA"] = "PESSOA_FISICA";
  TipoCliente2["PESSOA_JURIDICA"] = "PESSOA_JURIDICA";
  return TipoCliente2;
})(TipoCliente || {});
var TipoManutencao = /* @__PURE__ */ ((TipoManutencao2) => {
  TipoManutencao2["PREVENTIVE"] = "PREVENTIVE";
  TipoManutencao2["CORRECTIVE"] = "CORRECTIVE";
  TipoManutencao2["PREDICTIVE"] = "PREDICTIVE";
  TipoManutencao2["INSPECTION"] = "INSPECTION";
  return TipoManutencao2;
})(TipoManutencao || {});
var TipoAssento = /* @__PURE__ */ ((TipoAssento2) => {
  TipoAssento2["CONVENCIONAL"] = "CONVENCIONAL";
  TipoAssento2["EXECUTIVO"] = "EXECUTIVO";
  TipoAssento2["SEMI_LEITO"] = "SEMI_LEITO";
  TipoAssento2["LEITO"] = "LEITO";
  TipoAssento2["CAMA"] = "CAMA";
  TipoAssento2["CAMA_MASTER"] = "CAMA_MASTER";
  TipoAssento2["BLOQUEADO"] = "BLOQUEADO";
  return TipoAssento2;
})(TipoAssento || {});
var TipoTransacao = /* @__PURE__ */ ((TipoTransacao2) => {
  TipoTransacao2["INCOME"] = "INCOME";
  TipoTransacao2["EXPENSE"] = "EXPENSE";
  TipoTransacao2["TRANSFER"] = "TRANSFER";
  return TipoTransacao2;
})(TipoTransacao || {});
var StatusTransacao = /* @__PURE__ */ ((StatusTransacao2) => {
  StatusTransacao2["PENDING"] = "PENDING";
  StatusTransacao2["PAID"] = "PAID";
  StatusTransacao2["OVERDUE"] = "OVERDUE";
  StatusTransacao2["CANCELLED"] = "CANCELLED";
  StatusTransacao2["PARTIALLY_PAID"] = "PARTIALLY_PAID";
  return StatusTransacao2;
})(StatusTransacao || {});
const StatusTransacaoLabel = {
  [
    "PENDING"
    /* PENDING */
  ]: "Pendente",
  [
    "PAID"
    /* PAID */
  ]: "Pago",
  [
    "OVERDUE"
    /* OVERDUE */
  ]: "Vencido",
  [
    "CANCELLED"
    /* CANCELLED */
  ]: "Cancelado",
  [
    "PARTIALLY_PAID"
    /* PARTIALLY_PAID */
  ]: "Parcialmente Pago"
};
var CategoriaReceita = /* @__PURE__ */ ((CategoriaReceita2) => {
  CategoriaReceita2["VENDA_PASSAGEM"] = "VENDA_PASSAGEM";
  CategoriaReceita2["FRETAMENTO"] = "FRETAMENTO";
  CategoriaReceita2["ENCOMENDA"] = "ENCOMENDA";
  CategoriaReceita2["OUTROS"] = "OUTROS";
  return CategoriaReceita2;
})(CategoriaReceita || {});
var DriverStatus = /* @__PURE__ */ ((DriverStatus2) => {
  DriverStatus2["AVAILABLE"] = "AVAILABLE";
  DriverStatus2["IN_TRANSIT"] = "IN_TRANSIT";
  DriverStatus2["ON_LEAVE"] = "ON_LEAVE";
  DriverStatus2["AWAY"] = "AWAY";
  return DriverStatus2;
})(DriverStatus || {});
const DriverStatusLabel = {
  [
    "AVAILABLE"
    /* AVAILABLE */
  ]: "Dispon√≠vel",
  [
    "IN_TRANSIT"
    /* IN_TRANSIT */
  ]: "Em Viagem",
  [
    "ON_LEAVE"
    /* ON_LEAVE */
  ]: "Folga",
  [
    "AWAY"
    /* AWAY */
  ]: "Afastado"
};
var RouteType = /* @__PURE__ */ ((RouteType2) => {
  RouteType2["OUTBOUND"] = "OUTBOUND";
  RouteType2["INBOUND"] = "INBOUND";
  return RouteType2;
})(RouteType || {});
async function loader$14({
  request
}) {
  const session2 = await requireAuth(request);
  const userId = session2.user.id;
  const orgId = session2.session.activeOrganizationId;
  if (!orgId) {
    return data({
      error: "No active organization context"
    }, {
      status: 400
    });
  }
  try {
    const clientResult = await pool.query("SELECT * FROM clients WHERE user_id = $1", [userId]);
    let clientProfile = clientResult.rows[0];
    if (!clientProfile) {
      console.log(`[DASHBOARD] Lazy-creating client profile for userId: ${userId}`);
      const userResult = await pool.query('SELECT name, email, phone, cpf FROM "user" WHERE id = $1', [userId]);
      if (userResult.rows.length === 0) {
        return data({
          error: "User not found"
        }, {
          status: 404
        });
      }
      const user2 = userResult.rows[0];
      const newClientResult = await pool.query(`INSERT INTO clients (
                    tipo_cliente, nome, email, telefone, 
                    documento_tipo, documento,
                    organization_id, user_id,
                    data_cadastro, saldo_creditos
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, CURRENT_TIMESTAMP, 0)
                RETURNING *`, ["PESSOA_FISICA", user2.name, user2.email, user2.phone || null, "CPF", user2.cpf || "", orgId, userId]);
      clientProfile = newClientResult.rows[0];
    }
    const clientId = clientProfile.id;
    const reservationsResult = await pool.query(`SELECT r.*, 
                   t.departure_date, t.departure_time, t.title as trip_title,
                   route.name as route_name, route.origin_city, route.origin_state, 
                   route.destination_city, route.destination_state,
                   route.origin_neighborhood, route.destination_neighborhood,
                   route.stops as route_stops,
                   s.numero as seat_number, s.tipo as seat_type
            FROM reservations r
            JOIN trips t ON r.trip_id = t.id
            JOIN routes route ON t.route_id = route.id
            LEFT JOIN seat s ON r.seat_id = s.id
            WHERE r.client_id = $1 AND r.status != $2
            ORDER BY t.departure_date ASC, t.departure_time ASC`, [clientId, ReservationStatus.CANCELLED]);
    const parcelsResult = await pool.query(`SELECT * FROM parcel_orders 
             WHERE sender_document = $1 OR recipient_document = $1
             ORDER BY created_at DESC LIMIT 5`, [clientProfile.documento]);
    return data({
      profile: clientProfile,
      reservations: reservationsResult.rows,
      parcels: parcelsResult.rows
    });
  } catch (error) {
    console.error("Error fetching client dashboard:", error);
    return data({
      error: "Failed to fetch dashboard data"
    }, {
      status: 500
    });
  }
}
const route5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$14
}, Symbol.toStringTag, { value: "Module" }));
async function action$16({
  request
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const session2 = await requireAuth(request);
  const userId = session2.user.id;
  const body = await request.json();
  const {
    reservations,
    credits_used,
    is_partial,
    entry_value,
    trip_id
  } = body;
  if (!reservations || !Array.isArray(reservations) || reservations.length === 0) {
    return data({
      error: "No reservations provided"
    }, {
      status: 400
    });
  }
  const client = await pool.connect();
  try {
    await client.query("BEGIN");
    const clientResult = await client.query("SELECT id, saldo_creditos, organization_id FROM clients WHERE user_id = $1", [userId]);
    if (clientResult.rows.length === 0) throw new Error("Client not found");
    const clientId = clientResult.rows[0].id;
    const orgId = clientResult.rows[0].organization_id;
    const tripResult = await client.query("SELECT organization_id, title FROM trips WHERE id = $1", [trip_id]);
    if (tripResult.rows.length === 0) throw new Error("Trip not found");
    const tripOrgId = tripResult.rows[0].organization_id;
    if (credits_used && Number(credits_used) > 0) {
      const currentCredits = Number(clientResult.rows[0].saldo_creditos || 0);
      if (currentCredits < Number(credits_used)) {
        throw new Error("Saldo de cr√©ditos insuficiente");
      }
      await client.query("UPDATE clients SET saldo_creditos = saldo_creditos - $1 WHERE id = $2", [credits_used, clientId]);
      await client.query(`INSERT INTO transaction (
                    organization_id, type, category, amount, description, status, 
                    client_id, date, created_at, created_by
                ) VALUES ($1, $2, 'OUTROS', $3, $4, $5, $6, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, $7)`, [tripOrgId, TipoTransacao.EXPENSE, credits_used, `Uso de cr√©ditos - ${tripResult.rows[0].title}`, StatusTransacao.PAID, clientId, userId]);
    }
    const createdReservations = [];
    const totalAmount = reservations.reduce((sum, r2) => sum + Number(r2.price || 0), 0);
    for (const r2 of reservations) {
      const reservationCheck = await client.query("SELECT id FROM reservations WHERE trip_id = $1 AND seat_id = $2 AND status != $3", [trip_id, r2.seat_id, ReservationStatus.CANCELLED]);
      if (reservationCheck.rows.length > 0) {
        throw new Error(`O assento ${r2.seat_number} j√° est√° reservado.`);
      }
      const ticket_code = "T-" + crypto$1.randomBytes(3).toString("hex").toUpperCase();
      const resResult = await client.query(`INSERT INTO reservations (
                    trip_id, seat_id,
                    passenger_name, passenger_document, passenger_email, passenger_phone,
                    status, ticket_code, price,
                    client_id, organization_id,
                    boarding_point, dropoff_point,
                    credits_used, is_partial, amount_paid,
                    created_at, updated_at, created_by
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, $17)
                RETURNING *`, [
        trip_id,
        r2.seat_id,
        r2.passenger_name,
        r2.passenger_document,
        r2.passenger_email || null,
        r2.passenger_phone || null,
        ReservationStatus.PENDING,
        ticket_code,
        r2.price,
        clientId,
        tripOrgId,
        r2.boarding_point || null,
        r2.dropoff_point || null,
        0,
        // credits per reservation logic simplified
        is_partial || false,
        0,
        // amount_paid starts 0
        userId
      ]);
      createdReservations.push(resResult.rows[0]);
    }
    const description = `Reserva Portal: ${tripResult.rows[0].title} (${createdReservations.length} pax)`;
    const entryAmount = entry_value || totalAmount - (credits_used || 0);
    await client.query(`INSERT INTO transaction (
                organization_id, type, category, amount, description, status, 
                client_id, reservation_id, date, created_at, created_by
            ) VALUES ($1, $2, 'VENDA_PASSAGEM', $3, $4, $5, $6, $7, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, $8)`, [tripOrgId, TipoTransacao.INCOME, entryAmount, description + (is_partial ? " - Entrada" : ""), StatusTransacao.PENDING, clientId, createdReservations[0].id, userId]);
    if (is_partial) {
      const remaining = totalAmount - (credits_used || 0) - entry_value;
      if (remaining > 0) {
        await client.query(`INSERT INTO transaction (
                        organization_id, type, category, amount, description, status, 
                        client_id, reservation_id, date, created_at, created_by
                    ) VALUES ($1, $2, 'VENDA_PASSAGEM', $3, $4, $5, $6, $7, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, $8)`, [tripOrgId, TipoTransacao.INCOME, remaining, description + " - Restante", StatusTransacao.PENDING, clientId, createdReservations[0].id, userId]);
      }
    }
    await client.query("UPDATE trips SET seats_available = seats_available - $1 WHERE id = $2", [reservations.length, trip_id]);
    await client.query("COMMIT");
    return data({
      success: true,
      reservations: createdReservations
    });
  } catch (e) {
    await client.query("ROLLBACK");
    console.error("Checkout Error:", e);
    return data({
      error: e.message || "Checkout falhou"
    }, {
      status: 500
    });
  } finally {
    client.release();
  }
}
const route6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$16
}, Symbol.toStringTag, { value: "Module" }));
async function loader$13({
  request
}) {
  const url = new URL(request.url);
  const q = url.searchParams.get("q");
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  let query = `SELECT * FROM vehicle WHERE organization_id = $1`;
  const params = [orgId];
  if (q) {
    query += ` AND (placa ILIKE $2 OR modelo ILIKE $2)`;
    params.push(`%${q}%`);
  }
  query += ` ORDER BY created_at DESC`;
  const result = await pool.query(query, params);
  const vehiclesWithSeats = await Promise.all(result.rows.map(async (vehicle2) => {
    const seatsResult = await pool.query(`SELECT * FROM seat WHERE vehicle_id = $1 ORDER BY numero ASC`, [vehicle2.id]);
    return {
      ...vehicle2,
      seats: seatsResult.rows
    };
  }));
  return data(vehiclesWithSeats);
}
async function action$15({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      placa,
      modelo,
      tipo,
      capacidade_passageiros,
      ano,
      renavam,
      chassi,
      status,
      imagem,
      galeria,
      cor,
      is_double_deck
    } = body;
    const result = await pool.query(`INSERT INTO vehicle (
                placa, modelo, tipo, capacidade_passageiros, ano, renavam, chassi,
                status, imagem, galeria, cor, is_double_deck,
                organization_id, created_by
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14)
            RETURNING *`, [placa, modelo, tipo, capacidade_passageiros || 0, ano || null, renavam || null, chassi || null, status || "AVAILABLE", imagem || null, galeria || null, cor || null, is_double_deck || false, orgId, userId]);
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route7 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$15,
  loader: loader$13
}, Symbol.toStringTag, { value: "Module" }));
async function loader$12({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT * FROM vehicle WHERE id = $1 AND organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Vehicle not found", {
      status: 404
    });
  }
  const vehicle2 = result.rows[0];
  const featuresResult = await pool.query(`SELECT id, category, label, value FROM vehicle_feature WHERE vehicle_id = $1`, [id]);
  return data({
    ...vehicle2,
    features: featuresResult.rows
  });
}
async function action$14({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const check = await pool.query("SELECT id FROM vehicle WHERE id = $1 AND organization_id = $2", [id, orgId]);
  if (check.rows.length === 0) {
    return data({
      error: "Vehicle not found"
    }, {
      status: 404
    });
  }
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      placa,
      modelo,
      tipo,
      status,
      ano,
      km_atual,
      proxima_revisao_km,
      ultima_revisao,
      is_double_deck,
      capacidade_passageiros,
      capacidade_carga,
      observacoes,
      motorista_atual,
      features,
      imagem,
      galeria
    } = body;
    const result = await pool.query(`UPDATE vehicle SET
                placa = $1, modelo = $2, tipo = $3, status = $4, ano = $5,
                km_atual = $6, proxima_revisao_km = $7, ultima_revisao = $8,
                is_double_deck = $9, capacidade_passageiros = $10,
                capacidade_carga = $11, observacoes = $12, motorista_atual = $13,
                imagem = $14, galeria = $15,
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $16 AND organization_id = $17
            RETURNING *`, [placa, modelo, tipo, status || "ACTIVE", ano, km_atual, proxima_revisao_km, ultima_revisao || null, is_double_deck || false, capacidade_passageiros || null, capacidade_carga || null, observacoes || null, motorista_atual || null, imagem || null, galeria ? JSON.stringify(galeria) : null, id, orgId]);
    if (Array.isArray(features)) {
      await pool.query(`DELETE FROM vehicle_feature WHERE vehicle_id = $1`, [id]);
      for (const feature of features) {
        if (feature.label) {
          await pool.query(`INSERT INTO vehicle_feature (vehicle_id, category, label, value) VALUES ($1, $2, $3, $4)`, [id, feature.category || null, feature.label, feature.value || ""]);
        }
      }
    }
    return data(result.rows[0]);
  }
  if (request.method === "DELETE") {
    await pool.query("DELETE FROM vehicle WHERE id = $1 AND organization_id = $2", [id, orgId]);
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route8 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$14,
  loader: loader$12
}, Symbol.toStringTag, { value: "Module" }));
async function loader$11({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const vehicleCheck = await pool.query("SELECT id FROM vehicle WHERE id = $1 AND organization_id = $2", [id, orgId]);
  if (vehicleCheck.rows.length === 0) {
    throw new Response("Vehicle not found", {
      status: 404
    });
  }
  const result = await pool.query(`SELECT * FROM seat WHERE vehicle_id = $1 ORDER BY andar, posicao_y, posicao_x`, [id]);
  return data(result.rows);
}
async function action$13({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const vehicleCheck = await pool.query("SELECT id FROM vehicle WHERE id = $1 AND organization_id = $2", [id, orgId]);
  if (vehicleCheck.rows.length === 0) {
    return data({
      error: "Vehicle not found"
    }, {
      status: 404
    });
  }
  if (request.method === "POST") {
    let client;
    try {
      const body = await request.json();
      const {
        seats
      } = body;
      client = await pool.connect();
      await client.query("BEGIN");
      const existingSeatsResult = await client.query("SELECT * FROM seat WHERE vehicle_id = $1", [id]);
      const existingSeatsMap = /* @__PURE__ */ new Map();
      existingSeatsResult.rows.forEach((seat2) => {
        existingSeatsMap.set(seat2.numero, seat2);
      });
      const processedIds = /* @__PURE__ */ new Set();
      const processedNumeros = /* @__PURE__ */ new Set();
      for (const seat2 of seats) {
        processedNumeros.add(seat2.numero);
        const existingSeat = existingSeatsMap.get(seat2.numero);
        if (existingSeat) {
          processedIds.add(existingSeat.id);
          await client.query(`UPDATE seat SET
                            andar = $1, posicao_x = $2, posicao_y = $3, 
                            tipo = $4, status = $5, preco = $6, disabled = $7,
                            updated_at = CURRENT_TIMESTAMP
                        WHERE id = $8`, [seat2.andar, seat2.posicao_x, seat2.posicao_y, seat2.tipo, seat2.status || "AVAILABLE", seat2.preco || null, seat2.disabled || false, existingSeat.id]);
        } else {
          const coordKey = `${seat2.andar}-${seat2.posicao_x}-${seat2.posicao_y}`;
          const existingAtCoord = existingSeatsResult.rows.find((s) => `${s.andar}-${s.posicao_x}-${s.posicao_y}` === coordKey);
          if (existingAtCoord) {
            processedIds.add(existingAtCoord.id);
            await client.query(`UPDATE seat SET
                                numero = $1, tipo = $2, status = $3, preco = $4, disabled = $5,
                                updated_at = CURRENT_TIMESTAMP
                            WHERE id = $6`, [seat2.numero, seat2.tipo, seat2.status || "AVAILABLE", seat2.preco || null, seat2.disabled || false, existingAtCoord.id]);
          } else {
            const insertResult = await client.query(`INSERT INTO seat (
                                vehicle_id, numero, andar, posicao_x, posicao_y, tipo, status, preco, disabled
                            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING id`, [id, seat2.numero, seat2.andar, seat2.posicao_x, seat2.posicao_y, seat2.tipo, seat2.status || "AVAILABLE", seat2.preco || null, seat2.disabled || false]);
            processedIds.add(insertResult.rows[0].id);
          }
        }
      }
      const warnings = [];
      for (const existingSeat of existingSeatsResult.rows) {
        if (!processedIds.has(existingSeat.id)) {
          try {
            await client.query("SAVEPOINT seat_delete");
            await client.query("DELETE FROM seat WHERE id = $1", [existingSeat.id]);
            await client.query("RELEASE SAVEPOINT seat_delete");
          } catch (deleteError) {
            await client.query("ROLLBACK TO SAVEPOINT seat_delete");
            if (deleteError.code === "23503") {
              const msg = `O assento ${existingSeat.numero} n√£o pode ser exclu√≠do pois possui reservas vinculadas. Ele foi mantido mas marcado como desabilitado.`;
              console.warn(msg);
              warnings.push(msg);
              await client.query("UPDATE seat SET disabled = true, status = $1, posicao_x = -1, posicao_y = -1 WHERE id = $2", ["BLOCKED", existingSeat.id]);
            } else {
              throw deleteError;
            }
          }
        }
      }
      await client.query("UPDATE vehicle SET mapa_configurado = true WHERE id = $1", [id]);
      await client.query("COMMIT");
      const result = await client.query("SELECT * FROM seat WHERE vehicle_id = $1 AND disabled = false ORDER BY andar, posicao_y, posicao_x", [id]);
      return data({
        seats: result.rows,
        warnings
      });
    } catch (error) {
      if (client) await client.query("ROLLBACK");
      console.error("Error saving seat map:", error);
      return data({
        error: "Failed to save seat map"
      }, {
        status: 500
      });
    } finally {
      if (client) client.release();
    }
  }
  if (request.method === "DELETE") {
    try {
      await pool.query("DELETE FROM seat WHERE vehicle_id = $1", [id]);
      await pool.query("UPDATE vehicle SET mapa_configurado = false WHERE id = $1", [id]);
      return data({
        success: true
      });
    } catch (error) {
      console.error("Error clearing seat map:", error);
      return data({
        error: "Failed to clear seat map"
      }, {
        status: 500
      });
    }
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route9 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$13,
  loader: loader$11
}, Symbol.toStringTag, { value: "Module" }));
async function loader$10({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin"]);
  const orgId = session2.session.activeOrganizationId;
  const path2 = params["*"] || "";
  const segments = path2.split("/").filter(Boolean);
  try {
    if (segments[0] === "members" && segments.length === 1) {
      const result = await pool.query(`SELECT m.*, u.name, u.email, u.image, u.username
                 FROM member m
                 JOIN "user" u ON m."userId" = u.id
                 WHERE m."organizationId" = $1`, [orgId]);
      return data(result.rows);
    }
    if (segments[0] === "candidates" && segments.length === 1) {
      const result = await pool.query(`SELECT u.id, u.name, u.email, u.image, u.username
                 FROM "user" u
                 WHERE u.id NOT IN (
                     SELECT "userId" FROM member WHERE "organizationId" = $1
                 )`, [orgId]);
      return data(result.rows);
    }
    if (segments.length === 2 && segments[1] === "details") {
      const id = segments[0];
      const result = await pool.query(`SELECT * FROM "organization" WHERE id = $1`, [id]);
      if (result.rows.length === 0) {
        throw new Response("Organization not found", {
          status: 404
        });
      }
      return data(result.rows[0]);
    }
    if (segments.length === 2 && segments[1] === "parameters") {
      const id = segments[0];
      const result = await pool.query(`SELECT * FROM system_parameters WHERE organization_id = $1`, [id]);
      return data(result.rows);
    }
    throw new Response("Not found", {
      status: 404
    });
  } catch (error) {
    if (error instanceof Response) throw error;
    console.error("Error in organization API:", error);
    return data({
      error: error.message
    }, {
      status: 500
    });
  }
}
async function action$12({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin"]);
  const orgId = session2.session.activeOrganizationId;
  session2.user.id;
  const path2 = params["*"] || "";
  const segments = path2.split("/").filter(Boolean);
  try {
    if (request.method === "POST" && segments[0] === "members" && segments.length === 1) {
      const body = await request.json();
      let {
        userId: newUserId,
        role,
        email
      } = body;
      if (!newUserId && email) {
        const userResult = await pool.query(`SELECT id FROM "user" WHERE email = $1`, [email]);
        if (userResult.rows.length === 0) {
          return data({
            error: "Usu√°rio n√£o encontrado com este email."
          }, {
            status: 404
          });
        }
        newUserId = userResult.rows[0].id;
      }
      if (!newUserId) {
        return data({
          error: "Email ou ID do usu√°rio obrigat√≥rio."
        }, {
          status: 400
        });
      }
      const existingMember = await pool.query(`SELECT id FROM member WHERE "organizationId" = $1 AND "userId" = $2`, [orgId, newUserId]);
      if (existingMember.rows.length > 0) {
        return data({
          error: "Usu√°rio j√° √© membro desta organiza√ß√£o."
        }, {
          status: 409
        });
      }
      await pool.query(`INSERT INTO member (id, "organizationId", "userId", role, "createdAt")
                 VALUES (gen_random_uuid(), $1, $2, $3, NOW())`, [orgId, newUserId, role || "member"]);
      return data({
        success: true
      });
    }
    if (request.method === "PUT" && segments[0] === "members" && segments.length === 2) {
      const memberId = segments[1];
      const body = await request.json();
      const {
        role
      } = body;
      await pool.query(`UPDATE member SET role = $1 WHERE "userId" = $2 AND "organizationId" = $3`, [role, memberId, orgId]);
      return data({
        success: true
      });
    }
    if (request.method === "DELETE" && segments[0] === "members" && segments.length === 2) {
      const memberId = segments[1];
      await pool.query(`DELETE FROM member WHERE "userId" = $1 AND "organizationId" = $2`, [memberId, orgId]);
      return data({
        success: true
      });
    }
    if (request.method === "PUT" && segments.length === 2 && segments[1] === "details") {
      const id = segments[0];
      const body = await request.json();
      const {
        name,
        logo,
        metadata
      } = body;
      await pool.query(`UPDATE "organization" SET name = $1, logo = $2, metadata = $3 WHERE id = $4`, [name, logo || null, metadata || null, id]);
      return data({
        success: true
      });
    }
    if (request.method === "POST" && segments.length === 2 && segments[1] === "parameters") {
      const id = segments[0];
      const body = await request.json();
      const {
        key,
        value
      } = body;
      await pool.query(`INSERT INTO system_parameters (organization_id, key, value)
                 VALUES ($1, $2, $3)
                 ON CONFLICT (organization_id, key) DO UPDATE SET value = $3`, [id, key, value]);
      return data({
        success: true
      });
    }
    if (request.method === "POST" && segments.length === 3 && segments[1] === "parameters" && segments[2] === "batch") {
      const id = segments[0];
      const body = await request.json();
      const {
        parameters
      } = body;
      for (const param of parameters) {
        await pool.query(`INSERT INTO system_parameters (organization_id, key, value)
                     VALUES ($1, $2, $3)
                     ON CONFLICT (organization_id, key) DO UPDATE SET value = $3`, [id, param.key, param.value]);
      }
      return data({
        success: true
      });
    }
    if (request.method === "DELETE" && segments.length === 3 && segments[1] === "parameters") {
      const paramId = segments[2];
      await pool.query(`DELETE FROM system_parameters WHERE id = $1`, [paramId]);
      return data({
        success: true
      });
    }
    throw new Response("Not found", {
      status: 404
    });
  } catch (error) {
    if (error instanceof Response) throw error;
    console.error("Error in organization API:", error);
    return data({
      error: error.message
    }, {
      status: 500
    });
  }
}
const route10 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$12,
  loader: loader$10
}, Symbol.toStringTag, { value: "Module" }));
async function sendWhatsAppMessage(phone, text2) {
  const apiUrl = process.env.WHATSAPP_API_URL;
  const apiKey = process.env.WHATSAPP_API_KEY;
  const instance = process.env.WHATSAPP_INSTANCE_NAME;
  if (!apiUrl || !apiKey || !instance) {
    console.warn("‚ö†Ô∏è WhatsApp API not configured in .env");
    return;
  }
  let cleanPhone = phone.replace(/\D/g, "");
  if (cleanPhone.length <= 11 && !cleanPhone.startsWith("55")) {
    cleanPhone = "55" + cleanPhone;
  }
  console.log(`[WhatsApp] Sending to ${cleanPhone}: ${text2.substring(0, 50)}...`);
  try {
    const response = await fetch(`${apiUrl}/message/sendText/${instance}`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "apikey": apiKey
      },
      body: JSON.stringify({
        number: cleanPhone,
        options: {
          delay: 1200,
          presence: "composing",
          linkPreview: false
        },
        textMessage: {
          text: text2
        }
      })
    });
    if (!response.ok) {
      const err = await response.text();
      console.error(`‚ùå Union API Error ${response.status}:`, err);
    } else {
    }
  } catch (error) {
    console.error("‚ùå Failed to send WhatsApp message:", error);
  }
}
const resetCodes = /* @__PURE__ */ new Map();
async function action$11({
  request
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const body = await request.json();
  const {
    intent
  } = body;
  if (intent === "request" || intent === "recover-username") {
    const {
      identifier
    } = body;
    if (!identifier) return data({
      error: "Identificador obrigat√≥rio"
    }, {
      status: 400
    });
    const cleanIdentifier = identifier.replace(/\D/g, "");
    const result = await pool.query(`SELECT id, name, phone, username, cpf, email FROM "user" 
             WHERE LOWER(username) = LOWER($1)
             OR REPLACE(REPLACE(REPLACE(REPLACE(phone, '(', ''), ')', ''), '-', ''), ' ', '') = $2
             OR ($2 <> '' AND REPLACE(REPLACE(cpf, '.', ''), '-', '') = $2)
             OR LOWER(email) = LOWER($1)`, [identifier, cleanIdentifier]);
    if (result.rows.length === 0) {
      return data({
        success: true,
        message: "Se o usu√°rio existir, a informa√ß√£o foi enviada."
      });
    }
    const user2 = result.rows[0];
    if (!user2.phone) {
      return data({
        error: "Usu√°rio n√£o possui telefone cadastrado"
      }, {
        status: 400
      });
    }
    if (intent === "recover-username") {
      if (!user2.username) return data({
        error: "Usu√°rio sem username"
      }, {
        status: 400
      });
      const message2 = `Ol√° ${user2.name}!

Seu username √©: *${user2.username}*

Use-o para login.`;
      await sendWhatsAppMessage(user2.phone, message2);
      return data({
        success: true,
        message: "Username enviado via WhatsApp"
      });
    }
    const code = Math.floor(1e5 + Math.random() * 9e5).toString();
    const expiresAt = new Date(Date.now() + 10 * 60 * 1e3);
    const phoneKey = user2.phone.replace(/\D/g, "");
    resetCodes.set(phoneKey, {
      code,
      userId: user2.id,
      expiresAt
    });
    const message = `Ol√° ${user2.name}! Seu c√≥digo de recupera√ß√£o de senha √©: ${code}

Expira em 10 minutos.`;
    await sendWhatsAppMessage(user2.phone, message);
    console.log(`[RECOVERY] Code sent to ${user2.username}: ${code}`);
    return data({
      success: true,
      message: "C√≥digo enviado via WhatsApp",
      phoneHint: user2.phone.slice(-4)
    });
  }
  if (intent === "verify") {
    const {
      phone,
      code
    } = body;
    if (!phone || !code) return data({
      error: "Campos obrigat√≥rios"
    }, {
      status: 400
    });
    const phoneKey = phone.replace(/\D/g, "");
    const stored = resetCodes.get(phoneKey);
    if (!stored) return data({
      error: "C√≥digo inv√°lido ou expirado"
    }, {
      status: 400
    });
    if (stored.expiresAt < /* @__PURE__ */ new Date()) {
      resetCodes.delete(phoneKey);
      return data({
        error: "C√≥digo expirado"
      }, {
        status: 400
      });
    }
    if (stored.code !== code) return data({
      error: "C√≥digo incorreto"
    }, {
      status: 400
    });
    const resetToken = crypto$1.randomBytes(32).toString("hex");
    resetCodes.set(resetToken, {
      code: "",
      userId: stored.userId,
      expiresAt: new Date(Date.now() + 15 * 60 * 1e3)
    });
    resetCodes.delete(phoneKey);
    return data({
      success: true,
      resetToken
    });
  }
  if (intent === "reset") {
    const {
      resetToken,
      newPassword
    } = body;
    if (!resetToken || !newPassword) return data({
      error: "Campos obrigat√≥rios"
    }, {
      status: 400
    });
    const stored = resetCodes.get(resetToken);
    if (!stored || stored.expiresAt < /* @__PURE__ */ new Date()) {
      return data({
        error: "Token inv√°lido ou expirado"
      }, {
        status: 400
      });
    }
    const hashedPassword = await bcrypt.hash(newPassword, 10);
    await pool.query(`UPDATE account SET password = $1, "updatedAt" = CURRENT_TIMESTAMP 
             WHERE "userId" = $2 AND "providerId" = 'credential'`, [hashedPassword, stored.userId]);
    resetCodes.delete(resetToken);
    return data({
      success: true,
      message: "Senha alterada com sucesso"
    });
  }
  return data({
    error: "Invalid intent"
  }, {
    status: 400
  });
}
const route11 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$11
}, Symbol.toStringTag, { value: "Module" }));
function validateUsername(username) {
  if (!username || username.length < 3) return {
    valid: false,
    error: "M√≠nimo 3 caracteres"
  };
  if (username.length > 30) return {
    valid: false,
    error: "M√°ximo 30 caracteres"
  };
  if (!/^[a-zA-Z0-9._]+$/.test(username)) return {
    valid: false,
    error: "Apenas letras, n√∫meros, . e _"
  };
  if (!/^[a-zA-Z]/.test(username)) return {
    valid: false,
    error: "Deve come√ßar com letra"
  };
  return {
    valid: true
  };
}
async function isUsernameAvailable(username) {
  const result = await pool.query('SELECT id FROM "user" WHERE LOWER(username) = LOWER($1)', [username]);
  return result.rows.length === 0;
}
async function loader$$({
  request
}) {
  const url = new URL(request.url);
  const check = url.searchParams.get("check");
  if (check) {
    const validation = validateUsername(check);
    if (!validation.valid) return data({
      available: false,
      error: validation.error
    });
    const available = await isUsernameAvailable(check);
    return data({
      available
    });
  }
  return data({
    error: "Missing check param"
  }, {
    status: 400
  });
}
async function action$10({
  request
}) {
  if (request.method !== "POST") return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
  const body = await request.json();
  const {
    name
  } = body;
  if (!name || typeof name !== "string") return data({
    error: "Name required"
  }, {
    status: 400
  });
  const cleanName = name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^a-z\s]/g, "").trim();
  const parts = cleanName.split(/\s+/);
  const firstName = parts[0] || "";
  const lastName = parts[parts.length - 1] || "";
  const suggestions = [];
  if (firstName && lastName) suggestions.push(`${firstName}.${lastName}`);
  if (firstName && lastName) suggestions.push(`${firstName}${lastName}`);
  if (firstName) suggestions.push(firstName);
  const availableSuggestions = [];
  for (const s of [...new Set(suggestions)]) {
    if (await isUsernameAvailable(s)) availableSuggestions.push(s);
    else {
      for (let i = 1; i < 100; i++) {
        if (await isUsernameAvailable(`${s}${i}`)) {
          availableSuggestions.push(`${s}${i}`);
          break;
        }
      }
    }
    if (availableSuggestions.length >= 3) break;
  }
  return data({
    suggestions: availableSuggestions
  });
}
const route12 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$10,
  loader: loader$$
}, Symbol.toStringTag, { value: "Module" }));
const isValidDateISO = (dateString) => {
  if (!dateString) return false;
  const date2 = new Date(dateString);
  return !isNaN(date2.getTime());
};
async function loader$_({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const result = await pool.query(`SELECT * FROM driver WHERE organization_id = $1 ORDER BY created_at DESC`, [orgId]);
  return data(result.rows);
}
async function action$$({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      nome,
      cnh,
      categoria_cnh,
      validade_cnh,
      passaporte,
      validade_passaporte,
      telefone,
      email,
      endereco,
      cidade,
      estado,
      pais,
      status,
      data_contratacao,
      salario,
      anos_experiencia,
      viagens_internacionais,
      disponivel_internacional,
      observacoes
    } = body;
    if (!isValidDateISO(validade_cnh)) {
      return data({
        error: "Data de validade da CNH inv√°lida"
      }, {
        status: 400
      });
    }
    if (validade_passaporte && !isValidDateISO(validade_passaporte)) {
      return data({
        error: "Data de validade do passaporte inv√°lida"
      }, {
        status: 400
      });
    }
    if (data_contratacao && !isValidDateISO(data_contratacao)) {
      return data({
        error: "Data de contrata√ß√£o inv√°lida"
      }, {
        status: 400
      });
    }
    const result = await pool.query(`INSERT INTO driver (
                nome, cnh, categoria_cnh, validade_cnh, passaporte, validade_passaporte,
                telefone, email, endereco, cidade, estado, pais, status,
                data_contratacao, salario, anos_experiencia, viagens_internacionais,
                disponivel_internacional, observacoes,
                organization_id, created_by
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21)
            RETURNING *`, [nome, cnh, categoria_cnh, validade_cnh, passaporte || null, validade_passaporte || null, telefone || null, email || null, endereco || null, cidade || null, estado || null, pais || null, status || "AVAILABLE", data_contratacao, salario || null, anos_experiencia || null, viagens_internacionais || 0, disponivel_internacional || false, observacoes || null, orgId, userId]);
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route13 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$$,
  loader: loader$_
}, Symbol.toStringTag, { value: "Module" }));
async function loader$Z({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT * FROM driver WHERE id = $1 AND organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Driver not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$_({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const check = await pool.query("SELECT id FROM driver WHERE id = $1 AND organization_id = $2", [id, orgId]);
  if (check.rows.length === 0) {
    return data({
      error: "Driver not found"
    }, {
      status: 404
    });
  }
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      nome,
      cnh,
      categoria_cnh,
      validade_cnh,
      passaporte,
      validade_passaporte,
      telefone,
      email,
      endereco,
      cidade,
      estado,
      pais,
      status,
      data_contratacao,
      salario,
      anos_experiencia,
      viagens_internacionais,
      disponivel_internacional,
      observacoes
    } = body;
    const result = await pool.query(`UPDATE driver SET
                nome = $1, cnh = $2, categoria_cnh = $3, validade_cnh = $4,
                passaporte = $5, validade_passaporte = $6, telefone = $7, email = $8,
                endereco = $9, cidade = $10, estado = $11, pais = $12, status = $13,
                data_contratacao = $14, salario = $15, anos_experiencia = $16,
                viagens_internacionais = $17, disponivel_internacional = $18, observacoes = $19,
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $20 AND organization_id = $21
            RETURNING *`, [nome, cnh, categoria_cnh, validade_cnh, passaporte || null, validade_passaporte || null, telefone || null, email || null, endereco || null, cidade || null, estado || null, pais || null, status || "AVAILABLE", data_contratacao, salario || null, anos_experiencia || null, viagens_internacionais || 0, disponivel_internacional || false, observacoes || null, id, orgId]);
    return data(result.rows[0]);
  }
  if (request.method === "DELETE") {
    await pool.query("DELETE FROM driver WHERE id = $1 AND organization_id = $2", [id, orgId]);
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route14 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$_,
  loader: loader$Z
}, Symbol.toStringTag, { value: "Module" }));
async function loader$Y({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const {
    trip_id,
    status,
    ticket_code,
    passenger_name,
    vehicle_id,
    client_id
  } = Object.fromEntries(url.searchParams);
  let query = `
        SELECT r.*, 
               t.departure_date, t.departure_time, t.title as trip_title, t.id as trip_id,
               t.vehicle_id,
               route.name as route_name, route.stops as route_stops,
               rr.stops as return_route_stops,
               s.numero as seat_number, s.tipo as seat_type,
               v.placa as vehicle_plate, v.modelo as vehicle_model
        FROM reservations r
        JOIN trips t ON r.trip_id = t.id
        JOIN routes route ON t.route_id = route.id
        LEFT JOIN routes rr ON t.return_route_id = rr.id
        LEFT JOIN seat s ON r.seat_id = s.id
        LEFT JOIN vehicle v ON t.vehicle_id = v.id
        WHERE r.organization_id = $1
    `;
  const params = [orgId];
  let paramCount = 1;
  if (trip_id) {
    paramCount++;
    query += ` AND r.trip_id = $${paramCount}`;
    params.push(trip_id);
  }
  if (status) {
    paramCount++;
    query += ` AND r.status = $${paramCount}`;
    params.push(status);
  }
  if (vehicle_id) {
    paramCount++;
    query += ` AND t.vehicle_id = $${paramCount}`;
    params.push(vehicle_id);
  }
  if (ticket_code) {
    paramCount++;
    query += ` AND r.ticket_code ILIKE $${paramCount}`;
    params.push(`%${ticket_code}%`);
  }
  if (passenger_name) {
    paramCount++;
    query += ` AND r.passenger_name ILIKE $${paramCount}`;
    params.push(`%${passenger_name}%`);
  }
  if (client_id) {
    paramCount++;
    query += ` AND r.client_id = $${paramCount}`;
    params.push(client_id);
  }
  query += ` ORDER BY r.created_at DESC`;
  const result = await pool.query(query, params);
  return data(result.rows);
}
async function action$Z({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      trip_id,
      seat_id,
      seat_number,
      passenger_name,
      passenger_document,
      passenger_email,
      passenger_phone,
      price,
      client_id,
      notes,
      status,
      valor_pago,
      forma_pagamento,
      boarding_point,
      dropoff_point,
      credits_used,
      external_payment_id
    } = body;
    const finalStatus = status || "PENDING";
    if (seat_number) {
      const duplicateCheck = await pool.query(`SELECT r.id FROM reservations r 
                 LEFT JOIN seat s ON r.seat_id = s.id
                 WHERE r.trip_id = $1 
                 AND (r.seat_id = $2 OR s.numero = $3)
                 AND r.status != 'CANCELLED'`, [trip_id, seat_id || "00000000-0000-0000-0000-000000000000", seat_number]);
      if (duplicateCheck.rows.length > 0) {
        return data({
          error: `O assento ${seat_number} j√° est√° reservado para esta viagem.`
        }, {
          status: 409
        });
      }
    }
    if (seat_id) {
      const seatCheck = await pool.query("SELECT status FROM seat WHERE id = $1", [seat_id]);
      if (seatCheck.rows.length === 0) {
        return data({
          error: "Seat not found"
        }, {
          status: 404
        });
      }
      const reservationCheck = await pool.query("SELECT id FROM reservations WHERE trip_id = $1 AND seat_id = $2 AND status != 'CANCELLED'", [trip_id, seat_id]);
      if (reservationCheck.rows.length > 0) {
        return data({
          error: "Seat already reserved for this trip"
        }, {
          status: 400
        });
      }
    }
    const ticket_code = "T-" + crypto$1.randomBytes(3).toString("hex").toUpperCase();
    const result = await pool.query(`INSERT INTO reservations (
                trip_id, seat_id,
                passenger_name, passenger_document, passenger_email, passenger_phone,
                status, ticket_code, price,
                user_id, client_id, notes,
                organization_id, created_by,
                amount_paid, payment_method, external_payment_id,
                boarding_point, dropoff_point
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19)
            RETURNING *`, [trip_id, seat_id || null, passenger_name, passenger_document, passenger_email || null, passenger_phone || null, finalStatus, ticket_code, price, null, client_id || null, notes || null, orgId, userId, valor_pago || 0, forma_pagamento || null, external_payment_id || null, boarding_point || null, dropoff_point || null]);
    await pool.query("UPDATE trips SET seats_available = seats_available - 1 WHERE id = $1", [trip_id]);
    if (credits_used && Number(credits_used) > 0 && client_id) {
      await pool.query(`UPDATE clients 
                 SET saldo_creditos = saldo_creditos - $1 
                 WHERE id = $2 AND saldo_creditos >= $1`, [credits_used, client_id]);
    }
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route15 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$Z,
  loader: loader$Y
}, Symbol.toStringTag, { value: "Module" }));
async function loader$X({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT r.*, 
               t.departure_date, t.departure_time, t.title as trip_title,
               route.name as route_name, route.origin_city, route.destination_city,
               s.numero as seat_number, s.tipo as seat_type
        FROM reservations r
        JOIN trips t ON r.trip_id = t.id
        JOIN routes route ON t.route_id = route.id
        LEFT JOIN seat s ON r.seat_id = s.id
        WHERE r.id = $1 AND r.organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Reservation not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$Y({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      status,
      notes,
      passenger_name,
      passenger_document,
      forma_pagamento,
      valor_pago,
      boarding_point,
      dropoff_point
    } = body;
    const currentRes = await pool.query("SELECT status, trip_id FROM reservations WHERE id = $1 AND organization_id = $2", [id, orgId]);
    if (currentRes.rows.length === 0) {
      return data({
        error: "Reservation not found"
      }, {
        status: 404
      });
    }
    const oldStatus = currentRes.rows[0].status;
    const result = await pool.query(`UPDATE reservations SET
                status = COALESCE($1, status),
                notes = COALESCE($2, notes),
                passenger_name = COALESCE($3, passenger_name),
                passenger_document = COALESCE($4, passenger_document),
                payment_method = COALESCE($5, payment_method),
                amount_paid = COALESCE($6, amount_paid),
                boarding_point = COALESCE($7, boarding_point),
                dropoff_point = COALESCE($8, dropoff_point),
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $9 AND organization_id = $10
            RETURNING *`, [status, notes, passenger_name, passenger_document, forma_pagamento, valor_pago, boarding_point, dropoff_point, id, orgId]);
    if (status === "CANCELLED" && oldStatus !== "CANCELLED") {
      await pool.query("UPDATE trips SET seats_available = seats_available + 1 WHERE id = $1", [currentRes.rows[0].trip_id]);
    } else if (status !== "CANCELLED" && oldStatus === "CANCELLED") {
      await pool.query("UPDATE trips SET seats_available = seats_available - 1 WHERE id = $1", [currentRes.rows[0].trip_id]);
    }
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route16 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$Y,
  loader: loader$X
}, Symbol.toStringTag, { value: "Module" }));
async function loader$W({
  request,
  params
}) {
  await requireAuth(request);
  const path2 = params["*"];
  if (path2 === "states") {
    const result = await pool.query("SELECT * FROM states ORDER BY name ASC");
    return data(result.rows);
  }
  if (path2 == null ? void 0 : path2.startsWith("cities/")) {
    const stateId = path2.split("/")[1];
    if (stateId) {
      const result = await pool.query("SELECT * FROM cities WHERE state_id = $1 ORDER BY name ASC", [stateId]);
      return data(result.rows);
    }
  }
  if (path2 == null ? void 0 : path2.startsWith("neighborhoods/")) {
    const cityId = path2.split("/")[1];
    if (cityId) {
      const result = await pool.query("SELECT * FROM neighborhoods WHERE city_id = $1 ORDER BY name ASC", [cityId]);
      return data(result.rows);
    }
  }
  return data({
    error: "Route not found"
  }, {
    status: 404
  });
}
async function action$X({
  request,
  params
}) {
  await requireAuth(request);
  const path2 = params["*"];
  const getId = () => path2 == null ? void 0 : path2.split("/")[1];
  if (request.method === "POST") {
    const body = await request.json();
    if (path2 === "cities") {
      const {
        name,
        stateId
      } = body;
      if (!name || !stateId) return data({
        error: "Name and State ID required"
      }, {
        status: 400
      });
      try {
        const result = await pool.query("INSERT INTO cities (name, state_id) VALUES ($1, $2) RETURNING *", [name, stateId]);
        return data(result.rows[0], {
          status: 201
        });
      } catch (e) {
        if (e.code === "23505") return data({
          error: "City already exists"
        }, {
          status: 409
        });
        throw e;
      }
    }
    if (path2 === "neighborhoods") {
      const {
        name,
        cityId
      } = body;
      if (!name || !cityId) return data({
        error: "Name and City ID required"
      }, {
        status: 400
      });
      try {
        const result = await pool.query("INSERT INTO neighborhoods (name, city_id) VALUES ($1, $2) RETURNING *", [name, cityId]);
        return data(result.rows[0], {
          status: 201
        });
      } catch (e) {
        if (e.code === "23505") return data({
          error: "Neighborhood already exists"
        }, {
          status: 409
        });
        throw e;
      }
    }
  }
  if (request.method === "PUT") {
    const id = getId();
    if (!id) return data({
      error: "ID required"
    }, {
      status: 400
    });
    const body = await request.json();
    const {
      name
    } = body;
    if (path2 == null ? void 0 : path2.startsWith("cities/")) {
      try {
        const result = await pool.query("UPDATE cities SET name = $1 WHERE id = $2 RETURNING *", [name, id]);
        if (result.rows.length === 0) return data({
          error: "Not found"
        }, {
          status: 404
        });
        return data(result.rows[0]);
      } catch (e) {
        if (e.code === "23505") return data({
          error: "Duplicate name"
        }, {
          status: 409
        });
        throw e;
      }
    }
    if (path2 == null ? void 0 : path2.startsWith("neighborhoods/")) {
      try {
        const result = await pool.query("UPDATE neighborhoods SET name = $1 WHERE id = $2 RETURNING *", [name, id]);
        if (result.rows.length === 0) return data({
          error: "Not found"
        }, {
          status: 404
        });
        return data(result.rows[0]);
      } catch (e) {
        if (e.code === "23505") return data({
          error: "Duplicate name"
        }, {
          status: 409
        });
        throw e;
      }
    }
  }
  if (request.method === "DELETE") {
    const id = getId();
    if (!id) return data({
      error: "ID required"
    }, {
      status: 400
    });
    if (path2 == null ? void 0 : path2.startsWith("cities/")) {
      const check = await pool.query("SELECT count(*) FROM neighborhoods WHERE city_id = $1", [id]);
      if (parseInt(check.rows[0].count) > 0) return data({
        error: "Has dependencies"
      }, {
        status: 400
      });
      const result = await pool.query("DELETE FROM cities WHERE id = $1 RETURNING *", [id]);
      if (result.rows.length === 0) return data({
        error: "Not found"
      }, {
        status: 404
      });
      return data({
        success: true
      });
    }
    if (path2 == null ? void 0 : path2.startsWith("neighborhoods/")) {
      const result = await pool.query("DELETE FROM neighborhoods WHERE id = $1 RETURNING *", [id]);
      if (result.rows.length === 0) return data({
        error: "Not found"
      }, {
        status: 404
      });
      return data({
        success: true
      });
    }
  }
  return data({
    error: "Route/Method not found"
  }, {
    status: 404
  });
}
const route17 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$X,
  loader: loader$W
}, Symbol.toStringTag, { value: "Module" }));
async function loader$V({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const vehicle_id = url.searchParams.get("vehicle_id");
  let query = `SELECT m.*, v.placa, v.modelo 
                 FROM maintenance m
                 JOIN vehicle v ON m.vehicle_id = v.id
                 WHERE m.organization_id = $1`;
  const params = [orgId];
  if (vehicle_id) {
    query += ` AND m.vehicle_id = $2`;
    params.push(vehicle_id);
  }
  query += ` ORDER BY m.data_agendada DESC, m.created_at DESC`;
  const result = await pool.query(query, params);
  return data(result.rows);
}
async function action$W({
  request
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  const body = await request.json();
  const {
    vehicle_id,
    tipo,
    status,
    data_agendada,
    data_inicio,
    data_conclusao,
    km_veiculo,
    descricao,
    custo_pecas,
    custo_mao_de_obra,
    moeda,
    oficina,
    responsavel,
    observacoes
  } = body;
  try {
    const result = await pool.query(`INSERT INTO maintenance (
                vehicle_id, tipo, status, data_agendada, data_inicio, data_conclusao,
                km_veiculo, descricao, custo_pecas, custo_mao_de_obra, moeda,
                oficina, responsavel, observacoes, organization_id, created_by
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16)
            RETURNING *`, [vehicle_id, tipo, status, data_agendada, data_inicio || null, data_conclusao || null, km_veiculo, descricao, custo_pecas || 0, custo_mao_de_obra || 0, moeda || "BRL", oficina || null, responsavel || null, observacoes || null, orgId, userId]);
    if (status === StatusManutencao.IN_PROGRESS || status === "EM_ANDAMENTO") {
      await pool.query(`UPDATE vehicle SET status = $1, km_atual = GREATEST(km_atual, $2) WHERE id = $3 AND organization_id = $4`, [VeiculoStatus.MAINTENANCE, km_veiculo || 0, vehicle_id, orgId]);
    } else if (status === StatusManutencao.COMPLETED || status === "CONCLUIDA") {
      await pool.query(`UPDATE vehicle SET status = $1, km_atual = GREATEST(km_atual, $2) WHERE id = $3 AND organization_id = $4`, [VeiculoStatus.ACTIVE, km_veiculo || 0, vehicle_id, orgId]);
    } else {
      await pool.query(`UPDATE vehicle SET km_atual = GREATEST(km_atual, $1) WHERE id = $2 AND organization_id = $3`, [km_veiculo || 0, vehicle_id, orgId]);
    }
    return data(result.rows[0], {
      status: 201
    });
  } catch (error) {
    console.error("Error creating maintenance:", error);
    return data({
      error: "Falha ao criar manuten√ß√£o"
    }, {
      status: 500
    });
  }
}
const route18 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$W,
  loader: loader$V
}, Symbol.toStringTag, { value: "Module" }));
async function loader$U({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT m.*, v.placa, v.modelo, v.tipo as vehicle_type, t.id as transaction_id, t.status as transaction_status
         FROM maintenance m
         JOIN vehicle v ON m.vehicle_id = v.id
         LEFT JOIN transaction t ON t.maintenance_id = m.id
         WHERE m.id = $1 AND m.organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Maintenance not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$V({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "DELETE") {
    const check = await pool.query("SELECT id FROM maintenance WHERE id = $1 AND organization_id = $2", [id, orgId]);
    if (check.rows.length === 0) {
      return data({
        error: "Maintenance not found"
      }, {
        status: 404
      });
    }
    await pool.query("DELETE FROM maintenance WHERE id = $1", [id]);
    return data({
      success: true
    });
  }
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      vehicle_id,
      tipo,
      status,
      data_agendada,
      data_inicio,
      data_conclusao,
      km_veiculo,
      descricao,
      custo_pecas,
      custo_mao_de_obra,
      moeda,
      oficina,
      responsavel,
      observacoes
    } = body;
    const check = await pool.query("SELECT id FROM maintenance WHERE id = $1 AND organization_id = $2", [id, orgId]);
    if (check.rows.length === 0) {
      return data({
        error: "Maintenance not found"
      }, {
        status: 404
      });
    }
    const result = await pool.query(`UPDATE maintenance SET
                vehicle_id = $1, tipo = $2, status = $3, data_agendada = $4,
                data_inicio = $5, data_conclusao = $6, km_veiculo = $7,
                descricao = $8, custo_pecas = $9, custo_mao_de_obra = $10,
                moeda = $11, oficina = $12, responsavel = $13, observacoes = $14,
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $15 AND organization_id = $16
            RETURNING *`, [vehicle_id, tipo, status, data_agendada, data_inicio || null, data_conclusao || null, km_veiculo, descricao, custo_pecas || 0, custo_mao_de_obra || 0, moeda || "BRL", oficina || null, responsavel || null, observacoes || null, id, orgId]);
    if (status !== StatusManutencao.CANCELLED && status !== "CANCELADA") {
      const custoTotal = (Number(custo_pecas) || 0) + (Number(custo_mao_de_obra) || 0);
      if (custoTotal > 0) {
        await pool.query(`UPDATE transaction SET 
                        amount = $1, 
                        description = 'Manuten√ß√£o ' || COALESCE((SELECT placa FROM vehicle WHERE id = $6), 'Ve√≠culo') || ' - ' || $2,
                        date = $3
                      WHERE maintenance_id = $4 AND organization_id = $5 AND (status = $7 OR status = 'PENDENTE')`, [custoTotal, tipo, data_agendada, id, orgId, vehicle_id, StatusTransacao.PENDING]);
      }
    }
    if (status === StatusManutencao.IN_PROGRESS || status === "EM_ANDAMENTO") {
      await pool.query(`UPDATE vehicle SET status = $1, km_atual = GREATEST(km_atual, $2) WHERE id = $3 AND organization_id = $4`, [VeiculoStatus.MAINTENANCE, km_veiculo || 0, vehicle_id, orgId]);
    } else if (status === StatusManutencao.COMPLETED || status === "CONCLUIDA") {
      await pool.query(`UPDATE vehicle SET status = $1, km_atual = GREATEST(km_atual, $2) WHERE id = $3 AND organization_id = $4`, [VeiculoStatus.ACTIVE, km_veiculo || 0, vehicle_id, orgId]);
      await pool.query(`UPDATE transaction SET status = $1, payment_date = CURRENT_DATE 
                 WHERE maintenance_id = $2 AND organization_id = $3 AND (status = $4 OR status = 'PENDENTE')`, [StatusTransacao.PAID, id, orgId, StatusTransacao.PENDING]);
    } else if (status === StatusManutencao.CANCELLED || status === "CANCELADA") {
      await pool.query(`UPDATE transaction SET status = $1 WHERE maintenance_id = $2 AND organization_id = $3`, [StatusTransacao.CANCELLED, id, orgId]);
    } else {
      await pool.query(`UPDATE vehicle SET km_atual = GREATEST(km_atual, $1) WHERE id = $2 AND organization_id = $3`, [km_veiculo || 0, vehicle_id, orgId]);
    }
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route19 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$V,
  loader: loader$U
}, Symbol.toStringTag, { value: "Module" }));
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase();
const toCamelCase = (string) => string.replace(
  /^([A-Z])|[\s-_]+(\w)/g,
  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()
);
const toPascalCase = (string) => {
  const camelCase = toCamelCase(string);
  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);
};
const mergeClasses = (...classes) => classes.filter((className, index, array) => {
  return Boolean(className) && className.trim() !== "" && array.indexOf(className) === index;
}).join(" ").trim();
const hasA11yProp = (props) => {
  for (const prop in props) {
    if (prop.startsWith("aria-") || prop === "role" || prop === "title") {
      return true;
    }
  }
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var defaultAttributes = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  strokeWidth: 2,
  strokeLinecap: "round",
  strokeLinejoin: "round"
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Icon$1 = forwardRef(
  ({
    color = "currentColor",
    size = 24,
    strokeWidth = 2,
    absoluteStrokeWidth,
    className = "",
    children,
    iconNode,
    ...rest
  }, ref) => createElement(
    "svg",
    {
      ref,
      ...defaultAttributes,
      width: size,
      height: size,
      stroke: color,
      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,
      className: mergeClasses("lucide", className),
      ...!children && !hasA11yProp(rest) && { "aria-hidden": "true" },
      ...rest
    },
    [
      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),
      ...Array.isArray(children) ? children : [children]
    ]
  )
);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const createLucideIcon = (iconName, iconNode) => {
  const Component2 = forwardRef(
    ({ className, ...props }, ref) => createElement(Icon$1, {
      ref,
      iconNode,
      className: mergeClasses(
        `lucide-${toKebabCase(toPascalCase(iconName))}`,
        `lucide-${iconName}`,
        className
      ),
      ...props
    })
  );
  Component2.displayName = toPascalCase(iconName);
  return Component2;
};
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1A = [
  [
    "path",
    {
      d: "M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",
      key: "169zse"
    }
  ]
];
const Activity = createLucideIcon("activity", __iconNode$1A);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1z = [
  ["path", { d: "M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3", key: "irtipd" }],
  [
    "path",
    {
      d: "M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",
      key: "1qyhux"
    }
  ],
  ["path", { d: "M5 18v2", key: "ppbyun" }],
  ["path", { d: "M19 18v2", key: "gy7782" }]
];
const Armchair = createLucideIcon("armchair", __iconNode$1z);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1y = [
  ["path", { d: "m7 7 10 10", key: "1fmybs" }],
  ["path", { d: "M17 7v10H7", key: "6fjiku" }]
];
const ArrowDownRight = createLucideIcon("arrow-down-right", __iconNode$1y);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1x = [
  ["path", { d: "M12 5v14", key: "s699le" }],
  ["path", { d: "m19 12-7 7-7-7", key: "1idqje" }]
];
const ArrowDown = createLucideIcon("arrow-down", __iconNode$1x);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1w = [
  ["path", { d: "m12 19-7-7 7-7", key: "1l729n" }],
  ["path", { d: "M19 12H5", key: "x3x0zl" }]
];
const ArrowLeft = createLucideIcon("arrow-left", __iconNode$1w);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1v = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "m12 5 7 7-7 7", key: "xquz4c" }]
];
const ArrowRight = createLucideIcon("arrow-right", __iconNode$1v);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1u = [
  ["path", { d: "m21 16-4 4-4-4", key: "f6ql7i" }],
  ["path", { d: "M17 20V4", key: "1ejh1v" }],
  ["path", { d: "m3 8 4-4 4 4", key: "11wl7u" }],
  ["path", { d: "M7 4v16", key: "1glfcx" }]
];
const ArrowUpDown = createLucideIcon("arrow-up-down", __iconNode$1u);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1t = [
  ["path", { d: "M7 7h10v10", key: "1tivn9" }],
  ["path", { d: "M7 17 17 7", key: "1vkiza" }]
];
const ArrowUpRight = createLucideIcon("arrow-up-right", __iconNode$1t);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1s = [
  ["path", { d: "m5 12 7-7 7 7", key: "hav0vg" }],
  ["path", { d: "M12 19V5", key: "x0mq9r" }]
];
const ArrowUp = createLucideIcon("arrow-up", __iconNode$1s);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1r = [
  [
    "path",
    {
      d: "m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",
      key: "1yiouv"
    }
  ],
  ["circle", { cx: "12", cy: "8", r: "6", key: "1vp47v" }]
];
const Award = createLucideIcon("award", __iconNode$1r);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1q = [
  [
    "path",
    {
      d: "M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",
      key: "3c2336"
    }
  ],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
];
const BadgeCheck = createLucideIcon("badge-check", __iconNode$1q);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1p = [
  ["path", { d: "M2 4v16", key: "vw9hq8" }],
  ["path", { d: "M2 8h18a2 2 0 0 1 2 2v10", key: "1dgv2r" }],
  ["path", { d: "M2 17h20", key: "18nfp3" }],
  ["path", { d: "M6 8v9", key: "1yriud" }]
];
const Bed = createLucideIcon("bed", __iconNode$1p);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1o = [
  ["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }],
  [
    "path",
    {
      d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",
      key: "11g9vi"
    }
  ]
];
const Bell = createLucideIcon("bell", __iconNode$1o);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1n = [
  ["path", { d: "M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16", key: "jecpp" }],
  ["rect", { width: "20", height: "14", x: "2", y: "6", rx: "2", key: "i6l2r4" }]
];
const Briefcase = createLucideIcon("briefcase", __iconNode$1n);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1m = [
  ["path", { d: "M10 12h4", key: "a56b0p" }],
  ["path", { d: "M10 8h4", key: "1sr2af" }],
  ["path", { d: "M14 21v-3a2 2 0 0 0-4 0v3", key: "1rgiei" }],
  [
    "path",
    {
      d: "M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",
      key: "secmi2"
    }
  ],
  ["path", { d: "M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16", key: "16ra0t" }]
];
const Building2 = createLucideIcon("building-2", __iconNode$1m);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1l = [
  ["path", { d: "M12 10h.01", key: "1nrarc" }],
  ["path", { d: "M12 14h.01", key: "1etili" }],
  ["path", { d: "M12 6h.01", key: "1vi96p" }],
  ["path", { d: "M16 10h.01", key: "1m94wz" }],
  ["path", { d: "M16 14h.01", key: "1gbofw" }],
  ["path", { d: "M16 6h.01", key: "1x0f13" }],
  ["path", { d: "M8 10h.01", key: "19clt8" }],
  ["path", { d: "M8 14h.01", key: "6423bh" }],
  ["path", { d: "M8 6h.01", key: "1dz90k" }],
  ["path", { d: "M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3", key: "cabbwy" }],
  ["rect", { x: "4", y: "2", width: "16", height: "20", rx: "2", key: "1uxh74" }]
];
const Building = createLucideIcon("building", __iconNode$1l);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1k = [
  ["path", { d: "M8 6v6", key: "18i7km" }],
  ["path", { d: "M15 6v6", key: "1sg6z9" }],
  ["path", { d: "M2 12h19.6", key: "de5uta" }],
  [
    "path",
    {
      d: "M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",
      key: "1wwztk"
    }
  ],
  ["circle", { cx: "7", cy: "18", r: "2", key: "19iecd" }],
  ["path", { d: "M9 18h5", key: "lrx6i" }],
  ["circle", { cx: "16", cy: "18", r: "2", key: "1v4tcr" }]
];
const Bus = createLucideIcon("bus", __iconNode$1k);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1j = [
  ["path", { d: "M8 2v4", key: "1cmpym" }],
  ["path", { d: "M16 2v4", key: "4m81vk" }],
  ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }],
  ["path", { d: "M3 10h18", key: "8toen8" }]
];
const Calendar$1 = createLucideIcon("calendar", __iconNode$1j);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1i = [
  ["path", { d: "M5 21v-6", key: "1hz6c0" }],
  ["path", { d: "M12 21V9", key: "uvy0l4" }],
  ["path", { d: "M19 21V3", key: "11j9sm" }]
];
const ChartNoAxesColumnIncreasing = createLucideIcon("chart-no-axes-column-increasing", __iconNode$1i);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1h = [
  [
    "path",
    {
      d: "M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",
      key: "pzmjnu"
    }
  ],
  ["path", { d: "M21.21 15.89A10 10 0 1 1 8 2.83", key: "k2fpak" }]
];
const ChartPie = createLucideIcon("chart-pie", __iconNode$1h);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1g = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]];
const Check = createLucideIcon("check", __iconNode$1g);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1f = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]];
const ChevronDown = createLucideIcon("chevron-down", __iconNode$1f);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1e = [["path", { d: "m15 18-6-6 6-6", key: "1wnfg3" }]];
const ChevronLeft = createLucideIcon("chevron-left", __iconNode$1e);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1d = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]];
const ChevronRight = createLucideIcon("chevron-right", __iconNode$1d);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1c = [["path", { d: "m18 15-6-6-6 6", key: "153udz" }]];
const ChevronUp = createLucideIcon("chevron-up", __iconNode$1c);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1b = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }],
  ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]
];
const CircleAlert = createLucideIcon("circle-alert", __iconNode$1b);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1a = [
  ["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
];
const CircleCheckBig = createLucideIcon("circle-check-big", __iconNode$1a);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$19 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
];
const CircleCheck = createLucideIcon("circle-check", __iconNode$19);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$18 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }],
  ["path", { d: "M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662", key: "154egf" }]
];
const CircleUser = createLucideIcon("circle-user", __iconNode$18);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$17 = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m15 9-6 6", key: "1uzhvr" }],
  ["path", { d: "m9 9 6 6", key: "z0biqf" }]
];
const CircleX = createLucideIcon("circle-x", __iconNode$17);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$16 = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]];
const Circle = createLucideIcon("circle", __iconNode$16);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$15 = [
  ["path", { d: "M12 6v6l4 2", key: "mmk7yg" }],
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]
];
const Clock = createLucideIcon("clock", __iconNode$15);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$14 = [
  ["rect", { width: "20", height: "14", x: "2", y: "5", rx: "2", key: "ynyp8z" }],
  ["line", { x1: "2", x2: "22", y1: "10", y2: "10", key: "1b3vmo" }]
];
const CreditCard = createLucideIcon("credit-card", __iconNode$14);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$13 = [
  [
    "path",
    {
      d: "M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",
      key: "1vdc57"
    }
  ],
  ["path", { d: "M5 21h14", key: "11awu3" }]
];
const Crown = createLucideIcon("crown", __iconNode$13);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$12 = [
  ["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }],
  ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }],
  ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]
];
const Database = createLucideIcon("database", __iconNode$12);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$11 = [
  ["line", { x1: "12", x2: "12", y1: "2", y2: "22", key: "7eqyqh" }],
  ["path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6", key: "1b0p4s" }]
];
const DollarSign$1 = createLucideIcon("dollar-sign", __iconNode$11);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$10 = [
  ["path", { d: "M12 15V3", key: "m9g1x1" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]
];
const Download = createLucideIcon("download", __iconNode$10);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$$ = [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "12", cy: "5", r: "1", key: "gxeob9" }],
  ["circle", { cx: "12", cy: "19", r: "1", key: "lyex9k" }]
];
const EllipsisVertical = createLucideIcon("ellipsis-vertical", __iconNode$$);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$_ = [
  ["circle", { cx: "12", cy: "12", r: "1", key: "41hilf" }],
  ["circle", { cx: "19", cy: "12", r: "1", key: "1wjl8i" }],
  ["circle", { cx: "5", cy: "12", r: "1", key: "1pcz8c" }]
];
const Ellipsis = createLucideIcon("ellipsis", __iconNode$_);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$Z = [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
];
const Eye = createLucideIcon("eye", __iconNode$Z);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$Y = [
  [
    "path",
    {
      d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",
      key: "1oefj6"
    }
  ],
  ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
];
const FileText$1 = createLucideIcon("file-text", __iconNode$Y);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$X = [
  [
    "path",
    {
      d: "M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",
      key: "1jaruq"
    }
  ]
];
const Flag = createLucideIcon("flag", __iconNode$X);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$W = [
  [
    "path",
    {
      d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",
      key: "sc7q7i"
    }
  ]
];
const Funnel = createLucideIcon("funnel", __iconNode$W);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$V = [
  ["path", { d: "m12 14 4-4", key: "9kzdfg" }],
  ["path", { d: "M3.34 19a10 10 0 1 1 17.32 0", key: "19p75a" }]
];
const Gauge = createLucideIcon("gauge", __iconNode$V);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$U = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }],
  ["path", { d: "M2 12h20", key: "9i4pu4" }]
];
const Globe = createLucideIcon("globe", __iconNode$U);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$T = [
  ["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }],
  ["path", { d: "M3 3v5h5", key: "1xhq8a" }],
  ["path", { d: "M12 7v5l4 2", key: "1fdv2h" }]
];
const History = createLucideIcon("history", __iconNode$T);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$S = [
  ["polyline", { points: "22 12 16 12 14 15 10 15 8 12 2 12", key: "o97t9d" }],
  [
    "path",
    {
      d: "M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",
      key: "oot6mr"
    }
  ]
];
const Inbox = createLucideIcon("inbox", __iconNode$S);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$R = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M12 16v-4", key: "1dtifu" }],
  ["path", { d: "M12 8h.01", key: "e9boi3" }]
];
const Info = createLucideIcon("info", __iconNode$R);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$Q = [
  ["path", { d: "m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4", key: "g0fldk" }],
  ["path", { d: "m21 2-9.6 9.6", key: "1j0ho8" }],
  ["circle", { cx: "7.5", cy: "15.5", r: "5.5", key: "yqb3hr" }]
];
const Key = createLucideIcon("key", __iconNode$Q);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$P = [
  [
    "path",
    {
      d: "M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",
      key: "zw3jo"
    }
  ],
  [
    "path",
    {
      d: "M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",
      key: "1wduqc"
    }
  ],
  [
    "path",
    {
      d: "M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",
      key: "kqbvx6"
    }
  ]
];
const Layers = createLucideIcon("layers", __iconNode$P);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$O = [
  ["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }],
  ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }],
  ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }],
  ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]
];
const LayoutDashboard = createLucideIcon("layout-dashboard", __iconNode$O);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$N = [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]];
const LoaderCircle = createLucideIcon("loader-circle", __iconNode$N);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$M = [
  ["path", { d: "M12 2v4", key: "3427ic" }],
  ["path", { d: "m16.2 7.8 2.9-2.9", key: "r700ao" }],
  ["path", { d: "M18 12h4", key: "wj9ykh" }],
  ["path", { d: "m16.2 16.2 2.9 2.9", key: "1bxg5t" }],
  ["path", { d: "M12 18v4", key: "jadmvz" }],
  ["path", { d: "m4.9 19.1 2.9-2.9", key: "bwix9q" }],
  ["path", { d: "M2 12h4", key: "j09sii" }],
  ["path", { d: "m4.9 4.9 2.9 2.9", key: "giyufr" }]
];
const Loader = createLucideIcon("loader", __iconNode$M);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$L = [
  ["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }],
  ["path", { d: "M7 11V7a5 5 0 0 1 10 0v4", key: "fwvmzm" }]
];
const Lock = createLucideIcon("lock", __iconNode$L);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$K = [
  ["path", { d: "m16 17 5-5-5-5", key: "1bji2h" }],
  ["path", { d: "M21 12H9", key: "dn1m92" }],
  ["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }]
];
const LogOut = createLucideIcon("log-out", __iconNode$K);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$J = [
  ["path", { d: "m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7", key: "132q7q" }],
  ["rect", { x: "2", y: "4", width: "20", height: "16", rx: "2", key: "izxlao" }]
];
const Mail = createLucideIcon("mail", __iconNode$J);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$I = [
  [
    "path",
    {
      d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",
      key: "1r0f0z"
    }
  ],
  ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]
];
const MapPin = createLucideIcon("map-pin", __iconNode$I);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$H = [
  [
    "path",
    {
      d: "M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",
      key: "11u0oz"
    }
  ],
  ["circle", { cx: "12", cy: "8", r: "2", key: "1822b1" }],
  [
    "path",
    {
      d: "M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",
      key: "q8zwxj"
    }
  ]
];
const MapPinned = createLucideIcon("map-pinned", __iconNode$H);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$G = [
  [
    "path",
    {
      d: "M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",
      key: "169xi5"
    }
  ],
  ["path", { d: "M15 5.764v15", key: "1pn4in" }],
  ["path", { d: "M9 3.236v15", key: "1uimfh" }]
];
const Map$1 = createLucideIcon("map", __iconNode$G);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$F = [
  ["path", { d: "M4 5h16", key: "1tepv9" }],
  ["path", { d: "M4 12h16", key: "1lakjw" }],
  ["path", { d: "M4 19h16", key: "1djgab" }]
];
const Menu = createLucideIcon("menu", __iconNode$F);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$E = [
  [
    "path",
    {
      d: "M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",
      key: "kfwtm"
    }
  ]
];
const Moon = createLucideIcon("moon", __iconNode$E);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$D = [
  [
    "path",
    {
      d: "M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",
      key: "edeuup"
    }
  ]
];
const MousePointer2 = createLucideIcon("mouse-pointer-2", __iconNode$D);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$C = [
  ["polygon", { points: "3 11 22 2 13 21 11 13 3 11", key: "1ltx0t" }]
];
const Navigation = createLucideIcon("navigation", __iconNode$C);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$B = [
  [
    "path",
    {
      d: "M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",
      key: "1a0edw"
    }
  ],
  ["path", { d: "M12 22V12", key: "d0xqtd" }],
  ["polyline", { points: "3.29 7 12 12 20.71 7", key: "ousv84" }],
  ["path", { d: "m7.5 4.27 9 5.15", key: "1c824w" }]
];
const Package = createLucideIcon("package", __iconNode$B);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$A = [
  ["path", { d: "M11 7 6 2", key: "1jwth8" }],
  ["path", { d: "M18.992 12H2.041", key: "xw1gg" }],
  [
    "path",
    {
      d: "M21.145 18.38A3.34 3.34 0 0 1 20 16.5a3.3 3.3 0 0 1-1.145 1.88c-.575.46-.855 1.02-.855 1.595A2 2 0 0 0 20 22a2 2 0 0 0 2-2.025c0-.58-.285-1.13-.855-1.595",
      key: "1nkol4"
    }
  ],
  [
    "path",
    {
      d: "m8.5 4.5 2.148-2.148a1.205 1.205 0 0 1 1.704 0l7.296 7.296a1.205 1.205 0 0 1 0 1.704l-7.592 7.592a3.615 3.615 0 0 1-5.112 0l-3.888-3.888a3.615 3.615 0 0 1 0-5.112L5.67 7.33",
      key: "1nk1rd"
    }
  ]
];
const PaintBucket = createLucideIcon("paint-bucket", __iconNode$A);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$z = [
  [
    "path",
    {
      d: "M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",
      key: "9njp5v"
    }
  ]
];
const Phone = createLucideIcon("phone", __iconNode$z);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$y = [
  ["path", { d: "M5 12h14", key: "1ays0h" }],
  ["path", { d: "M12 5v14", key: "s699le" }]
];
const Plus = createLucideIcon("plus", __iconNode$y);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$x = [
  [
    "path",
    {
      d: "M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",
      key: "143wyd"
    }
  ],
  ["path", { d: "M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6", key: "1itne7" }],
  ["rect", { x: "6", y: "14", width: "12", height: "8", rx: "1", key: "1ue0tg" }]
];
const Printer = createLucideIcon("printer", __iconNode$x);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$w = [
  [
    "path",
    { d: "M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z", key: "q3az6g" }
  ],
  ["path", { d: "M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8", key: "1h4pet" }],
  ["path", { d: "M12 17.5v-11", key: "1jc1ny" }]
];
const Receipt = createLucideIcon("receipt", __iconNode$w);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$v = [
  ["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }],
  ["path", { d: "M21 3v5h-5", key: "1q7to0" }],
  ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }],
  ["path", { d: "M8 16H3v5", key: "1cv678" }]
];
const RefreshCw = createLucideIcon("refresh-cw", __iconNode$v);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$u = [
  ["circle", { cx: "6", cy: "19", r: "3", key: "1kj8tv" }],
  ["path", { d: "M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15", key: "1d8sl" }],
  ["circle", { cx: "18", cy: "5", r: "3", key: "gq8acd" }]
];
const Route = createLucideIcon("route", __iconNode$u);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$t = [
  [
    "path",
    {
      d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",
      key: "1c8476"
    }
  ],
  ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }],
  ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]
];
const Save = createLucideIcon("save", __iconNode$t);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$s = [
  ["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }],
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]
];
const Search = createLucideIcon("search", __iconNode$s);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$r = [
  [
    "path",
    {
      d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",
      key: "1i5ecw"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
];
const Settings = createLucideIcon("settings", __iconNode$r);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$q = [
  ["path", { d: "M14 17H5", key: "gfn3mx" }],
  ["path", { d: "M19 7h-9", key: "6i9tg" }],
  ["circle", { cx: "17", cy: "17", r: "3", key: "18b49y" }],
  ["circle", { cx: "7", cy: "7", r: "3", key: "dfmy0x" }]
];
const Settings2 = createLucideIcon("settings-2", __iconNode$q);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$p = [
  ["circle", { cx: "18", cy: "5", r: "3", key: "gq8acd" }],
  ["circle", { cx: "6", cy: "12", r: "3", key: "w7nqdw" }],
  ["circle", { cx: "18", cy: "19", r: "3", key: "1xt0gg" }],
  ["line", { x1: "8.59", x2: "15.42", y1: "13.51", y2: "17.49", key: "47mynk" }],
  ["line", { x1: "15.41", x2: "8.59", y1: "6.51", y2: "10.49", key: "1n3mei" }]
];
const Share2 = createLucideIcon("share-2", __iconNode$p);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$o = [
  [
    "path",
    {
      d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      key: "oel41y"
    }
  ],
  ["path", { d: "M12 8v4", key: "1got3b" }],
  ["path", { d: "M12 16h.01", key: "1drbdi" }]
];
const ShieldAlert = createLucideIcon("shield-alert", __iconNode$o);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$n = [
  [
    "path",
    {
      d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      key: "oel41y"
    }
  ],
  ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]
];
const ShieldCheck = createLucideIcon("shield-check", __iconNode$n);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$m = [
  [
    "path",
    {
      d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",
      key: "oel41y"
    }
  ]
];
const Shield = createLucideIcon("shield", __iconNode$m);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$l = [
  [
    "path",
    {
      d: "M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",
      key: "1s2grr"
    }
  ],
  ["path", { d: "M20 2v4", key: "1rf3ol" }],
  ["path", { d: "M22 4h-4", key: "gwowj6" }],
  ["circle", { cx: "4", cy: "20", r: "2", key: "6kqj1y" }]
];
const Sparkles = createLucideIcon("sparkles", __iconNode$l);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$k = [
  [
    "path",
    { d: "M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344", key: "2acyp4" }
  ],
  ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]
];
const SquareCheckBig = createLucideIcon("square-check-big", __iconNode$k);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$j = [
  ["path", { d: "M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7", key: "1m0v6g" }],
  [
    "path",
    {
      d: "M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",
      key: "ohrbg2"
    }
  ]
];
const SquarePen = createLucideIcon("square-pen", __iconNode$j);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$i = [
  [
    "path",
    {
      d: "M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",
      key: "r04s7s"
    }
  ]
];
const Star = createLucideIcon("star", __iconNode$i);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$h = [
  ["circle", { cx: "12", cy: "12", r: "4", key: "4exip2" }],
  ["path", { d: "M12 2v2", key: "tus03m" }],
  ["path", { d: "M12 20v2", key: "1lh1kg" }],
  ["path", { d: "m4.93 4.93 1.41 1.41", key: "149t6j" }],
  ["path", { d: "m17.66 17.66 1.41 1.41", key: "ptbguv" }],
  ["path", { d: "M2 12h2", key: "1t8f8n" }],
  ["path", { d: "M20 12h2", key: "1q8mjw" }],
  ["path", { d: "m6.34 17.66-1.41 1.41", key: "1m8zz5" }],
  ["path", { d: "m19.07 4.93-1.41 1.41", key: "1shlcs" }]
];
const Sun = createLucideIcon("sun", __iconNode$h);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$g = [
  [
    "path",
    {
      d: "M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",
      key: "vktsd0"
    }
  ],
  ["circle", { cx: "7.5", cy: "7.5", r: ".5", fill: "currentColor", key: "kqv944" }]
];
const Tag = createLucideIcon("tag", __iconNode$g);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$f = [
  [
    "path",
    {
      d: "M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",
      key: "qn84l0"
    }
  ],
  ["path", { d: "M13 5v2", key: "dyzc3o" }],
  ["path", { d: "M13 17v2", key: "1ont0d" }],
  ["path", { d: "M13 11v2", key: "1wjjxi" }]
];
const Ticket = createLucideIcon("ticket", __iconNode$f);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$e = [
  ["circle", { cx: "9", cy: "12", r: "3", key: "u3jwor" }],
  ["rect", { width: "20", height: "14", x: "2", y: "5", rx: "7", key: "g7kal2" }]
];
const ToggleLeft = createLucideIcon("toggle-left", __iconNode$e);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$d = [
  ["circle", { cx: "15", cy: "12", r: "3", key: "1afu0r" }],
  ["rect", { width: "20", height: "14", x: "2", y: "5", rx: "7", key: "g7kal2" }]
];
const ToggleRight = createLucideIcon("toggle-right", __iconNode$d);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$c = [
  ["path", { d: "M10 11v6", key: "nco0om" }],
  ["path", { d: "M14 11v6", key: "outv1u" }],
  ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }],
  ["path", { d: "M3 6h18", key: "d0wm0j" }],
  ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]
];
const Trash2 = createLucideIcon("trash-2", __iconNode$c);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$b = [
  ["path", { d: "M16 17h6v-6", key: "t6n2it" }],
  ["path", { d: "m22 17-8.5-8.5-5 5L2 7", key: "x473p" }]
];
const TrendingDown = createLucideIcon("trending-down", __iconNode$b);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$a = [
  ["path", { d: "M16 7h6v6", key: "box55l" }],
  ["path", { d: "m22 7-8.5 8.5-5-5L2 17", key: "1t1m79" }]
];
const TrendingUp = createLucideIcon("trending-up", __iconNode$a);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$9 = [
  [
    "path",
    {
      d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",
      key: "wmoenq"
    }
  ],
  ["path", { d: "M12 9v4", key: "juzpu7" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
];
const TriangleAlert = createLucideIcon("triangle-alert", __iconNode$9);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$8 = [
  ["path", { d: "M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2", key: "wrbu53" }],
  ["path", { d: "M15 18H9", key: "1lyqi6" }],
  [
    "path",
    {
      d: "M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",
      key: "lysw3i"
    }
  ],
  ["circle", { cx: "17", cy: "18", r: "2", key: "332jqn" }],
  ["circle", { cx: "7", cy: "18", r: "2", key: "19iecd" }]
];
const Truck = createLucideIcon("truck", __iconNode$8);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$7 = [
  ["path", { d: "M12 4v16", key: "1654pz" }],
  ["path", { d: "M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2", key: "e0r10z" }],
  ["path", { d: "M9 20h6", key: "s66wpe" }]
];
const Type = createLucideIcon("type", __iconNode$7);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$6 = [
  ["path", { d: "M12 3v12", key: "1x0j5s" }],
  ["path", { d: "m17 8-5-5-5 5", key: "7q97r8" }],
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }]
];
const Upload = createLucideIcon("upload", __iconNode$6);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$5 = [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }],
  ["line", { x1: "19", x2: "19", y1: "8", y2: "14", key: "1bvyxn" }],
  ["line", { x1: "22", x2: "16", y1: "11", y2: "11", key: "1shjgl" }]
];
const UserPlus = createLucideIcon("user-plus", __iconNode$5);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$4 = [
  ["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }],
  ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]
];
const User = createLucideIcon("user", __iconNode$4);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$3 = [
  ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }],
  ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }],
  ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }],
  ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]
];
const Users = createLucideIcon("users", __iconNode$3);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$2 = [
  [
    "path",
    {
      d: "M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",
      key: "18etb6"
    }
  ],
  ["path", { d: "M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4", key: "xoc0q4" }]
];
const Wallet = createLucideIcon("wallet", __iconNode$2);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1 = [
  [
    "path",
    {
      d: "M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",
      key: "1ngwbx"
    }
  ]
];
const Wrench = createLucideIcon("wrench", __iconNode$1);
/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode = [
  ["path", { d: "M18 6 6 18", key: "1bl5f8" }],
  ["path", { d: "m6 6 12 12", key: "d8bk6v" }]
];
const X = createLucideIcon("x", __iconNode);
function getApiUrl$3() {
  {
    return "https://api.yourdomain.com";
  }
}
const EsqueciSenha = () => {
  useNavigate();
  const [email, setEmail] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSuccess, setIsSuccess] = useState(false);
  const [error, setError] = useState("");
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    setError("");
    try {
      const apiUrl = getApiUrl$3();
      const response = await fetch(`${apiUrl}/api/auth/request-password-reset`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          identifier: email
        })
      });
      const data2 = await response.json();
      if (response.ok) {
        setIsSuccess(true);
      } else {
        setError(data2.error || "Erro ao solicitar recupera√ß√£o de senha");
      }
    } catch (err) {
      console.error("Error requesting password reset:", err);
      setError("Erro ao conectar com o servidor");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsx("div", {
    className: "min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "text-center mb-8",
        children: [/* @__PURE__ */ jsx("div", {
          className: "w-12 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",
          children: /* @__PURE__ */ jsx(Mail, {
            className: "text-blue-600 dark:text-blue-400",
            size: 24
          })
        }), /* @__PURE__ */ jsx("h1", {
          className: "text-2xl font-bold text-slate-800 dark:text-white",
          children: "Recuperar Senha"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-slate-500 dark:text-slate-400 mt-2",
          children: "Digite seu email para receber o link de redefini√ß√£o."
        })]
      }), isSuccess ? /* @__PURE__ */ jsxs("div", {
        className: "text-center space-y-6",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-xl flex flex-col items-center gap-2",
          children: [/* @__PURE__ */ jsx(CircleCheckBig, {
            size: 32
          }), /* @__PURE__ */ jsx("p", {
            className: "font-medium",
            children: "C√≥digo enviado via WhatsApp!"
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "text-sm text-slate-500",
          children: "Verifique seu WhatsApp para o c√≥digo de recupera√ß√£o de senha."
        }), /* @__PURE__ */ jsx(Link, {
          to: "/login",
          className: "block w-full py-3 px-4 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 font-semibold rounded-xl transition-colors",
          children: "Voltar para o Login"
        })]
      }) : /* @__PURE__ */ jsxs("form", {
        onSubmit: handleSubmit,
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",
            children: "Username, Telefone, CPF ou Email"
          }), /* @__PURE__ */ jsxs("div", {
            className: "relative",
            children: [/* @__PURE__ */ jsx(Mail, {
              className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
              size: 18
            }), /* @__PURE__ */ jsx("input", {
              type: "text",
              value: email,
              onChange: (e) => setEmail(e.target.value),
              className: "w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white",
              placeholder: "seu.username, telefone, CPF ou email",
              required: true
            })]
          })]
        }), error && /* @__PURE__ */ jsx("div", {
          className: "p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",
          children: error
        }), /* @__PURE__ */ jsx("button", {
          type: "submit",
          disabled: isLoading,
          className: "w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",
          children: isLoading ? /* @__PURE__ */ jsx(LoaderCircle, {
            className: "animate-spin",
            size: 20
          }) : "Enviar Link"
        }), /* @__PURE__ */ jsx("div", {
          className: "text-center",
          children: /* @__PURE__ */ jsxs(Link, {
            to: "/login",
            className: "inline-flex items-center gap-2 text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",
            children: [/* @__PURE__ */ jsx(ArrowLeft, {
              size: 16
            }), "Voltar para o Login"]
          })
        })]
      })]
    })
  });
};
const route20 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EsqueciSenha
}, Symbol.toStringTag, { value: "Module" }));
function getApiUrl$2() {
  {
    return "https://api.yourdomain.com";
  }
}
const EsqueciUsername = () => {
  const [identifier, setIdentifier] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSuccess, setIsSuccess] = useState(false);
  const [error, setError] = useState("");
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    setError("");
    try {
      const apiUrl = getApiUrl$2();
      const response = await fetch(`${apiUrl}/api/auth/recover-username`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          identifier
        })
      });
      const data2 = await response.json();
      if (response.ok) {
        setIsSuccess(true);
      } else {
        setError(data2.error || "Erro ao recuperar username");
      }
    } catch (err) {
      console.error("Error recovering username:", err);
      setError("Erro ao conectar com o servidor");
    } finally {
      setIsLoading(false);
    }
  };
  return /* @__PURE__ */ jsx("div", {
    className: "min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "text-center mb-8",
        children: [/* @__PURE__ */ jsx("div", {
          className: "w-12 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",
          children: /* @__PURE__ */ jsx(User, {
            className: "text-blue-600 dark:text-blue-400",
            size: 24
          })
        }), /* @__PURE__ */ jsx("h1", {
          className: "text-2xl font-bold text-slate-800 dark:text-white",
          children: "Recuperar Username"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-slate-500 dark:text-slate-400 mt-2",
          children: "Digite seu telefone, CPF ou email para receber seu username via WhatsApp."
        })]
      }), isSuccess ? /* @__PURE__ */ jsxs("div", {
        className: "text-center space-y-6",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-xl flex flex-col items-center gap-2",
          children: [/* @__PURE__ */ jsx(CircleCheckBig, {
            size: 32
          }), /* @__PURE__ */ jsx("p", {
            className: "font-medium",
            children: "Username enviado via WhatsApp!"
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",
          children: [/* @__PURE__ */ jsx(Phone, {
            size: 16,
            className: "text-blue-600 dark:text-blue-400"
          }), /* @__PURE__ */ jsx("p", {
            children: "Verifique seu WhatsApp para ver seu username."
          })]
        }), /* @__PURE__ */ jsx(Link, {
          to: "/login",
          className: "block w-full py-3 px-4 bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 font-semibold rounded-xl transition-colors",
          children: "Voltar para o Login"
        })]
      }) : /* @__PURE__ */ jsxs("form", {
        onSubmit: handleSubmit,
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",
            children: "Telefone, CPF ou Email"
          }), /* @__PURE__ */ jsxs("div", {
            className: "relative",
            children: [/* @__PURE__ */ jsx(Phone, {
              className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
              size: 18
            }), /* @__PURE__ */ jsx("input", {
              type: "text",
              value: identifier,
              onChange: (e) => setIdentifier(e.target.value),
              className: "w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white",
              placeholder: "(11) 99999-9999, CPF ou email",
              required: true
            })]
          })]
        }), error && /* @__PURE__ */ jsx("div", {
          className: "p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",
          children: error
        }), /* @__PURE__ */ jsx("button", {
          type: "submit",
          disabled: isLoading,
          className: "w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",
          children: isLoading ? /* @__PURE__ */ jsx(LoaderCircle, {
            className: "animate-spin",
            size: 20
          }) : "Enviar Username"
        }), /* @__PURE__ */ jsx("div", {
          className: "text-center",
          children: /* @__PURE__ */ jsxs(Link, {
            to: "/login",
            className: "inline-flex items-center gap-2 text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 transition-colors",
            children: [/* @__PURE__ */ jsx(ArrowLeft, {
              size: 16
            }), "Voltar para o Login"]
          })
        })]
      })]
    })
  });
};
const route21 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EsqueciUsername
}, Symbol.toStringTag, { value: "Module" }));
const verifySecret = (request) => {
  const secret = request.headers.get("x-webhook-secret");
  const configuredSecret = process.env.WEBHOOK_SECRET || "dev-secret-123";
  return secret === configuredSecret;
};
async function loader$T({
  request,
  params
}) {
  if (!verifySecret(request)) {
    return data({
      error: "Unauthorized"
    }, {
      status: 401
    });
  }
  const path2 = params["*"];
  if (path2 === "pending-reservations") {
    const result = await pool.query("SELECT id, ticket_code, created_at, passenger_name, passenger_email FROM reservations WHERE status = $1", [ReservationStatus.PENDING]);
    return data(result.rows);
  }
  if (path2 === "viagens-disponiveis") {
    const result = await pool.query("SELECT * FROM trips WHERE departure_date >= CURRENT_DATE AND status = 'SCHEDULED' LIMIT 5");
    return data(result.rows);
  }
  return data({
    error: "Not found"
  }, {
    status: 404
  });
}
async function action$U({
  request,
  params
}) {
  if (!verifySecret(request)) {
    return data({
      error: "Unauthorized"
    }, {
      status: 401
    });
  }
  const path2 = params["*"];
  const body = await request.json();
  if (path2 === "payment-confirmed") {
    const {
      reservation_id,
      amount,
      payment_method,
      transaction_id,
      payment_date
    } = body;
    if (!reservation_id && !transaction_id || !amount) {
      return data({
        error: "Missing required fields"
      }, {
        status: 400
      });
    }
    const client = await pool.connect();
    try {
      await client.query("BEGIN");
      let resCheck = await client.query("SELECT * FROM reservations WHERE id = $1", [reservation_id]);
      if (resCheck.rows.length === 0 && transaction_id) {
        resCheck = await client.query("SELECT * FROM reservations WHERE external_payment_id = $1", [transaction_id]);
      }
      if (resCheck.rows.length === 0) {
        await client.query("ROLLBACK");
        return data({
          error: "Reservation not found"
        }, {
          status: 404
        });
      }
      const reservation2 = resCheck.rows[0];
      const currentPaid = Number(reservation2.amount_paid || 0);
      const newTotalPaid = currentPaid + Number(amount);
      const newStatus = ReservationStatus.CONFIRMED;
      await client.query(`UPDATE reservations SET 
                    status = $1, amount_paid = $2, 
                    payment_method = COALESCE($3, payment_method),
                    updated_at = CURRENT_TIMESTAMP 
                WHERE id = $4`, [newStatus, newTotalPaid, payment_method, reservation2.id]);
      await client.query(`INSERT INTO transaction (
                    type, description, amount, currency, date,
                    due_date, payment_date, status, payment_method, category,
                    organization_id, created_by, reservation_id, document_number, notes
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15)`, [
        TipoTransacao.INCOME,
        `Pagamento Digital - Reserva ${reservation2.ticket_code}`,
        amount,
        "BRL",
        (/* @__PURE__ */ new Date()).toISOString(),
        // Emission
        (/* @__PURE__ */ new Date()).toISOString(),
        // Due
        payment_date || (/* @__PURE__ */ new Date()).toISOString(),
        StatusTransacao.PAID,
        payment_method || "DIGITAL",
        CategoriaReceita.VENDA_PASSAGEM,
        reservation2.organization_id,
        reservation2.created_by,
        // user creator
        reservation2.id,
        transaction_id || null,
        "Confirma√ß√£o Autom√°tica via Webhook"
      ]);
      await client.query("COMMIT");
      return data({
        success: true,
        message: "Processed"
      });
    } catch (e) {
      await client.query("ROLLBACK");
      console.error("Webhook Error", e);
      return data({
        error: "Processing failed"
      }, {
        status: 500
      });
    } finally {
      client.release();
    }
  }
  if (path2 === "cancel-reservation") {
    const {
      reservation_id,
      reason
    } = body;
    if (!reservation_id) return data({
      error: "Missing ID"
    }, {
      status: 400
    });
    const result = await pool.query(`UPDATE reservations 
             SET status = $1, notes = COALESCE(notes, '') || ' [Cancelado N8N: ' || COALESCE($2, 'Expirado') || ']', updated_at = CURRENT_TIMESTAMP
             WHERE id = $3
             RETURNING id`, [ReservationStatus.CANCELLED, reason, reservation_id]);
    if (result.rows.length === 0) return data({
      error: "Not found"
    }, {
      status: 404
    });
    return data({
      success: true
    });
  }
  return data({
    error: "Not found"
  }, {
    status: 404
  });
}
const route22 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$U,
  loader: loader$T
}, Symbol.toStringTag, { value: "Module" }));
function getApiUrl$1() {
  {
    console.log("[AUTH] Using VITE_API_URL:", "https://api.yourdomain.com");
    return "https://api.yourdomain.com";
  }
}
const authClient = createAuthClient({
  baseURL: getApiUrl$1(),
  plugins: [
    adminClient(),
    organizationClient(),
    phoneNumberClient()
  ]
});
const authClient$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  authClient
}, Symbol.toStringTag, { value: "Module" }));
const RedefinirSenha = () => {
  const navigate = useNavigate();
  const [password, setPassword] = useState("");
  const [confirmPassword, setConfirmPassword] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSuccess, setIsSuccess] = useState(false);
  const [error, setError] = useState("");
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (password !== confirmPassword) {
      setError("As senhas n√£o coincidem");
      return;
    }
    setIsLoading(true);
    setError("");
    await authClient.resetPassword({
      newPassword: password
    }, {
      onSuccess: () => {
        setIsSuccess(true);
        setIsLoading(false);
        setTimeout(() => navigate("/login"), 3e3);
      },
      onError: (ctx) => {
        setError(ctx.error.message);
        setIsLoading(false);
      }
    });
  };
  return /* @__PURE__ */ jsx("div", {
    className: "min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 border border-slate-200 dark:border-slate-700",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "text-center mb-8",
        children: [/* @__PURE__ */ jsx("div", {
          className: "w-12 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center mx-auto mb-4",
          children: /* @__PURE__ */ jsx(Lock, {
            className: "text-blue-600 dark:text-blue-400",
            size: 24
          })
        }), /* @__PURE__ */ jsx("h1", {
          className: "text-2xl font-bold text-slate-800 dark:text-white",
          children: "Redefinir Senha"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-slate-500 dark:text-slate-400 mt-2",
          children: "Crie uma nova senha segura para sua conta."
        })]
      }), isSuccess ? /* @__PURE__ */ jsxs("div", {
        className: "text-center space-y-4",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "p-4 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-xl flex flex-col items-center gap-2",
          children: [/* @__PURE__ */ jsx(CircleCheckBig, {
            size: 32
          }), /* @__PURE__ */ jsx("p", {
            className: "font-medium",
            children: "Senha alterada com sucesso!"
          })]
        }), /* @__PURE__ */ jsx("p", {
          className: "text-sm text-slate-500",
          children: "Voc√™ ser√° redirecionado para o login em instantes..."
        })]
      }) : /* @__PURE__ */ jsxs("form", {
        onSubmit: handleSubmit,
        className: "space-y-6",
        children: [/* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",
            children: "Nova Senha"
          }), /* @__PURE__ */ jsxs("div", {
            className: "relative",
            children: [/* @__PURE__ */ jsx(Lock, {
              className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
              size: 18
            }), /* @__PURE__ */ jsx("input", {
              type: "password",
              value: password,
              onChange: (e) => setPassword(e.target.value),
              className: "w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white",
              placeholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
              required: true,
              minLength: 8
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",
            children: "Confirmar Nova Senha"
          }), /* @__PURE__ */ jsxs("div", {
            className: "relative",
            children: [/* @__PURE__ */ jsx(Lock, {
              className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
              size: 18
            }), /* @__PURE__ */ jsx("input", {
              type: "password",
              value: confirmPassword,
              onChange: (e) => setConfirmPassword(e.target.value),
              className: "w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white",
              placeholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
              required: true,
              minLength: 8
            })]
          })]
        }), error && /* @__PURE__ */ jsx("div", {
          className: "p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",
          children: error
        }), /* @__PURE__ */ jsx("button", {
          type: "submit",
          disabled: isLoading,
          className: "w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",
          children: isLoading ? /* @__PURE__ */ jsx(LoaderCircle, {
            className: "animate-spin",
            size: 20
          }) : "Redefinir Senha"
        })]
      })]
    })
  });
};
const route23 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  RedefinirSenha
}, Symbol.toStringTag, { value: "Module" }));
async function loader$S({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const status = url.searchParams.get("status");
  const contact_name = url.searchParams.get("contact_name");
  const start_date = url.searchParams.get("start_date");
  const end_date = url.searchParams.get("end_date");
  let query = `SELECT * FROM charter_requests WHERE organization_id = $1`;
  const params = [orgId];
  let paramCount = 1;
  if (status) {
    paramCount++;
    query += ` AND status = $${paramCount}`;
    params.push(status);
  }
  if (contact_name) {
    paramCount++;
    query += ` AND contact_name ILIKE $${paramCount}`;
    params.push(`%${contact_name}%`);
  }
  if (start_date) {
    paramCount++;
    query += ` AND departure_date >= $${paramCount}`;
    params.push(start_date);
  }
  if (end_date) {
    paramCount++;
    query += ` AND departure_date <= $${paramCount}`;
    params.push(end_date);
  }
  query += ` ORDER BY created_at DESC`;
  const result = await pool.query(query, params);
  return data(result.rows);
}
async function action$T({
  request
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  const body = await request.json();
  const {
    contact_name,
    contact_email,
    contact_phone,
    company_name,
    origin_city,
    origin_state,
    destination_city,
    destination_state,
    departure_date,
    departure_time,
    return_date,
    return_time,
    passenger_count,
    vehicle_type_requested,
    description,
    client_id,
    notes,
    vehicle_id,
    driver_id,
    rota_ida_id,
    rota_volta_id
  } = body;
  try {
    const result = await pool.query(`INSERT INTO charter_requests (
                contact_name, contact_email, contact_phone, company_name,
                origin_city, origin_state, destination_city, destination_state,
                departure_date, departure_time, return_date, return_time,
                passenger_count, vehicle_type_requested,
                description, status,
                user_id, client_id, notes,
                organization_id, created_by,
                vehicle_id, driver_id, rota_ida_id, rota_volta_id
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
            RETURNING *`, [contact_name, contact_email, contact_phone, company_name || null, origin_city, origin_state, destination_city, destination_state, departure_date, departure_time || null, return_date || null, return_time || null, passenger_count, vehicle_type_requested || null, description || null, FretamentoStatus.REQUEST, null, client_id || null, notes || null, orgId, userId, vehicle_id || null, driver_id || null, rota_ida_id || null, rota_volta_id || null]);
    return data(result.rows[0], {
      status: 201
    });
  } catch (error) {
    console.error("Error creating charter request:", error);
    return data({
      error: "Falha ao criar solicita√ß√£o de fretamento"
    }, {
      status: 500
    });
  }
}
const route24 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$T,
  loader: loader$S
}, Symbol.toStringTag, { value: "Module" }));
async function loader$R({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT * FROM charter_requests WHERE id = $1 AND organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Charter request not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$S({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      status,
      quote_price,
      notes
    } = body;
    const check = await pool.query("SELECT id FROM charter_requests WHERE id = $1 AND organization_id = $2", [id, orgId]);
    if (check.rows.length === 0) {
      return data({
        error: "Charter request not found"
      }, {
        status: 404
      });
    }
    const result = await pool.query(`UPDATE charter_requests SET
                status = COALESCE($1, status),
                quote_price = COALESCE($2, quote_price),
                notes = COALESCE($3, notes),
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $4 AND organization_id = $5
            RETURNING *`, [status, quote_price, notes, id, orgId]);
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route25 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$S,
  loader: loader$R
}, Symbol.toStringTag, { value: "Module" }));
async function loader$Q({
  request,
  params
}) {
  const url = new URL(request.url);
  const path2 = params["*"] || "";
  const segments = path2.split("/").filter(Boolean);
  try {
    if (segments[0] === "routes" && segments.length === 1) {
      const result = await pool.query("SELECT id, name, origin_city, origin_state, destination_city, destination_state FROM routes WHERE active = true ORDER BY name ASC");
      return data(result.rows);
    }
    if (segments[0] === "trips" && segments.length === 1) {
      const origin_city = url.searchParams.get("origin_city");
      const destination_city = url.searchParams.get("destination_city");
      const date2 = url.searchParams.get("date");
      let query = `
                SELECT t.id, t.departure_date, t.departure_time, t.arrival_date, t.arrival_time,
                       t.price_conventional, t.price_executive, t.price_semi_sleeper, t.price_sleeper,
                       t.seats_available, t.tags, t.cover_image, t.title, t.baggage_limit, t.alerts,
                       t.status, t.active,
                       r.name as route_name, r.origin_city, r.origin_state, r.destination_city, r.destination_state, 
                       r.origin_neighborhood, r.destination_neighborhood,
                       r.duration_minutes, r.stops as route_stops,
                       rr.stops as return_route_stops,
                       v.tipo as vehicle_type, v.modelo as vehicle_model, v.placa as vehicle_plate
                FROM trips t
                JOIN routes r ON t.route_id = r.id
                LEFT JOIN routes rr ON t.return_route_id = rr.id
                LEFT JOIN vehicle v ON t.vehicle_id = v.id
                WHERE t.status IN ('SCHEDULED', 'AGENDADA', 'CONFIRMADA', 'CONFIRMED') AND (t.active = true OR t.active IS NULL)
            `;
      const params2 = [];
      let paramCount = 0;
      if (origin_city) {
        paramCount++;
        query += ` AND r.origin_city ILIKE $${paramCount}`;
        params2.push(`%${origin_city}%`);
      }
      if (destination_city) {
        paramCount++;
        query += ` AND r.destination_city ILIKE $${paramCount}`;
        params2.push(`%${destination_city}%`);
      }
      if (date2) {
        paramCount++;
        query += ` AND t.departure_date = $${paramCount}`;
        params2.push(date2);
      }
      query += ` ORDER BY t.departure_date ASC, t.departure_time ASC`;
      const result = await pool.query(query, params2);
      return data(result.rows);
    }
    if (segments[0] === "trips" && segments.length === 2) {
      const id = segments[1];
      const result = await pool.query(`SELECT t.*, 
                       r.name as route_name, r.origin_city, r.origin_state, r.destination_city, r.destination_state, 
                       r.origin_neighborhood, r.destination_neighborhood,
                       r.stops as route_stops,
                       rr.stops as return_route_stops,
                       v.placa as vehicle_plate, v.modelo as vehicle_model, v.tipo as vehicle_type, v.capacidade_passageiros, v.id as vehicle_id, v.is_double_deck as vehicle_is_double_deck
                FROM trips t
                JOIN routes r ON t.route_id = r.id
                LEFT JOIN routes rr ON t.return_route_id = rr.id
                LEFT JOIN vehicle v ON t.vehicle_id = v.id
                WHERE t.id = $1 AND (t.active = true OR t.active IS NULL)`, [id]);
      if (result.rows.length === 0) {
        throw new Response("Trip not found", {
          status: 404
        });
      }
      return data(result.rows[0]);
    }
    if (segments[0] === "trips" && segments.length === 3 && segments[2] === "reserved-seats") {
      const id = segments[1];
      const result = await pool.query(`SELECT s.numero as seat_number 
                 FROM reservations r
                 JOIN seat s ON r.seat_id = s.id
                 WHERE r.trip_id = $1 AND r.status != 'CANCELLED'`, [id]);
      return data(result.rows.map((r2) => r2.seat_number));
    }
    if (segments[0] === "vehicles" && segments.length === 2) {
      const id = segments[1];
      const result = await pool.query("SELECT id, modelo, placa, ano, tipo, capacidade_passageiros, imagem, galeria, is_double_deck FROM vehicle WHERE id = $1", [id]);
      if (result.rows.length === 0) {
        throw new Response("Vehicle not found", {
          status: 404
        });
      }
      const features = await pool.query("SELECT label, category FROM vehicle_feature WHERE vehicle_id = $1", [id]);
      return data({
        ...result.rows[0],
        features: features.rows
      });
    }
    if (segments[0] === "vehicles" && segments.length === 3 && segments[2] === "seats") {
      const id = segments[1];
      const result = await pool.query("SELECT * FROM seat WHERE vehicle_id = $1 ORDER BY andar, posicao_y, posicao_x", [id]);
      return data(result.rows);
    }
    if (segments[0] === "tags" && segments.length === 1) {
      const result = await pool.query("SELECT * FROM trip_tags ORDER BY nome ASC");
      return data(result.rows);
    }
    if (segments[0] === "settings" && segments.length === 1) {
      let orgId = url.searchParams.get("organization_id");
      if (!orgId) {
        const orgResult = await pool.query('SELECT id FROM "organization" LIMIT 1');
        if (orgResult.rows.length === 0) {
          throw new Response("No organization found", {
            status: 404
          });
        }
        orgId = orgResult.rows[0].id;
      }
      const whitelistedKeys = ["portal_logo_text", "portal_header_slogan", "portal_hero_title", "portal_hero_subtitle", "portal_footer_description", "portal_contact_phone", "portal_contact_email", "portal_contact_address", "portal_social_instagram", "portal_social_facebook", "portal_copyright"];
      const result = await pool.query("SELECT key, value FROM system_parameters WHERE organization_id = $1 AND key = ANY($2)", [orgId, whitelistedKeys]);
      const settings = result.rows.reduce((acc, row) => {
        acc[row.key] = row.value;
        return acc;
      }, {});
      return data(settings);
    }
    if (segments[0] === "parameters" && segments.length === 1) {
      const orgId = url.searchParams.get("organizationId");
      let query = "SELECT key, value FROM system_parameters";
      const params2 = [];
      if (orgId) {
        query += " WHERE organization_id = $1";
        params2.push(orgId);
      }
      const result = await pool.query(query, params2);
      return data(result.rows);
    }
    if (segments[0] === "resolve-identifier" && segments.length === 1) {
      const identifier = url.searchParams.get("identifier");
      if (!identifier) {
        return data({
          error: "Identifier is required"
        }, {
          status: 400
        });
      }
      const usernameResult = await pool.query('SELECT email FROM "user" WHERE LOWER(username) = LOWER($1) AND role = $2 LIMIT 1', [identifier, "client"]);
      if (usernameResult.rows.length > 0) {
        return data({
          email: usernameResult.rows[0].email
        });
      }
      const clientResult = await pool.query(`SELECT email FROM clients 
                 WHERE documento ILIKE $1 
                    OR telefone ILIKE $1 
                    OR email ILIKE $1 
                 LIMIT 1`, [`%${identifier}%`]);
      if (clientResult.rows.length === 0) {
        throw new Response("Identificador n√£o encontrado", {
          status: 404
        });
      }
      return data({
        email: clientResult.rows[0].email
      });
    }
    throw new Response("Not found", {
      status: 404
    });
  } catch (error) {
    console.error("Error in public API:", error);
    if (error instanceof Response) throw error;
    return data({
      error: error.message || "Internal server error"
    }, {
      status: 500
    });
  }
}
async function action$R({
  request,
  params
}) {
  const path2 = params["*"] || "";
  const segments = path2.split("/").filter(Boolean);
  try {
    if (segments[0] === "client" && segments[1] === "login") {
      const body = await request.json();
      const {
        identifier,
        password
      } = body;
      if (!identifier || !password) {
        return data({
          error: "Identificador e senha s√£o obrigat√≥rios"
        }, {
          status: 400
        });
      }
      let email = null;
      let username = null;
      if (identifier.includes("@")) {
        email = identifier;
      } else {
        const usernameResult = await pool.query('SELECT email, username FROM "user" WHERE LOWER(username) = LOWER($1)', [identifier]);
        if (usernameResult.rows.length > 0) {
          email = usernameResult.rows[0].email;
          username = usernameResult.rows[0].username;
        } else {
          const clientResult = await pool.query(`SELECT c.email, u.username 
                         FROM clients c
                         JOIN "user" u ON c.user_id = u.id
                         WHERE c.documento ILIKE $1
                         LIMIT 1`, [`%${identifier}%`]);
          if (clientResult.rows.length === 0) {
            return data({
              error: "Identificador n√£o encontrado"
            }, {
              status: 404
            });
          }
          email = clientResult.rows[0].email;
          username = clientResult.rows[0].username;
        }
      }
      if (!email) {
        return data({
          error: "Usu√°rio n√£o possui email cadastrado"
        }, {
          status: 400
        });
      }
      const authResponse = await auth.api.signInEmail({
        body: {
          email,
          password
        },
        asResponse: true
      });
      if (!authResponse.ok) {
        return data({
          error: "Credenciais incorretas"
        }, {
          status: 401
        });
      }
      const authData = await authResponse.json();
      const headers = new Headers();
      authResponse.headers.forEach((value, key) => {
        if (key.toLowerCase() === "set-cookie") {
          headers.append(key, value);
        }
      });
      return new Response(JSON.stringify({
        success: true,
        user: authData.user,
        session: authData.session
      }), {
        headers: {
          ...Object.fromEntries(headers),
          "Content-Type": "application/json"
        }
      });
    }
    if (segments[0] === "client" && segments[1] === "signup") {
      const body = await request.json();
      const {
        tipo_cliente,
        name,
        username,
        email,
        password,
        phone,
        documento_tipo,
        documento,
        razao_social,
        nome_fantasia,
        cnpj,
        organization_id
      } = body;
      if (!email || !password || !name || !username) {
        return data({
          error: "Nome, username, email e senha s√£o obrigat√≥rios"
        }, {
          status: 400
        });
      }
      if (username.length < 3) {
        return data({
          error: "Username deve ter no m√≠nimo 3 caracteres"
        }, {
          status: 400
        });
      }
      if (password.length < 8) {
        return data({
          error: "Senha deve ter no m√≠nimo 8 caracteres"
        }, {
          status: 400
        });
      }
      const usernameCheck = await pool.query('SELECT id FROM "user" WHERE LOWER(username) = LOWER($1)', [username]);
      if (usernameCheck.rows.length > 0) {
        return data({
          error: "Username j√° est√° em uso"
        }, {
          status: 400
        });
      }
      const emailCheck = await pool.query('SELECT id FROM "user" WHERE LOWER(email) = LOWER($1)', [email]);
      if (emailCheck.rows.length > 0) {
        return data({
          error: "Email j√° est√° cadastrado"
        }, {
          status: 400
        });
      }
      const authResponse = await auth.api.signUpEmail({
        body: {
          email,
          password,
          name
        }
      });
      if (!authResponse || !authResponse.user) {
        return data({
          error: "Falha ao criar conta"
        }, {
          status: 500
        });
      }
      const userId = authResponse.user.id;
      await pool.query(`UPDATE "user" SET role = $1, documento_tipo = $2, documento = $3, phone = $4, username = $5 WHERE id = $6`, ["client", documento_tipo || "CPF", documento || null, phone || null, username, userId]);
      await pool.query(`UPDATE account SET "accountId" = $1 WHERE "userId" = $2 AND "providerId" = 'credential'`, [username, userId]);
      await pool.query(`INSERT INTO clients (
                    tipo_cliente, nome, email, telefone, documento_tipo, documento,
                    razao_social, nome_fantasia, cnpj,
                    organization_id, user_id, data_cadastro, saldo_creditos
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, CURRENT_TIMESTAMP, 0)`, [tipo_cliente || "PESSOA_FISICA", name, email, phone || null, documento_tipo || "CPF", documento || null, razao_social || null, nome_fantasia || null, cnpj || null, organization_id || null, userId]);
      return data({
        success: true,
        user: authResponse.user,
        session: authResponse.session
      });
    }
    if (segments[0] === "charters" && segments.length === 1) {
      const body = await request.json();
      const {
        contact_name,
        contact_email,
        contact_phone,
        company_name,
        origin_city,
        origin_state,
        destination_city,
        destination_state,
        departure_date,
        departure_time,
        return_date,
        return_time,
        passenger_count,
        vehicle_type_requested,
        description,
        organization_id
      } = body;
      if (!organization_id) {
        return data({
          error: "Organization ID is required"
        }, {
          status: 400
        });
      }
      const result = await pool.query(`INSERT INTO charter_requests (
                    contact_name, contact_email, contact_phone, company_name,
                    origin_city, origin_state, destination_city, destination_state,
                    departure_date, departure_time, return_date, return_time,
                    passenger_count, vehicle_type_requested, description, status, organization_id
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17)
                RETURNING id`, [contact_name, contact_email, contact_phone, company_name || null, origin_city, origin_state, destination_city, destination_state, departure_date, departure_time || null, return_date || null, return_time || null, passenger_count, vehicle_type_requested || null, description || null, "REQUEST", organization_id]);
      return data({
        success: true,
        id: result.rows[0].id
      }, {
        status: 201
      });
    }
    if (segments[0] === "parcels" && segments.length === 1) {
      const body = await request.json();
      const {
        sender_name,
        sender_document,
        sender_phone,
        recipient_name,
        recipient_document,
        recipient_phone,
        origin_city,
        origin_state,
        destination_city,
        destination_state,
        description,
        weight,
        dimensions,
        organization_id
      } = body;
      if (!organization_id) {
        return data({
          error: "Organization ID is required"
        }, {
          status: 400
        });
      }
      const tracking_code = "REQ-" + crypto$1.randomBytes(3).toString("hex").toUpperCase();
      const result = await pool.query(`INSERT INTO parcel_orders (
                    sender_name, sender_document, sender_phone,
                    recipient_name, recipient_document, recipient_phone,
                    origin_city, origin_state, destination_city, destination_state,
                    description, weight, dimensions, status, tracking_code, price, organization_id
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17)
                RETURNING id, tracking_code`, [sender_name, sender_document, sender_phone, recipient_name, recipient_document, recipient_phone, origin_city, origin_state, destination_city, destination_state, description, weight || 0, dimensions || null, "AWAITING", tracking_code, 0, organization_id]);
      return data({
        success: true,
        id: result.rows[0].id,
        tracking_code: result.rows[0].tracking_code
      }, {
        status: 201
      });
    }
    throw new Response("Not found", {
      status: 404
    });
  } catch (error) {
    console.error("Error in public API action:", error);
    if (error instanceof Response) throw error;
    return data({
      error: error.message || "Internal server error"
    }, {
      status: 500
    });
  }
}
const route26 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$R,
  loader: loader$Q
}, Symbol.toStringTag, { value: "Module" }));
async function loader$P({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const search = url.searchParams.get("search");
  let sql2 = `
        SELECT c.*,
        (
            SELECT COALESCE(COUNT(*), 0)
            FROM reservations r 
            WHERE r.client_id = c.id 
            AND (r.status IN ('CONFIRMADA', 'UTILIZADA', 'EMBARCADO', 'CONFIRMED', 'USED', 'CHECKED_IN'))
            AND r.organization_id = $1
        )::int as historico_viagens,
        (
            SELECT COALESCE(SUM(r.amount_paid), 0)
            FROM reservations r 
            WHERE r.client_id = c.id 
            AND (r.status NOT IN ('CANCELADA', 'PENDENTE', 'CANCELLED', 'PENDING'))
            AND r.organization_id = $1
        )::float as valor_total_gasto,
        (
            SELECT MAX(t.departure_date)
            FROM reservations r 
            JOIN trips t ON r.trip_id = t.id
            WHERE r.client_id = c.id 
            AND (r.status IN ('CONFIRMADA', 'UTILIZADA', 'EMBARCADO', 'CONFIRMED', 'USED', 'CHECKED_IN'))
            AND t.departure_date <= CURRENT_DATE
            AND r.organization_id = $1
        ) as ultima_viagem
        FROM clients c 
        WHERE 1=1
    `;
  const params = [orgId];
  if (search) {
    sql2 += ` AND (c.nome ILIKE $2 OR c.email ILIKE $2 OR c.documento ILIKE $2)`;
    params.push(`%${search}%`);
  }
  sql2 += ` ORDER BY c.created_at DESC`;
  const result = await pool.query(sql2, params);
  return data(result.rows);
}
async function action$Q({
  request
}) {
  await requireRole(request, ["admin", "operacional", "vendas"]);
  if (request.method === "POST") {
    const body = await request.json();
    const {
      nome,
      email,
      telefone,
      documento_tipo,
      documento,
      nacionalidade,
      data_nascimento,
      endereco,
      cidade,
      estado,
      pais,
      segmento,
      observacoes
    } = body;
    const result = await pool.query(`INSERT INTO clients (
                nome, email, telefone, documento_tipo, documento,
                nacionalidade, data_nascimento, endereco, cidade, estado, pais,
                segmento, observacoes
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
            RETURNING *`, [nome, email, telefone, documento_tipo, documento, nacionalidade, data_nascimento, endereco, cidade, estado, pais, segmento, observacoes]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route27 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$Q,
  loader: loader$P
}, Symbol.toStringTag, { value: "Module" }));
async function loader$O({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas", "financeiro"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`
        SELECT c.*,
        (
            SELECT COALESCE(COUNT(*), 0)
            FROM reservations r 
            WHERE r.client_id = c.id 
            AND (r.status IN ('CONFIRMADA', 'UTILIZADA', 'EMBARCADO', 'CONFIRMED', 'USED', 'CHECKED_IN'))
            AND r.organization_id = $2
        )::int as historico_viagens,
        (
            SELECT COALESCE(SUM(r.amount_paid), 0)
            FROM reservations r 
            WHERE r.client_id = c.id 
            AND (r.status NOT IN ('CANCELADA', 'PENDENTE', 'CANCELLED', 'PENDING'))
            AND r.organization_id = $2
        )::float as valor_total_gasto,
        (
            SELECT MAX(t.departure_date)
            FROM reservations r 
            JOIN trips t ON r.trip_id = t.id
            WHERE r.client_id = c.id 
            AND (r.status IN ('CONFIRMADA', 'UTILIZADA', 'EMBARCADO', 'CONFIRMED', 'USED', 'CHECKED_IN'))
            AND t.departure_date <= CURRENT_DATE
            AND r.organization_id = $2
        ) as ultima_viagem
        FROM clients c 
        WHERE c.id = $1
    `, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Client not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$P({
  request,
  params
}) {
  const {
    id
  } = params;
  if (request.method === "PUT") {
    await requireRole(request, ["admin", "operacional", "vendas", "financeiro"]);
    const body = await request.json();
    const {
      nome,
      email,
      telefone,
      documento_tipo,
      documento,
      nacionalidade,
      data_nascimento,
      endereco,
      cidade,
      estado,
      pais,
      segmento,
      observacoes,
      saldo_creditos
    } = body;
    const result = await pool.query(`UPDATE clients SET
                nome = COALESCE($1, nome),
                email = COALESCE($2, email),
                telefone = COALESCE($3, telefone),
                documento_tipo = COALESCE($4, documento_tipo),
                documento = COALESCE($5, documento),
                nacionalidade = COALESCE($6, nacionalidade),
                data_nascimento = COALESCE($7, data_nascimento),
                endereco = COALESCE($8, endereco),
                cidade = COALESCE($9, cidade),
                estado = COALESCE($10, estado),
                pais = COALESCE($11, pais),
                segmento = COALESCE($12, segmento),
                observacoes = COALESCE($13, observacoes),
                saldo_creditos = COALESCE($14, saldo_creditos),
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $15
            RETURNING *`, [nome, email, telefone, documento_tipo, documento, nacionalidade, data_nascimento, endereco, cidade, estado, pais, segmento, observacoes, saldo_creditos, id]);
    if (result.rows.length === 0) {
      return data({
        error: "Client not found"
      }, {
        status: 404
      });
    }
    return data(result.rows[0]);
  }
  if (request.method === "DELETE") {
    await requireRole(request, ["admin"]);
    const result = await pool.query("DELETE FROM clients WHERE id = $1", [id]);
    if (result.rowCount === 0) {
      return data({
        error: "Client not found"
      }, {
        status: 404
      });
    }
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route28 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$P,
  loader: loader$O
}, Symbol.toStringTag, { value: "Module" }));
async function loader$N({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`
        SELECT ci.* 
        FROM client_interactions ci
        WHERE ci.cliente_id = $1 AND ci.organization_id = $2
        ORDER BY ci.data_hora DESC
    `, [id, orgId]);
  return data(result.rows);
}
async function action$O({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      tipo,
      descricao,
      usuario_responsavel
    } = body;
    const result = await pool.query(`INSERT INTO client_interactions (cliente_id, tipo, descricao, usuario_responsavel, organization_id)
            VALUES ($1, $2, $3, $4, $5)
            RETURNING *`, [id, tipo, descricao, usuario_responsavel, orgId]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route29 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$O,
  loader: loader$N
}, Symbol.toStringTag, { value: "Module" }));
async function loader$M({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`
        SELECT cn.* 
        FROM client_notes cn
        WHERE cn.cliente_id = $1 AND cn.organization_id = $2
        ORDER BY cn.data_criacao DESC
    `, [id, orgId]);
  return data(result.rows);
}
async function action$N({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      titulo,
      conteudo,
      criado_por,
      importante
    } = body;
    const result = await pool.query(`INSERT INTO client_notes (cliente_id, titulo, conteudo, criado_por, importante, organization_id)
            VALUES ($1, $2, $3, $4, $5, $6)
            RETURNING *`, [id, titulo, conteudo, criado_por, importante, orgId]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route30 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$N,
  loader: loader$M
}, Symbol.toStringTag, { value: "Module" }));
async function loader$L({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const status = url.searchParams.get("status");
  const tracking_code = url.searchParams.get("tracking_code");
  const sender_name = url.searchParams.get("sender_name");
  const recipient_name = url.searchParams.get("recipient_name");
  let query = `SELECT * FROM parcel_orders WHERE organization_id = $1`;
  const params = [orgId];
  let paramCount = 1;
  if (status) {
    paramCount++;
    query += ` AND status = $${paramCount}`;
    params.push(status);
  }
  if (tracking_code) {
    paramCount++;
    query += ` AND tracking_code ILIKE $${paramCount}`;
    params.push(`%${tracking_code}%`);
  }
  if (sender_name) {
    paramCount++;
    query += ` AND sender_name ILIKE $${paramCount}`;
    params.push(`%${sender_name}%`);
  }
  if (recipient_name) {
    paramCount++;
    query += ` AND recipient_name ILIKE $${paramCount}`;
    params.push(`%${recipient_name}%`);
  }
  query += ` ORDER BY created_at DESC`;
  const result = await pool.query(query, params);
  return data(result.rows);
}
async function action$M({
  request
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  const body = await request.json();
  const {
    sender_name,
    sender_document,
    sender_phone,
    recipient_name,
    recipient_document,
    recipient_phone,
    origin_city,
    origin_state,
    destination_city,
    destination_state,
    description,
    weight,
    dimensions,
    price,
    client_id,
    notes,
    trip_id
  } = body;
  const tracking_code = "P-" + crypto$1.randomBytes(3).toString("hex").toUpperCase();
  try {
    const result = await pool.query(`INSERT INTO parcel_orders (
                sender_name, sender_document, sender_phone,
                recipient_name, recipient_document, recipient_phone,
                origin_city, origin_state, destination_city, destination_state,
                description, weight, dimensions,
                status, tracking_code, price,
                trip_id, user_id, client_id, notes,
                organization_id, created_by
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22)
            RETURNING *`, [sender_name, sender_document, sender_phone, recipient_name, recipient_document, recipient_phone, origin_city, origin_state, destination_city, destination_state, description, weight || 0, dimensions || null, EncomendaStatus.PENDING, tracking_code, price, trip_id || null, null, client_id || null, notes || null, orgId, userId]);
    return data(result.rows[0], {
      status: 201
    });
  } catch (error) {
    console.error("Error creating parcel:", error);
    return data({
      error: "Falha ao criar encomenda"
    }, {
      status: 500
    });
  }
}
const route31 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$M,
  loader: loader$L
}, Symbol.toStringTag, { value: "Module" }));
async function loader$K({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT p.*, 
               t.departure_date, t.departure_time,
               route.name as route_name
        FROM parcel_orders p
        LEFT JOIN trips t ON p.trip_id = t.id
        LEFT JOIN routes route ON t.route_id = route.id
        WHERE p.id = $1 AND p.organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Parcel not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$L({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      status,
      notes,
      trip_id
    } = body;
    const check = await pool.query("SELECT id FROM parcel_orders WHERE id = $1 AND organization_id = $2", [id, orgId]);
    if (check.rows.length === 0) {
      return data({
        error: "Parcel not found"
      }, {
        status: 404
      });
    }
    const result = await pool.query(`UPDATE parcel_orders SET
                status = COALESCE($1, status),
                notes = COALESCE($2, notes),
                trip_id = COALESCE($3, trip_id),
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $4 AND organization_id = $5
            RETURNING *`, [status, notes, trip_id, id, orgId]);
    return data(result.rows[0]);
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route32 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$L,
  loader: loader$K
}, Symbol.toStringTag, { value: "Module" }));
async function loader$J({
  request
}) {
  const session2 = await requireAuth(request);
  const result = await pool.query('SELECT id, username, name, email, phone, cpf, birth_date, role, image FROM "user" WHERE id = $1', [session2.user.id]);
  if (result.rows.length === 0) {
    throw new Response("Usu√°rio n√£o encontrado", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$K({
  request
}) {
  const session2 = await requireAuth(request);
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      name,
      email,
      phone,
      cpf,
      birthDate,
      image
    } = body;
    if (!name || !phone) {
      return data({
        error: "Nome e telefone s√£o obrigat√≥rios"
      }, {
        status: 400
      });
    }
    if (email) {
      const emailCheck = await pool.query('SELECT id FROM "user" WHERE email = $1 AND id != $2', [email, session2.user.id]);
      if (emailCheck.rows.length > 0) {
        return data({
          error: "Email j√° est√° em uso"
        }, {
          status: 400
        });
      }
    }
    const phoneCheck = await pool.query('SELECT id FROM "user" WHERE phone = $1 AND id != $2', [phone, session2.user.id]);
    if (phoneCheck.rows.length > 0) {
      return data({
        error: "Telefone j√° est√° em uso"
      }, {
        status: 400
      });
    }
    if (cpf) {
      const cpfCheck = await pool.query('SELECT id FROM "user" WHERE cpf = $1 AND id != $2', [cpf, session2.user.id]);
      if (cpfCheck.rows.length > 0) {
        return data({
          error: "CPF j√° est√° em uso"
        }, {
          status: 400
        });
      }
    }
    const updateFields = [];
    const updateValues = [];
    let paramCounter = 1;
    updateFields.push(`name = $${paramCounter++}`);
    updateValues.push(name);
    updateFields.push(`email = $${paramCounter++}`);
    updateValues.push(email || null);
    updateFields.push(`phone = $${paramCounter++}`);
    updateValues.push(phone);
    updateFields.push(`cpf = $${paramCounter++}`);
    updateValues.push(cpf || null);
    updateFields.push(`birth_date = $${paramCounter++}`);
    updateValues.push(birthDate || null);
    if (image !== void 0) {
      updateFields.push(`image = $${paramCounter++}`);
      updateValues.push(image);
    }
    updateFields.push(`"updatedAt" = CURRENT_TIMESTAMP`);
    updateValues.push(session2.user.id);
    await pool.query(`UPDATE "user" SET ${updateFields.join(", ")} WHERE id = $${paramCounter}`, updateValues);
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route33 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$K,
  loader: loader$J
}, Symbol.toStringTag, { value: "Module" }));
async function action$J({
  request
}) {
  var _a;
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const session2 = await requireAuth(request);
  const body = await request.json();
  const {
    currentPassword,
    newPassword
  } = body;
  if (!currentPassword || !newPassword) {
    return data({
      error: "Senhas s√£o obrigat√≥rias"
    }, {
      status: 400
    });
  }
  if (newPassword.length < 8) {
    return data({
      error: "A nova senha deve ter no m√≠nimo 8 caracteres"
    }, {
      status: 400
    });
  }
  const accountResult = await pool.query(`SELECT password, "accountId" FROM account WHERE "userId" = $1 AND "providerId" = 'credential'`, [session2.user.id]);
  if (accountResult.rows.length === 0) {
    return data({
      error: "Conta n√£o encontrada"
    }, {
      status: 404
    });
  }
  const isValid2 = await bcrypt.compare(currentPassword, accountResult.rows[0].password);
  if (!isValid2) {
    return data({
      error: "Senha atual incorreta"
    }, {
      status: 400
    });
  }
  const hashedPassword = await bcrypt.hash(newPassword, 10);
  const userResult = await pool.query('SELECT username FROM "user" WHERE id = $1', [session2.user.id]);
  const username = ((_a = userResult.rows[0]) == null ? void 0 : _a.username) || session2.user.email;
  await pool.query(`UPDATE account SET password = $1, "accountId" = $2, "updatedAt" = CURRENT_TIMESTAMP WHERE "userId" = $3 AND "providerId" = 'credential'`, [hashedPassword, username, session2.user.id]);
  console.log(`[PROFILE] Password changed for user: ${username}`);
  return data({
    success: true
  });
}
const route34 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$J
}, Symbol.toStringTag, { value: "Module" }));
const uploadsDir = path.join(process.cwd(), "public/uploads/avatars");
if (!fs.existsSync(uploadsDir)) {
  fs.mkdirSync(uploadsDir, { recursive: true });
}
async function processAvatar(arrayBuffer, userId) {
  const filename = `${userId}.jpg`;
  const filepath = path.join(uploadsDir, filename);
  const buffer = Buffer.from(arrayBuffer);
  try {
    await sharp(buffer).resize(400, 400, {
      fit: "cover",
      position: "center"
    }).jpeg({ quality: 90 }).toFile(filepath);
    return `/uploads/avatars/${filename}`;
  } catch (error) {
    console.error("Error processing avatar:", error);
    throw new Error("Failed to process image");
  }
}
async function action$I({
  request
}) {
  const session2 = await requireAuth(request);
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  try {
    const formData = await request.formData();
    const file = formData.get("avatar");
    if (!file || file.size === 0) {
      return data({
        error: "No image provided"
      }, {
        status: 400
      });
    }
    if (!file.type.startsWith("image/")) {
      return data({
        error: "Only images are allowed"
      }, {
        status: 400
      });
    }
    const arrayBuffer = await file.arrayBuffer();
    const imageUrl = await processAvatar(arrayBuffer, session2.user.id);
    await pool.query('UPDATE "user" SET image = $1, "updatedAt" = CURRENT_TIMESTAMP WHERE id = $2', [imageUrl, session2.user.id]);
    return data({
      success: true,
      imageUrl
    });
  } catch (error) {
    console.error("Avatar upload error:", error);
    return data({
      error: "Failed to upload avatar"
    }, {
      status: 500
    });
  }
}
const route35 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$I
}, Symbol.toStringTag, { value: "Module" }));
async function loader$I({
  request
}) {
  return auth.handler(request);
}
async function action$H({
  request
}) {
  return auth.handler(request);
}
const route36 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$H,
  loader: loader$I
}, Symbol.toStringTag, { value: "Module" }));
async function loader$H({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const active = url.searchParams.get("active");
  let query = `SELECT * FROM routes WHERE organization_id = $1`;
  const params = [orgId];
  if (active) {
    query += ` AND active = $2`;
    params.push(active === "true");
  }
  query += ` ORDER BY name ASC`;
  const result = await pool.query(query, params);
  return data(result.rows);
}
async function action$G({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      name,
      origin_city,
      origin_state,
      destination_city,
      destination_state,
      distance_km,
      duration_minutes,
      stops,
      type
    } = body;
    const result = await pool.query(`INSERT INTO routes (
                name, origin_city, origin_state, destination_city, destination_state,
                distance_km, duration_minutes, stops, type, organization_id, created_by
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
            RETURNING *`, [name, origin_city, origin_state, destination_city, destination_state, distance_km || 0, duration_minutes || 0, JSON.stringify(stops || []), type || "OUTBOUND", orgId, userId]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route37 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$G,
  loader: loader$H
}, Symbol.toStringTag, { value: "Module" }));
async function loader$G({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT * FROM routes WHERE id = $1 AND organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Route not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$F({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      name,
      origin_city,
      origin_state,
      destination_city,
      destination_state,
      distance_km,
      duration_minutes,
      stops,
      active,
      type
    } = body;
    const result = await pool.query(`UPDATE routes SET
                name = COALESCE($1, name),
                origin_city = COALESCE($2, origin_city),
                origin_state = COALESCE($3, origin_state),
                destination_city = COALESCE($4, destination_city),
                destination_state = COALESCE($5, destination_state),
                distance_km = COALESCE($6, distance_km),
                duration_minutes = COALESCE($7, duration_minutes),
                stops = COALESCE($8, stops),
                active = COALESCE($9, active), 
                type = COALESCE($10, type),
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $11 AND organization_id = $12
            RETURNING *`, [name, origin_city, origin_state, destination_city, destination_state, distance_km, duration_minutes, stops ? JSON.stringify(stops) : null, active, type, id, orgId]);
    if (result.rows.length === 0) {
      return data({
        error: "Route not found"
      }, {
        status: 404
      });
    }
    return data(result.rows[0]);
  }
  if (request.method === "DELETE") {
    const tripCheck = await pool.query("SELECT id FROM trips WHERE route_id = $1 LIMIT 1", [id]);
    if (tripCheck.rows.length > 0) {
      return data({
        error: "Cannot delete route with existing trips"
      }, {
        status: 400
      });
    }
    const result = await pool.query("DELETE FROM routes WHERE id = $1 AND organization_id = $2 RETURNING id", [id, orgId]);
    if (result.rows.length === 0) {
      return data({
        error: "Route not found"
      }, {
        status: 404
      });
    }
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route38 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$F,
  loader: loader$G
}, Symbol.toStringTag, { value: "Module" }));
async function loader$F({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const url = new URL(request.url);
  const start_date = url.searchParams.get("start_date");
  const end_date = url.searchParams.get("end_date");
  const route_id = url.searchParams.get("route_id");
  const status = url.searchParams.get("status");
  const active = url.searchParams.get("active");
  let query = `
        SELECT t.*, 
               r.name as route_name, r.origin_city, r.destination_city, r.stops as route_stops,
               rr.name as return_route_name, rr.stops as return_route_stops,
               v.placa as vehicle_plate, v.modelo as vehicle_model,
               d.nome as driver_name
        FROM trips t
        JOIN routes r ON t.route_id = r.id
        LEFT JOIN routes rr ON t.return_route_id = rr.id
        LEFT JOIN vehicle v ON t.vehicle_id = v.id
        LEFT JOIN driver d ON t.driver_id = d.id
        WHERE t.organization_id = $1
    `;
  const params = [orgId];
  let paramCount = 1;
  if (start_date) {
    paramCount++;
    query += ` AND t.departure_date >= $${paramCount}`;
    params.push(start_date);
  }
  if (end_date) {
    paramCount++;
    query += ` AND t.departure_date <= $${paramCount}`;
    params.push(end_date);
  }
  if (route_id) {
    paramCount++;
    query += ` AND t.route_id = $${paramCount}`;
    params.push(route_id);
  }
  if (status) {
    paramCount++;
    query += ` AND t.status = $${paramCount}`;
    params.push(status);
  }
  if (active) {
    paramCount++;
    query += ` AND t.active = $${paramCount}`;
    params.push(active === "true");
  }
  query += ` ORDER BY t.departure_date ASC, t.departure_time ASC`;
  const result = await pool.query(query, params);
  return data(result.rows);
}
async function action$E({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const userId = session2.user.id;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      route_id,
      return_route_id,
      vehicle_id,
      driver_id,
      departure_date,
      departure_time,
      arrival_date,
      arrival_time,
      price_conventional,
      price_executive,
      price_semi_sleeper,
      price_sleeper,
      price_bed,
      price_master_bed,
      seats_available,
      notes,
      title,
      tags,
      cover_image,
      gallery,
      baggage_limit,
      alerts
    } = body;
    let finalSeats = seats_available;
    if (!finalSeats && vehicle_id) {
      const vehicle2 = await pool.query("SELECT capacidade_passageiros FROM vehicle WHERE id = $1", [vehicle_id]);
      if (vehicle2.rows.length > 0) {
        finalSeats = vehicle2.rows[0].capacidade_passageiros;
      }
    }
    const result = await pool.query(`INSERT INTO trips (
                route_id, return_route_id, vehicle_id, driver_id,
                departure_date, departure_time, arrival_date, arrival_time,
                price_conventional, price_executive, price_semi_sleeper, price_sleeper, price_bed, price_master_bed,
                seats_available, status, notes, organization_id, created_by,
                title, tags, cover_image, gallery, baggage_limit, alerts
            ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
            RETURNING *`, [route_id, return_route_id || null, vehicle_id || null, driver_id || null, departure_date, departure_time, arrival_date || null, arrival_time || null, price_conventional || null, price_executive || null, price_semi_sleeper || null, price_sleeper || null, price_bed || null, price_master_bed || null, finalSeats || 0, "SCHEDULED", notes || null, orgId, userId, title || null, tags || [], cover_image || null, JSON.stringify(gallery || []), baggage_limit || null, alerts || null]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route39 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$E,
  loader: loader$F
}, Symbol.toStringTag, { value: "Module" }));
async function loader$E({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const result = await pool.query("SELECT * FROM trip_tags WHERE organization_id = $1 ORDER BY nome ASC", [orgId]);
  return data(result.rows);
}
async function action$D({
  request
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  if (request.method === "POST") {
    const body = await request.json();
    const {
      nome,
      cor
    } = body;
    const result = await pool.query(`INSERT INTO trip_tags (nome, cor, organization_id) 
             VALUES ($1, $2, $3) 
             ON CONFLICT (nome, organization_id) DO UPDATE SET cor = EXCLUDED.cor
             RETURNING *`, [nome, cor || null, orgId]);
    return data(result.rows[0], {
      status: 201
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route40 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$D,
  loader: loader$E
}, Symbol.toStringTag, { value: "Module" }));
async function action$C({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      nome,
      cor
    } = body;
    const result = await pool.query(`UPDATE trip_tags SET 
                nome = COALESCE($1, nome),
                cor = COALESCE($2, cor)
             WHERE id = $3 AND organization_id = $4
             RETURNING *`, [nome, cor, id, orgId]);
    if (result.rows.length === 0) {
      return data({
        error: "Tag not found"
      }, {
        status: 404
      });
    }
    return data(result.rows[0]);
  }
  if (request.method === "DELETE") {
    const result = await pool.query("DELETE FROM trip_tags WHERE id = $1 AND organization_id = $2 RETURNING id", [id, orgId]);
    if (result.rows.length === 0) {
      return data({
        error: "Tag not found"
      }, {
        status: 404
      });
    }
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route41 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$C
}, Symbol.toStringTag, { value: "Module" }));
async function loader$D({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional", "vendas"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  const result = await pool.query(`SELECT t.*, 
               r.name as route_name, r.origin_city, r.origin_state, r.destination_city, r.destination_state, r.stops as route_stops,
               v.placa as vehicle_plate, v.modelo as vehicle_model, v.tipo as vehicle_type, v.capacidade_passageiros,
               d.nome as driver_name
        FROM trips t
        JOIN routes r ON t.route_id = r.id
        LEFT JOIN vehicle v ON t.vehicle_id = v.id
        LEFT JOIN driver d ON t.driver_id = d.id
        WHERE t.id = $1 AND t.organization_id = $2`, [id, orgId]);
  if (result.rows.length === 0) {
    throw new Response("Trip not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$B({
  request,
  params
}) {
  const session2 = await requireRole(request, ["admin", "operacional"]);
  const orgId = session2.session.activeOrganizationId;
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      return_route_id,
      vehicle_id,
      driver_id,
      departure_date,
      departure_time,
      arrival_date,
      arrival_time,
      status,
      price_conventional,
      price_executive,
      price_semi_sleeper,
      price_sleeper,
      price_bed,
      price_master_bed,
      seats_available,
      notes,
      title,
      tags,
      cover_image,
      gallery,
      baggage_limit,
      alerts,
      active
    } = body;
    const result = await pool.query(`UPDATE trips SET
                return_route_id = COALESCE($1, return_route_id),
                vehicle_id = COALESCE($2, vehicle_id),
                driver_id = COALESCE($3, driver_id),
                departure_date = COALESCE($4, departure_date),
                departure_time = COALESCE($5, departure_time),
                arrival_date = COALESCE($6, arrival_date),
                arrival_time = COALESCE($7, arrival_time),
                status = COALESCE($8, status),
                price_conventional = COALESCE($9, price_conventional),
                price_executive = COALESCE($10, price_executive),
                price_semi_sleeper = COALESCE($11, price_semi_sleeper),
                price_sleeper = COALESCE($12, price_sleeper),
                price_bed = COALESCE($13, price_bed),
                price_master_bed = COALESCE($14, price_master_bed),
                seats_available = COALESCE($15, seats_available),
                notes = COALESCE($16, notes),
                title = COALESCE($17, title),
                tags = COALESCE($18, tags),
                cover_image = COALESCE($19, cover_image),
                gallery = COALESCE($20, gallery),
                baggage_limit = COALESCE($21, baggage_limit),
                alerts = COALESCE($22, alerts),
                active = COALESCE($23, active),
                updated_at = CURRENT_TIMESTAMP
            WHERE id = $24 AND organization_id = $25
            RETURNING *`, [return_route_id, vehicle_id, driver_id, departure_date, departure_time, arrival_date, arrival_time, status, price_conventional, price_executive, price_semi_sleeper, price_sleeper, price_bed, price_master_bed, seats_available, notes, title, tags, cover_image, gallery ? JSON.stringify(gallery) : null, baggage_limit, alerts, active, id, orgId]);
    if (result.rows.length === 0) {
      return data({
        error: "Trip not found"
      }, {
        status: 404
      });
    }
    return data(result.rows[0]);
  }
  if (request.method === "DELETE") {
    const result = await pool.query("DELETE FROM trips WHERE id = $1 AND organization_id = $2 RETURNING id", [id, orgId]);
    if (result.rows.length === 0) {
      return data({
        error: "Trip not found"
      }, {
        status: 404
      });
    }
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route42 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$B,
  loader: loader$D
}, Symbol.toStringTag, { value: "Module" }));
async function loader$C({
  request
}) {
  await requireRole(request, ["admin"]);
  const result = await pool.query('SELECT id, username, name, email, phone, documento as cpf, role, "createdAt" FROM "user"');
  return data(result.rows);
}
async function action$A({
  request
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  const session2 = await requireRole(request, ["admin"]);
  const body = await request.json();
  const {
    username,
    name,
    email,
    phone,
    cpf,
    birthDate,
    role,
    password,
    notes,
    isActive
  } = body;
  if (!username || !name || !password) {
    return data({
      error: "Username, nome e senha s√£o obrigat√≥rios"
    }, {
      status: 400
    });
  }
  const check = await pool.query('SELECT id FROM "user" WHERE LOWER(username) = LOWER($1) OR (email IS NOT NULL AND LOWER(email) = LOWER($2)) OR (phone IS NOT NULL AND phone = $3)', [username, email || "", phone || ""]);
  if (check.rows.length > 0) {
    return data({
      error: "Username, email ou telefone j√° est√£o em uso"
    }, {
      status: 400
    });
  }
  try {
    const authResponse = await auth.api.signUpEmail({
      body: {
        email: email || `${username}@sgtl-internal.com`,
        password,
        name
      }
    });
    if (!authResponse || !authResponse.user) {
      return data({
        error: "Falha ao criar usu√°rio na base de autentica√ß√£o"
      }, {
        status: 500
      });
    }
    const userId = authResponse.user.id;
    await pool.query(`UPDATE "user" 
             SET username = $1, phone = $2, documento = $3, birth_date = $4, role = $5, notes = $6, is_active = $7, "updatedAt" = CURRENT_TIMESTAMP
             WHERE id = $8`, [username, phone || null, cpf || null, birthDate || null, role || "user", notes || null, isActive !== false, userId]);
    await pool.query(`UPDATE account 
             SET "accountId" = $1, "updatedAt" = CURRENT_TIMESTAMP
             WHERE "userId" = $2 AND "providerId" = 'credential'`, [username, userId]);
    const roles = (role || "user").split(",").map((r2) => r2.trim());
    if (roles.includes("client")) {
      const orgId = session2.session.activeOrganizationId;
      await pool.query(`INSERT INTO clients (
                    tipo_cliente, nome, email, telefone, 
                    documento_tipo, documento,
                    organization_id, user_id,
                    data_cadastro, saldo_creditos
                ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, CURRENT_TIMESTAMP, 0)
                ON CONFLICT (user_id) DO NOTHING`, ["PESSOA_FISICA", name, email || null, phone || null, "CPF", cpf || null, orgId, userId]);
    }
    console.log(`[ADMIN] User created: ${username} (ID: ${userId})`);
    return data({
      success: true,
      userId
    });
  } catch (error) {
    console.error("Error creating user:", error);
    return data({
      error: error.message || "Erro ao criar usu√°rio"
    }, {
      status: 500
    });
  }
}
const route43 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$A,
  loader: loader$C
}, Symbol.toStringTag, { value: "Module" }));
async function loader$B({
  request,
  params
}) {
  await requireRole(request, ["admin"]);
  const {
    id
  } = params;
  const result = await pool.query('SELECT id, username, name, email, phone, documento, documento_tipo, birth_date, image, role, notes, is_active as "isActive", "createdAt" FROM "user" WHERE id = $1', [id]);
  if (result.rows.length === 0) {
    throw new Response("User not found", {
      status: 404
    });
  }
  return data(result.rows[0]);
}
async function action$z({
  request,
  params
}) {
  await requireRole(request, ["admin"]);
  const {
    id
  } = params;
  if (request.method === "PUT") {
    const body = await request.json();
    const {
      username,
      name,
      email,
      phone,
      documento,
      documento_tipo,
      birthDate,
      image,
      role,
      notes,
      isActive,
      newPassword
    } = body;
    if (!name || !phone) {
      return data({
        error: "Nome e telefone s√£o obrigat√≥rios"
      }, {
        status: 400
      });
    }
    const check = await pool.query('SELECT id FROM "user" WHERE (LOWER(username) = LOWER($1) OR (email IS NOT NULL AND LOWER(email) = LOWER($2)) OR (phone IS NOT NULL AND phone = $3)) AND id != $4', [username || "", email || "", phone || "", id]);
    if (check.rows.length > 0) {
      return data({
        error: "Username, email ou telefone j√° est√£o em uso por outro usu√°rio"
      }, {
        status: 400
      });
    }
    await pool.query(`UPDATE "user" 
             SET username = $1, name = $2, email = $3, phone = $4, documento = $5, documento_tipo = $6, birth_date = $7, image = $8, role = $9, notes = $10, is_active = $11, "updatedAt" = CURRENT_TIMESTAMP
             WHERE id = $12`, [username, name, email || null, phone, documento || null, documento_tipo || "CPF", birthDate || null, image || null, role, notes || null, isActive !== false, id]);
    if (username) {
      await pool.query(`UPDATE account SET "accountId" = $1 WHERE "userId" = $2 AND "providerId" = 'credential'`, [username, id]);
    }
    if (newPassword) {
      const hashedPassword = await bcrypt.hash(newPassword, 10);
      await pool.query(`UPDATE account SET password = $1, "updatedAt" = CURRENT_TIMESTAMP 
                  WHERE "userId" = $2 AND "providerId" = 'credential'`, [hashedPassword, id]);
    }
    console.log(`[ADMIN] User updated: ${id}`);
    return data({
      success: true
    });
  }
  if (request.method === "DELETE") {
    await pool.query('DELETE FROM "user" WHERE id = $1', [id]);
    console.log(`[ADMIN] User deleted: ${id}`);
    return data({
      success: true
    });
  }
  return data({
    error: "Method not allowed"
  }, {
    status: 405
  });
}
const route44 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$z,
  loader: loader$B
}, Symbol.toStringTag, { value: "Module" }));
async function action$y({
  request,
  params
}) {
  if (request.method !== "POST") {
    return data({
      error: "Method not allowed"
    }, {
      status: 405
    });
  }
  await requireRole(request, ["admin"]);
  const {
    id
  } = params;
  const body = await request.json();
  const {
    newPassword
  } = body;
  if (!newPassword || newPassword.length < 8) {
    return data({
      error: "A senha deve ter no m√≠nimo 8 caracteres"
    }, {
      status: 400
    });
  }
  const userCheck = await pool.query('SELECT username FROM "user" WHERE id = $1', [id]);
  if (userCheck.rows.length === 0) {
    return data({
      error: "Usu√°rio n√£o encontrado"
    }, {
      status: 404
    });
  }
  const hashedPassword = await bcrypt.hash(newPassword, 10);
  await pool.query(`UPDATE account 
         SET password = $1, "accountId" = $2, "updatedAt" = CURRENT_TIMESTAMP
         WHERE "userId" = $3 AND "providerId" = 'credential'`, [hashedPassword, userCheck.rows[0].username, id]);
  console.log(`[ADMIN] Password reset for user: ${userCheck.rows[0].username}`);
  return data({
    success: true
  });
}
const route45 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$y
}, Symbol.toStringTag, { value: "Module" }));
const loader$A = async () => {
  return redirect("/admin/dashboard");
};
const route46 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader: loader$A
}, Symbol.toStringTag, { value: "Module" }));
const Signup = () => {
  const navigate = useNavigate();
  const [step, setStep] = useState(1);
  const [formData, setFormData] = useState({
    name: "",
    username: "",
    email: "",
    phone: "",
    documento_tipo: "CPF",
    documento: "",
    password: "",
    confirmPassword: ""
  });
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState("");
  const handleChange = (e) => {
    setFormData({
      ...formData,
      [e.target.name]: e.target.value
    });
  };
  const handleSignup = async (e) => {
    e.preventDefault();
    if (formData.password !== formData.confirmPassword) {
      setError("As senhas n√£o coincidem");
      return;
    }
    setIsLoading(true);
    setError("");
    await authClient.signUp.email({
      email: formData.email,
      password: formData.password,
      name: formData.name,
      username: formData.username,
      phone: formData.phone,
      documento: formData.documento,
      documento_tipo: formData.documento_tipo
    }, {
      onSuccess: () => {
        navigate("/admin/dashboard");
      },
      onError: (ctx) => {
        setError(ctx.error.message || "Erro ao criar conta. Verifique os dados.");
        setIsLoading(false);
      }
    });
  };
  return /* @__PURE__ */ jsx("div", {
    className: "min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-2xl w-full bg-white dark:bg-slate-800 rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-700 overflow-hidden flex flex-col md:flex-row",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "hidden md:flex w-1/3 bg-blue-600 p-8 flex-col justify-between text-white relative overflow-hidden",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "relative z-10",
          children: [/* @__PURE__ */ jsx("div", {
            className: "w-12 h-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center mb-6",
            children: /* @__PURE__ */ jsx(Bus, {
              size: 24
            })
          }), /* @__PURE__ */ jsx("h2", {
            className: "text-xl font-black uppercase tracking-widest mb-2",
            children: "J.J√™ Turismo"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-blue-100 text-xs font-medium leading-relaxed",
            children: "Junte-se √† plataforma de gest√£o de log√≠stica e turismo mais completa."
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "relative z-10 space-y-4",
          children: /* @__PURE__ */ jsxs("div", {
            className: "p-4 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/10",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-3 mb-2",
              children: [/* @__PURE__ */ jsx(CircleCheckBig, {
                size: 16,
                className: "text-emerald-400"
              }), /* @__PURE__ */ jsx("span", {
                className: "text-xs font-bold uppercase tracking-wider",
                children: "Gest√£o Total"
              })]
            }), /* @__PURE__ */ jsx("p", {
              className: "text-[10px] text-blue-100/80",
              children: "Controle frotas, motoristas e viagens em um s√≥ lugar."
            })]
          })
        }), /* @__PURE__ */ jsx("div", {
          className: "absolute -bottom-10 -right-10 w-40 h-40 bg-blue-500 rounded-full blur-3xl opacity-50"
        }), /* @__PURE__ */ jsx("div", {
          className: "absolute top-10 -left-10 w-40 h-40 bg-blue-400 rounded-full blur-3xl opacity-30"
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex-1 p-8 md:p-12",
        children: [/* @__PURE__ */ jsxs(Link, {
          to: "/login",
          className: "flex items-center gap-2 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-blue-600 mb-8 transition-colors w-fit",
          children: [/* @__PURE__ */ jsx(ArrowLeft, {
            size: 14
          }), " Voltar para Login"]
        }), /* @__PURE__ */ jsx("h2", {
          className: "text-2xl font-black text-slate-800 dark:text-white mb-2",
          children: "Criar Nova Conta"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-slate-500 dark:text-slate-400 text-sm mb-8 font-medium",
          children: "Preencha os dados completos para acesso ao sistema."
        }), /* @__PURE__ */ jsxs("form", {
          onSubmit: handleSignup,
          className: "space-y-5",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-5",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
                children: "Nome Completo"
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative",
                children: [/* @__PURE__ */ jsx(User, {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                  size: 16
                }), /* @__PURE__ */ jsx("input", {
                  name: "name",
                  type: "text",
                  value: formData.name,
                  onChange: handleChange,
                  className: "w-full pl-10 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold",
                  placeholder: "Seu nome",
                  required: true
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
                children: "Username"
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative",
                children: [/* @__PURE__ */ jsx("span", {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-xs",
                  children: "@"
                }), /* @__PURE__ */ jsx("input", {
                  name: "username",
                  type: "text",
                  value: formData.username,
                  onChange: handleChange,
                  className: "w-full pl-8 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold lowercase",
                  placeholder: "usuario",
                  required: true
                })]
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-5",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
                children: "Email"
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative",
                children: [/* @__PURE__ */ jsx(Mail, {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                  size: 16
                }), /* @__PURE__ */ jsx("input", {
                  name: "email",
                  type: "email",
                  value: formData.email,
                  onChange: handleChange,
                  className: "w-full pl-10 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold",
                  placeholder: "seu@email.com",
                  required: true
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
                children: "Telefone (WhatsApp)"
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative",
                children: [/* @__PURE__ */ jsx(Phone, {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                  size: 16
                }), /* @__PURE__ */ jsx("input", {
                  name: "phone",
                  type: "text",
                  value: formData.phone,
                  onChange: handleChange,
                  className: "w-full pl-10 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold",
                  placeholder: "(00) 00000-0000",
                  required: true
                })]
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1.5",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
              children: "Documento"
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex gap-2",
              children: [/* @__PURE__ */ jsxs("select", {
                name: "documento_tipo",
                value: formData.documento_tipo,
                onChange: handleChange,
                className: "w-24 h-12 px-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none text-xs font-bold",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "CPF",
                  children: "CPF"
                }), /* @__PURE__ */ jsx("option", {
                  value: "RG",
                  children: "RG"
                }), /* @__PURE__ */ jsx("option", {
                  value: "CNPJ",
                  children: "CNPJ"
                }), /* @__PURE__ */ jsx("option", {
                  value: "PASSAPORTE",
                  children: "PASSP"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative flex-1",
                children: [/* @__PURE__ */ jsx(FileText$1, {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                  size: 16
                }), /* @__PURE__ */ jsx("input", {
                  name: "documento",
                  type: "text",
                  value: formData.documento,
                  onChange: handleChange,
                  className: "w-full pl-10 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold",
                  placeholder: "N√∫mero do documento",
                  required: true
                })]
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-5",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
                children: "Senha"
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative",
                children: [/* @__PURE__ */ jsx(Lock, {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                  size: 16
                }), /* @__PURE__ */ jsx("input", {
                  name: "password",
                  type: "password",
                  value: formData.password,
                  onChange: handleChange,
                  className: "w-full pl-10 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold",
                  placeholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
                  required: true,
                  minLength: 8
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[10px] font-black uppercase tracking-widest text-slate-500 ml-1",
                children: "Confirmar Senha"
              }), /* @__PURE__ */ jsxs("div", {
                className: "relative",
                children: [/* @__PURE__ */ jsx(Lock, {
                  className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                  size: 16
                }), /* @__PURE__ */ jsx("input", {
                  name: "confirmPassword",
                  type: "password",
                  value: formData.confirmPassword,
                  onChange: handleChange,
                  className: "w-full pl-10 pr-4 h-12 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm font-semibold",
                  placeholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
                  required: true,
                  minLength: 8
                })]
              })]
            })]
          }), error && /* @__PURE__ */ jsx("div", {
            className: "p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400 text-xs font-bold rounded-xl animate-shake",
            children: error
          }), /* @__PURE__ */ jsx("button", {
            type: "submit",
            disabled: isLoading,
            className: "w-full h-14 bg-blue-600 hover:bg-blue-700 text-white font-black uppercase tracking-widest text-xs rounded-xl shadow-xl shadow-blue-600/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-4",
            children: isLoading ? /* @__PURE__ */ jsx(LoaderCircle, {
              className: "animate-spin",
              size: 20
            }) : "FINALIZAR CADASTRO"
          })]
        })]
      })]
    })
  });
};
const route47 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Signup
}, Symbol.toStringTag, { value: "Module" }));
const MOCK_EMPRESAS = {
  [EmpresaContexto.TURISMO]: {
    id: "emp-01",
    nome_fantasia: "JJ√™ Turismo",
    tipo: EmpresaContexto.TURISMO,
    cor_primaria: "blue"
  },
  [EmpresaContexto.EXPRESS]: {
    id: "emp-02",
    nome_fantasia: "JJ√™ Express",
    tipo: EmpresaContexto.EXPRESS,
    cor_primaria: "orange"
  }
};
const AppContext = createContext(void 0);
const AppProvider = ({ children }) => {
  var _a, _b, _c, _d, _e;
  const [currentContext, setCurrentContext] = useState(EmpresaContexto.TURISMO);
  const [isSidebarOpen, setIsSidebarOpen] = useState(true);
  const [theme, setTheme] = useState(() => {
    if (typeof window !== "undefined") {
      return localStorage.getItem("theme") || "light";
    }
    return "light";
  });
  const [systemSettings, setSystemSettings] = useState({});
  const { data: session2 } = authClient.useSession();
  const refreshSettings = async () => {
    try {
      const { data: sessionData } = await authClient.getSession();
      const orgId = sessionData == null ? void 0 : sessionData.session.activeOrganizationId;
      const publicUrl = orgId ? `${"https://api.yourdomain.com"}/api/public/parameters?organizationId=${orgId}` : `${"https://api.yourdomain.com"}/api/public/parameters`;
      const publicResponse = await fetch(publicUrl);
      let combinedSettings = {};
      if (publicResponse.ok) {
        const publicData = await publicResponse.json();
        publicData.forEach((p) => {
          combinedSettings[p.key] = p.value;
        });
      }
      if (orgId) {
        const orgResponse = await fetch(
          `${"https://api.yourdomain.com"}/api/organization/${orgId}/parameters`,
          { credentials: "include" }
        );
        if (orgResponse.ok) {
          const orgData = await orgResponse.json();
          orgData.forEach((p) => {
            combinedSettings[p.key] = p.value;
          });
        }
      }
      setSystemSettings(combinedSettings);
    } catch (err) {
      console.error("Failed to fetch system settings:", err);
    }
  };
  useEffect(() => {
    refreshSettings();
  }, [session2 == null ? void 0 : session2.session.activeOrganizationId]);
  const switchContext = (context) => {
    setCurrentContext(context);
  };
  const toggleTheme = () => {
    setTheme((prev) => prev === "light" ? "dark" : "light");
  };
  useEffect(() => {
    if (typeof window === "undefined") return;
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }
    localStorage.setItem("theme", theme);
  }, [theme]);
  useEffect(() => {
    if (session2) {
      if (session2.session.activeOrganizationId) {
        authClient.organization.list().then(({ data: data2 }) => {
          const activeOrg = data2 == null ? void 0 : data2.find((o) => o.id === session2.session.activeOrganizationId);
          if (activeOrg) {
            if (activeOrg.slug.toLowerCase().includes("express")) {
              setCurrentContext(EmpresaContexto.EXPRESS);
            } else {
              setCurrentContext(EmpresaContexto.TURISMO);
            }
          }
        });
      } else {
        authClient.organization.list().then(({ data: data2 }) => {
          if (data2 && data2.length > 0) {
            const defaultOrg = data2.find((o) => o.slug.toLowerCase().includes("turismo")) || data2[0];
            console.log("Setting default active organization:", defaultOrg.name);
            authClient.organization.setActive({ organizationId: defaultOrg.id });
          }
        });
      }
    }
  }, [session2]);
  const user2 = {
    id: ((_a = session2 == null ? void 0 : session2.user) == null ? void 0 : _a.id) || "",
    name: ((_b = session2 == null ? void 0 : session2.user) == null ? void 0 : _b.name) || "Usu√°rio",
    role: ((_c = session2 == null ? void 0 : session2.user) == null ? void 0 : _c.role) || "user",
    // Use actual role from session
    avatar: ((_d = session2 == null ? void 0 : session2.user) == null ? void 0 : _d.image) || "",
    email: ((_e = session2 == null ? void 0 : session2.user) == null ? void 0 : _e.email) || ""
  };
  return /* @__PURE__ */ jsx(AppContext.Provider, { value: {
    currentContext,
    switchContext,
    currentEmpresa: MOCK_EMPRESAS[currentContext],
    user: user2,
    isSidebarOpen,
    toggleSidebar: () => setIsSidebarOpen(!isSidebarOpen),
    theme,
    toggleTheme,
    systemSettings,
    refreshSettings
  }, children });
};
const useApp = () => {
  const context = useContext(AppContext);
  if (!context) throw new Error("useApp must be used within AppProvider");
  return context;
};
function r(e) {
  var t, f, n = "";
  if ("string" == typeof e || "number" == typeof e) n += e;
  else if ("object" == typeof e) if (Array.isArray(e)) {
    var o = e.length;
    for (t = 0; t < o; t++) e[t] && (f = r(e[t])) && (n && (n += " "), n += f);
  } else for (f in e) e[f] && (n && (n += " "), n += f);
  return n;
}
function clsx() {
  for (var e, t, f = 0, n = "", o = arguments.length; f < o; f++) (e = arguments[f]) && (t = r(e)) && (n && (n += " "), n += t);
  return n;
}
const concatArrays = (array1, array2) => {
  const combinedArray = new Array(array1.length + array2.length);
  for (let i = 0; i < array1.length; i++) {
    combinedArray[i] = array1[i];
  }
  for (let i = 0; i < array2.length; i++) {
    combinedArray[array1.length + i] = array2[i];
  }
  return combinedArray;
};
const createClassValidatorObject = (classGroupId, validator) => ({
  classGroupId,
  validator
});
const createClassPartObject = (nextPart = /* @__PURE__ */ new Map(), validators = null, classGroupId) => ({
  nextPart,
  validators,
  classGroupId
});
const CLASS_PART_SEPARATOR = "-";
const EMPTY_CONFLICTS = [];
const ARBITRARY_PROPERTY_PREFIX = "arbitrary..";
const createClassGroupUtils = (config2) => {
  const classMap = createClassMap(config2);
  const {
    conflictingClassGroups,
    conflictingClassGroupModifiers
  } = config2;
  const getClassGroupId = (className) => {
    if (className.startsWith("[") && className.endsWith("]")) {
      return getGroupIdForArbitraryProperty(className);
    }
    const classParts = className.split(CLASS_PART_SEPARATOR);
    const startIndex = classParts[0] === "" && classParts.length > 1 ? 1 : 0;
    return getGroupRecursive(classParts, startIndex, classMap);
  };
  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {
    if (hasPostfixModifier) {
      const modifierConflicts = conflictingClassGroupModifiers[classGroupId];
      const baseConflicts = conflictingClassGroups[classGroupId];
      if (modifierConflicts) {
        if (baseConflicts) {
          return concatArrays(baseConflicts, modifierConflicts);
        }
        return modifierConflicts;
      }
      return baseConflicts || EMPTY_CONFLICTS;
    }
    return conflictingClassGroups[classGroupId] || EMPTY_CONFLICTS;
  };
  return {
    getClassGroupId,
    getConflictingClassGroupIds
  };
};
const getGroupRecursive = (classParts, startIndex, classPartObject) => {
  const classPathsLength = classParts.length - startIndex;
  if (classPathsLength === 0) {
    return classPartObject.classGroupId;
  }
  const currentClassPart = classParts[startIndex];
  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);
  if (nextClassPartObject) {
    const result = getGroupRecursive(classParts, startIndex + 1, nextClassPartObject);
    if (result) return result;
  }
  const validators = classPartObject.validators;
  if (validators === null) {
    return void 0;
  }
  const classRest = startIndex === 0 ? classParts.join(CLASS_PART_SEPARATOR) : classParts.slice(startIndex).join(CLASS_PART_SEPARATOR);
  const validatorsLength = validators.length;
  for (let i = 0; i < validatorsLength; i++) {
    const validatorObj = validators[i];
    if (validatorObj.validator(classRest)) {
      return validatorObj.classGroupId;
    }
  }
  return void 0;
};
const getGroupIdForArbitraryProperty = (className) => className.slice(1, -1).indexOf(":") === -1 ? void 0 : (() => {
  const content = className.slice(1, -1);
  const colonIndex = content.indexOf(":");
  const property = content.slice(0, colonIndex);
  return property ? ARBITRARY_PROPERTY_PREFIX + property : void 0;
})();
const createClassMap = (config2) => {
  const {
    theme,
    classGroups
  } = config2;
  return processClassGroups(classGroups, theme);
};
const processClassGroups = (classGroups, theme) => {
  const classMap = createClassPartObject();
  for (const classGroupId in classGroups) {
    const group = classGroups[classGroupId];
    processClassesRecursively(group, classMap, classGroupId, theme);
  }
  return classMap;
};
const processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {
  const len = classGroup.length;
  for (let i = 0; i < len; i++) {
    const classDefinition = classGroup[i];
    processClassDefinition(classDefinition, classPartObject, classGroupId, theme);
  }
};
const processClassDefinition = (classDefinition, classPartObject, classGroupId, theme) => {
  if (typeof classDefinition === "string") {
    processStringDefinition(classDefinition, classPartObject, classGroupId);
    return;
  }
  if (typeof classDefinition === "function") {
    processFunctionDefinition(classDefinition, classPartObject, classGroupId, theme);
    return;
  }
  processObjectDefinition(classDefinition, classPartObject, classGroupId, theme);
};
const processStringDefinition = (classDefinition, classPartObject, classGroupId) => {
  const classPartObjectToEdit = classDefinition === "" ? classPartObject : getPart(classPartObject, classDefinition);
  classPartObjectToEdit.classGroupId = classGroupId;
};
const processFunctionDefinition = (classDefinition, classPartObject, classGroupId, theme) => {
  if (isThemeGetter(classDefinition)) {
    processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);
    return;
  }
  if (classPartObject.validators === null) {
    classPartObject.validators = [];
  }
  classPartObject.validators.push(createClassValidatorObject(classGroupId, classDefinition));
};
const processObjectDefinition = (classDefinition, classPartObject, classGroupId, theme) => {
  const entries = Object.entries(classDefinition);
  const len = entries.length;
  for (let i = 0; i < len; i++) {
    const [key, value] = entries[i];
    processClassesRecursively(value, getPart(classPartObject, key), classGroupId, theme);
  }
};
const getPart = (classPartObject, path2) => {
  let current2 = classPartObject;
  const parts = path2.split(CLASS_PART_SEPARATOR);
  const len = parts.length;
  for (let i = 0; i < len; i++) {
    const part = parts[i];
    let next = current2.nextPart.get(part);
    if (!next) {
      next = createClassPartObject();
      current2.nextPart.set(part, next);
    }
    current2 = next;
  }
  return current2;
};
const isThemeGetter = (func) => "isThemeGetter" in func && func.isThemeGetter === true;
const createLruCache = (maxCacheSize) => {
  if (maxCacheSize < 1) {
    return {
      get: () => void 0,
      set: () => {
      }
    };
  }
  let cacheSize = 0;
  let cache = /* @__PURE__ */ Object.create(null);
  let previousCache = /* @__PURE__ */ Object.create(null);
  const update = (key, value) => {
    cache[key] = value;
    cacheSize++;
    if (cacheSize > maxCacheSize) {
      cacheSize = 0;
      previousCache = cache;
      cache = /* @__PURE__ */ Object.create(null);
    }
  };
  return {
    get(key) {
      let value = cache[key];
      if (value !== void 0) {
        return value;
      }
      if ((value = previousCache[key]) !== void 0) {
        update(key, value);
        return value;
      }
    },
    set(key, value) {
      if (key in cache) {
        cache[key] = value;
      } else {
        update(key, value);
      }
    }
  };
};
const IMPORTANT_MODIFIER = "!";
const MODIFIER_SEPARATOR = ":";
const EMPTY_MODIFIERS = [];
const createResultObject = (modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition, isExternal) => ({
  modifiers,
  hasImportantModifier,
  baseClassName,
  maybePostfixModifierPosition,
  isExternal
});
const createParseClassName = (config2) => {
  const {
    prefix,
    experimentalParseClassName
  } = config2;
  let parseClassName = (className) => {
    const modifiers = [];
    let bracketDepth = 0;
    let parenDepth = 0;
    let modifierStart = 0;
    let postfixModifierPosition;
    const len = className.length;
    for (let index = 0; index < len; index++) {
      const currentCharacter = className[index];
      if (bracketDepth === 0 && parenDepth === 0) {
        if (currentCharacter === MODIFIER_SEPARATOR) {
          modifiers.push(className.slice(modifierStart, index));
          modifierStart = index + 1;
          continue;
        }
        if (currentCharacter === "/") {
          postfixModifierPosition = index;
          continue;
        }
      }
      if (currentCharacter === "[") bracketDepth++;
      else if (currentCharacter === "]") bracketDepth--;
      else if (currentCharacter === "(") parenDepth++;
      else if (currentCharacter === ")") parenDepth--;
    }
    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.slice(modifierStart);
    let baseClassName = baseClassNameWithImportantModifier;
    let hasImportantModifier = false;
    if (baseClassNameWithImportantModifier.endsWith(IMPORTANT_MODIFIER)) {
      baseClassName = baseClassNameWithImportantModifier.slice(0, -1);
      hasImportantModifier = true;
    } else if (
      /**
       * In Tailwind CSS v3 the important modifier was at the start of the base class name. This is still supported for legacy reasons.
       * @see https://github.com/dcastil/tailwind-merge/issues/513#issuecomment-2614029864
       */
      baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER)
    ) {
      baseClassName = baseClassNameWithImportantModifier.slice(1);
      hasImportantModifier = true;
    }
    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : void 0;
    return createResultObject(modifiers, hasImportantModifier, baseClassName, maybePostfixModifierPosition);
  };
  if (prefix) {
    const fullPrefix = prefix + MODIFIER_SEPARATOR;
    const parseClassNameOriginal = parseClassName;
    parseClassName = (className) => className.startsWith(fullPrefix) ? parseClassNameOriginal(className.slice(fullPrefix.length)) : createResultObject(EMPTY_MODIFIERS, false, className, void 0, true);
  }
  if (experimentalParseClassName) {
    const parseClassNameOriginal = parseClassName;
    parseClassName = (className) => experimentalParseClassName({
      className,
      parseClassName: parseClassNameOriginal
    });
  }
  return parseClassName;
};
const createSortModifiers = (config2) => {
  const modifierWeights = /* @__PURE__ */ new Map();
  config2.orderSensitiveModifiers.forEach((mod, index) => {
    modifierWeights.set(mod, 1e6 + index);
  });
  return (modifiers) => {
    const result = [];
    let currentSegment = [];
    for (let i = 0; i < modifiers.length; i++) {
      const modifier = modifiers[i];
      const isArbitrary = modifier[0] === "[";
      const isOrderSensitive = modifierWeights.has(modifier);
      if (isArbitrary || isOrderSensitive) {
        if (currentSegment.length > 0) {
          currentSegment.sort();
          result.push(...currentSegment);
          currentSegment = [];
        }
        result.push(modifier);
      } else {
        currentSegment.push(modifier);
      }
    }
    if (currentSegment.length > 0) {
      currentSegment.sort();
      result.push(...currentSegment);
    }
    return result;
  };
};
const createConfigUtils = (config2) => ({
  cache: createLruCache(config2.cacheSize),
  parseClassName: createParseClassName(config2),
  sortModifiers: createSortModifiers(config2),
  ...createClassGroupUtils(config2)
});
const SPLIT_CLASSES_REGEX = /\s+/;
const mergeClassList = (classList, configUtils) => {
  const {
    parseClassName,
    getClassGroupId,
    getConflictingClassGroupIds,
    sortModifiers
  } = configUtils;
  const classGroupsInConflict = [];
  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);
  let result = "";
  for (let index = classNames.length - 1; index >= 0; index -= 1) {
    const originalClassName = classNames[index];
    const {
      isExternal,
      modifiers,
      hasImportantModifier,
      baseClassName,
      maybePostfixModifierPosition
    } = parseClassName(originalClassName);
    if (isExternal) {
      result = originalClassName + (result.length > 0 ? " " + result : result);
      continue;
    }
    let hasPostfixModifier = !!maybePostfixModifierPosition;
    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);
    if (!classGroupId) {
      if (!hasPostfixModifier) {
        result = originalClassName + (result.length > 0 ? " " + result : result);
        continue;
      }
      classGroupId = getClassGroupId(baseClassName);
      if (!classGroupId) {
        result = originalClassName + (result.length > 0 ? " " + result : result);
        continue;
      }
      hasPostfixModifier = false;
    }
    const variantModifier = modifiers.length === 0 ? "" : modifiers.length === 1 ? modifiers[0] : sortModifiers(modifiers).join(":");
    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;
    const classId = modifierId + classGroupId;
    if (classGroupsInConflict.indexOf(classId) > -1) {
      continue;
    }
    classGroupsInConflict.push(classId);
    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);
    for (let i = 0; i < conflictGroups.length; ++i) {
      const group = conflictGroups[i];
      classGroupsInConflict.push(modifierId + group);
    }
    result = originalClassName + (result.length > 0 ? " " + result : result);
  }
  return result;
};
const twJoin = (...classLists) => {
  let index = 0;
  let argument;
  let resolvedValue;
  let string = "";
  while (index < classLists.length) {
    if (argument = classLists[index++]) {
      if (resolvedValue = toValue(argument)) {
        string && (string += " ");
        string += resolvedValue;
      }
    }
  }
  return string;
};
const toValue = (mix) => {
  if (typeof mix === "string") {
    return mix;
  }
  let resolvedValue;
  let string = "";
  for (let k = 0; k < mix.length; k++) {
    if (mix[k]) {
      if (resolvedValue = toValue(mix[k])) {
        string && (string += " ");
        string += resolvedValue;
      }
    }
  }
  return string;
};
const createTailwindMerge = (createConfigFirst, ...createConfigRest) => {
  let configUtils;
  let cacheGet;
  let cacheSet;
  let functionToCall;
  const initTailwindMerge = (classList) => {
    const config2 = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());
    configUtils = createConfigUtils(config2);
    cacheGet = configUtils.cache.get;
    cacheSet = configUtils.cache.set;
    functionToCall = tailwindMerge;
    return tailwindMerge(classList);
  };
  const tailwindMerge = (classList) => {
    const cachedResult = cacheGet(classList);
    if (cachedResult) {
      return cachedResult;
    }
    const result = mergeClassList(classList, configUtils);
    cacheSet(classList, result);
    return result;
  };
  functionToCall = initTailwindMerge;
  return (...args) => functionToCall(twJoin(...args));
};
const fallbackThemeArr = [];
const fromTheme = (key) => {
  const themeGetter = (theme) => theme[key] || fallbackThemeArr;
  themeGetter.isThemeGetter = true;
  return themeGetter;
};
const arbitraryValueRegex = /^\[(?:(\w[\w-]*):)?(.+)\]$/i;
const arbitraryVariableRegex = /^\((?:(\w[\w-]*):)?(.+)\)$/i;
const fractionRegex = /^\d+\/\d+$/;
const tshirtUnitRegex = /^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/;
const lengthUnitRegex = /\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/;
const colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/;
const shadowRegex = /^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;
const imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;
const isFraction = (value) => fractionRegex.test(value);
const isNumber$1 = (value) => !!value && !Number.isNaN(Number(value));
const isInteger = (value) => !!value && Number.isInteger(Number(value));
const isPercent$1 = (value) => value.endsWith("%") && isNumber$1(value.slice(0, -1));
const isTshirtSize = (value) => tshirtUnitRegex.test(value);
const isAny = () => true;
const isLengthOnly = (value) => (
  // `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.
  // For example, `hsl(0 0% 0%)` would be classified as a length without this check.
  // I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.
  lengthUnitRegex.test(value) && !colorFunctionRegex.test(value)
);
const isNever = () => false;
const isShadow = (value) => shadowRegex.test(value);
const isImage = (value) => imageRegex.test(value);
const isAnyNonArbitrary = (value) => !isArbitraryValue(value) && !isArbitraryVariable(value);
const isArbitrarySize = (value) => getIsArbitraryValue(value, isLabelSize, isNever);
const isArbitraryValue = (value) => arbitraryValueRegex.test(value);
const isArbitraryLength = (value) => getIsArbitraryValue(value, isLabelLength, isLengthOnly);
const isArbitraryNumber = (value) => getIsArbitraryValue(value, isLabelNumber, isNumber$1);
const isArbitraryPosition = (value) => getIsArbitraryValue(value, isLabelPosition, isNever);
const isArbitraryImage = (value) => getIsArbitraryValue(value, isLabelImage, isImage);
const isArbitraryShadow = (value) => getIsArbitraryValue(value, isLabelShadow, isShadow);
const isArbitraryVariable = (value) => arbitraryVariableRegex.test(value);
const isArbitraryVariableLength = (value) => getIsArbitraryVariable(value, isLabelLength);
const isArbitraryVariableFamilyName = (value) => getIsArbitraryVariable(value, isLabelFamilyName);
const isArbitraryVariablePosition = (value) => getIsArbitraryVariable(value, isLabelPosition);
const isArbitraryVariableSize = (value) => getIsArbitraryVariable(value, isLabelSize);
const isArbitraryVariableImage = (value) => getIsArbitraryVariable(value, isLabelImage);
const isArbitraryVariableShadow = (value) => getIsArbitraryVariable(value, isLabelShadow, true);
const getIsArbitraryValue = (value, testLabel, testValue) => {
  const result = arbitraryValueRegex.exec(value);
  if (result) {
    if (result[1]) {
      return testLabel(result[1]);
    }
    return testValue(result[2]);
  }
  return false;
};
const getIsArbitraryVariable = (value, testLabel, shouldMatchNoLabel = false) => {
  const result = arbitraryVariableRegex.exec(value);
  if (result) {
    if (result[1]) {
      return testLabel(result[1]);
    }
    return shouldMatchNoLabel;
  }
  return false;
};
const isLabelPosition = (label) => label === "position" || label === "percentage";
const isLabelImage = (label) => label === "image" || label === "url";
const isLabelSize = (label) => label === "length" || label === "size" || label === "bg-size";
const isLabelLength = (label) => label === "length";
const isLabelNumber = (label) => label === "number";
const isLabelFamilyName = (label) => label === "family-name";
const isLabelShadow = (label) => label === "shadow";
const getDefaultConfig = () => {
  const themeColor = fromTheme("color");
  const themeFont = fromTheme("font");
  const themeText = fromTheme("text");
  const themeFontWeight = fromTheme("font-weight");
  const themeTracking = fromTheme("tracking");
  const themeLeading = fromTheme("leading");
  const themeBreakpoint = fromTheme("breakpoint");
  const themeContainer = fromTheme("container");
  const themeSpacing = fromTheme("spacing");
  const themeRadius = fromTheme("radius");
  const themeShadow = fromTheme("shadow");
  const themeInsetShadow = fromTheme("inset-shadow");
  const themeTextShadow = fromTheme("text-shadow");
  const themeDropShadow = fromTheme("drop-shadow");
  const themeBlur = fromTheme("blur");
  const themePerspective = fromTheme("perspective");
  const themeAspect = fromTheme("aspect");
  const themeEase = fromTheme("ease");
  const themeAnimate = fromTheme("animate");
  const scaleBreak = () => ["auto", "avoid", "all", "avoid-page", "page", "left", "right", "column"];
  const scalePosition = () => [
    "center",
    "top",
    "bottom",
    "left",
    "right",
    "top-left",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "left-top",
    "top-right",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "right-top",
    "bottom-right",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "right-bottom",
    "bottom-left",
    // Deprecated since Tailwind CSS v4.1.0, see https://github.com/tailwindlabs/tailwindcss/pull/17378
    "left-bottom"
  ];
  const scalePositionWithArbitrary = () => [...scalePosition(), isArbitraryVariable, isArbitraryValue];
  const scaleOverflow = () => ["auto", "hidden", "clip", "visible", "scroll"];
  const scaleOverscroll = () => ["auto", "contain", "none"];
  const scaleUnambiguousSpacing = () => [isArbitraryVariable, isArbitraryValue, themeSpacing];
  const scaleInset = () => [isFraction, "full", "auto", ...scaleUnambiguousSpacing()];
  const scaleGridTemplateColsRows = () => [isInteger, "none", "subgrid", isArbitraryVariable, isArbitraryValue];
  const scaleGridColRowStartAndEnd = () => ["auto", {
    span: ["full", isInteger, isArbitraryVariable, isArbitraryValue]
  }, isInteger, isArbitraryVariable, isArbitraryValue];
  const scaleGridColRowStartOrEnd = () => [isInteger, "auto", isArbitraryVariable, isArbitraryValue];
  const scaleGridAutoColsRows = () => ["auto", "min", "max", "fr", isArbitraryVariable, isArbitraryValue];
  const scaleAlignPrimaryAxis = () => ["start", "end", "center", "between", "around", "evenly", "stretch", "baseline", "center-safe", "end-safe"];
  const scaleAlignSecondaryAxis = () => ["start", "end", "center", "stretch", "center-safe", "end-safe"];
  const scaleMargin = () => ["auto", ...scaleUnambiguousSpacing()];
  const scaleSizing = () => [isFraction, "auto", "full", "dvw", "dvh", "lvw", "lvh", "svw", "svh", "min", "max", "fit", ...scaleUnambiguousSpacing()];
  const scaleColor = () => [themeColor, isArbitraryVariable, isArbitraryValue];
  const scaleBgPosition = () => [...scalePosition(), isArbitraryVariablePosition, isArbitraryPosition, {
    position: [isArbitraryVariable, isArbitraryValue]
  }];
  const scaleBgRepeat = () => ["no-repeat", {
    repeat: ["", "x", "y", "space", "round"]
  }];
  const scaleBgSize = () => ["auto", "cover", "contain", isArbitraryVariableSize, isArbitrarySize, {
    size: [isArbitraryVariable, isArbitraryValue]
  }];
  const scaleGradientStopPosition = () => [isPercent$1, isArbitraryVariableLength, isArbitraryLength];
  const scaleRadius = () => [
    // Deprecated since Tailwind CSS v4.0.0
    "",
    "none",
    "full",
    themeRadius,
    isArbitraryVariable,
    isArbitraryValue
  ];
  const scaleBorderWidth = () => ["", isNumber$1, isArbitraryVariableLength, isArbitraryLength];
  const scaleLineStyle = () => ["solid", "dashed", "dotted", "double"];
  const scaleBlendMode = () => ["normal", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "hue", "saturation", "color", "luminosity"];
  const scaleMaskImagePosition = () => [isNumber$1, isPercent$1, isArbitraryVariablePosition, isArbitraryPosition];
  const scaleBlur = () => [
    // Deprecated since Tailwind CSS v4.0.0
    "",
    "none",
    themeBlur,
    isArbitraryVariable,
    isArbitraryValue
  ];
  const scaleRotate = () => ["none", isNumber$1, isArbitraryVariable, isArbitraryValue];
  const scaleScale = () => ["none", isNumber$1, isArbitraryVariable, isArbitraryValue];
  const scaleSkew = () => [isNumber$1, isArbitraryVariable, isArbitraryValue];
  const scaleTranslate = () => [isFraction, "full", ...scaleUnambiguousSpacing()];
  return {
    cacheSize: 500,
    theme: {
      animate: ["spin", "ping", "pulse", "bounce"],
      aspect: ["video"],
      blur: [isTshirtSize],
      breakpoint: [isTshirtSize],
      color: [isAny],
      container: [isTshirtSize],
      "drop-shadow": [isTshirtSize],
      ease: ["in", "out", "in-out"],
      font: [isAnyNonArbitrary],
      "font-weight": ["thin", "extralight", "light", "normal", "medium", "semibold", "bold", "extrabold", "black"],
      "inset-shadow": [isTshirtSize],
      leading: ["none", "tight", "snug", "normal", "relaxed", "loose"],
      perspective: ["dramatic", "near", "normal", "midrange", "distant", "none"],
      radius: [isTshirtSize],
      shadow: [isTshirtSize],
      spacing: ["px", isNumber$1],
      text: [isTshirtSize],
      "text-shadow": [isTshirtSize],
      tracking: ["tighter", "tight", "normal", "wide", "wider", "widest"]
    },
    classGroups: {
      // --------------
      // --- Layout ---
      // --------------
      /**
       * Aspect Ratio
       * @see https://tailwindcss.com/docs/aspect-ratio
       */
      aspect: [{
        aspect: ["auto", "square", isFraction, isArbitraryValue, isArbitraryVariable, themeAspect]
      }],
      /**
       * Container
       * @see https://tailwindcss.com/docs/container
       * @deprecated since Tailwind CSS v4.0.0
       */
      container: ["container"],
      /**
       * Columns
       * @see https://tailwindcss.com/docs/columns
       */
      columns: [{
        columns: [isNumber$1, isArbitraryValue, isArbitraryVariable, themeContainer]
      }],
      /**
       * Break After
       * @see https://tailwindcss.com/docs/break-after
       */
      "break-after": [{
        "break-after": scaleBreak()
      }],
      /**
       * Break Before
       * @see https://tailwindcss.com/docs/break-before
       */
      "break-before": [{
        "break-before": scaleBreak()
      }],
      /**
       * Break Inside
       * @see https://tailwindcss.com/docs/break-inside
       */
      "break-inside": [{
        "break-inside": ["auto", "avoid", "avoid-page", "avoid-column"]
      }],
      /**
       * Box Decoration Break
       * @see https://tailwindcss.com/docs/box-decoration-break
       */
      "box-decoration": [{
        "box-decoration": ["slice", "clone"]
      }],
      /**
       * Box Sizing
       * @see https://tailwindcss.com/docs/box-sizing
       */
      box: [{
        box: ["border", "content"]
      }],
      /**
       * Display
       * @see https://tailwindcss.com/docs/display
       */
      display: ["block", "inline-block", "inline", "flex", "inline-flex", "table", "inline-table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row-group", "table-row", "flow-root", "grid", "inline-grid", "contents", "list-item", "hidden"],
      /**
       * Screen Reader Only
       * @see https://tailwindcss.com/docs/display#screen-reader-only
       */
      sr: ["sr-only", "not-sr-only"],
      /**
       * Floats
       * @see https://tailwindcss.com/docs/float
       */
      float: [{
        float: ["right", "left", "none", "start", "end"]
      }],
      /**
       * Clear
       * @see https://tailwindcss.com/docs/clear
       */
      clear: [{
        clear: ["left", "right", "both", "none", "start", "end"]
      }],
      /**
       * Isolation
       * @see https://tailwindcss.com/docs/isolation
       */
      isolation: ["isolate", "isolation-auto"],
      /**
       * Object Fit
       * @see https://tailwindcss.com/docs/object-fit
       */
      "object-fit": [{
        object: ["contain", "cover", "fill", "none", "scale-down"]
      }],
      /**
       * Object Position
       * @see https://tailwindcss.com/docs/object-position
       */
      "object-position": [{
        object: scalePositionWithArbitrary()
      }],
      /**
       * Overflow
       * @see https://tailwindcss.com/docs/overflow
       */
      overflow: [{
        overflow: scaleOverflow()
      }],
      /**
       * Overflow X
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-x": [{
        "overflow-x": scaleOverflow()
      }],
      /**
       * Overflow Y
       * @see https://tailwindcss.com/docs/overflow
       */
      "overflow-y": [{
        "overflow-y": scaleOverflow()
      }],
      /**
       * Overscroll Behavior
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      overscroll: [{
        overscroll: scaleOverscroll()
      }],
      /**
       * Overscroll Behavior X
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-x": [{
        "overscroll-x": scaleOverscroll()
      }],
      /**
       * Overscroll Behavior Y
       * @see https://tailwindcss.com/docs/overscroll-behavior
       */
      "overscroll-y": [{
        "overscroll-y": scaleOverscroll()
      }],
      /**
       * Position
       * @see https://tailwindcss.com/docs/position
       */
      position: ["static", "fixed", "absolute", "relative", "sticky"],
      /**
       * Top / Right / Bottom / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      inset: [{
        inset: scaleInset()
      }],
      /**
       * Right / Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-x": [{
        "inset-x": scaleInset()
      }],
      /**
       * Top / Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      "inset-y": [{
        "inset-y": scaleInset()
      }],
      /**
       * Start
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      start: [{
        start: scaleInset()
      }],
      /**
       * End
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      end: [{
        end: scaleInset()
      }],
      /**
       * Top
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      top: [{
        top: scaleInset()
      }],
      /**
       * Right
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      right: [{
        right: scaleInset()
      }],
      /**
       * Bottom
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      bottom: [{
        bottom: scaleInset()
      }],
      /**
       * Left
       * @see https://tailwindcss.com/docs/top-right-bottom-left
       */
      left: [{
        left: scaleInset()
      }],
      /**
       * Visibility
       * @see https://tailwindcss.com/docs/visibility
       */
      visibility: ["visible", "invisible", "collapse"],
      /**
       * Z-Index
       * @see https://tailwindcss.com/docs/z-index
       */
      z: [{
        z: [isInteger, "auto", isArbitraryVariable, isArbitraryValue]
      }],
      // ------------------------
      // --- Flexbox and Grid ---
      // ------------------------
      /**
       * Flex Basis
       * @see https://tailwindcss.com/docs/flex-basis
       */
      basis: [{
        basis: [isFraction, "full", "auto", themeContainer, ...scaleUnambiguousSpacing()]
      }],
      /**
       * Flex Direction
       * @see https://tailwindcss.com/docs/flex-direction
       */
      "flex-direction": [{
        flex: ["row", "row-reverse", "col", "col-reverse"]
      }],
      /**
       * Flex Wrap
       * @see https://tailwindcss.com/docs/flex-wrap
       */
      "flex-wrap": [{
        flex: ["nowrap", "wrap", "wrap-reverse"]
      }],
      /**
       * Flex
       * @see https://tailwindcss.com/docs/flex
       */
      flex: [{
        flex: [isNumber$1, isFraction, "auto", "initial", "none", isArbitraryValue]
      }],
      /**
       * Flex Grow
       * @see https://tailwindcss.com/docs/flex-grow
       */
      grow: [{
        grow: ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Flex Shrink
       * @see https://tailwindcss.com/docs/flex-shrink
       */
      shrink: [{
        shrink: ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Order
       * @see https://tailwindcss.com/docs/order
       */
      order: [{
        order: [isInteger, "first", "last", "none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Grid Template Columns
       * @see https://tailwindcss.com/docs/grid-template-columns
       */
      "grid-cols": [{
        "grid-cols": scaleGridTemplateColsRows()
      }],
      /**
       * Grid Column Start / End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start-end": [{
        col: scaleGridColRowStartAndEnd()
      }],
      /**
       * Grid Column Start
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-start": [{
        "col-start": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Column End
       * @see https://tailwindcss.com/docs/grid-column
       */
      "col-end": [{
        "col-end": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Template Rows
       * @see https://tailwindcss.com/docs/grid-template-rows
       */
      "grid-rows": [{
        "grid-rows": scaleGridTemplateColsRows()
      }],
      /**
       * Grid Row Start / End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start-end": [{
        row: scaleGridColRowStartAndEnd()
      }],
      /**
       * Grid Row Start
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-start": [{
        "row-start": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Row End
       * @see https://tailwindcss.com/docs/grid-row
       */
      "row-end": [{
        "row-end": scaleGridColRowStartOrEnd()
      }],
      /**
       * Grid Auto Flow
       * @see https://tailwindcss.com/docs/grid-auto-flow
       */
      "grid-flow": [{
        "grid-flow": ["row", "col", "dense", "row-dense", "col-dense"]
      }],
      /**
       * Grid Auto Columns
       * @see https://tailwindcss.com/docs/grid-auto-columns
       */
      "auto-cols": [{
        "auto-cols": scaleGridAutoColsRows()
      }],
      /**
       * Grid Auto Rows
       * @see https://tailwindcss.com/docs/grid-auto-rows
       */
      "auto-rows": [{
        "auto-rows": scaleGridAutoColsRows()
      }],
      /**
       * Gap
       * @see https://tailwindcss.com/docs/gap
       */
      gap: [{
        gap: scaleUnambiguousSpacing()
      }],
      /**
       * Gap X
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-x": [{
        "gap-x": scaleUnambiguousSpacing()
      }],
      /**
       * Gap Y
       * @see https://tailwindcss.com/docs/gap
       */
      "gap-y": [{
        "gap-y": scaleUnambiguousSpacing()
      }],
      /**
       * Justify Content
       * @see https://tailwindcss.com/docs/justify-content
       */
      "justify-content": [{
        justify: [...scaleAlignPrimaryAxis(), "normal"]
      }],
      /**
       * Justify Items
       * @see https://tailwindcss.com/docs/justify-items
       */
      "justify-items": [{
        "justify-items": [...scaleAlignSecondaryAxis(), "normal"]
      }],
      /**
       * Justify Self
       * @see https://tailwindcss.com/docs/justify-self
       */
      "justify-self": [{
        "justify-self": ["auto", ...scaleAlignSecondaryAxis()]
      }],
      /**
       * Align Content
       * @see https://tailwindcss.com/docs/align-content
       */
      "align-content": [{
        content: ["normal", ...scaleAlignPrimaryAxis()]
      }],
      /**
       * Align Items
       * @see https://tailwindcss.com/docs/align-items
       */
      "align-items": [{
        items: [...scaleAlignSecondaryAxis(), {
          baseline: ["", "last"]
        }]
      }],
      /**
       * Align Self
       * @see https://tailwindcss.com/docs/align-self
       */
      "align-self": [{
        self: ["auto", ...scaleAlignSecondaryAxis(), {
          baseline: ["", "last"]
        }]
      }],
      /**
       * Place Content
       * @see https://tailwindcss.com/docs/place-content
       */
      "place-content": [{
        "place-content": scaleAlignPrimaryAxis()
      }],
      /**
       * Place Items
       * @see https://tailwindcss.com/docs/place-items
       */
      "place-items": [{
        "place-items": [...scaleAlignSecondaryAxis(), "baseline"]
      }],
      /**
       * Place Self
       * @see https://tailwindcss.com/docs/place-self
       */
      "place-self": [{
        "place-self": ["auto", ...scaleAlignSecondaryAxis()]
      }],
      // Spacing
      /**
       * Padding
       * @see https://tailwindcss.com/docs/padding
       */
      p: [{
        p: scaleUnambiguousSpacing()
      }],
      /**
       * Padding X
       * @see https://tailwindcss.com/docs/padding
       */
      px: [{
        px: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Y
       * @see https://tailwindcss.com/docs/padding
       */
      py: [{
        py: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Start
       * @see https://tailwindcss.com/docs/padding
       */
      ps: [{
        ps: scaleUnambiguousSpacing()
      }],
      /**
       * Padding End
       * @see https://tailwindcss.com/docs/padding
       */
      pe: [{
        pe: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Top
       * @see https://tailwindcss.com/docs/padding
       */
      pt: [{
        pt: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Right
       * @see https://tailwindcss.com/docs/padding
       */
      pr: [{
        pr: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Bottom
       * @see https://tailwindcss.com/docs/padding
       */
      pb: [{
        pb: scaleUnambiguousSpacing()
      }],
      /**
       * Padding Left
       * @see https://tailwindcss.com/docs/padding
       */
      pl: [{
        pl: scaleUnambiguousSpacing()
      }],
      /**
       * Margin
       * @see https://tailwindcss.com/docs/margin
       */
      m: [{
        m: scaleMargin()
      }],
      /**
       * Margin X
       * @see https://tailwindcss.com/docs/margin
       */
      mx: [{
        mx: scaleMargin()
      }],
      /**
       * Margin Y
       * @see https://tailwindcss.com/docs/margin
       */
      my: [{
        my: scaleMargin()
      }],
      /**
       * Margin Start
       * @see https://tailwindcss.com/docs/margin
       */
      ms: [{
        ms: scaleMargin()
      }],
      /**
       * Margin End
       * @see https://tailwindcss.com/docs/margin
       */
      me: [{
        me: scaleMargin()
      }],
      /**
       * Margin Top
       * @see https://tailwindcss.com/docs/margin
       */
      mt: [{
        mt: scaleMargin()
      }],
      /**
       * Margin Right
       * @see https://tailwindcss.com/docs/margin
       */
      mr: [{
        mr: scaleMargin()
      }],
      /**
       * Margin Bottom
       * @see https://tailwindcss.com/docs/margin
       */
      mb: [{
        mb: scaleMargin()
      }],
      /**
       * Margin Left
       * @see https://tailwindcss.com/docs/margin
       */
      ml: [{
        ml: scaleMargin()
      }],
      /**
       * Space Between X
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-x": [{
        "space-x": scaleUnambiguousSpacing()
      }],
      /**
       * Space Between X Reverse
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-x-reverse": ["space-x-reverse"],
      /**
       * Space Between Y
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-y": [{
        "space-y": scaleUnambiguousSpacing()
      }],
      /**
       * Space Between Y Reverse
       * @see https://tailwindcss.com/docs/margin#adding-space-between-children
       */
      "space-y-reverse": ["space-y-reverse"],
      // --------------
      // --- Sizing ---
      // --------------
      /**
       * Size
       * @see https://tailwindcss.com/docs/width#setting-both-width-and-height
       */
      size: [{
        size: scaleSizing()
      }],
      /**
       * Width
       * @see https://tailwindcss.com/docs/width
       */
      w: [{
        w: [themeContainer, "screen", ...scaleSizing()]
      }],
      /**
       * Min-Width
       * @see https://tailwindcss.com/docs/min-width
       */
      "min-w": [{
        "min-w": [
          themeContainer,
          "screen",
          /** Deprecated. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          "none",
          ...scaleSizing()
        ]
      }],
      /**
       * Max-Width
       * @see https://tailwindcss.com/docs/max-width
       */
      "max-w": [{
        "max-w": [
          themeContainer,
          "screen",
          "none",
          /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          "prose",
          /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          {
            screen: [themeBreakpoint]
          },
          ...scaleSizing()
        ]
      }],
      /**
       * Height
       * @see https://tailwindcss.com/docs/height
       */
      h: [{
        h: ["screen", "lh", ...scaleSizing()]
      }],
      /**
       * Min-Height
       * @see https://tailwindcss.com/docs/min-height
       */
      "min-h": [{
        "min-h": ["screen", "lh", "none", ...scaleSizing()]
      }],
      /**
       * Max-Height
       * @see https://tailwindcss.com/docs/max-height
       */
      "max-h": [{
        "max-h": ["screen", "lh", ...scaleSizing()]
      }],
      // ------------------
      // --- Typography ---
      // ------------------
      /**
       * Font Size
       * @see https://tailwindcss.com/docs/font-size
       */
      "font-size": [{
        text: ["base", themeText, isArbitraryVariableLength, isArbitraryLength]
      }],
      /**
       * Font Smoothing
       * @see https://tailwindcss.com/docs/font-smoothing
       */
      "font-smoothing": ["antialiased", "subpixel-antialiased"],
      /**
       * Font Style
       * @see https://tailwindcss.com/docs/font-style
       */
      "font-style": ["italic", "not-italic"],
      /**
       * Font Weight
       * @see https://tailwindcss.com/docs/font-weight
       */
      "font-weight": [{
        font: [themeFontWeight, isArbitraryVariable, isArbitraryNumber]
      }],
      /**
       * Font Stretch
       * @see https://tailwindcss.com/docs/font-stretch
       */
      "font-stretch": [{
        "font-stretch": ["ultra-condensed", "extra-condensed", "condensed", "semi-condensed", "normal", "semi-expanded", "expanded", "extra-expanded", "ultra-expanded", isPercent$1, isArbitraryValue]
      }],
      /**
       * Font Family
       * @see https://tailwindcss.com/docs/font-family
       */
      "font-family": [{
        font: [isArbitraryVariableFamilyName, isArbitraryValue, themeFont]
      }],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-normal": ["normal-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-ordinal": ["ordinal"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-slashed-zero": ["slashed-zero"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-figure": ["lining-nums", "oldstyle-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-spacing": ["proportional-nums", "tabular-nums"],
      /**
       * Font Variant Numeric
       * @see https://tailwindcss.com/docs/font-variant-numeric
       */
      "fvn-fraction": ["diagonal-fractions", "stacked-fractions"],
      /**
       * Letter Spacing
       * @see https://tailwindcss.com/docs/letter-spacing
       */
      tracking: [{
        tracking: [themeTracking, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Line Clamp
       * @see https://tailwindcss.com/docs/line-clamp
       */
      "line-clamp": [{
        "line-clamp": [isNumber$1, "none", isArbitraryVariable, isArbitraryNumber]
      }],
      /**
       * Line Height
       * @see https://tailwindcss.com/docs/line-height
       */
      leading: [{
        leading: [
          /** Deprecated since Tailwind CSS v4.0.0. @see https://github.com/tailwindlabs/tailwindcss.com/issues/2027#issuecomment-2620152757 */
          themeLeading,
          ...scaleUnambiguousSpacing()
        ]
      }],
      /**
       * List Style Image
       * @see https://tailwindcss.com/docs/list-style-image
       */
      "list-image": [{
        "list-image": ["none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * List Style Position
       * @see https://tailwindcss.com/docs/list-style-position
       */
      "list-style-position": [{
        list: ["inside", "outside"]
      }],
      /**
       * List Style Type
       * @see https://tailwindcss.com/docs/list-style-type
       */
      "list-style-type": [{
        list: ["disc", "decimal", "none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Text Alignment
       * @see https://tailwindcss.com/docs/text-align
       */
      "text-alignment": [{
        text: ["left", "center", "right", "justify", "start", "end"]
      }],
      /**
       * Placeholder Color
       * @deprecated since Tailwind CSS v3.0.0
       * @see https://v3.tailwindcss.com/docs/placeholder-color
       */
      "placeholder-color": [{
        placeholder: scaleColor()
      }],
      /**
       * Text Color
       * @see https://tailwindcss.com/docs/text-color
       */
      "text-color": [{
        text: scaleColor()
      }],
      /**
       * Text Decoration
       * @see https://tailwindcss.com/docs/text-decoration
       */
      "text-decoration": ["underline", "overline", "line-through", "no-underline"],
      /**
       * Text Decoration Style
       * @see https://tailwindcss.com/docs/text-decoration-style
       */
      "text-decoration-style": [{
        decoration: [...scaleLineStyle(), "wavy"]
      }],
      /**
       * Text Decoration Thickness
       * @see https://tailwindcss.com/docs/text-decoration-thickness
       */
      "text-decoration-thickness": [{
        decoration: [isNumber$1, "from-font", "auto", isArbitraryVariable, isArbitraryLength]
      }],
      /**
       * Text Decoration Color
       * @see https://tailwindcss.com/docs/text-decoration-color
       */
      "text-decoration-color": [{
        decoration: scaleColor()
      }],
      /**
       * Text Underline Offset
       * @see https://tailwindcss.com/docs/text-underline-offset
       */
      "underline-offset": [{
        "underline-offset": [isNumber$1, "auto", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Text Transform
       * @see https://tailwindcss.com/docs/text-transform
       */
      "text-transform": ["uppercase", "lowercase", "capitalize", "normal-case"],
      /**
       * Text Overflow
       * @see https://tailwindcss.com/docs/text-overflow
       */
      "text-overflow": ["truncate", "text-ellipsis", "text-clip"],
      /**
       * Text Wrap
       * @see https://tailwindcss.com/docs/text-wrap
       */
      "text-wrap": [{
        text: ["wrap", "nowrap", "balance", "pretty"]
      }],
      /**
       * Text Indent
       * @see https://tailwindcss.com/docs/text-indent
       */
      indent: [{
        indent: scaleUnambiguousSpacing()
      }],
      /**
       * Vertical Alignment
       * @see https://tailwindcss.com/docs/vertical-align
       */
      "vertical-align": [{
        align: ["baseline", "top", "middle", "bottom", "text-top", "text-bottom", "sub", "super", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Whitespace
       * @see https://tailwindcss.com/docs/whitespace
       */
      whitespace: [{
        whitespace: ["normal", "nowrap", "pre", "pre-line", "pre-wrap", "break-spaces"]
      }],
      /**
       * Word Break
       * @see https://tailwindcss.com/docs/word-break
       */
      break: [{
        break: ["normal", "words", "all", "keep"]
      }],
      /**
       * Overflow Wrap
       * @see https://tailwindcss.com/docs/overflow-wrap
       */
      wrap: [{
        wrap: ["break-word", "anywhere", "normal"]
      }],
      /**
       * Hyphens
       * @see https://tailwindcss.com/docs/hyphens
       */
      hyphens: [{
        hyphens: ["none", "manual", "auto"]
      }],
      /**
       * Content
       * @see https://tailwindcss.com/docs/content
       */
      content: [{
        content: ["none", isArbitraryVariable, isArbitraryValue]
      }],
      // -------------------
      // --- Backgrounds ---
      // -------------------
      /**
       * Background Attachment
       * @see https://tailwindcss.com/docs/background-attachment
       */
      "bg-attachment": [{
        bg: ["fixed", "local", "scroll"]
      }],
      /**
       * Background Clip
       * @see https://tailwindcss.com/docs/background-clip
       */
      "bg-clip": [{
        "bg-clip": ["border", "padding", "content", "text"]
      }],
      /**
       * Background Origin
       * @see https://tailwindcss.com/docs/background-origin
       */
      "bg-origin": [{
        "bg-origin": ["border", "padding", "content"]
      }],
      /**
       * Background Position
       * @see https://tailwindcss.com/docs/background-position
       */
      "bg-position": [{
        bg: scaleBgPosition()
      }],
      /**
       * Background Repeat
       * @see https://tailwindcss.com/docs/background-repeat
       */
      "bg-repeat": [{
        bg: scaleBgRepeat()
      }],
      /**
       * Background Size
       * @see https://tailwindcss.com/docs/background-size
       */
      "bg-size": [{
        bg: scaleBgSize()
      }],
      /**
       * Background Image
       * @see https://tailwindcss.com/docs/background-image
       */
      "bg-image": [{
        bg: ["none", {
          linear: [{
            to: ["t", "tr", "r", "br", "b", "bl", "l", "tl"]
          }, isInteger, isArbitraryVariable, isArbitraryValue],
          radial: ["", isArbitraryVariable, isArbitraryValue],
          conic: [isInteger, isArbitraryVariable, isArbitraryValue]
        }, isArbitraryVariableImage, isArbitraryImage]
      }],
      /**
       * Background Color
       * @see https://tailwindcss.com/docs/background-color
       */
      "bg-color": [{
        bg: scaleColor()
      }],
      /**
       * Gradient Color Stops From Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from-pos": [{
        from: scaleGradientStopPosition()
      }],
      /**
       * Gradient Color Stops Via Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via-pos": [{
        via: scaleGradientStopPosition()
      }],
      /**
       * Gradient Color Stops To Position
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to-pos": [{
        to: scaleGradientStopPosition()
      }],
      /**
       * Gradient Color Stops From
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-from": [{
        from: scaleColor()
      }],
      /**
       * Gradient Color Stops Via
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-via": [{
        via: scaleColor()
      }],
      /**
       * Gradient Color Stops To
       * @see https://tailwindcss.com/docs/gradient-color-stops
       */
      "gradient-to": [{
        to: scaleColor()
      }],
      // ---------------
      // --- Borders ---
      // ---------------
      /**
       * Border Radius
       * @see https://tailwindcss.com/docs/border-radius
       */
      rounded: [{
        rounded: scaleRadius()
      }],
      /**
       * Border Radius Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-s": [{
        "rounded-s": scaleRadius()
      }],
      /**
       * Border Radius End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-e": [{
        "rounded-e": scaleRadius()
      }],
      /**
       * Border Radius Top
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-t": [{
        "rounded-t": scaleRadius()
      }],
      /**
       * Border Radius Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-r": [{
        "rounded-r": scaleRadius()
      }],
      /**
       * Border Radius Bottom
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-b": [{
        "rounded-b": scaleRadius()
      }],
      /**
       * Border Radius Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-l": [{
        "rounded-l": scaleRadius()
      }],
      /**
       * Border Radius Start Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ss": [{
        "rounded-ss": scaleRadius()
      }],
      /**
       * Border Radius Start End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-se": [{
        "rounded-se": scaleRadius()
      }],
      /**
       * Border Radius End End
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-ee": [{
        "rounded-ee": scaleRadius()
      }],
      /**
       * Border Radius End Start
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-es": [{
        "rounded-es": scaleRadius()
      }],
      /**
       * Border Radius Top Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tl": [{
        "rounded-tl": scaleRadius()
      }],
      /**
       * Border Radius Top Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-tr": [{
        "rounded-tr": scaleRadius()
      }],
      /**
       * Border Radius Bottom Right
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-br": [{
        "rounded-br": scaleRadius()
      }],
      /**
       * Border Radius Bottom Left
       * @see https://tailwindcss.com/docs/border-radius
       */
      "rounded-bl": [{
        "rounded-bl": scaleRadius()
      }],
      /**
       * Border Width
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w": [{
        border: scaleBorderWidth()
      }],
      /**
       * Border Width X
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-x": [{
        "border-x": scaleBorderWidth()
      }],
      /**
       * Border Width Y
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-y": [{
        "border-y": scaleBorderWidth()
      }],
      /**
       * Border Width Start
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-s": [{
        "border-s": scaleBorderWidth()
      }],
      /**
       * Border Width End
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-e": [{
        "border-e": scaleBorderWidth()
      }],
      /**
       * Border Width Top
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-t": [{
        "border-t": scaleBorderWidth()
      }],
      /**
       * Border Width Right
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-r": [{
        "border-r": scaleBorderWidth()
      }],
      /**
       * Border Width Bottom
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-b": [{
        "border-b": scaleBorderWidth()
      }],
      /**
       * Border Width Left
       * @see https://tailwindcss.com/docs/border-width
       */
      "border-w-l": [{
        "border-l": scaleBorderWidth()
      }],
      /**
       * Divide Width X
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-x": [{
        "divide-x": scaleBorderWidth()
      }],
      /**
       * Divide Width X Reverse
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-x-reverse": ["divide-x-reverse"],
      /**
       * Divide Width Y
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-y": [{
        "divide-y": scaleBorderWidth()
      }],
      /**
       * Divide Width Y Reverse
       * @see https://tailwindcss.com/docs/border-width#between-children
       */
      "divide-y-reverse": ["divide-y-reverse"],
      /**
       * Border Style
       * @see https://tailwindcss.com/docs/border-style
       */
      "border-style": [{
        border: [...scaleLineStyle(), "hidden", "none"]
      }],
      /**
       * Divide Style
       * @see https://tailwindcss.com/docs/border-style#setting-the-divider-style
       */
      "divide-style": [{
        divide: [...scaleLineStyle(), "hidden", "none"]
      }],
      /**
       * Border Color
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color": [{
        border: scaleColor()
      }],
      /**
       * Border Color X
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-x": [{
        "border-x": scaleColor()
      }],
      /**
       * Border Color Y
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-y": [{
        "border-y": scaleColor()
      }],
      /**
       * Border Color S
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-s": [{
        "border-s": scaleColor()
      }],
      /**
       * Border Color E
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-e": [{
        "border-e": scaleColor()
      }],
      /**
       * Border Color Top
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-t": [{
        "border-t": scaleColor()
      }],
      /**
       * Border Color Right
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-r": [{
        "border-r": scaleColor()
      }],
      /**
       * Border Color Bottom
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-b": [{
        "border-b": scaleColor()
      }],
      /**
       * Border Color Left
       * @see https://tailwindcss.com/docs/border-color
       */
      "border-color-l": [{
        "border-l": scaleColor()
      }],
      /**
       * Divide Color
       * @see https://tailwindcss.com/docs/divide-color
       */
      "divide-color": [{
        divide: scaleColor()
      }],
      /**
       * Outline Style
       * @see https://tailwindcss.com/docs/outline-style
       */
      "outline-style": [{
        outline: [...scaleLineStyle(), "none", "hidden"]
      }],
      /**
       * Outline Offset
       * @see https://tailwindcss.com/docs/outline-offset
       */
      "outline-offset": [{
        "outline-offset": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Outline Width
       * @see https://tailwindcss.com/docs/outline-width
       */
      "outline-w": [{
        outline: ["", isNumber$1, isArbitraryVariableLength, isArbitraryLength]
      }],
      /**
       * Outline Color
       * @see https://tailwindcss.com/docs/outline-color
       */
      "outline-color": [{
        outline: scaleColor()
      }],
      // ---------------
      // --- Effects ---
      // ---------------
      /**
       * Box Shadow
       * @see https://tailwindcss.com/docs/box-shadow
       */
      shadow: [{
        shadow: [
          // Deprecated since Tailwind CSS v4.0.0
          "",
          "none",
          themeShadow,
          isArbitraryVariableShadow,
          isArbitraryShadow
        ]
      }],
      /**
       * Box Shadow Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-shadow-color
       */
      "shadow-color": [{
        shadow: scaleColor()
      }],
      /**
       * Inset Box Shadow
       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-shadow
       */
      "inset-shadow": [{
        "inset-shadow": ["none", themeInsetShadow, isArbitraryVariableShadow, isArbitraryShadow]
      }],
      /**
       * Inset Box Shadow Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-shadow-color
       */
      "inset-shadow-color": [{
        "inset-shadow": scaleColor()
      }],
      /**
       * Ring Width
       * @see https://tailwindcss.com/docs/box-shadow#adding-a-ring
       */
      "ring-w": [{
        ring: scaleBorderWidth()
      }],
      /**
       * Ring Width Inset
       * @see https://v3.tailwindcss.com/docs/ring-width#inset-rings
       * @deprecated since Tailwind CSS v4.0.0
       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158
       */
      "ring-w-inset": ["ring-inset"],
      /**
       * Ring Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-ring-color
       */
      "ring-color": [{
        ring: scaleColor()
      }],
      /**
       * Ring Offset Width
       * @see https://v3.tailwindcss.com/docs/ring-offset-width
       * @deprecated since Tailwind CSS v4.0.0
       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158
       */
      "ring-offset-w": [{
        "ring-offset": [isNumber$1, isArbitraryLength]
      }],
      /**
       * Ring Offset Color
       * @see https://v3.tailwindcss.com/docs/ring-offset-color
       * @deprecated since Tailwind CSS v4.0.0
       * @see https://github.com/tailwindlabs/tailwindcss/blob/v4.0.0/packages/tailwindcss/src/utilities.ts#L4158
       */
      "ring-offset-color": [{
        "ring-offset": scaleColor()
      }],
      /**
       * Inset Ring Width
       * @see https://tailwindcss.com/docs/box-shadow#adding-an-inset-ring
       */
      "inset-ring-w": [{
        "inset-ring": scaleBorderWidth()
      }],
      /**
       * Inset Ring Color
       * @see https://tailwindcss.com/docs/box-shadow#setting-the-inset-ring-color
       */
      "inset-ring-color": [{
        "inset-ring": scaleColor()
      }],
      /**
       * Text Shadow
       * @see https://tailwindcss.com/docs/text-shadow
       */
      "text-shadow": [{
        "text-shadow": ["none", themeTextShadow, isArbitraryVariableShadow, isArbitraryShadow]
      }],
      /**
       * Text Shadow Color
       * @see https://tailwindcss.com/docs/text-shadow#setting-the-shadow-color
       */
      "text-shadow-color": [{
        "text-shadow": scaleColor()
      }],
      /**
       * Opacity
       * @see https://tailwindcss.com/docs/opacity
       */
      opacity: [{
        opacity: [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Mix Blend Mode
       * @see https://tailwindcss.com/docs/mix-blend-mode
       */
      "mix-blend": [{
        "mix-blend": [...scaleBlendMode(), "plus-darker", "plus-lighter"]
      }],
      /**
       * Background Blend Mode
       * @see https://tailwindcss.com/docs/background-blend-mode
       */
      "bg-blend": [{
        "bg-blend": scaleBlendMode()
      }],
      /**
       * Mask Clip
       * @see https://tailwindcss.com/docs/mask-clip
       */
      "mask-clip": [{
        "mask-clip": ["border", "padding", "content", "fill", "stroke", "view"]
      }, "mask-no-clip"],
      /**
       * Mask Composite
       * @see https://tailwindcss.com/docs/mask-composite
       */
      "mask-composite": [{
        mask: ["add", "subtract", "intersect", "exclude"]
      }],
      /**
       * Mask Image
       * @see https://tailwindcss.com/docs/mask-image
       */
      "mask-image-linear-pos": [{
        "mask-linear": [isNumber$1]
      }],
      "mask-image-linear-from-pos": [{
        "mask-linear-from": scaleMaskImagePosition()
      }],
      "mask-image-linear-to-pos": [{
        "mask-linear-to": scaleMaskImagePosition()
      }],
      "mask-image-linear-from-color": [{
        "mask-linear-from": scaleColor()
      }],
      "mask-image-linear-to-color": [{
        "mask-linear-to": scaleColor()
      }],
      "mask-image-t-from-pos": [{
        "mask-t-from": scaleMaskImagePosition()
      }],
      "mask-image-t-to-pos": [{
        "mask-t-to": scaleMaskImagePosition()
      }],
      "mask-image-t-from-color": [{
        "mask-t-from": scaleColor()
      }],
      "mask-image-t-to-color": [{
        "mask-t-to": scaleColor()
      }],
      "mask-image-r-from-pos": [{
        "mask-r-from": scaleMaskImagePosition()
      }],
      "mask-image-r-to-pos": [{
        "mask-r-to": scaleMaskImagePosition()
      }],
      "mask-image-r-from-color": [{
        "mask-r-from": scaleColor()
      }],
      "mask-image-r-to-color": [{
        "mask-r-to": scaleColor()
      }],
      "mask-image-b-from-pos": [{
        "mask-b-from": scaleMaskImagePosition()
      }],
      "mask-image-b-to-pos": [{
        "mask-b-to": scaleMaskImagePosition()
      }],
      "mask-image-b-from-color": [{
        "mask-b-from": scaleColor()
      }],
      "mask-image-b-to-color": [{
        "mask-b-to": scaleColor()
      }],
      "mask-image-l-from-pos": [{
        "mask-l-from": scaleMaskImagePosition()
      }],
      "mask-image-l-to-pos": [{
        "mask-l-to": scaleMaskImagePosition()
      }],
      "mask-image-l-from-color": [{
        "mask-l-from": scaleColor()
      }],
      "mask-image-l-to-color": [{
        "mask-l-to": scaleColor()
      }],
      "mask-image-x-from-pos": [{
        "mask-x-from": scaleMaskImagePosition()
      }],
      "mask-image-x-to-pos": [{
        "mask-x-to": scaleMaskImagePosition()
      }],
      "mask-image-x-from-color": [{
        "mask-x-from": scaleColor()
      }],
      "mask-image-x-to-color": [{
        "mask-x-to": scaleColor()
      }],
      "mask-image-y-from-pos": [{
        "mask-y-from": scaleMaskImagePosition()
      }],
      "mask-image-y-to-pos": [{
        "mask-y-to": scaleMaskImagePosition()
      }],
      "mask-image-y-from-color": [{
        "mask-y-from": scaleColor()
      }],
      "mask-image-y-to-color": [{
        "mask-y-to": scaleColor()
      }],
      "mask-image-radial": [{
        "mask-radial": [isArbitraryVariable, isArbitraryValue]
      }],
      "mask-image-radial-from-pos": [{
        "mask-radial-from": scaleMaskImagePosition()
      }],
      "mask-image-radial-to-pos": [{
        "mask-radial-to": scaleMaskImagePosition()
      }],
      "mask-image-radial-from-color": [{
        "mask-radial-from": scaleColor()
      }],
      "mask-image-radial-to-color": [{
        "mask-radial-to": scaleColor()
      }],
      "mask-image-radial-shape": [{
        "mask-radial": ["circle", "ellipse"]
      }],
      "mask-image-radial-size": [{
        "mask-radial": [{
          closest: ["side", "corner"],
          farthest: ["side", "corner"]
        }]
      }],
      "mask-image-radial-pos": [{
        "mask-radial-at": scalePosition()
      }],
      "mask-image-conic-pos": [{
        "mask-conic": [isNumber$1]
      }],
      "mask-image-conic-from-pos": [{
        "mask-conic-from": scaleMaskImagePosition()
      }],
      "mask-image-conic-to-pos": [{
        "mask-conic-to": scaleMaskImagePosition()
      }],
      "mask-image-conic-from-color": [{
        "mask-conic-from": scaleColor()
      }],
      "mask-image-conic-to-color": [{
        "mask-conic-to": scaleColor()
      }],
      /**
       * Mask Mode
       * @see https://tailwindcss.com/docs/mask-mode
       */
      "mask-mode": [{
        mask: ["alpha", "luminance", "match"]
      }],
      /**
       * Mask Origin
       * @see https://tailwindcss.com/docs/mask-origin
       */
      "mask-origin": [{
        "mask-origin": ["border", "padding", "content", "fill", "stroke", "view"]
      }],
      /**
       * Mask Position
       * @see https://tailwindcss.com/docs/mask-position
       */
      "mask-position": [{
        mask: scaleBgPosition()
      }],
      /**
       * Mask Repeat
       * @see https://tailwindcss.com/docs/mask-repeat
       */
      "mask-repeat": [{
        mask: scaleBgRepeat()
      }],
      /**
       * Mask Size
       * @see https://tailwindcss.com/docs/mask-size
       */
      "mask-size": [{
        mask: scaleBgSize()
      }],
      /**
       * Mask Type
       * @see https://tailwindcss.com/docs/mask-type
       */
      "mask-type": [{
        "mask-type": ["alpha", "luminance"]
      }],
      /**
       * Mask Image
       * @see https://tailwindcss.com/docs/mask-image
       */
      "mask-image": [{
        mask: ["none", isArbitraryVariable, isArbitraryValue]
      }],
      // ---------------
      // --- Filters ---
      // ---------------
      /**
       * Filter
       * @see https://tailwindcss.com/docs/filter
       */
      filter: [{
        filter: [
          // Deprecated since Tailwind CSS v3.0.0
          "",
          "none",
          isArbitraryVariable,
          isArbitraryValue
        ]
      }],
      /**
       * Blur
       * @see https://tailwindcss.com/docs/blur
       */
      blur: [{
        blur: scaleBlur()
      }],
      /**
       * Brightness
       * @see https://tailwindcss.com/docs/brightness
       */
      brightness: [{
        brightness: [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Contrast
       * @see https://tailwindcss.com/docs/contrast
       */
      contrast: [{
        contrast: [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Drop Shadow
       * @see https://tailwindcss.com/docs/drop-shadow
       */
      "drop-shadow": [{
        "drop-shadow": [
          // Deprecated since Tailwind CSS v4.0.0
          "",
          "none",
          themeDropShadow,
          isArbitraryVariableShadow,
          isArbitraryShadow
        ]
      }],
      /**
       * Drop Shadow Color
       * @see https://tailwindcss.com/docs/filter-drop-shadow#setting-the-shadow-color
       */
      "drop-shadow-color": [{
        "drop-shadow": scaleColor()
      }],
      /**
       * Grayscale
       * @see https://tailwindcss.com/docs/grayscale
       */
      grayscale: [{
        grayscale: ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Hue Rotate
       * @see https://tailwindcss.com/docs/hue-rotate
       */
      "hue-rotate": [{
        "hue-rotate": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Invert
       * @see https://tailwindcss.com/docs/invert
       */
      invert: [{
        invert: ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Saturate
       * @see https://tailwindcss.com/docs/saturate
       */
      saturate: [{
        saturate: [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Sepia
       * @see https://tailwindcss.com/docs/sepia
       */
      sepia: [{
        sepia: ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Filter
       * @see https://tailwindcss.com/docs/backdrop-filter
       */
      "backdrop-filter": [{
        "backdrop-filter": [
          // Deprecated since Tailwind CSS v3.0.0
          "",
          "none",
          isArbitraryVariable,
          isArbitraryValue
        ]
      }],
      /**
       * Backdrop Blur
       * @see https://tailwindcss.com/docs/backdrop-blur
       */
      "backdrop-blur": [{
        "backdrop-blur": scaleBlur()
      }],
      /**
       * Backdrop Brightness
       * @see https://tailwindcss.com/docs/backdrop-brightness
       */
      "backdrop-brightness": [{
        "backdrop-brightness": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Contrast
       * @see https://tailwindcss.com/docs/backdrop-contrast
       */
      "backdrop-contrast": [{
        "backdrop-contrast": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Grayscale
       * @see https://tailwindcss.com/docs/backdrop-grayscale
       */
      "backdrop-grayscale": [{
        "backdrop-grayscale": ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Hue Rotate
       * @see https://tailwindcss.com/docs/backdrop-hue-rotate
       */
      "backdrop-hue-rotate": [{
        "backdrop-hue-rotate": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Invert
       * @see https://tailwindcss.com/docs/backdrop-invert
       */
      "backdrop-invert": [{
        "backdrop-invert": ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Opacity
       * @see https://tailwindcss.com/docs/backdrop-opacity
       */
      "backdrop-opacity": [{
        "backdrop-opacity": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Saturate
       * @see https://tailwindcss.com/docs/backdrop-saturate
       */
      "backdrop-saturate": [{
        "backdrop-saturate": [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Backdrop Sepia
       * @see https://tailwindcss.com/docs/backdrop-sepia
       */
      "backdrop-sepia": [{
        "backdrop-sepia": ["", isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      // --------------
      // --- Tables ---
      // --------------
      /**
       * Border Collapse
       * @see https://tailwindcss.com/docs/border-collapse
       */
      "border-collapse": [{
        border: ["collapse", "separate"]
      }],
      /**
       * Border Spacing
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing": [{
        "border-spacing": scaleUnambiguousSpacing()
      }],
      /**
       * Border Spacing X
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-x": [{
        "border-spacing-x": scaleUnambiguousSpacing()
      }],
      /**
       * Border Spacing Y
       * @see https://tailwindcss.com/docs/border-spacing
       */
      "border-spacing-y": [{
        "border-spacing-y": scaleUnambiguousSpacing()
      }],
      /**
       * Table Layout
       * @see https://tailwindcss.com/docs/table-layout
       */
      "table-layout": [{
        table: ["auto", "fixed"]
      }],
      /**
       * Caption Side
       * @see https://tailwindcss.com/docs/caption-side
       */
      caption: [{
        caption: ["top", "bottom"]
      }],
      // ---------------------------------
      // --- Transitions and Animation ---
      // ---------------------------------
      /**
       * Transition Property
       * @see https://tailwindcss.com/docs/transition-property
       */
      transition: [{
        transition: ["", "all", "colors", "opacity", "shadow", "transform", "none", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Transition Behavior
       * @see https://tailwindcss.com/docs/transition-behavior
       */
      "transition-behavior": [{
        transition: ["normal", "discrete"]
      }],
      /**
       * Transition Duration
       * @see https://tailwindcss.com/docs/transition-duration
       */
      duration: [{
        duration: [isNumber$1, "initial", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Transition Timing Function
       * @see https://tailwindcss.com/docs/transition-timing-function
       */
      ease: [{
        ease: ["linear", "initial", themeEase, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Transition Delay
       * @see https://tailwindcss.com/docs/transition-delay
       */
      delay: [{
        delay: [isNumber$1, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Animation
       * @see https://tailwindcss.com/docs/animation
       */
      animate: [{
        animate: ["none", themeAnimate, isArbitraryVariable, isArbitraryValue]
      }],
      // ------------------
      // --- Transforms ---
      // ------------------
      /**
       * Backface Visibility
       * @see https://tailwindcss.com/docs/backface-visibility
       */
      backface: [{
        backface: ["hidden", "visible"]
      }],
      /**
       * Perspective
       * @see https://tailwindcss.com/docs/perspective
       */
      perspective: [{
        perspective: [themePerspective, isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Perspective Origin
       * @see https://tailwindcss.com/docs/perspective-origin
       */
      "perspective-origin": [{
        "perspective-origin": scalePositionWithArbitrary()
      }],
      /**
       * Rotate
       * @see https://tailwindcss.com/docs/rotate
       */
      rotate: [{
        rotate: scaleRotate()
      }],
      /**
       * Rotate X
       * @see https://tailwindcss.com/docs/rotate
       */
      "rotate-x": [{
        "rotate-x": scaleRotate()
      }],
      /**
       * Rotate Y
       * @see https://tailwindcss.com/docs/rotate
       */
      "rotate-y": [{
        "rotate-y": scaleRotate()
      }],
      /**
       * Rotate Z
       * @see https://tailwindcss.com/docs/rotate
       */
      "rotate-z": [{
        "rotate-z": scaleRotate()
      }],
      /**
       * Scale
       * @see https://tailwindcss.com/docs/scale
       */
      scale: [{
        scale: scaleScale()
      }],
      /**
       * Scale X
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-x": [{
        "scale-x": scaleScale()
      }],
      /**
       * Scale Y
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-y": [{
        "scale-y": scaleScale()
      }],
      /**
       * Scale Z
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-z": [{
        "scale-z": scaleScale()
      }],
      /**
       * Scale 3D
       * @see https://tailwindcss.com/docs/scale
       */
      "scale-3d": ["scale-3d"],
      /**
       * Skew
       * @see https://tailwindcss.com/docs/skew
       */
      skew: [{
        skew: scaleSkew()
      }],
      /**
       * Skew X
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-x": [{
        "skew-x": scaleSkew()
      }],
      /**
       * Skew Y
       * @see https://tailwindcss.com/docs/skew
       */
      "skew-y": [{
        "skew-y": scaleSkew()
      }],
      /**
       * Transform
       * @see https://tailwindcss.com/docs/transform
       */
      transform: [{
        transform: [isArbitraryVariable, isArbitraryValue, "", "none", "gpu", "cpu"]
      }],
      /**
       * Transform Origin
       * @see https://tailwindcss.com/docs/transform-origin
       */
      "transform-origin": [{
        origin: scalePositionWithArbitrary()
      }],
      /**
       * Transform Style
       * @see https://tailwindcss.com/docs/transform-style
       */
      "transform-style": [{
        transform: ["3d", "flat"]
      }],
      /**
       * Translate
       * @see https://tailwindcss.com/docs/translate
       */
      translate: [{
        translate: scaleTranslate()
      }],
      /**
       * Translate X
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-x": [{
        "translate-x": scaleTranslate()
      }],
      /**
       * Translate Y
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-y": [{
        "translate-y": scaleTranslate()
      }],
      /**
       * Translate Z
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-z": [{
        "translate-z": scaleTranslate()
      }],
      /**
       * Translate None
       * @see https://tailwindcss.com/docs/translate
       */
      "translate-none": ["translate-none"],
      // ---------------------
      // --- Interactivity ---
      // ---------------------
      /**
       * Accent Color
       * @see https://tailwindcss.com/docs/accent-color
       */
      accent: [{
        accent: scaleColor()
      }],
      /**
       * Appearance
       * @see https://tailwindcss.com/docs/appearance
       */
      appearance: [{
        appearance: ["none", "auto"]
      }],
      /**
       * Caret Color
       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities
       */
      "caret-color": [{
        caret: scaleColor()
      }],
      /**
       * Color Scheme
       * @see https://tailwindcss.com/docs/color-scheme
       */
      "color-scheme": [{
        scheme: ["normal", "dark", "light", "light-dark", "only-dark", "only-light"]
      }],
      /**
       * Cursor
       * @see https://tailwindcss.com/docs/cursor
       */
      cursor: [{
        cursor: ["auto", "default", "pointer", "wait", "text", "move", "help", "not-allowed", "none", "context-menu", "progress", "cell", "crosshair", "vertical-text", "alias", "copy", "no-drop", "grab", "grabbing", "all-scroll", "col-resize", "row-resize", "n-resize", "e-resize", "s-resize", "w-resize", "ne-resize", "nw-resize", "se-resize", "sw-resize", "ew-resize", "ns-resize", "nesw-resize", "nwse-resize", "zoom-in", "zoom-out", isArbitraryVariable, isArbitraryValue]
      }],
      /**
       * Field Sizing
       * @see https://tailwindcss.com/docs/field-sizing
       */
      "field-sizing": [{
        "field-sizing": ["fixed", "content"]
      }],
      /**
       * Pointer Events
       * @see https://tailwindcss.com/docs/pointer-events
       */
      "pointer-events": [{
        "pointer-events": ["auto", "none"]
      }],
      /**
       * Resize
       * @see https://tailwindcss.com/docs/resize
       */
      resize: [{
        resize: ["none", "", "y", "x"]
      }],
      /**
       * Scroll Behavior
       * @see https://tailwindcss.com/docs/scroll-behavior
       */
      "scroll-behavior": [{
        scroll: ["auto", "smooth"]
      }],
      /**
       * Scroll Margin
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-m": [{
        "scroll-m": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin X
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mx": [{
        "scroll-mx": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Y
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-my": [{
        "scroll-my": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Start
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ms": [{
        "scroll-ms": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin End
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-me": [{
        "scroll-me": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Top
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mt": [{
        "scroll-mt": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Right
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mr": [{
        "scroll-mr": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Bottom
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-mb": [{
        "scroll-mb": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Margin Left
       * @see https://tailwindcss.com/docs/scroll-margin
       */
      "scroll-ml": [{
        "scroll-ml": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-p": [{
        "scroll-p": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding X
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-px": [{
        "scroll-px": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Y
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-py": [{
        "scroll-py": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Start
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-ps": [{
        "scroll-ps": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding End
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pe": [{
        "scroll-pe": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Top
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pt": [{
        "scroll-pt": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Right
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pr": [{
        "scroll-pr": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Bottom
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pb": [{
        "scroll-pb": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Padding Left
       * @see https://tailwindcss.com/docs/scroll-padding
       */
      "scroll-pl": [{
        "scroll-pl": scaleUnambiguousSpacing()
      }],
      /**
       * Scroll Snap Align
       * @see https://tailwindcss.com/docs/scroll-snap-align
       */
      "snap-align": [{
        snap: ["start", "end", "center", "align-none"]
      }],
      /**
       * Scroll Snap Stop
       * @see https://tailwindcss.com/docs/scroll-snap-stop
       */
      "snap-stop": [{
        snap: ["normal", "always"]
      }],
      /**
       * Scroll Snap Type
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-type": [{
        snap: ["none", "x", "y", "both"]
      }],
      /**
       * Scroll Snap Type Strictness
       * @see https://tailwindcss.com/docs/scroll-snap-type
       */
      "snap-strictness": [{
        snap: ["mandatory", "proximity"]
      }],
      /**
       * Touch Action
       * @see https://tailwindcss.com/docs/touch-action
       */
      touch: [{
        touch: ["auto", "none", "manipulation"]
      }],
      /**
       * Touch Action X
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-x": [{
        "touch-pan": ["x", "left", "right"]
      }],
      /**
       * Touch Action Y
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-y": [{
        "touch-pan": ["y", "up", "down"]
      }],
      /**
       * Touch Action Pinch Zoom
       * @see https://tailwindcss.com/docs/touch-action
       */
      "touch-pz": ["touch-pinch-zoom"],
      /**
       * User Select
       * @see https://tailwindcss.com/docs/user-select
       */
      select: [{
        select: ["none", "text", "all", "auto"]
      }],
      /**
       * Will Change
       * @see https://tailwindcss.com/docs/will-change
       */
      "will-change": [{
        "will-change": ["auto", "scroll", "contents", "transform", isArbitraryVariable, isArbitraryValue]
      }],
      // -----------
      // --- SVG ---
      // -----------
      /**
       * Fill
       * @see https://tailwindcss.com/docs/fill
       */
      fill: [{
        fill: ["none", ...scaleColor()]
      }],
      /**
       * Stroke Width
       * @see https://tailwindcss.com/docs/stroke-width
       */
      "stroke-w": [{
        stroke: [isNumber$1, isArbitraryVariableLength, isArbitraryLength, isArbitraryNumber]
      }],
      /**
       * Stroke
       * @see https://tailwindcss.com/docs/stroke
       */
      stroke: [{
        stroke: ["none", ...scaleColor()]
      }],
      // ---------------------
      // --- Accessibility ---
      // ---------------------
      /**
       * Forced Color Adjust
       * @see https://tailwindcss.com/docs/forced-color-adjust
       */
      "forced-color-adjust": [{
        "forced-color-adjust": ["auto", "none"]
      }]
    },
    conflictingClassGroups: {
      overflow: ["overflow-x", "overflow-y"],
      overscroll: ["overscroll-x", "overscroll-y"],
      inset: ["inset-x", "inset-y", "start", "end", "top", "right", "bottom", "left"],
      "inset-x": ["right", "left"],
      "inset-y": ["top", "bottom"],
      flex: ["basis", "grow", "shrink"],
      gap: ["gap-x", "gap-y"],
      p: ["px", "py", "ps", "pe", "pt", "pr", "pb", "pl"],
      px: ["pr", "pl"],
      py: ["pt", "pb"],
      m: ["mx", "my", "ms", "me", "mt", "mr", "mb", "ml"],
      mx: ["mr", "ml"],
      my: ["mt", "mb"],
      size: ["w", "h"],
      "font-size": ["leading"],
      "fvn-normal": ["fvn-ordinal", "fvn-slashed-zero", "fvn-figure", "fvn-spacing", "fvn-fraction"],
      "fvn-ordinal": ["fvn-normal"],
      "fvn-slashed-zero": ["fvn-normal"],
      "fvn-figure": ["fvn-normal"],
      "fvn-spacing": ["fvn-normal"],
      "fvn-fraction": ["fvn-normal"],
      "line-clamp": ["display", "overflow"],
      rounded: ["rounded-s", "rounded-e", "rounded-t", "rounded-r", "rounded-b", "rounded-l", "rounded-ss", "rounded-se", "rounded-ee", "rounded-es", "rounded-tl", "rounded-tr", "rounded-br", "rounded-bl"],
      "rounded-s": ["rounded-ss", "rounded-es"],
      "rounded-e": ["rounded-se", "rounded-ee"],
      "rounded-t": ["rounded-tl", "rounded-tr"],
      "rounded-r": ["rounded-tr", "rounded-br"],
      "rounded-b": ["rounded-br", "rounded-bl"],
      "rounded-l": ["rounded-tl", "rounded-bl"],
      "border-spacing": ["border-spacing-x", "border-spacing-y"],
      "border-w": ["border-w-x", "border-w-y", "border-w-s", "border-w-e", "border-w-t", "border-w-r", "border-w-b", "border-w-l"],
      "border-w-x": ["border-w-r", "border-w-l"],
      "border-w-y": ["border-w-t", "border-w-b"],
      "border-color": ["border-color-x", "border-color-y", "border-color-s", "border-color-e", "border-color-t", "border-color-r", "border-color-b", "border-color-l"],
      "border-color-x": ["border-color-r", "border-color-l"],
      "border-color-y": ["border-color-t", "border-color-b"],
      translate: ["translate-x", "translate-y", "translate-none"],
      "translate-none": ["translate", "translate-x", "translate-y", "translate-z"],
      "scroll-m": ["scroll-mx", "scroll-my", "scroll-ms", "scroll-me", "scroll-mt", "scroll-mr", "scroll-mb", "scroll-ml"],
      "scroll-mx": ["scroll-mr", "scroll-ml"],
      "scroll-my": ["scroll-mt", "scroll-mb"],
      "scroll-p": ["scroll-px", "scroll-py", "scroll-ps", "scroll-pe", "scroll-pt", "scroll-pr", "scroll-pb", "scroll-pl"],
      "scroll-px": ["scroll-pr", "scroll-pl"],
      "scroll-py": ["scroll-pt", "scroll-pb"],
      touch: ["touch-x", "touch-y", "touch-pz"],
      "touch-x": ["touch"],
      "touch-y": ["touch"],
      "touch-pz": ["touch"]
    },
    conflictingClassGroupModifiers: {
      "font-size": ["leading"]
    },
    orderSensitiveModifiers: ["*", "**", "after", "backdrop", "before", "details-content", "file", "first-letter", "first-line", "marker", "placeholder", "selection"]
  };
};
const twMerge = /* @__PURE__ */ createTailwindMerge(getDefaultConfig);
function cn$1(...inputs) {
  return twMerge(clsx(inputs));
}
const SidebarItem = ({ icon: Icon2, label, to: to2, activeColor }) => {
  const location = useLocation();
  const active = location.pathname === to2 || location.pathname.startsWith(`${to2}/`);
  const colorStyles = {
    blue: "text-primary bg-primary/10 shadow-[0_0_15px_-3px_rgba(59,130,246,0.3)] hover:bg-primary/20",
    orange: "text-orange-600 bg-orange-500/10 shadow-[0_0_15px_-3px_rgba(234,88,12,0.3)] hover:bg-orange-500/20"
  };
  const activeClass = colorStyles[activeColor] || "bg-accent text-accent-foreground";
  return /* @__PURE__ */ jsxs(
    Link,
    {
      to: to2,
      className: cn$1(
        "flex items-center gap-3 px-4 py-2.5 mx-3 rounded-xl cursor-pointer transition-all duration-300 group mb-1 relative overflow-hidden",
        active ? activeClass : "text-muted-foreground/70 hover:bg-accent/40 hover:text-foreground hover:translate-x-1"
      ),
      children: [
        active && /* @__PURE__ */ jsx("span", { className: cn$1(
          "absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 rounded-r-full",
          activeColor === "blue" ? "bg-primary" : "bg-orange-600"
        ) }),
        /* @__PURE__ */ jsx(
          Icon2,
          {
            size: 18,
            className: cn$1(
              "transition-all duration-300 group-hover:scale-110 group-hover:rotate-3",
              active ? "stroke-[2.5px]" : "opacity-70 group-hover:opacity-100"
            )
          }
        ),
        /* @__PURE__ */ jsx("span", { className: cn$1(
          "text-sm font-bold tracking-tight transition-colors",
          active ? "font-black" : "font-semibold"
        ), children: label }),
        !active && /* @__PURE__ */ jsx(ChevronRight, { size: 14, className: "ml-auto opacity-0 -translate-x-2 group-hover:opacity-40 group-hover:translate-x-0 transition-all duration-300" })
      ]
    }
  );
};
const Sidebar = () => {
  const { currentContext, isSidebarOpen, systemSettings, user: user2 } = useApp();
  const userRole = user2.role;
  const themeColor = currentContext === EmpresaContexto.TURISMO ? "blue" : "orange";
  if (!isSidebarOpen) return null;
  const canAccess = (roles) => roles.includes(userRole);
  return /* @__PURE__ */ jsxs("div", { className: "w-64 h-screen bg-card/95 backdrop-blur-xl border-r border-border/50 flex flex-col sticky top-0 left-0 shrink-0 transition-all duration-300 z-50 shadow-2xl shadow-black/5", children: [
    /* @__PURE__ */ jsxs("div", { className: "h-20 flex items-center px-6 mb-6", children: [
      /* @__PURE__ */ jsx("div", { className: cn$1(
        "w-11 h-11 rounded-2xl flex items-center justify-center text-white font-black mr-3 shadow-2xl transition-all duration-500 hover:scale-110 hover:rotate-6 active:scale-95 group",
        currentContext === EmpresaContexto.TURISMO ? "bg-gradient-to-br from-primary to-blue-700 shadow-primary/40" : "bg-gradient-to-br from-orange-500 to-orange-700 shadow-orange-600/40"
      ), children: /* @__PURE__ */ jsx(Bus, { size: 24, strokeWidth: 2.5, className: "group-hover:animate-bounce" }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col", children: [
        /* @__PURE__ */ jsx("span", { className: "font-black text-foreground text-lg leading-tight uppercase tracking-tighter", children: systemSettings.system_name || "SGTL" }),
        /* @__PURE__ */ jsx("span", { className: "text-[12px] font-bold text-muted-foreground/60 tracking-[0.2em] -mt-1 uppercase", children: systemSettings.system_display_version || "v2.2" })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex-1 overflow-y-auto py-4 space-y-1", children: [
      /* @__PURE__ */ jsx(SidebarItem, { icon: LayoutDashboard, label: "Dashboard", to: "/admin/dashboard", activeColor: themeColor }),
      /* @__PURE__ */ jsx("div", { className: "mt-2 px-6 py-3 text-xs font-bold text-slate-400 uppercase tracking-wider", children: "Principal" }),
      currentContext === EmpresaContexto.TURISMO && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsx(SidebarItem, { icon: Bus, label: "Viagens", to: "/admin/trips", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: Ticket, label: "Reservas", to: "/admin/reservations", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: Users, label: "Fretamento B2B", to: "/admin/charter", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: MapPin, label: "Rotas", to: "/admin/routes", activeColor: themeColor })
      ] }),
      currentContext === EmpresaContexto.EXPRESS && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsx(SidebarItem, { icon: Truck, label: "Rotas Express", to: "/admin/routes", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: Package, label: "Encomendas", to: "/admin/parcels", activeColor: themeColor })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "my-4 mx-6 border-t border-slate-100 dark:border-slate-700" }),
      /* @__PURE__ */ jsx("div", { className: "px-6 py-3 text-xs font-bold text-slate-400 uppercase tracking-wider", children: "Operacional" }),
      /* @__PURE__ */ jsx(SidebarItem, { icon: Users, label: "Clientes (CRM)", to: "/admin/clients", activeColor: themeColor }),
      /* @__PURE__ */ jsx(SidebarItem, { icon: currentContext === EmpresaContexto.TURISMO ? Bus : Truck, label: "Frota", to: "/admin/fleet", activeColor: themeColor }),
      /* @__PURE__ */ jsx(SidebarItem, { icon: Users, label: "Motoristas", to: "/admin/drivers", activeColor: themeColor }),
      /* @__PURE__ */ jsx(SidebarItem, { icon: Wrench, label: "Manuten√ß√£o", to: "/admin/maintenance", activeColor: themeColor }),
      /* @__PURE__ */ jsx("div", { className: "my-4 mx-6 border-t border-slate-100 dark:border-slate-700" }),
      /* @__PURE__ */ jsx("div", { className: "px-6 py-3 text-xs font-bold text-slate-400 uppercase tracking-wider", children: "Gest√£o" }),
      canAccess(["admin", "financeiro"]) && /* @__PURE__ */ jsx(SidebarItem, { icon: CreditCard, label: "Financeiro", to: "/admin/finance", activeColor: themeColor }),
      /* @__PURE__ */ jsx(SidebarItem, { icon: TrendingUp, label: "Relat√≥rios", to: "/admin/reports", activeColor: themeColor }),
      /* @__PURE__ */ jsx(SidebarItem, { icon: FileText$1, label: "Documentos", to: "/admin/documents", activeColor: themeColor }),
      canAccess(["admin"]) && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsx(SidebarItem, { icon: Users, label: "Usu√°rios", to: "/admin/users", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: Building2, label: "Organiza√ß√µes", to: "/admin/organizations", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: Database, label: "Cadastros Auxiliares", to: "/admin/auxiliary-data", activeColor: themeColor }),
        /* @__PURE__ */ jsx(SidebarItem, { icon: Settings, label: "Configura√ß√µes", to: "/admin/settings", activeColor: themeColor })
      ] })
    ] })
  ] });
};
const Select = SelectPrimitive.Root;
const SelectValue = SelectPrimitive.Value;
const SelectTrigger = React.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs(
  SelectPrimitive.Trigger,
  {
    ref,
    className: cn$1(
      "flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsx(SelectPrimitive.Icon, { asChild: true, children: /* @__PURE__ */ jsx(ChevronDown, { className: "h-4 w-4 opacity-50" }) })
    ]
  }
));
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName;
const SelectScrollUpButton = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  SelectPrimitive.ScrollUpButton,
  {
    ref,
    className: cn$1(
      "flex cursor-default items-center justify-center py-1",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsx(ChevronUp, { className: "h-4 w-4" })
  }
));
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;
const SelectScrollDownButton = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  SelectPrimitive.ScrollDownButton,
  {
    ref,
    className: cn$1(
      "flex cursor-default items-center justify-center py-1",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsx(ChevronDown, { className: "h-4 w-4" })
  }
));
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;
const SelectContent = React.forwardRef(({ className, children, position = "popper", ...props }, ref) => /* @__PURE__ */ jsx(SelectPrimitive.Portal, { children: /* @__PURE__ */ jsxs(
  SelectPrimitive.Content,
  {
    ref,
    className: cn$1(
      "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      position === "popper" && "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
      className
    ),
    position,
    ...props,
    children: [
      /* @__PURE__ */ jsx(SelectScrollUpButton, {}),
      /* @__PURE__ */ jsx(
        SelectPrimitive.Viewport,
        {
          className: cn$1(
            "p-1",
            position === "popper" && "h-[var(--radix-select-content-available-height)] w-full min-w-[var(--radix-select-trigger-width)]"
          ),
          children
        }
      ),
      /* @__PURE__ */ jsx(SelectScrollDownButton, {})
    ]
  }
) }));
SelectContent.displayName = SelectPrimitive.Content.displayName;
const SelectLabel = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  SelectPrimitive.Label,
  {
    ref,
    className: cn$1("px-2 py-1.5 text-sm font-semibold", className),
    ...props
  }
));
SelectLabel.displayName = SelectPrimitive.Label.displayName;
const SelectItem = React.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs(
  SelectPrimitive.Item,
  {
    ref,
    className: cn$1(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx("span", { className: "absolute right-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsx(SelectPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx(Check, { className: "h-4 w-4" }) }) }),
      /* @__PURE__ */ jsx(SelectPrimitive.ItemText, { children })
    ]
  }
));
SelectItem.displayName = SelectPrimitive.Item.displayName;
const SelectSeparator = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  SelectPrimitive.Separator,
  {
    ref,
    className: cn$1("-mx-1 my-1 h-px bg-muted", className),
    ...props
  }
));
SelectSeparator.displayName = SelectPrimitive.Separator.displayName;
const Avatar = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AvatarPrimitive.Root,
  {
    ref,
    className: cn$1(
      "relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",
      className
    ),
    ...props
  }
));
Avatar.displayName = AvatarPrimitive.Root.displayName;
const AvatarImage = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AvatarPrimitive.Image,
  {
    ref,
    className: cn$1("aspect-square h-full w-full", className),
    ...props
  }
));
AvatarImage.displayName = AvatarPrimitive.Image.displayName;
const AvatarFallback = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AvatarPrimitive.Fallback,
  {
    ref,
    className: cn$1(
      "flex h-full w-full items-center justify-center rounded-full bg-muted",
      className
    ),
    ...props
  }
));
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;
const DropdownMenu = DropdownMenuPrimitive.Root;
const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;
const DropdownMenuSubTrigger = React.forwardRef(({ className, inset, children, ...props }, ref) => /* @__PURE__ */ jsxs(
  DropdownMenuPrimitive.SubTrigger,
  {
    ref,
    className: cn$1(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",
      inset && "pl-8",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsx(ChevronRight, { className: "ml-auto h-4 w-4" })
    ]
  }
));
DropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;
const DropdownMenuSubContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.SubContent,
  {
    ref,
    className: cn$1(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=bottom-0]:slide-in-from-top-2 data-[state=left-0]:slide-in-from-right-2 data-[state=right-0]:slide-in-from-left-2 data-[state=top-0]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
));
DropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;
const DropdownMenuContent = React.forwardRef(({ className, sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsx(DropdownMenuPrimitive.Portal, { children: /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Content,
  {
    ref,
    sideOffset,
    className: cn$1(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=bottom-0]:slide-in-from-top-2 data-[state=left-0]:slide-in-from-right-2 data-[state=right-0]:slide-in-from-left-2 data-[state=top-0]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
) }));
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;
const DropdownMenuItem = React.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Item,
  {
    ref,
    className: cn$1(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      inset && "pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;
const DropdownMenuCheckboxItem = React.forwardRef(({ className, children, checked, ...props }, ref) => /* @__PURE__ */ jsxs(
  DropdownMenuPrimitive.CheckboxItem,
  {
    ref,
    className: cn$1(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    checked,
    ...props,
    children: [
      /* @__PURE__ */ jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsx(DropdownMenuPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx(Check, { className: "h-4 w-4" }) }) }),
      children
    ]
  }
));
DropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;
const DropdownMenuRadioItem = React.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs(
  DropdownMenuPrimitive.RadioItem,
  {
    ref,
    className: cn$1(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx("span", { className: "absolute left-2 flex h-3.5 w-3.5 items-center justify-center", children: /* @__PURE__ */ jsx(DropdownMenuPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx(Circle, { className: "h-2 w-2 fill-current" }) }) }),
      children
    ]
  }
));
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;
const DropdownMenuLabel = React.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Label,
  {
    ref,
    className: cn$1(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;
const DropdownMenuSeparator = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Separator,
  {
    ref,
    className: cn$1("-mx-1 my-1 h-px bg-muted", className),
    ...props
  }
));
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;
const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-interactive text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground shadow hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",
        outline: "border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline"
      },
      size: {
        default: "h-9 px-4 py-2",
        sm: "h-8 rounded-md px-3 text-xs",
        lg: "h-10 rounded-md px-8",
        icon: "h-9 w-9"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
const Button = React.forwardRef(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return /* @__PURE__ */ jsx(
      Comp,
      {
        className: cn$1(buttonVariants({ variant, size, className })),
        ref,
        ...props
      }
    );
  }
);
Button.displayName = "Button";
const Separator = React.forwardRef(
  ({ className, orientation = "horizontal", decorative = true, ...props }, ref) => /* @__PURE__ */ jsx(
    SeparatorPrimitive.Root,
    {
      ref,
      decorative,
      orientation,
      className: cn$1(
        "shrink-0 bg-border",
        orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]",
        className
      ),
      ...props
    }
  )
);
Separator.displayName = SeparatorPrimitive.Root.displayName;
const Header = () => {
  var _a;
  const { currentContext, switchContext, currentEmpresa, user: user2, toggleSidebar, theme, toggleTheme } = useApp();
  const navigate = useNavigate();
  const [orgs, setOrgs] = useState([]);
  React__default.useEffect(() => {
    authClient.organization.list().then(({ data: data2 }) => {
      if (data2) setOrgs(data2);
    });
  }, []);
  return /* @__PURE__ */ jsxs("header", { className: "h-20 bg-card/60 backdrop-blur-xl border-b border-border/40 flex items-center justify-between px-8 sticky top-0 z-40 transition-all duration-300 shadow-sm shadow-black/5", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-6", children: [
      /* @__PURE__ */ jsx(Button, { variant: "ghost", size: "icon", onClick: toggleSidebar, className: "rounded-xl hover:bg-accent/50 group", children: /* @__PURE__ */ jsx(Menu, { size: 20, className: "group-hover:rotate-180 transition-transform duration-500" }) }),
      /* @__PURE__ */ jsxs("div", { className: "hidden lg:flex items-center gap-3 px-4 py-1.5 bg-muted/30 rounded-full border border-border/30", children: [
        /* @__PURE__ */ jsx("span", { className: "text-[12px] uppercase tracking-[0.2em] font-black text-muted-foreground/40", children: "Empresa" }),
        /* @__PURE__ */ jsx(Separator, { orientation: "vertical", className: "h-4 bg-border/40" }),
        /* @__PURE__ */ jsxs(
          Select,
          {
            value: ((_a = orgs.find((o) => o.slug.includes(currentContext === EmpresaContexto.TURISMO ? "turismo" : "express"))) == null ? void 0 : _a.id) || "",
            onValueChange: async (orgId) => {
              const org = orgs.find((o) => o.id === orgId);
              if (org) {
                await authClient.organization.setActive({ organizationId: org.id });
                if (org.slug.toLowerCase().includes("turismo")) {
                  switchContext(EmpresaContexto.TURISMO);
                } else {
                  switchContext(EmpresaContexto.EXPRESS);
                }
                window.location.reload();
              }
            },
            children: [
              /* @__PURE__ */ jsx(SelectTrigger, { className: "w-[200px] h-7 bg-transparent border-none shadow-none font-bold text-sm hover:text-primary transition-colors focus:ring-0", children: /* @__PURE__ */ jsx(SelectValue, { placeholder: "Selecione a empresa" }) }),
              /* @__PURE__ */ jsx(SelectContent, { className: "rounded-2xl border-none shadow-2xl p-2", children: orgs.map((org) => /* @__PURE__ */ jsx(SelectItem, { value: org.id, className: "rounded-xl font-semibold", children: org.name }, org.id)) })
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-6", children: [
      /* @__PURE__ */ jsxs("div", { className: "relative hidden xl:block group", children: [
        /* @__PURE__ */ jsx(Search, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground/50 group-focus-within:text-primary transition-colors", size: 16 }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            placeholder: "Buscar reserva, cliente...",
            className: "pl-10 pr-4 py-2 bg-muted/30 border-none rounded-full text-sm w-72 focus:ring-2 focus:ring-primary/10 dark:text-white transition-all placeholder:text-muted-foreground/30 font-medium whitespace-nowrap overflow-hidden"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs(Button, { variant: "ghost", size: "icon", className: "relative group rounded-full hover:bg-primary/5", children: [
        /* @__PURE__ */ jsx(Bell, { size: 20, className: "text-muted-foreground group-hover:text-primary transition-colors" }),
        /* @__PURE__ */ jsx("span", { className: "absolute top-2 right-2 w-2.5 h-2.5 bg-red-500 border-2 border-background rounded-full animate-pulse" })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex items-center gap-4 pl-4 border-l border-border/50 h-10", children: /* @__PURE__ */ jsxs(DropdownMenu, { children: [
        /* @__PURE__ */ jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs("button", { className: "flex items-center gap-3 outline-none group", children: [
          /* @__PURE__ */ jsxs("div", { className: "text-right hidden md:block", children: [
            /* @__PURE__ */ jsx("p", { className: "text-sm font-black text-foreground group-hover:text-primary transition-colors leading-none", children: user2.name }),
            /* @__PURE__ */ jsx("p", { className: "text-[12px] font-bold text-muted-foreground/60 uppercase tracking-widest mt-1", children: user2.role })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxs(Avatar, { className: "h-10 w-10 border-2 border-background ring-2 ring-primary/5 shadow-xl transition-all duration-300 group-hover:scale-110 group-hover:rotate-3 group-active:scale-95", children: [
              /* @__PURE__ */ jsx(AvatarImage, { src: user2.avatar }),
              /* @__PURE__ */ jsx(AvatarFallback, { className: "bg-gradient-to-br from-primary/10 to-blue-600/10 text-primary font-black", children: user2.name.substring(0, 2).toUpperCase() })
            ] }),
            /* @__PURE__ */ jsx("div", { className: "absolute -bottom-1 -right-1 w-4 h-4 bg-emerald-500 border-2 border-background rounded-full" })
          ] }),
          /* @__PURE__ */ jsx(ChevronDown, { size: 14, className: "text-muted-foreground group-hover:text-primary transition-all group-hover:translate-y-0.5" })
        ] }) }),
        /* @__PURE__ */ jsxs(DropdownMenuContent, { align: "end", className: "w-64 rounded-2xl border-none shadow-2xl p-2 mt-2", children: [
          /* @__PURE__ */ jsx(DropdownMenuLabel, { className: "px-3 py-2", children: /* @__PURE__ */ jsx("p", { className: "text-xs font-black uppercase tracking-widest text-muted-foreground/40", children: "Sua Conta" }) }),
          /* @__PURE__ */ jsxs(DropdownMenuItem, { onClick: () => navigate(`/admin/usuarios/${user2.id}/editar`), className: "rounded-xl h-11 gap-3 font-bold cursor-pointer", children: [
            /* @__PURE__ */ jsx("div", { className: "p-2 rounded-lg bg-blue-500/10 text-blue-600", children: /* @__PURE__ */ jsx(User, { size: 16 }) }),
            "Meu Perfil"
          ] }),
          /* @__PURE__ */ jsxs(DropdownMenuItem, { onClick: () => navigate("/admin/configuracoes"), className: "rounded-xl h-11 gap-3 font-bold cursor-pointer", children: [
            /* @__PURE__ */ jsx("div", { className: "p-2 rounded-lg bg-primary/10 text-primary", children: /* @__PURE__ */ jsx(Settings, { size: 16 }) }),
            "Configura√ß√µes"
          ] }),
          /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-muted/50 my-2" }),
          /* @__PURE__ */ jsxs(DropdownMenuItem, { onClick: toggleTheme, className: "rounded-xl h-11 gap-3 font-bold cursor-pointer", children: [
            /* @__PURE__ */ jsx("div", { className: "p-2 rounded-lg bg-orange-500/10 text-orange-600", children: theme === "light" ? /* @__PURE__ */ jsx(Moon, { size: 16 }) : /* @__PURE__ */ jsx(Sun, { size: 16 }) }),
            /* @__PURE__ */ jsxs("div", { className: "flex-1 flex items-center justify-between", children: [
              /* @__PURE__ */ jsx("span", { children: theme === "light" ? "Modo Escuro" : "Modo Claro" }),
              /* @__PURE__ */ jsx("div", { className: `w-8 h-4 rounded-full p-0.5 transition-colors ${theme === "dark" ? "bg-primary" : "bg-muted-foreground/20"}`, children: /* @__PURE__ */ jsx("div", { className: `w-3 h-3 bg-white rounded-full shadow-sm transition-all duration-300 ${theme === "dark" ? "translate-x-4" : ""}` }) })
            ] })
          ] }),
          /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-muted/50 my-2" }),
          /* @__PURE__ */ jsxs(
            DropdownMenuItem,
            {
              onClick: async () => {
                const m = await Promise.resolve().then(() => authClient$1);
                await m.authClient.signOut();
                navigate("/login");
              },
              className: "rounded-xl h-11 gap-3 font-bold cursor-pointer text-destructive focus:text-destructive focus:bg-destructive/10",
              children: [
                /* @__PURE__ */ jsx("div", { className: "p-2 rounded-lg bg-destructive/10", children: /* @__PURE__ */ jsx(LogOut, { size: 16 }) }),
                "Sair do Sistema"
              ]
            }
          )
        ] })
      ] }) })
    ] })
  ] });
};
const Footer = () => {
  const { systemSettings } = useApp();
  const currentYear = (/* @__PURE__ */ new Date()).getFullYear();
  return /* @__PURE__ */ jsx("footer", { className: "bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 py-4 px-6 transition-colors duration-200", children: /* @__PURE__ */ jsxs("div", { className: "max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-2 text-sm text-slate-500 dark:text-slate-400", children: [
    /* @__PURE__ */ jsxs("div", { children: [
      "¬© ",
      currentYear,
      " ",
      systemSettings.system_footer_text || "SGTL - Sistema de Gest√£o de Transporte e Log√≠stica. Todos os direitos reservados."
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-4", children: [
      /* @__PURE__ */ jsxs("span", { children: [
        "Vers√£o ",
        systemSettings.system_display_version || "1.0.0"
      ] }),
      /* @__PURE__ */ jsx("a", { href: "#", className: "hover:text-blue-600 dark:hover:text-blue-400 transition-colors", children: "Termos de Uso" }),
      /* @__PURE__ */ jsx("a", { href: "#", className: "hover:text-blue-600 dark:hover:text-blue-400 transition-colors", children: "Pol√≠tica de Privacidade" })
    ] })
  ] }) });
};
const admin = UNSAFE_withComponentProps(function AdminLayout() {
  const {
    data: session2,
    isPending
  } = authClient.useSession();
  const navigate = useNavigate();
  useEffect(() => {
    if (!isPending && !session2) {
      navigate("/login");
    }
  }, [session2, isPending, navigate]);
  if (isPending) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex h-screen bg-background items-center justify-center",
      children: /* @__PURE__ */ jsx(LoaderCircle, {
        className: "h-8 w-8 animate-spin text-primary"
      })
    });
  }
  if (!session2) {
    return null;
  }
  return /* @__PURE__ */ jsx(AppProvider, {
    children: /* @__PURE__ */ jsxs("div", {
      className: "flex h-screen bg-background overflow-hidden transition-colors duration-200",
      children: [/* @__PURE__ */ jsx(Sidebar, {}), /* @__PURE__ */ jsxs("div", {
        className: "flex-1 flex flex-col min-w-0",
        children: [/* @__PURE__ */ jsx(Header, {}), /* @__PURE__ */ jsxs("main", {
          className: "flex-1 overflow-y-auto flex flex-col",
          children: [/* @__PURE__ */ jsx("div", {
            className: "max-w-7xl mx-auto w-full p-6 flex-1",
            children: /* @__PURE__ */ jsx(Outlet, {})
          }), /* @__PURE__ */ jsx(Footer, {})]
        })]
      })]
    })
  });
});
const route48 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin
}, Symbol.toStringTag, { value: "Module" }));
const user = pgTable("user", {
  id: text("id").primaryKey(),
  username: text("username").unique(),
  name: text("name").notNull(),
  email: text("email"),
  emailVerified: boolean("emailVerified").notNull().default(false),
  image: text("image"),
  createdAt: timestamp("createdAt").notNull().defaultNow(),
  updatedAt: timestamp("updatedAt").notNull().defaultNow(),
  role: text("role").default("user"),
  banned: boolean("banned").default(false),
  banReason: text("banReason"),
  banExpires: integer("banExpires"),
  // BIGINT in SQL, integer in simplified schema
  documento: text("documento").unique(),
  documento_tipo: varchar("documento_tipo", { length: 20 }).default("CPF"),
  phone: text("phone"),
  notes: text("notes"),
  birth_date: date("birth_date"),
  is_active: boolean("is_active").default(true)
});
const session = pgTable("session", {
  id: text("id").primaryKey(),
  expiresAt: timestamp("expiresAt").notNull(),
  token: text("token").notNull().unique(),
  createdAt: timestamp("createdAt").notNull().defaultNow(),
  updatedAt: timestamp("updatedAt").notNull().defaultNow(),
  ipAddress: text("ipAddress"),
  userAgent: text("userAgent"),
  userId: text("userId").notNull().references(() => user.id, { onDelete: "cascade" }),
  activeOrganizationId: text("activeOrganizationId")
});
const account = pgTable("account", {
  id: text("id").primaryKey(),
  accountId: text("accountId").notNull(),
  providerId: text("providerId").notNull(),
  userId: text("userId").notNull().references(() => user.id, { onDelete: "cascade" }),
  accessToken: text("accessToken"),
  refreshToken: text("refreshToken"),
  idToken: text("idToken"),
  scope: text("scope"),
  expiresAt: timestamp("expiresAt"),
  tokenType: text("tokenType"),
  createdAt: timestamp("createdAt").notNull().defaultNow(),
  updatedAt: timestamp("updatedAt").notNull().defaultNow(),
  password: text("password")
});
const organization = pgTable("organization", {
  id: text("id").primaryKey(),
  name: text("name").notNull(),
  slug: text("slug").unique(),
  logo: text("logo"),
  createdAt: timestamp("createdAt").notNull().defaultNow(),
  metadata: text("metadata"),
  // Legacy support / Expanded org details
  cnpj: varchar("cnpj", { length: 20 }),
  address: text("address"),
  phone: varchar("phone", { length: 20 }),
  email: varchar("email", { length: 255 }),
  website: varchar("website", { length: 255 })
});
const member = pgTable("member", {
  id: text("id").primaryKey(),
  organizationId: text("organizationId").notNull().references(() => organization.id, { onDelete: "cascade" }),
  userId: text("userId").notNull().references(() => user.id, { onDelete: "cascade" }),
  role: text("role").notNull(),
  createdAt: timestamp("createdAt").notNull().defaultNow(),
  updatedAt: timestamp("updatedAt").notNull().defaultNow()
});
const invitation = pgTable("invitation", {
  id: text("id").primaryKey(),
  organizationId: text("organizationId").notNull().references(() => organization.id, { onDelete: "cascade" }),
  email: text("email").notNull(),
  role: text("role"),
  status: text("status").notNull(),
  expiresAt: timestamp("expiresAt").notNull(),
  inviterId: text("inviterId").notNull().references(() => user.id, { onDelete: "cascade" })
});
const clients = pgTable("clients", {
  id: uuid("id").primaryKey().defaultRandom(),
  nome: varchar("nome", { length: 255 }).notNull(),
  email: varchar("email", { length: 255 }).notNull(),
  telefone: varchar("telefone", { length: 50 }),
  saldo_creditos: decimal("saldo_creditos", { precision: 10, scale: 2 }).default("0.00"),
  historico_viagens: integer("historico_viagens").default(0),
  tipo_cliente: varchar("tipo_cliente", { length: 20 }).default("PESSOA_FISICA"),
  documento_tipo: varchar("documento_tipo", { length: 20 }).default("CPF"),
  documento: varchar("documento", { length: 50 }),
  razao_social: varchar("razao_social", { length: 255 }),
  nome_fantasia: varchar("nome_fantasia", { length: 255 }),
  cnpj: varchar("cnpj", { length: 18 }),
  nacionalidade: varchar("nacionalidade", { length: 100 }),
  data_cadastro: timestamp("data_cadastro").defaultNow(),
  data_nascimento: date("data_nascimento"),
  endereco: varchar("endereco", { length: 255 }),
  cidade: varchar("cidade", { length: 100 }),
  estado: varchar("estado", { length: 2 }),
  pais: varchar("pais", { length: 100 }),
  segmento: varchar("segmento", { length: 20 }).default("NOVO"),
  tags: text("tags").array(),
  valor_total_gasto: decimal("valor_total_gasto", { precision: 10, scale: 2 }).default("0.00"),
  observacoes: text("observacoes"),
  organization_id: text("organization_id"),
  user_id: text("user_id"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const vehicle = pgTable("vehicle", {
  id: uuid("id").primaryKey().defaultRandom(),
  placa: text("placa").notNull().unique(),
  modelo: text("modelo").notNull(),
  tipo: text("tipo").notNull(),
  // 'ONIBUS' | 'CAMINHAO'
  status: text("status").notNull().default("ACTIVE"),
  ano: integer("ano").notNull(),
  km_atual: integer("km_atual").notNull().default(0),
  proxima_revisao_km: integer("proxima_revisao_km").notNull(),
  ultima_revisao: date("ultima_revisao"),
  is_double_deck: boolean("is_double_deck").default(false),
  capacidade_passageiros: integer("capacidade_passageiros"),
  mapa_configurado: boolean("mapa_configurado").default(false),
  capacidade_carga: decimal("capacidade_carga", { precision: 10, scale: 2 }),
  observacoes: text("observacoes"),
  motorista_atual: text("motorista_atual"),
  imagem: text("imagem"),
  galeria: jsonb("galeria"),
  organization_id: text("organization_id").notNull(),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const vehicleFeature = pgTable("vehicle_feature", {
  id: uuid("id").primaryKey().defaultRandom(),
  vehicleId: uuid("vehicle_id").notNull().references(() => vehicle.id, { onDelete: "cascade" }),
  category: text("category"),
  label: text("label").notNull(),
  value: text("value").notNull(),
  createdAt: timestamp("created_at").defaultNow()
});
const seat = pgTable("seat", {
  id: uuid("id").primaryKey().defaultRandom(),
  vehicleId: uuid("vehicle_id").notNull().references(() => vehicle.id, { onDelete: "cascade" }),
  numero: text("numero").notNull(),
  andar: integer("andar").notNull(),
  // 1 or 2
  posicao_x: integer("posicao_x").notNull(),
  posicao_y: integer("posicao_y").notNull(),
  tipo: text("tipo").notNull(),
  status: text("status").notNull().default("AVAILABLE"),
  preco: decimal("preco", { precision: 10, scale: 2 }),
  disabled: boolean("disabled").default(false),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const driver = pgTable("driver", {
  id: uuid("id").primaryKey().defaultRandom(),
  nome: text("nome").notNull(),
  cnh: text("cnh").notNull(),
  categoria_cnh: text("categoria_cnh").notNull(),
  validade_cnh: date("validade_cnh").notNull(),
  passaporte: text("passaporte"),
  validade_passaporte: date("validade_passaporte"),
  telefone: text("telefone"),
  email: text("email"),
  endereco: text("endereco"),
  cidade: text("cidade"),
  estado: text("estado"),
  pais: text("pais"),
  status: text("status").notNull().default("AVAILABLE"),
  data_contratacao: date("data_contratacao").notNull(),
  salario: decimal("salario", { precision: 10, scale: 2 }),
  anos_experiencia: integer("anos_experiencia"),
  viagens_internacionais: integer("viagens_internacionais").default(0),
  disponivel_internacional: boolean("disponivel_internacional").default(false),
  observacoes: text("observacoes"),
  organization_id: text("organization_id").notNull(),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const routes$1 = pgTable("routes", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  name: text("name").notNull(),
  origin_city: text("origin_city").notNull(),
  origin_state: text("origin_state").notNull(),
  origin_neighborhood: text("origin_neighborhood"),
  destination_city: text("destination_city").notNull(),
  destination_state: text("destination_state").notNull(),
  destination_neighborhood: text("destination_neighborhood"),
  distance_km: decimal("distance_km", { precision: 10, scale: 2 }),
  duration_minutes: integer("duration_minutes"),
  stops: jsonb("stops").default([]),
  type: text("type").default("OUTBOUND"),
  // 'OUTBOUND' | 'INBOUND'
  active: boolean("active").default(true),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const trips = pgTable("trips", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  route_id: uuid("route_id").notNull().references(() => routes$1.id),
  return_route_id: uuid("return_route_id").references(() => routes$1.id),
  vehicle_id: uuid("vehicle_id").references(() => vehicle.id),
  driver_id: uuid("driver_id").references(() => driver.id),
  departure_date: date("departure_date").notNull(),
  departure_time: time("departure_time").notNull(),
  arrival_date: date("arrival_date"),
  arrival_time: time("arrival_time"),
  status: text("status").notNull().default("SCHEDULED"),
  price_conventional: decimal("price_conventional", { precision: 10, scale: 2 }),
  price_executive: decimal("price_executive", { precision: 10, scale: 2 }),
  price_semi_sleeper: decimal("price_semi_sleeper", { precision: 10, scale: 2 }),
  price_sleeper: decimal("price_sleeper", { precision: 10, scale: 2 }),
  price_bed: decimal("price_bed", { precision: 10, scale: 2 }),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const reservation = pgTable("reservation", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  trip_id: uuid("trip_id").notNull().references(() => trips.id),
  client_id: uuid("client_id").references(() => clients.id),
  passenger_name: text("passenger_name").notNull(),
  passenger_document: text("passenger_document"),
  passenger_email: text("passenger_email"),
  passenger_phone: text("passenger_phone"),
  seat_number: text("seat_number").notNull(),
  boarding_point: text("boarding_point"),
  dropoff_point: text("dropoff_point"),
  status: text("status").notNull().default("PENDING"),
  payment_method: text("payment_method"),
  // Added based on legacy migration audit
  payment_status: text("payment_status").notNull().default("UNPAID"),
  total_price: decimal("total_price", { precision: 10, scale: 2 }).notNull(),
  amount_paid: decimal("amount_paid", { precision: 10, scale: 2 }).default("0.00"),
  ticket_code: text("ticket_code").unique(),
  notes: text("notes"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const transaction = pgTable("transaction", {
  id: uuid("id").primaryKey().defaultRandom(),
  type: text("type").notNull(),
  description: text("description").notNull(),
  amount: decimal("amount", { precision: 10, scale: 2 }).notNull(),
  currency: text("currency").default("BRL"),
  date: date("date").notNull(),
  due_date: date("due_date"),
  payment_date: date("payment_date"),
  status: text("status").notNull(),
  payment_method: text("payment_method"),
  category: text("category"),
  cost_center: text("cost_center"),
  accounting_classification: text("accounting_classification"),
  document_number: text("document_number"),
  notes: text("notes"),
  organization_id: text("organization_id").notNull(),
  createdBy: text("created_by"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const maintenance = pgTable("maintenance", {
  id: uuid("id").primaryKey().defaultRandom(),
  vehicleId: uuid("vehicle_id").notNull().references(() => vehicle.id, { onDelete: "cascade" }),
  type: text("type").notNull(),
  // 'PREVENTIVA' | 'CORRETIVA'
  description: text("description").notNull(),
  scheduledDate: date("scheduled_date").notNull(),
  completionDate: date("completion_date"),
  status: text("status").notNull().default("SCHEDULED"),
  km_veiculo: integer("km_veiculo").notNull(),
  cost_parts: decimal("cost_parts", { precision: 10, scale: 2 }).default("0.00"),
  cost_labor: decimal("cost_labor", { precision: 10, scale: 2 }).default("0.00"),
  moeda: text("moeda").default("BRL"),
  organization_id: text("organization_id").notNull(),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const document$1 = pgTable("document", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  name: text("name").notNull(),
  type: text("type").notNull(),
  // 'VEHICLE' | 'DRIVER' | 'ADMIN'
  entity_id: uuid("entity_id"),
  // Reference to vehicle or driver
  entity_name: text("entity_name"),
  // Cache name for easy listing
  issue_date: date("issue_date"),
  expiry_date: date("expiry_date"),
  status: text("status").notNull().default("VALID"),
  file_path: text("file_path"),
  file_size: text("file_size"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const charter = pgTable("charter", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  client_id: uuid("client_id").notNull().references(() => clients.id),
  vehicle_id: uuid("vehicle_id").references(() => vehicle.id),
  driver_id: uuid("driver_id").references(() => driver.id),
  origin: text("origin").notNull(),
  destination: text("destination").notNull(),
  start_date: timestamp("start_date").notNull(),
  end_date: timestamp("end_date").notNull(),
  type: text("type").notNull().default("PONTUAL"),
  // 'PONTUAL' | 'RECORRENTE'
  route_id: uuid("route_id").references(() => routes$1.id),
  return_route_id: uuid("return_route_id").references(() => routes$1.id),
  status: text("status").notNull().default("REQUEST"),
  total_value: decimal("total_value", { precision: 10, scale: 2 }).notNull().default("0.00"),
  currency: text("currency").default("BRL"),
  notes: text("notes"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const parcel = pgTable("parcel", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  code: text("code").notNull().unique(),
  type: text("type").notNull(),
  // 'BUS_CARGO' | 'TRUCK_FREIGHT'
  status: text("status").notNull().default("AWAITING"),
  origin: text("origin").notNull(),
  destination: text("destination").notNull(),
  sender_name: text("sender_name").notNull(),
  recipient_name: text("recipient_name").notNull(),
  recipient_phone: text("recipient_phone"),
  weight_kg: decimal("weight_kg", { precision: 10, scale: 2 }),
  volume_m3: decimal("volume_m3", { precision: 10, scale: 2 }),
  declared_value: decimal("declared_value", { precision: 10, scale: 2 }),
  currency: text("currency").default("BRL"),
  delivery_estimate: timestamp("delivery_estimate"),
  trip_id: uuid("trip_id").references(() => trips.id),
  vehicle_id: uuid("vehicle_id").references(() => vehicle.id),
  history: jsonb("history").default([]),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const state = pgTable("state", {
  id: serial("id").primaryKey(),
  name: text("name").notNull(),
  uf: text("uf").notNull().unique()
});
const city = pgTable("city", {
  id: serial("id").primaryKey(),
  name: text("name").notNull(),
  state_id: integer("state_id").notNull().references(() => state.id)
});
const neighborhood = pgTable("neighborhood", {
  id: serial("id").primaryKey(),
  name: text("name").notNull(),
  city_id: integer("city_id").notNull().references(() => city.id)
});
const client_interaction = pgTable("client_interaction", {
  id: uuid("id").primaryKey().defaultRandom(),
  client_id: uuid("client_id").notNull().references(() => clients.id, { onDelete: "cascade" }),
  type: text("type").notNull(),
  // 'EMAIL', 'PHONE', 'WHATSAPP', 'IN_PERSON', 'SYSTEM'
  description: text("description").notNull(),
  date_time: timestamp("date_time").defaultNow(),
  user_responsible: text("user_responsible"),
  createdAt: timestamp("created_at").defaultNow()
});
const client_note = pgTable("client_note", {
  id: uuid("id").primaryKey().defaultRandom(),
  client_id: uuid("client_id").notNull().references(() => clients.id, { onDelete: "cascade" }),
  title: text("title").notNull(),
  content: text("content").notNull(),
  is_important: boolean("is_important").default(false),
  created_by: text("created_by"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const userRelations = relations(user, ({ many }) => ({
  sessions: many(session),
  accounts: many(account)
}));
const clientRelations = relations(clients, ({ many }) => ({
  reservations: many(reservation),
  interactions: many(client_interaction),
  notes: many(client_note)
}));
const vehicleRelations = relations(vehicle, ({ many }) => ({
  features: many(vehicleFeature),
  seats: many(seat),
  trips: many(trips),
  maintenances: many(maintenance)
}));
const driverRelations = relations(driver, ({ many }) => ({
  trips: many(trips)
}));
const routeRelations = relations(routes$1, ({ many }) => ({
  trips: many(trips)
}));
const tripRelations = relations(trips, ({ one, many }) => ({
  route: one(routes$1, {
    fields: [trips.route_id],
    references: [routes$1.id]
  }),
  vehicle: one(vehicle, {
    fields: [trips.vehicle_id],
    references: [vehicle.id]
  }),
  driver: one(driver, {
    fields: [trips.driver_id],
    references: [driver.id]
  }),
  reservations: many(reservation)
}));
const reservationRelations = relations(reservation, ({ one }) => ({
  trip: one(trips, {
    fields: [reservation.trip_id],
    references: [trips.id]
  }),
  client: one(clients, {
    fields: [reservation.client_id],
    references: [clients.id]
  })
}));
const cityRelations = relations(city, ({ one, many }) => ({
  state: one(state, {
    fields: [city.state_id],
    references: [state.id]
  }),
  neighborhoods: many(neighborhood)
}));
const neighborhoodRelations = relations(neighborhood, ({ one }) => ({
  city: one(city, {
    fields: [neighborhood.city_id],
    references: [city.id]
  })
}));
const interactionRelations = relations(client_interaction, ({ one }) => ({
  client: one(clients, {
    fields: [client_interaction.client_id],
    references: [clients.id]
  })
}));
const noteRelations = relations(client_note, ({ one }) => ({
  client: one(clients, {
    fields: [client_note.client_id],
    references: [clients.id]
  })
}));
const charterRelations = relations(charter, ({ one }) => ({
  client: one(clients, {
    fields: [charter.client_id],
    references: [clients.id]
  }),
  vehicle: one(vehicle, {
    fields: [charter.vehicle_id],
    references: [vehicle.id]
  }),
  driver: one(driver, {
    fields: [charter.driver_id],
    references: [driver.id]
  }),
  route: one(routes$1, {
    fields: [charter.route_id],
    references: [routes$1.id]
  }),
  return_route: one(routes$1, {
    fields: [charter.return_route_id],
    references: [routes$1.id]
  })
}));
const parcelRelations = relations(parcel, ({ one }) => ({
  trip: one(trips, {
    fields: [parcel.trip_id],
    references: [trips.id]
  }),
  vehicle: one(vehicle, {
    fields: [parcel.vehicle_id],
    references: [vehicle.id]
  })
}));
const organization_parameter = pgTable("system_parameters", {
  id: uuid("id").primaryKey().defaultRandom(),
  organization_id: text("organization_id").notNull(),
  key: text("key").notNull(),
  value: text("value"),
  createdAt: timestamp("created_at").defaultNow(),
  updatedAt: timestamp("updated_at").defaultNow()
});
const schema = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  account,
  charter,
  charterRelations,
  city,
  cityRelations,
  clientRelations,
  client_interaction,
  client_note,
  clients,
  document: document$1,
  driver,
  driverRelations,
  interactionRelations,
  invitation,
  maintenance,
  member,
  neighborhood,
  neighborhoodRelations,
  noteRelations,
  organization,
  organization_parameter,
  parcel,
  parcelRelations,
  reservation,
  reservationRelations,
  routeRelations,
  routes: routes$1,
  seat,
  session,
  state,
  transaction,
  tripRelations,
  trips,
  user,
  userRelations,
  vehicle,
  vehicleFeature,
  vehicleRelations
}, Symbol.toStringTag, { value: "Module" }));
const connectionString = process.env.DATABASE_URL || "postgresql://admin:admin123@localhost:5432/sgtl_db";
postgres(connectionString, { max: 1 });
const queryClient = postgres(connectionString);
const db = drizzle(queryClient, { schema });
const PageHeader = ({
  title,
  subtitle,
  suffix: suffix2,
  icon: Icon2,
  backLink,
  backLabel = "Voltar",
  rightElement
}) => {
  const navigate = useNavigate();
  return /* @__PURE__ */ jsxs("div", { className: "flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10", children: [
    /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      backLink && /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: () => navigate(backLink),
          className: "group flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors focus:outline-none",
          children: [
            /* @__PURE__ */ jsx(ArrowLeft, { size: 16, className: "transition-transform group-hover:-translate-x-1" }),
            /* @__PURE__ */ jsx("span", { className: "text-[10px] font-black uppercase tracking-[0.2em]", children: backLabel })
          ]
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-4", children: [
        Icon2 && /* @__PURE__ */ jsx("div", { className: "p-3 bg-primary/10 rounded-2xl text-primary hidden md:flex animate-in zoom-in-95 duration-500", children: /* @__PURE__ */ jsx(Icon2, { size: 24 }) }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3 mb-1", children: [
            /* @__PURE__ */ jsx("h1", { className: "text-display-header", children: title }),
            suffix2 && /* @__PURE__ */ jsx("span", { className: "text-primary italic font-black text-4xl hidden lg:inline tracking-tight leading-none animate-in fade-in slide-in-from-left-4 duration-700", children: suffix2 })
          ] }),
          subtitle && /* @__PURE__ */ jsx("p", { className: "text-display-subtitle", children: subtitle })
        ] })
      ] })
    ] }),
    rightElement && /* @__PURE__ */ jsx("div", { className: "flex items-center gap-3", children: rightElement })
  ] });
};
const Input = React.forwardRef(
  ({ className, type, ...props }, ref) => {
    return /* @__PURE__ */ jsx(
      "input",
      {
        type,
        className: cn$1(
          "flex h-9 w-full rounded-interactive border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        ),
        ref,
        ...props
      }
    );
  }
);
Input.displayName = "Input";
const Card = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1(
      "rounded-container border bg-card text-card-foreground shadow",
      className
    ),
    ...props
  }
));
Card.displayName = "Card";
const CardHeader = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1("flex flex-col space-y-1.5 p-6", className),
    ...props
  }
));
CardHeader.displayName = "CardHeader";
const CardTitle = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1("font-semibold leading-none tracking-tight", className),
    ...props
  }
));
CardTitle.displayName = "CardTitle";
const CardDescription = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1("text-sm text-muted-foreground", className),
    ...props
  }
));
CardDescription.displayName = "CardDescription";
const CardContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx("div", { ref, className: cn$1("p-6 pt-0", className), ...props }));
CardContent.displayName = "CardContent";
const CardFooter = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1("flex items-center p-6 pt-0", className),
    ...props
  }
));
CardFooter.displayName = "CardFooter";
const badgeVariants = cva(
  "inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",
        outline: "text-foreground"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
const Badge$1 = React.forwardRef(
  ({ className, variant, ...props }, ref) => {
    return /* @__PURE__ */ jsx(
      "div",
      {
        ref,
        className: cn$1(badgeVariants({ variant }), className),
        ...props
      }
    );
  }
);
Badge$1.displayName = "Badge";
const loader$z = async () => {
  const states = await db.select().from(state).orderBy(state.name);
  const cities = await db.query.city.findMany({
    with: {
      state: true
    },
    orderBy: [city.name]
  });
  const neighborhoods = await db.query.neighborhood.findMany({
    with: {
      city: true
    },
    orderBy: [neighborhood.name]
  });
  return data({
    states,
    cities,
    neighborhoods
  });
};
const action$x = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  const name = formData.get("name");
  const type = formData.get("type");
  if (intent === "delete") {
    if (type === "cities") await db.delete(city).where(eq(city.id, parseInt(id)));
    if (type === "neighborhoods") await db.delete(neighborhood).where(eq(neighborhood.id, parseInt(id)));
    return data({
      success: true,
      message: "Removido com sucesso"
    });
  }
  if (intent === "save") {
    if (type === "cities") {
      const stateId = parseInt(formData.get("state_id"));
      if (id) {
        await db.update(city).set({
          name
        }).where(eq(city.id, parseInt(id)));
      } else {
        await db.insert(city).values({
          name,
          state_id: stateId
        });
      }
    }
    if (type === "neighborhoods") {
      const cityId = parseInt(formData.get("city_id"));
      if (id) {
        await db.update(neighborhood).set({
          name
        }).where(eq(neighborhood.id, parseInt(id)));
      } else {
        await db.insert(neighborhood).values({
          name,
          city_id: cityId
        });
      }
    }
    return data({
      success: true,
      message: "Salvo com sucesso"
    });
  }
  return null;
};
const admin_auxiliaryData__index = UNSAFE_withComponentProps(function AuxiliaryDataPage() {
  const {
    states,
    cities,
    neighborhoods
  } = useLoaderData();
  const fetcher = useFetcher();
  const [activeTab, setActiveTab] = useState("territories");
  const [busca, setBusca] = useState("");
  const [isEditing, setIsEditing] = useState(false);
  const [editingItem, setEditingItem] = useState(null);
  const handleNew = () => {
    setEditingItem(null);
    setIsEditing(true);
  };
  const handleEdit = (item) => {
    setEditingItem(item);
    setIsEditing(true);
  };
  const renderList = () => {
    let currentData = [];
    if (activeTab === "territories") currentData = states;
    if (activeTab === "cities") currentData = cities;
    if (activeTab === "neighborhoods") currentData = neighborhoods;
    const filtered = currentData.filter((i) => (i.name || i.nome || "").toLowerCase().includes(busca.toLowerCase()));
    return /* @__PURE__ */ jsx("div", {
      className: "divide-y divide-border/30",
      children: filtered.length === 0 ? /* @__PURE__ */ jsxs("div", {
        className: "p-24 text-center",
        children: [/* @__PURE__ */ jsx(Layers, {
          size: 64,
          className: "mx-auto mb-6 text-muted-foreground/20"
        }), /* @__PURE__ */ jsx("p", {
          className: "font-black text-muted-foreground uppercase tracking-widest text-sm",
          children: "Nenhum registro encontrado"
        })]
      }) : filtered.map((item) => {
        var _a, _b, _c;
        return /* @__PURE__ */ jsxs("div", {
          className: "p-8 hover:bg-muted/30 transition-all flex items-center justify-between group",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex items-center gap-6",
            children: [/* @__PURE__ */ jsx("div", {
              className: "w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black uppercase shadow-sm",
              children: ((_a = item.name) == null ? void 0 : _a.charAt(0)) || item.uf
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-1",
              children: [/* @__PURE__ */ jsx("h4", {
                className: "font-black text-lg tracking-tight",
                children: item.name
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-2",
                children: [/* @__PURE__ */ jsx(Badge$1, {
                  variant: "outline",
                  className: "text-[10px] font-black uppercase tracking-widest border-none bg-muted px-2 py-0.5",
                  children: activeTab === "territories" ? "ESTADO" : activeTab === "cities" ? `ESTADO: ${(_b = item.state) == null ? void 0 : _b.uf}` : `CIDADE: ${(_c = item.city) == null ? void 0 : _c.name}`
                }), item.uf && /* @__PURE__ */ jsx("span", {
                  className: "text-[10px] font-black text-primary uppercase tracking-[0.2em]",
                  children: item.uf
                })]
              })]
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",
            children: activeTab !== "territories" && /* @__PURE__ */ jsxs(Fragment, {
              children: [/* @__PURE__ */ jsx(Button, {
                variant: "ghost",
                size: "icon",
                onClick: () => handleEdit(item),
                className: "h-10 w-10 rounded-xl hover:bg-primary/10 hover:text-primary",
                children: /* @__PURE__ */ jsx(SquarePen, {
                  size: 18
                })
              }), /* @__PURE__ */ jsx(Button, {
                variant: "ghost",
                size: "icon",
                onClick: () => fetcher.submit({
                  intent: "delete",
                  id: item.id.toString(),
                  type: activeTab
                }, {
                  method: "post"
                }),
                className: "h-10 w-10 rounded-xl hover:bg-destructive/10 text-destructive",
                children: /* @__PURE__ */ jsx(Trash2, {
                  size: 18
                })
              })]
            })
          })]
        }, item.id);
      })
    });
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Cadastros Auxiliares",
      subtitle: "Gest√£o de territ√≥rios, cidades e par√¢metros do ecossistema",
      icon: Layers,
      rightElement: activeTab !== "territories" && /* @__PURE__ */ jsxs(Button, {
        onClick: handleNew,
        className: "h-14 px-8 rounded-xl font-black uppercase text-[12px] tracking-widest shadow-lg shadow-primary/20",
        children: [/* @__PURE__ */ jsx(Plus, {
          size: 18,
          className: "mr-2",
          strokeWidth: 3
        }), " NOVO REGISTRO"]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "flex flex-col md:flex-row gap-6 justify-between items-end",
      children: [/* @__PURE__ */ jsx("div", {
        className: "flex bg-muted/40 p-1.5 rounded-2xl border border-border/50 h-14 w-full md:w-fit gap-2",
        children: [{
          id: "territories",
          label: "Estados",
          icon: Flag
        }, {
          id: "cities",
          label: "Cidades",
          icon: Building
        }, {
          id: "neighborhoods",
          label: "Bairros",
          icon: MapPin
        }].map((tab) => /* @__PURE__ */ jsxs("button", {
          onClick: () => setActiveTab(tab.id),
          className: cn$1("flex-1 md:flex-none px-6 h-full text-[10px] font-black uppercase tracking-widest transition-all rounded-xl flex items-center gap-2", activeTab === tab.id ? "bg-background text-primary shadow-lg" : "text-muted-foreground hover:bg-muted/30"),
          children: [/* @__PURE__ */ jsx(tab.icon, {
            size: 14,
            strokeWidth: activeTab === tab.id ? 2.5 : 2
          }), tab.label]
        }, tab.id))
      }), /* @__PURE__ */ jsxs("div", {
        className: "relative w-full md:w-96 group",
        children: [/* @__PURE__ */ jsx(Search, {
          size: 18,
          className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors"
        }), /* @__PURE__ */ jsx(Input, {
          placeholder: `Buscar em ${activeTab}...`,
          value: busca,
          onChange: (e) => setBusca(e.target.value),
          className: "w-full h-14 pl-12 bg-card/60 border-none rounded-xl font-bold shadow-sm"
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 bg-card/50 backdrop-blur-sm border-none rounded-[2.5rem] overflow-hidden",
      children: renderList()
    }), isEditing && /* @__PURE__ */ jsx("div", {
      className: "fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",
      children: /* @__PURE__ */ jsxs(Card, {
        className: "w-full max-w-xl bg-card border-none rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300 p-8",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center justify-between mb-8",
          children: [/* @__PURE__ */ jsxs("h2", {
            className: "text-2xl font-black uppercase tracking-tighter",
            children: [editingItem ? "Editar" : "Novo", " ", activeTab === "cities" ? "Cidade" : "Bairro"]
          }), /* @__PURE__ */ jsx(Button, {
            variant: "ghost",
            size: "icon",
            onClick: () => setIsEditing(false),
            className: "rounded-xl",
            children: /* @__PURE__ */ jsx(X, {
              size: 20
            })
          })]
        }), /* @__PURE__ */ jsxs(fetcher.Form, {
          method: "post",
          className: "space-y-6",
          children: [/* @__PURE__ */ jsx("input", {
            type: "hidden",
            name: "intent",
            value: "save"
          }), /* @__PURE__ */ jsx("input", {
            type: "hidden",
            name: "type",
            value: activeTab
          }), editingItem && /* @__PURE__ */ jsx("input", {
            type: "hidden",
            name: "id",
            value: editingItem.id
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-label-caps ml-1",
              children: "Nome"
            }), /* @__PURE__ */ jsx(Input, {
              name: "name",
              defaultValue: editingItem == null ? void 0 : editingItem.name,
              required: true,
              className: "h-14 rounded-xl bg-muted/40"
            })]
          }), activeTab === "cities" && /* @__PURE__ */ jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-label-caps ml-1",
              children: "Estado"
            }), /* @__PURE__ */ jsxs("select", {
              name: "state_id",
              defaultValue: editingItem == null ? void 0 : editingItem.state_id,
              className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none",
              required: true,
              children: [/* @__PURE__ */ jsx("option", {
                value: "",
                children: "Selecione..."
              }), states.map((s) => /* @__PURE__ */ jsxs("option", {
                value: s.id,
                children: [s.name, " (", s.uf, ")"]
              }, s.id))]
            })]
          }), activeTab === "neighborhoods" && /* @__PURE__ */ jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-label-caps ml-1",
              children: "Cidade"
            }), /* @__PURE__ */ jsxs("select", {
              name: "city_id",
              defaultValue: editingItem == null ? void 0 : editingItem.city_id,
              className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none",
              required: true,
              children: [/* @__PURE__ */ jsx("option", {
                value: "",
                children: "Selecione..."
              }), cities.map((c) => /* @__PURE__ */ jsx("option", {
                value: c.id,
                children: c.name
              }, c.id))]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex gap-4 pt-4",
            children: [/* @__PURE__ */ jsx(Button, {
              type: "button",
              variant: "outline",
              onClick: () => setIsEditing(false),
              className: "flex-1 h-14 rounded-2xl font-black uppercase text-xs tracking-widest",
              children: "CANCELAR"
            }), /* @__PURE__ */ jsx(Button, {
              type: "submit",
              className: "flex-1 h-14 rounded-2xl bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-lg shadow-primary/20",
              children: fetcher.state !== "idle" ? /* @__PURE__ */ jsx(LoaderCircle, {
                className: "animate-spin"
              }) : "SALVAR REGISTRO"
            })]
          })]
        })]
      })
    })]
  }, "aux-main");
});
const route49 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$x,
  default: admin_auxiliaryData__index,
  loader: loader$z
}, Symbol.toStringTag, { value: "Module" }));
const FormSection = ({
  title,
  description,
  icon: Icon2,
  children,
  className,
  footer
}) => {
  return /* @__PURE__ */ jsxs(Card, { className: cn$1("shadow-xl shadow-muted/20 bg-card/50 backdrop-blur-sm border border-border/40 overflow-hidden", className), children: [
    /* @__PURE__ */ jsx("div", { className: "p-8 border-b border-border/50 bg-muted/20", children: /* @__PURE__ */ jsxs("h3", { className: "text-section-header flex items-center gap-2", children: [
      Icon2 && /* @__PURE__ */ jsx(Icon2, { size: 14, className: "text-primary" }),
      title
    ] }) }),
    /* @__PURE__ */ jsxs(CardContent, { className: "p-8", children: [
      description && /* @__PURE__ */ jsx("p", { className: "text-section-description mb-8 border-l-2 border-primary/30 pl-4 py-1", children: description }),
      /* @__PURE__ */ jsx("div", { className: "space-y-6", children })
    ] }),
    footer && /* @__PURE__ */ jsx("div", { className: "p-8 border-t border-border/40 bg-muted/10", children: footer })
  ] });
};
function MaintenanceForm({ intent, defaultValues = {}, vehicles }) {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const isSubmitting = navigation.state !== "idle";
  const isEdit = intent === "edit";
  const [pecas, setPecas] = useState(parseFloat(defaultValues.custo_pecas) || 0);
  const [maoDeObra, setMaoDeObra] = useState(parseFloat(defaultValues.custo_mao_de_obra) || 0);
  return /* @__PURE__ */ jsxs(Form, { method: "post", className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [
    /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Dados da Ordem", icon: Wrench, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Ve√≠culo *" }),
            /* @__PURE__ */ jsxs("select", { name: "vehicle_id", defaultValue: defaultValues.vehicle_id, required: true, className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Selecione um ve√≠culo..." }),
              vehicles.map((v) => /* @__PURE__ */ jsxs("option", { value: v.id, children: [
                v.placa,
                " - ",
                v.modelo
              ] }, v.id))
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Tipo de Servi√ßo" }),
            /* @__PURE__ */ jsxs("select", { name: "tipo", defaultValue: defaultValues.tipo, required: true, className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
              /* @__PURE__ */ jsx("option", { value: TipoManutencao.PREVENTIVE, children: "PREVENTIVA" }),
              /* @__PURE__ */ jsx("option", { value: TipoManutencao.CORRECTIVE, children: "CORRETIVA" }),
              /* @__PURE__ */ jsx("option", { value: TipoManutencao.PREDICTIVE, children: "PREDITIVA" })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Descri√ß√£o do Problema/Servi√ßo" }),
          /* @__PURE__ */ jsx(
            "textarea",
            {
              name: "descricao",
              defaultValue: defaultValues.descricao,
              required: true,
              rows: 3,
              className: "w-full p-4 bg-muted/40 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-primary/20 outline-none resize-none",
              placeholder: "Relato t√©cnico..."
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Vincular Oficina" }),
            /* @__PURE__ */ jsx(Input, { name: "oficina", defaultValue: defaultValues.oficina, placeholder: "Nome da oficina ou fornecedor", className: "h-14 rounded-xl bg-muted/40" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "KM do Ve√≠culo na Entrada" }),
            /* @__PURE__ */ jsx(Input, { type: "number", name: "km_veiculo", defaultValue: defaultValues.km_veiculo, required: true, placeholder: "Ex: 125400", className: "h-14 rounded-xl bg-muted/40" })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Custos e Pe√ßas", icon: DollarSign$1, children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Custo Pe√ßas (R$)" }),
          /* @__PURE__ */ jsx(Input, { type: "number", step: "0.01", name: "custo_pecas", value: pecas, onChange: (e) => setPecas(Number(e.target.value)), className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "M√£o de Obra (R$)" }),
          /* @__PURE__ */ jsx(Input, { type: "number", step: "0.01", name: "custo_mao_de_obra", value: maoDeObra, onChange: (e) => setMaoDeObra(Number(e.target.value)), className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Investimento Total" }),
          /* @__PURE__ */ jsxs("div", { className: "h-14 flex items-center px-4 bg-muted/20 border-2 border-primary/20 rounded-xl text-primary font-black text-xl", children: [
            "R$ ",
            (pecas + maoDeObra).toFixed(2)
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Cronograma", icon: Calendar$1, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Data Agendada" }),
          /* @__PURE__ */ jsx(
            Input,
            {
              type: "date",
              name: "data_agendada",
              required: true,
              defaultValue: defaultValues.data_agendada ? new Date(defaultValues.data_agendada).toISOString().split("T")[0] : (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
              className: "h-14 rounded-xl bg-muted/40"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Status Inicial" }),
          /* @__PURE__ */ jsxs("select", { name: "status", defaultValue: defaultValues.status, className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
            /* @__PURE__ */ jsx("option", { value: StatusManutencao.SCHEDULED, children: "AGENDADO" }),
            /* @__PURE__ */ jsx("option", { value: StatusManutencao.IN_PROGRESS, children: "EM EXECU√á√ÉO" }),
            /* @__PURE__ */ jsx("option", { value: StatusManutencao.COMPLETED, children: "CONCLU√çDO" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Respons√°vel Interno" }),
          /* @__PURE__ */ jsx(Input, { name: "responsavel", defaultValue: defaultValues.responsavel, placeholder: "Quem autorizou ou acompanha", className: "h-14 rounded-xl bg-muted/40" })
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "p-6 bg-amber-500/5 border border-amber-500/10 rounded-3xl space-y-3", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx(TriangleAlert, { size: 16, className: "text-amber-500" }),
          /* @__PURE__ */ jsx("span", { className: "text-[10px] font-black uppercase tracking-widest text-amber-500", children: "Aten√ß√£o Cr√≠tica" })
        ] }),
        /* @__PURE__ */ jsx("p", { className: "text-[11px] font-bold text-muted-foreground leading-relaxed uppercase", children: "VE√çCULOS EM MANUTEN√á√ÉO S√ÉO BLOQUEADOS PARA NOVAS VIAGENS AT√â A CONCLUS√ÉO." })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4", children: [
        /* @__PURE__ */ jsx(Button, { type: "submit", disabled: isSubmitting, className: "h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20", children: isSubmitting ? /* @__PURE__ */ jsx(LoaderCircle, { className: "animate-spin" }) : isEdit ? "SALVAR ALTERA√á√ïES" : "ABRIR ORDEM DE SERVI√áO" }),
        /* @__PURE__ */ jsx(Button, { type: "button", variant: "ghost", onClick: () => navigate(-1), className: "h-14 rounded-xl font-black uppercase text-[10px] tracking-widest", children: "CANCELAR" })
      ] })
    ] })
  ] });
}
const loader$y = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const [maintenance$1, vehicles] = await Promise.all([db.query.maintenance.findFirst({
    where: eq(maintenance.id, id)
  }), db.select().from(vehicle).where(eq(vehicle.status, "ACTIVE"))]);
  if (!maintenance$1) throw new Response("Manuten√ß√£o n√£o encontrada", {
    status: 404
  });
  return data({
    maintenance: maintenance$1,
    vehicles
  });
};
const action$w = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const vehicle_id = formData.get("vehicle_id");
  const status = formData.get("status");
  const custo_pecas = formData.get("custo_pecas");
  const custo_mao_de_obra = formData.get("custo_mao_de_obra");
  const payload = {
    vehicle_id,
    tipo: formData.get("tipo"),
    status,
    descricao: formData.get("descricao"),
    oficina: formData.get("oficina"),
    responsavel: formData.get("responsavel"),
    custo_pecas,
    custo_mao_de_obra,
    data_agendada: new Date(formData.get("data_agendada")),
    data_inicio: formData.get("data_inicio") ? new Date(formData.get("data_inicio")) : null,
    data_conclusao: formData.get("data_conclusao") ? new Date(formData.get("data_conclusao")) : null,
    km_veiculo: parseInt(formData.get("km_veiculo")),
    updatedAt: /* @__PURE__ */ new Date()
  };
  await db.update(maintenance).set(payload).where(eq(maintenance.id, id));
  if (status === StatusManutencao.IN_PROGRESS) {
    await db.update(vehicle).set({
      status: "MAINTENANCE"
    }).where(eq(vehicle.id, vehicle_id));
  }
  return redirect("/admin/maintenance");
};
const admin_maintenance_$id_edit = UNSAFE_withComponentProps(function EditMaintenancePage() {
  const {
    maintenance: maintenance2,
    vehicles
  } = useLoaderData();
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Editar Manuten√ß√£o",
      subtitle: `Ordem de Servi√ßo #${maintenance2.id.substring(0, 8)}`,
      backLink: "/admin/maintenance"
    }), /* @__PURE__ */ jsx(MaintenanceForm, {
      intent: "edit",
      defaultValues: maintenance2,
      vehicles
    })]
  }, "edit-maintenance-main");
});
const route50 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$w,
  default: admin_maintenance_$id_edit,
  loader: loader$y
}, Symbol.toStringTag, { value: "Module" }));
const TeamManagement = ({ themeColor, context }) => {
  const [members, setMembers] = useState([]);
  const [newMemberEmail, setNewMemberEmail] = useState("");
  const [newMemberRole, setNewMemberRole] = useState("user");
  const [isLoading, setIsLoading] = useState(true);
  const [isAdding, setIsAdding] = useState(false);
  const [error, setError] = useState("");
  const [success, setSuccess] = useState("");
  const [searchResults, setSearchResults] = useState([]);
  const [isSearching, setIsSearching] = useState(false);
  const [showResults, setShowResults] = useState(false);
  const fetchMembers = async () => {
    setIsLoading(true);
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/organization/members`, {
        credentials: "include"
      });
      if (response.ok) {
        const data2 = await response.json();
        setMembers(data2);
      }
    } catch (err) {
      console.error("Failed to fetch members");
    } finally {
      setIsLoading(false);
    }
  };
  React__default.useEffect(() => {
    fetchMembers();
  }, [context]);
  React__default.useEffect(() => {
    const delayDebounceFn = setTimeout(async () => {
      if (newMemberEmail.length >= 2 && !newMemberEmail.includes("@")) {
        setIsSearching(true);
        try {
          const response = await fetch(`${"https://api.yourdomain.com"}/api/organization/candidates?q=${newMemberEmail}`, {
            credentials: "include"
          });
          if (response.ok) {
            const data2 = await response.json();
            setSearchResults(data2);
            setShowResults(true);
          }
        } catch (error2) {
          console.error(error2);
        } finally {
          setIsSearching(false);
        }
      } else {
        setSearchResults([]);
        setShowResults(false);
      }
    }, 300);
    return () => clearTimeout(delayDebounceFn);
  }, [newMemberEmail]);
  const handleAddMember = async (e) => {
    e.preventDefault();
    setIsAdding(true);
    setError("");
    setSuccess("");
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/organization/members`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        credentials: "include",
        body: JSON.stringify({ email: newMemberEmail, role: newMemberRole })
      });
      const data2 = await response.json();
      if (response.ok) {
        setSuccess("Membro adicionado com sucesso!");
        setNewMemberEmail("");
        fetchMembers();
      } else {
        setError(data2.error || "Erro ao adicionar membro");
      }
    } catch (err) {
      setError("Erro ao conectar com o servidor");
    } finally {
      setIsAdding(false);
    }
  };
  const handleRemoveMember = async (userId) => {
    if (!confirm("Tem certeza que deseja remover este membro da equipe?")) return;
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/organization/members/${userId}`, {
        method: "DELETE",
        credentials: "include"
      });
      if (response.ok) {
        fetchMembers();
      } else {
        alert("Erro ao remover membro");
      }
    } catch (err) {
      alert("Erro ao remover membro");
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "space-y-8 max-w-3xl", children: [
    /* @__PURE__ */ jsxs("div", { className: "bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700", children: [
      /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Users, { size: 20, className: `text-${themeColor}-600` }),
        "Adicionar Membro √† Equipe"
      ] }),
      /* @__PURE__ */ jsxs("form", { onSubmit: handleAddMember, className: "flex gap-4 items-end", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1", children: "Email do Usu√°rio" }),
          /* @__PURE__ */ jsxs("div", { className: "relative", children: [
            /* @__PURE__ */ jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ jsx(Search, { className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400", size: 18 }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  type: "text",
                  value: newMemberEmail,
                  onChange: (e) => {
                    setNewMemberEmail(e.target.value);
                    setShowResults(true);
                  },
                  onFocus: () => setShowResults(true),
                  placeholder: "Buscar por nome ou email...",
                  className: "w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",
                  required: true,
                  autoComplete: "off"
                }
              ),
              isSearching && /* @__PURE__ */ jsx("div", { className: "absolute right-3 top-1/2 -translate-y-1/2", children: /* @__PURE__ */ jsx(LoaderCircle, { className: "animate-spin text-slate-400", size: 16 }) })
            ] }),
            showResults && searchResults.length > 0 && /* @__PURE__ */ jsx("div", { className: "absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto", children: searchResults.map((user2) => /* @__PURE__ */ jsxs(
              "button",
              {
                type: "button",
                onClick: () => {
                  setNewMemberEmail(user2.email);
                  setShowResults(false);
                },
                className: "w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors border-b border-slate-100 dark:border-slate-700 last:border-0",
                children: [
                  /* @__PURE__ */ jsx("p", { className: "font-medium text-slate-800 dark:text-white", children: user2.name }),
                  /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400", children: user2.email })
                ]
              },
              user2.id
            )) })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "w-48", children: [
          /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1", children: "Fun√ß√£o" }),
          /* @__PURE__ */ jsxs(
            "select",
            {
              value: newMemberRole,
              onChange: (e) => setNewMemberRole(e.target.value),
              className: "w-full px-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",
              children: [
                /* @__PURE__ */ jsx("option", { value: "user", children: "Usu√°rio" }),
                /* @__PURE__ */ jsx("option", { value: "operacional", children: "Operacional" }),
                /* @__PURE__ */ jsx("option", { value: "financeiro", children: "Financeiro" }),
                /* @__PURE__ */ jsx("option", { value: "admin", children: "Administrador" })
              ]
            }
          )
        ] }),
        /* @__PURE__ */ jsx(
          "button",
          {
            type: "submit",
            disabled: isAdding,
            className: `px-6 py-2 bg-${themeColor}-600 hover:bg-${themeColor}-700 text-white font-medium rounded-lg transition-colors disabled:opacity-70 h-[42px]`,
            children: isAdding ? "Adicionando..." : "Adicionar"
          }
        )
      ] }),
      error && /* @__PURE__ */ jsx("p", { className: "mt-3 text-sm text-red-600 dark:text-red-400", children: error }),
      success && /* @__PURE__ */ jsx("p", { className: "mt-3 text-sm text-green-600 dark:text-green-400", children: success })
    ] }),
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-bold text-slate-800 dark:text-white mb-4", children: "Membros Atuais" }),
      /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden", children: /* @__PURE__ */ jsxs("table", { className: "w-full text-left", children: [
        /* @__PURE__ */ jsx("thead", { className: "bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700", children: /* @__PURE__ */ jsxs("tr", { children: [
          /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider", children: "Nome" }),
          /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider", children: "Email" }),
          /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider", children: "Fun√ß√£o" }),
          /* @__PURE__ */ jsx("th", { className: "px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right", children: "A√ß√µes" })
        ] }) }),
        /* @__PURE__ */ jsx("tbody", { className: "divide-y divide-slate-200 dark:divide-slate-700", children: isLoading ? /* @__PURE__ */ jsx("tr", { children: /* @__PURE__ */ jsx("td", { colSpan: 4, className: "px-6 py-8 text-center text-slate-500", children: "Carregando equipe..." }) }) : members.length === 0 ? /* @__PURE__ */ jsx("tr", { children: /* @__PURE__ */ jsx("td", { colSpan: 4, className: "px-6 py-8 text-center text-slate-500", children: "Nenhum membro encontrado nesta organiza√ß√£o." }) }) : members.map((member2) => /* @__PURE__ */ jsxs("tr", { className: "hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors", children: [
          /* @__PURE__ */ jsx("td", { className: "px-6 py-4 text-sm font-medium text-slate-900 dark:text-white", children: member2.name }),
          /* @__PURE__ */ jsx("td", { className: "px-6 py-4 text-sm text-slate-500 dark:text-slate-400", children: member2.email }),
          /* @__PURE__ */ jsx("td", { className: "px-6 py-4 text-sm", children: /* @__PURE__ */ jsx("span", { className: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 capitalize`, children: member2.role }) }),
          /* @__PURE__ */ jsx("td", { className: "px-6 py-4 text-sm text-right", children: /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => handleRemoveMember(member2.id),
              className: "text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",
              title: "Remover membro",
              children: /* @__PURE__ */ jsx(Trash2, { size: 18 })
            }
          ) })
        ] }, member2.id)) })
      ] }) })
    ] })
  ] });
};
const loader$x = async ({
  request
}) => {
  const apiUrl = process.env.VITE_API_URL || "http://localhost:3001";
  const response = await fetch(`${apiUrl}/api/admin/organizations`, {
    headers: {
      Cookie: request.headers.get("Cookie") || ""
    }
  });
  if (response.status === 401 || response.status === 403) {
    return data({
      organizations: []
    });
  }
  if (!response.ok) {
    throw new Response("Falha ao carregar organiza√ß√µes", {
      status: response.status
    });
  }
  const organizations = await response.json();
  return data({
    organizations
  });
};
const action$v = async ({
  request
}) => {
  const apiUrl = process.env.VITE_API_URL || "http://localhost:3001";
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  const body = {};
  formData.forEach((value, key) => body[key] = value);
  let url = `${apiUrl}/api/admin/organizations`;
  let method = "POST";
  if (intent === "delete") {
    url = `${apiUrl}/api/admin/organizations/${id}`;
    method = "DELETE";
  }
  const response = await fetch(url, {
    method,
    headers: {
      "Content-Type": "application/json",
      Cookie: request.headers.get("Cookie") || ""
    },
    body: method !== "GET" ? JSON.stringify(body) : void 0
  });
  if (!response.ok) {
    return data({
      success: false,
      message: "Erro na opera√ß√£o"
    }, {
      status: response.status
    });
  }
  return data({
    success: true,
    message: intent === "create" ? "Organiza√ß√£o criada" : "Organiza√ß√£o removida"
  });
};
const admin_organizations__index = UNSAFE_withComponentProps(function OrganizationsPage() {
  const {
    organizations: initialOrgs
  } = useLoaderData();
  const fetcher = useFetcher();
  const {
    currentContext
  } = useApp();
  const [selectedOrgId, setSelectedOrgId] = useState(null);
  const [activeDetailTab, setActiveDetailTab] = useState("geral");
  const [newOrgName, setNewOrgName] = useState("");
  const [newOrgSlug, setNewOrgSlug] = useState("");
  const organizations = initialOrgs;
  if (selectedOrgId) {
    const org = organizations.find((o) => o.id === selectedOrgId);
    return /* @__PURE__ */ jsxs("div", {
      className: "p-8 space-y-8 animate-in fade-in duration-300",
      children: [/* @__PURE__ */ jsx(PageHeader, {
        title: (org == null ? void 0 : org.name) || "Organiza√ß√£o",
        subtitle: "Gerenciando detalhes corporativos e equipe",
        icon: Building2,
        onClickBack: () => setSelectedOrgId(null),
        backLabel: "VOLTAR"
      }), /* @__PURE__ */ jsxs("div", {
        className: "flex gap-2 p-1.5 bg-muted/40 backdrop-blur-sm border border-border/40 rounded-2xl w-fit",
        children: [/* @__PURE__ */ jsx("button", {
          onClick: () => setActiveDetailTab("geral"),
          className: cn$1("px-6 py-3 text-[12px] font-black uppercase tracking-widest transition-all rounded-xl", activeDetailTab === "geral" ? "bg-background text-primary shadow-lg" : "text-muted-foreground"),
          children: "DADOS GERAIS"
        }), /* @__PURE__ */ jsx("button", {
          onClick: () => setActiveDetailTab("equipe"),
          className: cn$1("px-6 py-3 text-[12px] font-black uppercase tracking-widest transition-all rounded-xl", activeDetailTab === "equipe" ? "bg-background text-primary shadow-lg" : "text-muted-foreground"),
          children: "EQUIPE"
        })]
      }), activeDetailTab === "geral" ? /* @__PURE__ */ jsx(Card, {
        className: "p-8 shadow-2xl bg-card/50 rounded-[2.5rem]",
        children: /* @__PURE__ */ jsxs("form", {
          className: "space-y-6",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-xs font-bold uppercase text-muted-foreground ml-1",
                children: "Raz√£o Social"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: org == null ? void 0 : org.name,
                disabled: true,
                className: "w-full h-14 px-4 bg-muted/20 border border-border/40 rounded-2xl font-bold opacity-60"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-xs font-bold uppercase text-muted-foreground ml-1",
                children: "Slug"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: org == null ? void 0 : org.slug,
                disabled: true,
                className: "w-full h-14 px-4 bg-muted/20 border border-border/40 rounded-2xl font-bold opacity-60"
              })]
            })]
          }), /* @__PURE__ */ jsx(Button, {
            className: "h-14 px-8 rounded-xl font-black uppercase text-xs tracking-widest shadow-lg",
            children: "SALVAR ALTERA√á√ïES"
          })]
        })
      }) : /* @__PURE__ */ jsx(TeamManagement, {
        themeColor: "blue",
        context: currentContext
      })]
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Multigest√£o de Organiza√ß√µes",
      subtitle: "Administre m√∫ltiplas entidades e sess√µes multi-tenant",
      icon: Building2
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-3 gap-6",
      children: [/* @__PURE__ */ jsxs(Card, {
        className: "lg:col-span-1 shadow-2xl bg-card/50 rounded-[2.5rem] p-8 h-fit",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-sm font-black uppercase tracking-widest text-muted-foreground mb-6",
          children: "Cadastrar Entidade"
        }), /* @__PURE__ */ jsxs(fetcher.Form, {
          method: "post",
          className: "space-y-6",
          children: [/* @__PURE__ */ jsx("input", {
            type: "hidden",
            name: "intent",
            value: "create"
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1.5",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-[12px] font-bold uppercase text-muted-foreground ml-1",
              children: "Nome Comercial"
            }), /* @__PURE__ */ jsx("input", {
              name: "name",
              type: "text",
              value: newOrgName,
              onChange: (e) => {
                setNewOrgName(e.target.value);
                setNewOrgSlug(e.target.value.toLowerCase().replace(/[^a-z0-9]/g, "-"));
              },
              className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-2xl font-bold",
              required: true
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1.5",
            children: [/* @__PURE__ */ jsx("label", {
              className: "text-[12px] font-bold uppercase text-muted-foreground ml-1",
              children: "Slug (Identificador)"
            }), /* @__PURE__ */ jsx("input", {
              name: "slug",
              type: "text",
              value: newOrgSlug,
              onChange: (e) => setNewOrgSlug(e.target.value),
              className: "w-full h-14 px-4 bg-muted/20 border border-border/50 rounded-2xl font-bold",
              required: true
            })]
          }), /* @__PURE__ */ jsx(Button, {
            type: "submit",
            disabled: fetcher.state !== "idle",
            className: "w-full h-14 rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg",
            children: fetcher.state !== "idle" ? /* @__PURE__ */ jsx(LoaderCircle, {
              className: "animate-spin",
              size: 18
            }) : "PROCESSAR CRIA√á√ÉO"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-2 space-y-4",
        children: [/* @__PURE__ */ jsx("h2", {
          className: "text-xs font-black uppercase tracking-widest text-muted-foreground ml-4",
          children: "Sincroniza√ß√£o de Entidades"
        }), /* @__PURE__ */ jsx("div", {
          className: "grid grid-cols-1 md:grid-cols-2 gap-6",
          children: organizations.map((org) => {
            var _a;
            return /* @__PURE__ */ jsxs(Card, {
              onClick: () => setSelectedOrgId(org.id),
              className: "group shadow-xl bg-card/50 rounded-[2.5rem] p-8 hover:border-primary/40 cursor-pointer transition-all hover:bg-muted/20",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex items-start justify-between mb-6",
                children: [/* @__PURE__ */ jsx("div", {
                  className: "w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-2xl transition-transform group-hover:scale-110 shadow-lg",
                  children: (_a = org.name) == null ? void 0 : _a.charAt(0)
                }), /* @__PURE__ */ jsx(Badge$1, {
                  className: "bg-emerald-500/10 text-emerald-500 text-[10px] font-black uppercase tracking-widest rounded-lg",
                  children: "ATIVO"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "font-black text-lg uppercase tracking-tight",
                  children: org.name
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black text-muted-foreground uppercase mt-1",
                  children: org.slug
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "mt-8 flex items-center text-[10px] font-black uppercase tracking-widest text-primary gap-2 opacity-0 group-hover:opacity-100 transition-all",
                children: ["EXPLORAR ENTIDADE ", /* @__PURE__ */ jsx(ChevronRight, {
                  size: 14
                })]
              })]
            }, org.id);
          })
        })]
      })]
    })]
  }, "org-main");
});
const route51 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$v,
  default: admin_organizations__index,
  loader: loader$x
}, Symbol.toStringTag, { value: "Module" }));
const useDateFormatter = () => {
  const { systemSettings } = useApp();
  const language = systemSettings["system_language"] || "pt-BR";
  const getLocale = () => {
    switch (language) {
      case "en-US":
        return enUS;
      case "es-ES":
        return es;
      case "pt-BR":
      default:
        return ptBR;
    }
  };
  const formatDate = (date2, formatStr = "dd/MM/yyyy") => {
    if (!date2) return "-";
    let dateObj;
    if (typeof date2 === "string") {
      dateObj = parseISO(date2);
    } else {
      dateObj = date2;
    }
    if (isNaN(dateObj.getTime())) return "-";
    try {
      return format(dateObj, formatStr, { locale: getLocale() });
    } catch (error) {
      console.error("Error formatting date:", error);
      return "-";
    }
  };
  const formatDateTime = (date2) => {
    return formatDate(date2, "dd/MM/yyyy HH:mm");
  };
  return {
    formatDate,
    formatDateTime,
    locale: getLocale()
  };
};
const Table = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx("div", { className: "relative w-full overflow-auto", children: /* @__PURE__ */ jsx(
  "table",
  {
    ref,
    className: cn$1("w-full caption-bottom text-sm", className),
    ...props
  }
) }));
Table.displayName = "Table";
const TableHeader = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx("thead", { ref, className: cn$1("[&_tr]:border-b bg-muted/30", className), ...props }));
TableHeader.displayName = "TableHeader";
const TableBody = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "tbody",
  {
    ref,
    className: cn$1("[&_tr:last-child]:border-0", className),
    ...props
  }
));
TableBody.displayName = "TableBody";
const TableFooter = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "tfoot",
  {
    ref,
    className: cn$1(
      "border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",
      className
    ),
    ...props
  }
));
TableFooter.displayName = "TableFooter";
const TableRow = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "tr",
  {
    ref,
    className: cn$1(
      "border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",
      className
    ),
    ...props
  }
));
TableRow.displayName = "TableRow";
const TableHead = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "th",
  {
    ref,
    className: cn$1(
      "h-12 px-4 text-left align-middle font-black uppercase text-[10px] tracking-[0.2em] text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    ),
    ...props
  }
));
TableHead.displayName = "TableHead";
const TableCell = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "td",
  {
    ref,
    className: cn$1(
      "p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
      className
    ),
    ...props
  }
));
TableCell.displayName = "TableCell";
const TableCaption = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "caption",
  {
    ref,
    className: cn$1("mt-4 text-sm text-muted-foreground", className),
    ...props
  }
));
TableCaption.displayName = "TableCaption";
const Popover = PopoverPrimitive.Root;
const PopoverTrigger = PopoverPrimitive.Trigger;
const PopoverContent = React.forwardRef(({ className, align = "center", sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsx(PopoverPrimitive.Portal, { children: /* @__PURE__ */ jsx(
  PopoverPrimitive.Content,
  {
    ref,
    align,
    sideOffset,
    className: cn$1(
      "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
) }));
PopoverContent.displayName = PopoverPrimitive.Content.displayName;
const DashboardCard = ({
  title,
  value,
  icon: Icon2,
  variant = "primary",
  trend,
  className
}) => {
  const variants = {
    primary: "bg-primary/10 text-primary",
    emerald: "bg-emerald-500/10 text-emerald-600",
    blue: "bg-blue-500/10 text-blue-600",
    purple: "bg-purple-500/10 text-purple-600",
    amber: "bg-amber-500/10 text-amber-600",
    rose: "bg-rose-500/10 text-rose-600"
  };
  return /* @__PURE__ */ jsx(Card, { className: cn$1(
    "shadow-xl shadow-muted/20 bg-card/50 backdrop-blur-sm group hover:bg-card transition-all duration-300 rounded-3xl border border-border/40",
    className
  ), children: /* @__PURE__ */ jsx(CardContent, { className: "p-6", children: /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-start", children: [
    /* @__PURE__ */ jsxs("div", { className: "space-y-1", children: [
      /* @__PURE__ */ jsx("p", { className: "text-label-caps", children: title }),
      /* @__PURE__ */ jsx("p", { className: "text-data-kpi", children: value }),
      trend && /* @__PURE__ */ jsx("p", { className: "text-[10px] font-bold text-emerald-600 mt-1 flex items-center gap-1", children: trend })
    ] }),
    /* @__PURE__ */ jsx("div", { className: cn$1(
      "p-3 rounded-2xl transition-all duration-500 group-hover:scale-110 group-hover:rotate-3",
      variants[variant]
    ), children: /* @__PURE__ */ jsx(Icon2, { size: 20, strokeWidth: 2.5 }) })
  ] }) }) });
};
const ListFilterSection = ({
  children,
  className,
  gridClassName
}) => {
  return /* @__PURE__ */ jsx("div", { className: cn$1(
    "bg-card/50 backdrop-blur-sm p-6 rounded-3xl border border-border/40 shadow-xl shadow-muted/10",
    className
  ), children: /* @__PURE__ */ jsx("div", { className: cn$1("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", gridClassName), children }) });
};
const loader$w = async () => {
  const reservations = await db.select().from(reservation).orderBy(desc(reservation.createdAt));
  const vehicles = await db.select().from(vehicle);
  const trips$1 = await db.select().from(trips);
  return data({
    reservations,
    vehicles,
    trips: trips$1
  });
};
const action$u = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(reservation).where(eq(reservation.id, id));
    return data({
      success: true
    });
  }
  if (intent === "update-status") {
    const status = formData.get("status");
    await db.update(reservation).set({
      status,
      updatedAt: /* @__PURE__ */ new Date()
    }).where(eq(reservation.id, id));
    return data({
      success: true
    });
  }
  return null;
};
const StatusBadge$8 = ({
  status
}) => {
  const configs = {
    [ReservationStatus.PENDING]: {
      color: "bg-amber-500",
      text: "text-amber-500",
      label: ReservationStatusLabel[ReservationStatus.PENDING]
    },
    [ReservationStatus.CONFIRMED]: {
      color: "bg-emerald-500",
      text: "text-emerald-500",
      label: ReservationStatusLabel[ReservationStatus.CONFIRMED]
    },
    [ReservationStatus.CANCELLED]: {
      color: "bg-destructive",
      text: "text-destructive",
      label: ReservationStatusLabel[ReservationStatus.CANCELLED]
    },
    [ReservationStatus.USED]: {
      color: "bg-blue-500",
      text: "text-blue-500",
      label: ReservationStatusLabel[ReservationStatus.USED]
    },
    [ReservationStatus.CHECKED_IN]: {
      color: "bg-indigo-500",
      text: "text-indigo-500",
      label: ReservationStatusLabel[ReservationStatus.CHECKED_IN]
    }
  };
  const config2 = configs[status] || configs[ReservationStatus.PENDING];
  return /* @__PURE__ */ jsx(Badge$1, {
    variant: "outline",
    className: cn$1("rounded-xl font-semibold text-[10px] px-2 py-0.5 uppercase tracking-tighter", config2.color + "/10", config2.text),
    children: config2.label
  });
};
const admin_reservations__index = UNSAFE_withComponentProps(function ReservationsPage() {
  const {
    reservations: initialReservations,
    vehicles,
    trips: trips2
  } = useLoaderData();
  const fetcher = useFetcher();
  const {
    formatDate
  } = useDateFormatter();
  const [filtroStatus, setFiltroStatus] = useState([]);
  const [filtroVeiculo, setFiltroVeiculo] = useState("TODOS");
  const [filtroViagem, setFiltroViagem] = useState("TODOS");
  const [busca, setBusca] = useState("");
  const [isStatusDropdownOpen, setIsStatusDropdownOpen] = useState(false);
  useNavigate();
  const reservations = initialReservations;
  const filteredReservations = reservations.filter((r2) => {
    const matchStatus = filtroStatus.length === 0 || filtroStatus.includes(r2.status);
    const matchVeiculo = filtroVeiculo === "TODOS" || r2.vehicle_id === filtroVeiculo;
    const matchViagem = filtroViagem === "TODOS" || r2.trip_id === filtroViagem;
    const matchBusca = busca === "" || (r2.passenger_name || "").toLowerCase().includes(busca.toLowerCase()) || (r2.ticket_code || "").toLowerCase().includes(busca.toLowerCase());
    return matchStatus && matchVeiculo && matchViagem && matchBusca;
  });
  const statusOptions = [{
    value: ReservationStatus.PENDING,
    label: ReservationStatusLabel[ReservationStatus.PENDING]
  }, {
    value: ReservationStatus.CONFIRMED,
    label: ReservationStatusLabel[ReservationStatus.CONFIRMED]
  }, {
    value: ReservationStatus.CHECKED_IN,
    label: ReservationStatusLabel[ReservationStatus.CHECKED_IN]
  }, {
    value: ReservationStatus.USED,
    label: ReservationStatusLabel[ReservationStatus.USED]
  }, {
    value: ReservationStatus.CANCELLED,
    label: ReservationStatusLabel[ReservationStatus.CANCELLED]
  }];
  const toggleStatus = (status) => {
    setFiltroStatus((prev) => prev.includes(status) ? prev.filter((s) => s !== status) : [...prev, status]);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Reservas",
      subtitle: "Painel de controle de tickets e embarques",
      icon: Ticket,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/reservations/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 3
          }), " NOVA RESERVA"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total Reservas",
        value: reservations.length,
        icon: Inbox,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Aguardando",
        value: reservations.filter((r2) => r2.status === ReservationStatus.PENDING).length,
        icon: Clock,
        variant: "amber"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Confirmadas",
        value: reservations.filter((r2) => r2.status === ReservationStatus.CONFIRMED).length,
        icon: ShieldCheck,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Performance",
        value: "94%",
        icon: Gauge,
        variant: "blue"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      className: "lg:grid-cols-4",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "C√≥digo ou passageiro...",
            value: busca,
            onChange: (e) => setBusca(e.target.value),
            className: "h-14 pl-12 bg-muted/40 border-input rounded-xl font-bold"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Ve√≠culo"
        }), /* @__PURE__ */ jsxs(Select, {
          value: filtroVeiculo,
          onValueChange: setFiltroVeiculo,
          children: [/* @__PURE__ */ jsx(SelectTrigger, {
            className: "h-14 w-full bg-muted/40 border-input rounded-xl font-bold",
            children: /* @__PURE__ */ jsx(SelectValue, {
              placeholder: "Todos"
            })
          }), /* @__PURE__ */ jsxs(SelectContent, {
            className: "rounded-xl border-none shadow-2xl",
            children: [/* @__PURE__ */ jsx(SelectItem, {
              value: "TODOS",
              className: "rounded-xl font-bold",
              children: "Todos os Ve√≠culos"
            }), vehicles.map((v) => /* @__PURE__ */ jsxs(SelectItem, {
              value: v.id,
              className: "rounded-xl font-bold",
              children: [v.modelo, " - ", v.placa]
            }, v.id))]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Viagem"
        }), /* @__PURE__ */ jsxs(Select, {
          value: filtroViagem,
          onValueChange: setFiltroViagem,
          children: [/* @__PURE__ */ jsx(SelectTrigger, {
            className: "h-14 w-full bg-muted/40 border-input rounded-xl font-bold",
            children: /* @__PURE__ */ jsx(SelectValue, {
              placeholder: "Todas"
            })
          }), /* @__PURE__ */ jsxs(SelectContent, {
            className: "rounded-xl border-none shadow-2xl",
            children: [/* @__PURE__ */ jsx(SelectItem, {
              value: "TODOS",
              className: "rounded-xl font-bold",
              children: "Todas as Viagens"
            }), trips2.map((v) => /* @__PURE__ */ jsx(SelectItem, {
              value: v.id,
              className: "rounded-xl font-bold",
              children: formatDate(v.departure_date)
            }, v.id))]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Status"
        }), /* @__PURE__ */ jsxs(Popover, {
          open: isStatusDropdownOpen,
          onOpenChange: setIsStatusDropdownOpen,
          children: [/* @__PURE__ */ jsx(PopoverTrigger, {
            asChild: true,
            children: /* @__PURE__ */ jsxs(Button, {
              variant: "outline",
              className: "h-14 w-full bg-muted/40 border-input rounded-xl font-bold justify-between",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-2",
                children: [/* @__PURE__ */ jsx(Funnel, {
                  size: 16,
                  strokeWidth: 2.5
                }), /* @__PURE__ */ jsx("span", {
                  children: filtroStatus.length === 0 ? "Todos Status" : `${filtroStatus.length} selecionado(s)`
                })]
              }), /* @__PURE__ */ jsx(ChevronDown, {
                size: 16
              })]
            })
          }), /* @__PURE__ */ jsx(PopoverContent, {
            className: "w-[200px] p-2 rounded-xl shadow-2xl border-none",
            children: statusOptions.map((opt) => /* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2 p-2 hover:bg-muted rounded-lg cursor-pointer",
              onClick: () => toggleStatus(opt.value),
              children: [/* @__PURE__ */ jsx("div", {
                className: cn$1("w-4 h-4 rounded border-2", filtroStatus.includes(opt.value) ? "bg-primary" : "border-muted-foreground"),
                children: filtroStatus.includes(opt.value) && /* @__PURE__ */ jsx(Check, {
                  size: 12,
                  className: "text-white"
                })
              }), /* @__PURE__ */ jsx("span", {
                className: "text-xs font-bold",
                children: opt.label
              })]
            }, opt.value))
          })]
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Passageiro"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Assento"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-center",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 text-right h-14 text-table-head",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: filteredReservations.map((reserva) => /* @__PURE__ */ jsxs(TableRow, {
            className: "group hover:bg-muted/20 border-border/30 transition-colors h-20",
            children: [/* @__PURE__ */ jsx(TableCell, {
              className: "pl-8",
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex flex-col",
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-semibold text-sm tracking-tight",
                  children: reserva.passenger_name
                }), /* @__PURE__ */ jsxs("span", {
                  className: "text-[10px] font-bold text-muted-foreground uppercase",
                  children: ["#", reserva.ticket_code || reserva.id.substring(0, 8)]
                })]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              children: /* @__PURE__ */ jsx(Badge$1, {
                variant: "outline",
                className: "rounded-lg font-bold",
                children: reserva.seat_number
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "text-center",
              children: /* @__PURE__ */ jsx(StatusBadge$8, {
                status: reserva.status
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "pr-8 text-right",
              children: /* @__PURE__ */ jsxs(DropdownMenu, {
                children: [/* @__PURE__ */ jsx(DropdownMenuTrigger, {
                  asChild: true,
                  children: /* @__PURE__ */ jsx(Button, {
                    variant: "ghost",
                    size: "icon",
                    className: "rounded-xl hover:bg-primary/10 transition-colors",
                    children: /* @__PURE__ */ jsx(Ellipsis, {
                      size: 18
                    })
                  })
                }), /* @__PURE__ */ jsxs(DropdownMenuContent, {
                  align: "end",
                  className: "w-56 p-2 rounded-xl shadow-2xl border-none",
                  children: [/* @__PURE__ */ jsx(DropdownMenuItem, {
                    onClick: () => fetcher.submit({
                      intent: "update-status",
                      id: reserva.id,
                      status: ReservationStatus.CHECKED_IN
                    }, {
                      method: "post"
                    }),
                    className: "rounded-xl font-bold h-11",
                    children: "Realizar Check-in"
                  }), /* @__PURE__ */ jsx(DropdownMenuItem, {
                    onClick: () => fetcher.submit({
                      intent: "delete",
                      id: reserva.id
                    }, {
                      method: "post"
                    }),
                    className: "rounded-xl font-bold h-11 text-destructive",
                    children: "Excluir Reserva"
                  })]
                })]
              })
            })]
          }, reserva.id))
        })]
      })
    })]
  }, "reservas-main");
});
const route52 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$u,
  default: admin_reservations__index,
  loader: loader$w
}, Symbol.toStringTag, { value: "Module" }));
const Tabs = TabsPrimitive.Root;
const TabsList = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  TabsPrimitive.List,
  {
    ref,
    className: cn$1(
      "inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",
      className
    ),
    ...props
  }
));
TabsList.displayName = TabsPrimitive.List.displayName;
const TabsTrigger = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  TabsPrimitive.Trigger,
  {
    ref,
    className: cn$1(
      "inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",
      className
    ),
    ...props
  }
));
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName;
const TabsContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  TabsPrimitive.Content,
  {
    ref,
    className: cn$1(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className
    ),
    ...props
  }
));
TabsContent.displayName = TabsPrimitive.Content.displayName;
const Dialog = DialogPrimitive.Root;
const DialogPortal = DialogPrimitive.Portal;
const DialogOverlay = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DialogPrimitive.Overlay,
  {
    ref,
    className: cn$1(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    ),
    ...props
  }
));
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;
const DialogContent = React.forwardRef(
  ({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs(DialogPortal, { children: [
    /* @__PURE__ */ jsx(DialogOverlay, {}),
    /* @__PURE__ */ jsxs(
      DialogPrimitive.Content,
      {
        ref,
        className: cn$1(
          "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
          className
        ),
        ...props,
        children: [
          children,
          /* @__PURE__ */ jsxs(DialogPrimitive.Close, { className: "absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground", children: [
            /* @__PURE__ */ jsx(X, { className: "h-4 w-4" }),
            /* @__PURE__ */ jsx("span", { className: "sr-only", children: "Close" })
          ] })
        ]
      }
    )
  ] })
);
DialogContent.displayName = DialogPrimitive.Content.displayName;
const DialogHeader = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx(
  "div",
  {
    className: cn$1(
      "flex flex-col space-y-1.5 text-center sm:text-left",
      className
    ),
    ...props
  }
);
DialogHeader.displayName = "DialogHeader";
const DialogFooter = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx(
  "div",
  {
    className: cn$1(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    ),
    ...props
  }
);
DialogFooter.displayName = "DialogFooter";
const DialogTitle = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DialogPrimitive.Title,
  {
    ref,
    className: cn$1(
      "text-lg font-semibold leading-none tracking-tight",
      className
    ),
    ...props
  }
));
DialogTitle.displayName = DialogPrimitive.Title.displayName;
const DialogDescription = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DialogPrimitive.Description,
  {
    ref,
    className: cn$1("text-sm text-muted-foreground", className),
    ...props
  }
));
DialogDescription.displayName = DialogPrimitive.Description.displayName;
const MaintenanceActions = ({ manutencao, onDelete }) => {
  const navigate = useNavigate();
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/maintenance/${manutencao.id}`, {
        method: "DELETE",
        credentials: "include"
      });
      if (!response.ok) throw new Error("Falha ao excluir");
      onDelete(manutencao.id);
    } catch (error) {
      console.error("Erro ao excluir:", error);
      alert("Erro ao excluir manuten√ß√£o");
    } finally {
      setIsDeleting(false);
      setShowDeleteConfirm(false);
    }
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs(DropdownMenu, { children: [
      /* @__PURE__ */ jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs(Button, { variant: "ghost", className: "h-10 w-10 p-0 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors", children: [
        /* @__PURE__ */ jsx("span", { className: "sr-only", children: "Abrir menu" }),
        /* @__PURE__ */ jsx(Ellipsis, { className: "h-5 w-5", strokeWidth: 2.5 })
      ] }) }),
      /* @__PURE__ */ jsxs(DropdownMenuContent, { align: "end", className: "w-56 p-2 rounded-2xl shadow-2xl border-none bg-card/95 backdrop-blur-md", children: [
        /* @__PURE__ */ jsx(DropdownMenuLabel, { className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2", children: "Opera√ß√µes" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => navigate(`/admin/manutencao/${manutencao.id}/editar`),
            className: "rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(SquarePen, { className: "h-4 w-4" }),
              "Editar Registro"
            ]
          }
        ),
        /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-border/50 my-2" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => setShowDeleteConfirm(true),
            className: "rounded-xl px-3 py-2.5 font-bold text-destructive focus:bg-destructive focus:text-destructive-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(Trash2, { className: "h-4 w-4" }),
              "Excluir Manuten√ß√£o"
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsx(Dialog, { open: showDeleteConfirm, onOpenChange: setShowDeleteConfirm, children: /* @__PURE__ */ jsxs(DialogContent, { className: "rounded-[2rem] border-none shadow-2xl max-w-sm p-8 bg-card/95 backdrop-blur-md", children: [
      /* @__PURE__ */ jsxs(DialogHeader, { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("div", { className: "mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx(TriangleAlert, { className: "h-8 w-8 text-destructive", strokeWidth: 2.5 }) }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-center", children: [
          /* @__PURE__ */ jsx(DialogTitle, { className: "text-2xl font-black tracking-tight", children: "Confirmar Exclus√£o" }),
          /* @__PURE__ */ jsxs(DialogDescription, { className: "font-medium text-muted-foreground leading-relaxed", children: [
            "Voc√™ tem certeza que deseja excluir este registro de manuten√ß√£o?",
            /* @__PURE__ */ jsx("br", {}),
            /* @__PURE__ */ jsx("span", { className: "text-xs uppercase font-black tracking-widest opacity-50", children: "Esta a√ß√£o √© irrevers√≠vel" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs(DialogFooter, { className: "mt-8 flex-col sm:flex-col gap-3", children: [
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "destructive",
            onClick: handleDelete,
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-base shadow-lg shadow-destructive/20 active:scale-95 transition-all",
            children: isDeleting ? /* @__PURE__ */ jsxs(Fragment, { children: [
              /* @__PURE__ */ jsx(LoaderCircle, { className: "mr-2 h-5 w-5 animate-spin" }),
              "EXCLUINDO..."
            ] }) : "EXCLUIR DEFINITIVAMENTE"
          }
        ),
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "ghost",
            onClick: () => setShowDeleteConfirm(false),
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-muted-foreground hover:bg-muted/50 transition-all",
            children: "CANCELAR"
          }
        )
      ] })
    ] }) })
  ] });
};
const loader$v = async () => {
  const maintenancesData = await db.query.maintenance.findMany({
    with: {
      vehicle: true
    },
    orderBy: [desc(maintenance.createdAt)]
  });
  return data({
    maintenances: maintenancesData
  });
};
const action$t = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(maintenance).where(eq(maintenance.id, id));
    return data({
      success: true,
      message: "Manuten√ß√£o exclu√≠da"
    });
  }
  return null;
};
const StatusBadge$7 = ({
  status
}) => {
  const configs = {
    [StatusManutencao.SCHEDULED]: {
      label: StatusManutencaoLabel[StatusManutencao.SCHEDULED],
      icon: Clock,
      className: "bg-blue-500/10 text-blue-600 border-blue-500/20"
    },
    [StatusManutencao.IN_PROGRESS]: {
      label: StatusManutencaoLabel[StatusManutencao.IN_PROGRESS],
      icon: Wrench,
      className: "bg-amber-500/10 text-amber-600 border-amber-500/20"
    },
    [StatusManutencao.COMPLETED]: {
      label: StatusManutencaoLabel[StatusManutencao.COMPLETED],
      icon: CircleCheckBig,
      className: "bg-emerald-500/10 text-emerald-600 border-emerald-500/20"
    },
    [StatusManutencao.CANCELLED]: {
      label: StatusManutencaoLabel[StatusManutencao.CANCELLED],
      icon: TriangleAlert,
      className: "bg-destructive/10 text-destructive border-destructive/20"
    }
  };
  const config2 = configs[status] || {
    label: status,
    className: "bg-muted text-muted-foreground",
    icon: Clock
  };
  const Icon2 = config2.icon;
  return /* @__PURE__ */ jsxs(Badge$1, {
    variant: "outline",
    className: cn$1("gap-1.5 font-bold px-2 py-0.5 rounded-lg", config2.className),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 12,
      strokeWidth: 2.5
    }), config2.label]
  });
};
const TypeBadge = ({
  tipo
}) => {
  const configs = {
    [TipoManutencao.PREVENTIVE]: {
      label: "Preventiva",
      icon: Clock,
      className: "text-blue-600"
    },
    [TipoManutencao.CORRECTIVE]: {
      label: "Corretiva",
      icon: TriangleAlert,
      className: "text-rose-600"
    },
    [TipoManutencao.PREDICTIVE]: {
      label: "Preditiva",
      icon: TrendingUp,
      className: "text-violet-600"
    },
    [TipoManutencao.INSPECTION]: {
      label: "Inspe√ß√£o",
      icon: CircleCheckBig,
      className: "text-emerald-600"
    }
  };
  const config2 = configs[tipo] || {
    label: tipo,
    className: "text-muted-foreground",
    icon: Wrench
  };
  const Icon2 = config2.icon;
  return /* @__PURE__ */ jsxs("div", {
    className: cn$1("flex items-center gap-1.5 font-bold text-[12px] tracking-tight", config2.className),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 12,
      strokeWidth: 2.5
    }), /* @__PURE__ */ jsx("span", {
      className: "uppercase",
      children: config2.label
    })]
  });
};
const admin_maintenance__index = UNSAFE_withComponentProps(function MaintenancePage() {
  const {
    maintenances: initialMaintenances
  } = useLoaderData();
  const navigate = useNavigate();
  const {
    formatDate: formatSystemDate
  } = useDateFormatter();
  const [searchTerm, setSearchTerm] = useState("");
  const [filterStatus, setFilterStatus] = useState("TODOS");
  const maintenances = initialMaintenances;
  const filteredMaintenances = maintenances.filter((m) => {
    var _a, _b, _c;
    const matchesSearch = ((_a = m.description) == null ? void 0 : _a.toLowerCase().includes(searchTerm.toLowerCase())) || "" || ((_c = (_b = m.vehicle) == null ? void 0 : _b.placa) == null ? void 0 : _c.toLowerCase().includes(searchTerm.toLowerCase())) || "";
    const matchesStatus = filterStatus === "TODOS" || m.status === filterStatus;
    return matchesSearch && matchesStatus;
  });
  const totalMaintenances = maintenances.length;
  const inProgress = maintenances.filter((m) => m.status === StatusManutencao.IN_PROGRESS).length;
  const totalCost = maintenances.reduce((acc, curr) => acc + Number(curr.cost_parts || 0) + Number(curr.cost_labor || 0), 0);
  const scheduledNext7Days = maintenances.filter((m) => {
    if (m.status !== StatusManutencao.SCHEDULED) return false;
    const date2 = new Date(m.scheduledDate);
    const now = /* @__PURE__ */ new Date();
    const diffTime = date2.getTime() - now.getTime();
    const diffDays = Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
    return diffDays >= 0 && diffDays <= 7;
  }).length;
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Manuten√ß√£o",
      subtitle: "Controle preventivo e corretivo da frota",
      icon: Wrench,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/maintenance/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 3
          }), "NOVA MANUTEN√á√ÉO"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total Registros",
        value: totalMaintenances,
        icon: Wrench,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Na Oficina",
        value: inProgress,
        icon: Clock,
        variant: "amber"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Investimento Total",
        value: `R$ ${totalCost.toLocaleString("pt-BR", {
          minimumFractionDigits: 2
        })}`,
        icon: DollarSign$1,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Agendadas (7d)",
        value: scheduledNext7Days,
        icon: Calendar$1,
        variant: "purple"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-[10px] font-bold uppercase tracking-[0.15em] text-muted-foreground/80 ml-1",
          children: "Buscar Manuten√ß√£o"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Descri√ß√£o ou placa...",
            value: searchTerm,
            onChange: (e) => setSearchTerm(e.target.value),
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-[10px] font-bold uppercase tracking-[0.15em] text-muted-foreground/80 ml-1",
          children: "Status da Manuten√ß√£o"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: filterStatus,
          onValueChange: setFilterStatus,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: StatusManutencao.SCHEDULED,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "Agendadas"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: StatusManutencao.IN_PROGRESS,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "Oficina"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: StatusManutencao.COMPLETED,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "Conclu√≠das"
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 overflow-hidden rounded-[2.5rem] bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-[12px] font-semibold uppercase tracking-widest",
              children: "Ve√≠culo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-[12px] font-semibold uppercase tracking-widest",
              children: "Descri√ß√£o / Tipo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-[12px] font-semibold uppercase tracking-widest",
              children: "Data & Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-[12px] font-semibold uppercase tracking-widest",
              children: "Investimento"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 h-14 text-[12px] font-semibold uppercase tracking-widest text-right",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: filteredMaintenances.length === 0 ? /* @__PURE__ */ jsx(TableRow, {
            children: /* @__PURE__ */ jsxs(TableCell, {
              colSpan: 5,
              className: "h-64 text-center",
              children: [/* @__PURE__ */ jsx(Inbox, {
                className: "w-12 h-14 mx-auto text-muted-foreground/30"
              }), /* @__PURE__ */ jsx("p", {
                className: "font-bold text-sm text-muted-foreground",
                children: "Nenhuma manuten√ß√£o encontrada"
              })]
            })
          }) : filteredMaintenances.map((manutencao) => {
            var _a, _b;
            return /* @__PURE__ */ jsxs(TableRow, {
              className: "group hover:bg-muted/20 border-border/30 transition-colors",
              children: [/* @__PURE__ */ jsx(TableCell, {
                className: "pl-8 py-5",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-4",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: "w-12 h-14 rounded-2xl bg-gradient-to-br from-slate-500 to-slate-700 flex items-center justify-center text-white shadow-lg transition-transform group-hover:scale-110",
                    children: /* @__PURE__ */ jsx(Wrench, {
                      size: 22
                    })
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "flex flex-col",
                    children: [/* @__PURE__ */ jsx("span", {
                      className: "font-semibold text-sm tracking-tight text-foreground",
                      children: ((_a = manutencao.vehicle) == null ? void 0 : _a.placa) || "Sem Placa"
                    }), /* @__PURE__ */ jsx("span", {
                      className: "text-[11px] font-bold text-muted-foreground/80",
                      children: ((_b = manutencao.vehicle) == null ? void 0 : _b.modelo) || "N/D"
                    }), /* @__PURE__ */ jsxs("span", {
                      className: "text-[12px] font-semibold text-primary/60 uppercase",
                      children: [manutencao.km_veiculo.toLocaleString(), " KM"]
                    })]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex flex-col gap-1 max-w-[200px]",
                  children: [/* @__PURE__ */ jsx(TypeBadge, {
                    tipo: manutencao.type
                  }), /* @__PURE__ */ jsx("span", {
                    className: "text-sm font-bold tracking-tight text-foreground truncate",
                    children: manutencao.description
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex flex-col gap-2",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "flex items-center gap-1.5 text-xs font-semibold text-foreground",
                    children: [/* @__PURE__ */ jsx(Calendar$1, {
                      className: "w-3.5 h-3.5 text-primary",
                      strokeWidth: 3
                    }), formatSystemDate(new Date(manutencao.scheduledDate))]
                  }), /* @__PURE__ */ jsx(StatusBadge$7, {
                    status: manutencao.status
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex flex-col text-sm font-semibold text-emerald-600",
                  children: [/* @__PURE__ */ jsxs("span", {
                    children: ["R$ ", (Number(manutencao.cost_parts) + Number(manutencao.cost_labor)).toLocaleString("pt-BR", {
                      minimumFractionDigits: 2
                    })]
                  }), /* @__PURE__ */ jsxs("span", {
                    className: "text-[10px] text-muted-foreground uppercase tracking-widest opacity-60",
                    children: ["P: ", Number(manutencao.cost_parts).toLocaleString(), " / M: ", Number(manutencao.cost_labor).toLocaleString()]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                className: "pr-8 text-right",
                children: /* @__PURE__ */ jsx(MaintenanceActions, {
                  manutencao,
                  onUpdate: () => navigate(".", {
                    replace: true
                  })
                })
              })]
            }, manutencao.id);
          })
        })]
      })
    })]
  }, "maintenance-main");
});
const route53 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$t,
  default: admin_maintenance__index,
  loader: loader$v
}, Symbol.toStringTag, { value: "Module" }));
const ALL_ACTIVITIES = [{
  id: 1,
  type: "success",
  title: "Viagem Conclu√≠da",
  desc: "Rota SP -> RJ finalizada com sucesso",
  time: "10 min atr√°s",
  date: "Hoje",
  icon: Bus
}, {
  id: 2,
  type: "warning",
  title: "Alerta de Manuten√ß√£o",
  desc: "Ve√≠culo 104 precisa de revis√£o",
  time: "32 min atr√°s",
  date: "Hoje",
  icon: CircleAlert
}, {
  id: 3,
  type: "info",
  title: "Nova Reserva",
  desc: "Grupo de 15 passageiros confirmado",
  time: "1h atr√°s",
  date: "Hoje",
  icon: Users
}, {
  id: 4,
  type: "success",
  title: "Entrega Realizada",
  desc: "Pacote #9921 entregue no prazo",
  time: "2h atr√°s",
  date: "Hoje",
  icon: Package
}, {
  id: 5,
  type: "info",
  title: "Novo Motorista",
  desc: "Cadastro de Roberto Santos aprovado",
  time: "4h atr√°s",
  date: "Hoje",
  icon: Users
}, {
  id: 6,
  type: "warning",
  title: "Atraso na Rota",
  desc: "Tr√¢nsito intenso na sa√≠da de SP",
  time: "Ontem",
  date: "Ontem",
  icon: TriangleAlert
}, {
  id: 7,
  type: "success",
  title: "Manuten√ß√£o Conclu√≠da",
  desc: "Ve√≠culo 102 liberado da oficina",
  time: "Ontem",
  date: "Ontem",
  icon: CircleCheckBig
}, {
  id: 8,
  type: "info",
  title: "Pagamento Recebido",
  desc: "Fatura #4590 quitada",
  time: "Ontem",
  date: "Ontem",
  icon: Info
}];
const loader$u = async () => {
  return data({
    activities: ALL_ACTIVITIES
  });
};
const admin_activities__index = UNSAFE_withComponentProps(function ActivitiesPage() {
  const {
    activities
  } = useLoaderData();
  const [searchTerm, setSearchTerm] = useState("");
  const [filterType, setFilterType] = useState("all");
  const filteredActivities = activities.filter((activity) => {
    const matchesSearch = activity.title.toLowerCase().includes(searchTerm.toLowerCase()) || activity.desc.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesType = filterType === "all" || activity.type === filterType;
    return matchesSearch && matchesType;
  });
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Log de Atividades",
      subtitle: "Hist√≥rico completo de eventos e auditoria do sistema",
      icon: Activity,
      backLink: "/admin/dashboard"
    }), /* @__PURE__ */ jsxs("div", {
      className: "flex flex-col md:flex-row gap-6 justify-between items-end",
      children: [/* @__PURE__ */ jsx("div", {
        className: "flex bg-muted/40 p-1.5 rounded-2xl border border-border/50 h-14 w-full md:w-fit gap-2",
        children: ["all", "success", "warning", "info"].map((type) => /* @__PURE__ */ jsx("button", {
          onClick: () => setFilterType(type),
          className: cn$1("flex-1 md:flex-none px-6 h-full text-[10px] font-black uppercase tracking-widest transition-all rounded-xl", filterType === type ? "bg-background text-primary shadow-lg" : "text-muted-foreground hover:bg-muted/30"),
          children: type === "all" ? "TODAS" : type === "success" ? "SUCESSO" : type === "warning" ? "ALERTAS" : "INFO"
        }, type))
      }), /* @__PURE__ */ jsxs("div", {
        className: "relative w-full md:w-96 group",
        children: [/* @__PURE__ */ jsx(Search, {
          size: 18,
          className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground transition-colors group-focus-within:text-primary"
        }), /* @__PURE__ */ jsx(Input, {
          placeholder: "Buscar log...",
          value: searchTerm,
          onChange: (e) => setSearchTerm(e.target.value),
          className: "w-full h-14 pl-12 bg-card/60 border-none rounded-xl font-bold shadow-sm"
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 bg-card/50 backdrop-blur-sm border-none rounded-[2.5rem] overflow-hidden",
      children: /* @__PURE__ */ jsx("div", {
        className: "divide-y divide-border/30",
        children: filteredActivities.length > 0 ? filteredActivities.map((item, index) => {
          const Icon2 = {
            Bus,
            AlertCircle: CircleAlert,
            Users,
            Package,
            CheckCircle: CircleCheckBig,
            Info,
            AlertTriangle: TriangleAlert
          }[item.icon] || Info;
          return /* @__PURE__ */ jsxs("div", {
            className: "p-8 hover:bg-muted/30 transition-all flex gap-6 items-start group",
            children: [/* @__PURE__ */ jsx("div", {
              className: cn$1("w-14 h-14 rounded-2xl flex items-center justify-center shrink-0 transition-transform group-hover:scale-110", item.type === "success" ? "bg-emerald-500/10 text-emerald-600 shadow-lg shadow-emerald-500/5" : item.type === "warning" ? "bg-amber-500/10 text-amber-600 shadow-lg shadow-amber-500/5" : "bg-blue-500/10 text-blue-600 shadow-lg shadow-blue-500/5"),
              children: /* @__PURE__ */ jsx(Icon2, {
                size: 24,
                strokeWidth: 2.5
              })
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex-1 min-w-0 space-y-1",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex justify-between items-start",
                children: [/* @__PURE__ */ jsx("h4", {
                  className: "text-lg font-black tracking-tight text-foreground truncate",
                  children: item.title
                }), /* @__PURE__ */ jsxs("span", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground/60 bg-muted/50 px-3 py-1 rounded-full flex items-center gap-1.5",
                  children: [/* @__PURE__ */ jsx(Clock, {
                    size: 12
                  }), " ", item.time]
                })]
              }), /* @__PURE__ */ jsx("p", {
                className: "text-sm font-medium text-muted-foreground leading-relaxed",
                children: item.desc
              }), /* @__PURE__ */ jsxs("div", {
                className: "pt-2 flex items-center gap-4",
                children: [/* @__PURE__ */ jsx("span", {
                  className: "text-[10px] font-black text-primary/60 uppercase tracking-widest",
                  children: item.date
                }), /* @__PURE__ */ jsx("span", {
                  className: "w-1 h-1 rounded-full bg-border"
                }), /* @__PURE__ */ jsxs("span", {
                  className: "text-[10px] font-black text-muted-foreground/40 uppercase tracking-widest",
                  children: ["Auditoria #00", item.id]
                })]
              })]
            })]
          }, item.id);
        }) : /* @__PURE__ */ jsxs("div", {
          className: "p-24 text-center",
          children: [/* @__PURE__ */ jsx(Activity, {
            size: 64,
            className: "mx-auto mb-6 text-muted-foreground/20"
          }), /* @__PURE__ */ jsx("p", {
            className: "font-black text-muted-foreground uppercase tracking-widest text-sm",
            children: "Nenhum evento registrado"
          })]
        })
      })
    })]
  }, "atividades-main");
});
const route54 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_activities__index,
  loader: loader$u
}, Symbol.toStringTag, { value: "Module" }));
function CharterForm({ intent, defaultValues = {}, clients: clients2, vehicles, drivers, routes: routes2 }) {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const isSubmitting = navigation.state !== "idle";
  const isEdit = intent === "edit";
  return /* @__PURE__ */ jsxs(Form, { method: "post", className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [
    /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Cliente Corporativo", icon: Building2, children: /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Selecionar Cliente" }),
        /* @__PURE__ */ jsxs("select", { name: "client_id", defaultValue: defaultValues.client_id, required: true, className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
          /* @__PURE__ */ jsx("option", { value: "", children: "Selecione um cliente..." }),
          clients2.map((c) => /* @__PURE__ */ jsxs("option", { value: c.id, children: [
            c.nome,
            " ",
            c.cnpj ? `(${c.cnpj})` : ""
          ] }, c.id))
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Rota e Localiza√ß√£o", icon: MapPin, children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Cidade de Origem" }),
          /* @__PURE__ */ jsx(Input, { name: "origin", defaultValue: defaultValues.origin, required: true, placeholder: "Ex: S√£o Paulo, SP", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Cidade de Destino" }),
          /* @__PURE__ */ jsx(Input, { name: "destination", defaultValue: defaultValues.destination, required: true, placeholder: "Ex: Rio de Janeiro, RJ", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Vincular Rota (Opcional)" }),
          /* @__PURE__ */ jsxs("select", { name: "route_id", defaultValue: defaultValues.route_id || "", className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
            /* @__PURE__ */ jsx("option", { value: "", children: "Nenhuma rota espec√≠fica..." }),
            routes2.map((r2) => /* @__PURE__ */ jsx("option", { value: r2.id, children: r2.name }, r2.id))
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Datas do Evento", icon: Calendar$1, children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "In√≠cio" }),
          /* @__PURE__ */ jsx(
            Input,
            {
              type: "datetime-local",
              name: "start_date",
              defaultValue: defaultValues.start_date ? new Date(defaultValues.start_date).toISOString().slice(0, 16) : "",
              required: true,
              className: "h-14 rounded-xl bg-muted/40"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "T√©rmino" }),
          /* @__PURE__ */ jsx(
            Input,
            {
              type: "datetime-local",
              name: "end_date",
              defaultValue: defaultValues.end_date ? new Date(defaultValues.end_date).toISOString().slice(0, 16) : "",
              required: true,
              className: "h-14 rounded-xl bg-muted/40"
            }
          )
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Recursos e Valores", icon: DollarSign$1, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Ve√≠culo" }),
          /* @__PURE__ */ jsxs("select", { name: "vehicle_id", defaultValue: defaultValues.vehicle_id || "", className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
            /* @__PURE__ */ jsx("option", { value: "", children: "Aguardando atribui√ß√£o..." }),
            vehicles.map((v) => /* @__PURE__ */ jsxs("option", { value: v.id, children: [
              v.placa,
              " - ",
              v.modelo
            ] }, v.id))
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Motorista" }),
          /* @__PURE__ */ jsxs("select", { name: "driver_id", defaultValue: defaultValues.driver_id || "", className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
            /* @__PURE__ */ jsx("option", { value: "", children: "Aguardando atribui√ß√£o..." }),
            drivers.map((d) => /* @__PURE__ */ jsx("option", { value: d.id, children: d.nome }, d.id))
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Valor do Contrato (R$)" }),
          /* @__PURE__ */ jsx(Input, { type: "number", step: "0.01", name: "total_value", defaultValue: defaultValues.total_value, required: true, placeholder: "0,00", className: "h-14 rounded-xl bg-muted/40 text-xl font-black text-emerald-600" })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Notas", icon: FileText$1, children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "notes",
          defaultValue: defaultValues.notes,
          rows: 4,
          className: "w-full p-4 bg-muted/40 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-primary/20 outline-none resize-none",
          placeholder: "Observa√ß√µes adicionais..."
        }
      ) }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4", children: [
        /* @__PURE__ */ jsx(Button, { type: "submit", disabled: isSubmitting, className: "h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20", children: isSubmitting ? /* @__PURE__ */ jsx(LoaderCircle, { className: "animate-spin" }) : isEdit ? "SALVAR ALTERA√á√ïES" : "CONFIRMAR FRETAMENTO" }),
        /* @__PURE__ */ jsx(Button, { type: "button", variant: "ghost", onClick: () => navigate(-1), className: "h-14 rounded-xl font-black uppercase text-[10px] tracking-widest", children: "CANCELAR" })
      ] })
    ] })
  ] });
}
const loader$t = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const [charter$1, clients$1, vehicles, drivers, routes2] = await Promise.all([db.query.charter.findFirst({
    where: eq(charter.id, id)
  }), db.select().from(clients), db.select().from(vehicle).where(eq(vehicle.status, "ACTIVE")), db.select().from(driver).where(eq(driver.status, "AVAILABLE")), db.select().from(routes$1).where(eq(routes$1.active, true))]);
  if (!charter$1) throw new Response("Fretamento n√£o encontrado", {
    status: 404
  });
  return data({
    charter: charter$1,
    clients: clients$1,
    vehicles,
    drivers,
    routes: routes2
  });
};
const action$s = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const payload = {
    client_id: formData.get("client_id"),
    vehicle_id: formData.get("vehicle_id") || null,
    driver_id: formData.get("driver_id") || null,
    origin: formData.get("origin"),
    destination: formData.get("destination"),
    start_date: new Date(formData.get("start_date")),
    end_date: new Date(formData.get("end_date")),
    type: formData.get("type") || "PONTUAL",
    route_id: formData.get("route_id") || null,
    total_value: formData.get("total_value"),
    notes: formData.get("notes"),
    updatedAt: /* @__PURE__ */ new Date()
  };
  await db.update(charter).set(payload).where(eq(charter.id, id));
  return redirect("/admin/charter");
};
const admin_charter_$id_edit = UNSAFE_withComponentProps(function EditCharterPage() {
  const {
    charter: charter2,
    clients: clients2,
    vehicles,
    drivers,
    routes: routes2
  } = useLoaderData();
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Editar Fretamento",
      subtitle: `Alterando solicita√ß√£o #${charter2.id.substring(0, 8)}`,
      backLink: "/admin/charter"
    }), /* @__PURE__ */ jsx(CharterForm, {
      intent: "edit",
      defaultValues: charter2,
      clients: clients2,
      vehicles,
      drivers,
      routes: routes2
    })]
  }, "edit-charter-main");
});
const route55 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$s,
  default: admin_charter_$id_edit,
  loader: loader$t
}, Symbol.toStringTag, { value: "Module" }));
const loader$s = async () => {
  const documentsData = await db.select().from(document$1).orderBy(desc(document$1.createdAt));
  return data({
    documents: documentsData
  });
};
const action$r = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(document$1).where(eq(document$1.id, id));
    return data({
      success: true
    });
  }
  return null;
};
const admin_documents__index = UNSAFE_withComponentProps(function DocumentsPage() {
  const {
    documents: initialDocuments
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const {
    formatDate
  } = useDateFormatter();
  const [activeTab, setActiveTab] = useState("VEHICLE");
  const [searchTerm, setSearchTerm] = useState("");
  const documents = initialDocuments;
  const filteredDocs = documents.filter((doc) => {
    const matchesTab = doc.type === activeTab;
    const matchesSearch = (doc.name || "").toLowerCase().includes(searchTerm.toLowerCase()) || (doc.entity_name || "").toLowerCase().includes(searchTerm.toLowerCase());
    return matchesTab && matchesSearch;
  });
  const getStatusStyle = (status) => {
    switch (status) {
      case "VALID":
        return "bg-emerald-500/10 text-emerald-600 border-emerald-500/20";
      case "EXPIRING":
        return "bg-amber-500/10 text-amber-600 border-amber-500/20";
      case "EXPIRED":
        return "bg-destructive/10 text-destructive border-destructive/20";
      default:
        return "bg-muted text-muted-foreground";
    }
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Documentos",
      subtitle: "Cust√≥dia digital e controle de validades operacionais",
      icon: FileText$1,
      rightElement: /* @__PURE__ */ jsxs(Button, {
        onClick: () => {
        },
        className: "h-14 px-8 rounded-xl font-bold uppercase text-[12px] tracking-widest shadow-lg shadow-primary/20 transition-all hover:scale-105 active:scale-95",
        children: [/* @__PURE__ */ jsx(Upload, {
          className: "w-4 h-4 mr-2"
        }), " NOVO DOCUMENTO"]
      })
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex bg-muted/40 p-1.5 rounded-xl border border-border/50 h-14 w-full md:w-fit gap-2",
        children: [/* @__PURE__ */ jsxs("button", {
          onClick: () => setActiveTab("VEHICLE"),
          className: cn$1("flex-1 md:flex-none flex items-center gap-2 px-6 h-full text-[10px] font-bold uppercase tracking-widest transition-all rounded-lg", activeTab === "VEHICLE" ? "bg-background text-primary shadow-sm" : "text-muted-foreground hover:bg-muted/50"),
          children: [/* @__PURE__ */ jsx(Truck, {
            size: 14
          }), " Ve√≠culos"]
        }), /* @__PURE__ */ jsxs("button", {
          onClick: () => setActiveTab("DRIVER"),
          className: cn$1("flex-1 md:flex-none flex items-center gap-2 px-6 h-full text-[10px] font-bold uppercase tracking-widest transition-all rounded-lg", activeTab === "DRIVER" ? "bg-background text-primary shadow-sm" : "text-muted-foreground hover:bg-muted/50"),
          children: [/* @__PURE__ */ jsx(Users, {
            size: 14
          }), " Motoristas"]
        }), /* @__PURE__ */ jsxs("button", {
          onClick: () => setActiveTab("ADMIN"),
          className: cn$1("flex-1 md:flex-none flex items-center gap-2 px-6 h-full text-[10px] font-bold uppercase tracking-widest transition-all rounded-lg", activeTab === "ADMIN" ? "bg-background text-primary shadow-sm" : "text-muted-foreground hover:bg-muted/50"),
          children: [/* @__PURE__ */ jsx(Building, {
            size: 14
          }), " Empresa"]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "relative w-full md:w-80 group",
        children: [/* @__PURE__ */ jsx(Search, {
          size: 16,
          className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground"
        }), /* @__PURE__ */ jsx(Input, {
          placeholder: "Filtrar documentos...",
          value: searchTerm,
          onChange: (e) => setSearchTerm(e.target.value),
          className: "w-full h-14 pl-12 bg-muted/40 border-none rounded-xl font-bold"
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 bg-card/50 backdrop-blur-sm border-none rounded-[2.5rem] overflow-hidden",
      children: /* @__PURE__ */ jsx("div", {
        className: "overflow-x-auto",
        children: /* @__PURE__ */ jsxs("table", {
          className: "w-full text-left",
          children: [/* @__PURE__ */ jsx("thead", {
            className: "bg-muted/20 border-b border-border/50",
            children: /* @__PURE__ */ jsxs("tr", {
              children: [/* @__PURE__ */ jsx("th", {
                className: "px-8 py-6 text-[12px] font-black uppercase tracking-widest text-muted-foreground",
                children: "Documento"
              }), /* @__PURE__ */ jsx("th", {
                className: "px-8 py-6 text-[12px] font-black uppercase tracking-widest text-muted-foreground",
                children: "Entidade"
              }), /* @__PURE__ */ jsx("th", {
                className: "px-8 py-6 text-[12px] font-black uppercase tracking-widest text-muted-foreground",
                children: "Vencimento"
              }), /* @__PURE__ */ jsx("th", {
                className: "px-8 py-6 text-[12px] font-black uppercase tracking-widest text-muted-foreground",
                children: "Status"
              }), /* @__PURE__ */ jsx("th", {
                className: "px-8 py-6 text-right text-[12px] font-black uppercase tracking-widest text-muted-foreground",
                children: "A√ß√µes"
              })]
            })
          }), /* @__PURE__ */ jsx("tbody", {
            className: "divide-y divide-border/30",
            children: filteredDocs.map((doc) => /* @__PURE__ */ jsxs("tr", {
              className: "group hover:bg-muted/30 transition-colors",
              children: [/* @__PURE__ */ jsx("td", {
                className: "px-8 py-5",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-4",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: "w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary",
                    children: /* @__PURE__ */ jsx(FileText$1, {
                      size: 18
                    })
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "font-black text-xs uppercase tracking-tight text-foreground",
                      children: doc.name
                    }), /* @__PURE__ */ jsx("p", {
                      className: "text-[12px] font-bold text-muted-foreground opacity-60 tracking-widest",
                      children: doc.file_size || "0 KB"
                    })]
                  })]
                })
              }), /* @__PURE__ */ jsx("td", {
                className: "px-8 py-5 text-[12px] font-black uppercase text-muted-foreground",
                children: doc.entity_name || "Geral"
              }), /* @__PURE__ */ jsx("td", {
                className: "px-8 py-5 text-xs font-bold",
                children: formatDate(doc.expiry_date)
              }), /* @__PURE__ */ jsx("td", {
                className: "px-8 py-5",
                children: /* @__PURE__ */ jsx(Badge$1, {
                  variant: "outline",
                  className: cn$1("rounded-full text-[9px] font-black uppercase tracking-widest border-none px-3 py-1", getStatusStyle(doc.status)),
                  children: doc.status
                })
              }), /* @__PURE__ */ jsx("td", {
                className: "px-8 py-5 text-right",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",
                  children: [/* @__PURE__ */ jsx(Button, {
                    variant: "ghost",
                    size: "icon",
                    className: "h-9 w-9 rounded-xl hover:bg-primary/10 transition-colors",
                    children: /* @__PURE__ */ jsx(Download, {
                      size: 16
                    })
                  }), /* @__PURE__ */ jsx(Button, {
                    variant: "ghost",
                    size: "icon",
                    onClick: () => fetcher.submit({
                      intent: "delete",
                      id: doc.id
                    }, {
                      method: "post"
                    }),
                    className: "h-9 w-9 rounded-xl hover:bg-destructive/10 text-destructive transition-colors",
                    children: /* @__PURE__ */ jsx(Trash2, {
                      size: 16
                    })
                  })]
                })
              })]
            }, doc.id))
          })]
        })
      })
    })]
  }, "documentos-main");
});
const route56 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$r,
  default: admin_documents__index,
  loader: loader$s
}, Symbol.toStringTag, { value: "Module" }));
const labelVariants = cva(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
);
const Label$1 = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  LabelPrimitive.Root,
  {
    ref,
    className: cn$1(labelVariants(), className),
    ...props
  }
));
Label$1.displayName = LabelPrimitive.Root.displayName;
function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  ...props
}) {
  return /* @__PURE__ */ jsx(
    DayPicker,
    {
      showOutsideDays,
      className: cn$1("p-3", className),
      classNames: {
        months: "flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",
        month: "space-y-4",
        month_caption: "flex justify-center pt-1 relative items-center h-7",
        caption_label: "text-sm font-medium",
        nav: "flex items-center",
        button_previous: cn$1(
          buttonVariants({ variant: "outline" }),
          "h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute left-1"
        ),
        button_next: cn$1(
          buttonVariants({ variant: "outline" }),
          "h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 absolute right-1"
        ),
        month_grid: "w-full border-collapse space-y-1",
        weekdays: "flex",
        weekday: "text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",
        week: "flex w-full mt-2",
        day: "h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",
        day_button: cn$1(
          buttonVariants({ variant: "ghost" }),
          "h-9 w-9 p-0 font-normal aria-selected:opacity-100"
        ),
        day_selected: "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside: "day-outside text-muted-foreground opacity-50  aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle: "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames
      },
      components: {
        Chevron: ({ orientation }) => {
          const Icon2 = orientation === "left" ? ChevronLeft : ChevronRight;
          return /* @__PURE__ */ jsx(Icon2, { className: "h-4 w-4" });
        }
      },
      ...props
    }
  );
}
Calendar.displayName = "Calendar";
const DatePicker = ({
  value,
  onChange,
  label,
  required = false,
  placeholder = "DD/MM/AAAA",
  showIcon = true,
  className = "",
  containerClassName = ""
}) => {
  const formatToDisplay = (isoDate) => {
    if (!isoDate) return "";
    const parts = isoDate.split("-");
    if (parts.length !== 3) return isoDate;
    return `${parts[2]}/${parts[1]}/${parts[0]}`;
  };
  const [displayValue, setDisplayValue] = useState(formatToDisplay(value));
  const [error, setError] = useState(false);
  const [open, setOpen] = useState(false);
  const getCalendarDate = (isoDate) => {
    if (!isoDate) return void 0;
    const d = /* @__PURE__ */ new Date(isoDate + "T12:00:00");
    return isValid(d) ? d : void 0;
  };
  useEffect(() => {
    setDisplayValue(formatToDisplay(value));
  }, [value]);
  const handleCalendarSelect = (date2) => {
    if (date2) {
      const iso = format(date2, "yyyy-MM-dd");
      onChange(iso);
      setDisplayValue(format(date2, "dd/MM/yyyy"));
      setError(false);
      setOpen(false);
    }
  };
  const handleChange = (e) => {
    let input = e.target.value.replace(/\D/g, "");
    if (input.length > 8) input = input.substring(0, 8);
    let formatted = input;
    if (input.length >= 3 && input.length <= 4) {
      formatted = `${input.substring(0, 2)}/${input.substring(2)}`;
    } else if (input.length > 4) {
      formatted = `${input.substring(0, 2)}/${input.substring(2, 4)}/${input.substring(4)}`;
    }
    setDisplayValue(formatted);
    setError(false);
    if (input.length === 8) {
      const day = parseInt(input.substring(0, 2));
      const month = parseInt(input.substring(2, 4));
      const year = parseInt(input.substring(4, 8));
      try {
        const parsedDate = parse(formatted, "dd/MM/yyyy", /* @__PURE__ */ new Date());
        if (isValid(parsedDate) && parsedDate.getDate() === day && parsedDate.getMonth() + 1 === month && parsedDate.getFullYear() === year && year >= 1900 && year < 2100) {
          const isoDate = format(parsedDate, "yyyy-MM-dd");
          onChange(isoDate);
          setError(false);
        } else {
          setError(true);
        }
      } catch (e2) {
        setError(true);
      }
    } else {
      if (input.length === 0 && !required) {
        onChange("");
        setError(false);
      }
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: cn$1("space-y-2", containerClassName), children: [
    label && /* @__PURE__ */ jsxs(Label$1, { className: "flex items-center gap-1", children: [
      label,
      " ",
      required && /* @__PURE__ */ jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "relative flex items-center", children: [
      /* @__PURE__ */ jsx(
        Input,
        {
          type: "text",
          inputMode: "numeric",
          value: displayValue,
          onChange: handleChange,
          placeholder,
          maxLength: 10,
          className: cn$1(
            "h-14",
            showIcon ? "pl-10" : "px-4",
            error ? "border-destructive focus-visible:ring-destructive" : "",
            className
          )
        }
      ),
      showIcon && /* @__PURE__ */ jsxs(Popover, { open, onOpenChange: setOpen, children: [
        /* @__PURE__ */ jsx(PopoverTrigger, { asChild: true, children: /* @__PURE__ */ jsxs(
          Button,
          {
            variant: "ghost",
            size: "icon",
            className: cn$1(
              "absolute left-1 top-1/2 -translate-y-1/2 h-8 w-8 text-muted-foreground hover:text-primary transition-colors",
              error && "text-destructive"
            ),
            children: [
              /* @__PURE__ */ jsx(Calendar$1, { size: 18 }),
              /* @__PURE__ */ jsx("span", { className: "sr-only", children: "Abrir calend√°rio" })
            ]
          }
        ) }),
        /* @__PURE__ */ jsx(PopoverContent, { className: "w-auto p-0", align: "start", children: /* @__PURE__ */ jsx(
          Calendar,
          {
            mode: "single",
            selected: getCalendarDate(value),
            onSelect: handleCalendarSelect,
            locale: ptBR,
            initialFocus: true
          }
        ) })
      ] })
    ] }),
    error && /* @__PURE__ */ jsx("p", { className: "text-[0.8rem] font-medium text-destructive", children: "Data inv√°lida" })
  ] });
};
const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive: "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"
      }
    },
    defaultVariants: {
      variant: "default"
    }
  }
);
const Alert = React.forwardRef(({ className, variant, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    role: "alert",
    className: cn$1(alertVariants({ variant }), className),
    ...props
  }
));
Alert.displayName = "Alert";
const AlertTitle = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "h5",
  {
    ref,
    className: cn$1("mb-1 font-medium leading-none tracking-tight", className),
    ...props
  }
));
AlertTitle.displayName = "AlertTitle";
const AlertDescription = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1("text-sm [&_p]:leading-relaxed", className),
    ...props
  }
));
AlertDescription.displayName = "AlertDescription";
const EditarMotorista = () => {
  const {
    id
  } = useParams();
  const navigate = useNavigate();
  const [nome, setNome] = useState("");
  const [status, setStatus] = useState(DriverStatus.AVAILABLE);
  const [cnh, setCnh] = useState("");
  const [categoriaCnh, setCategoriaCnh] = useState("D");
  const [validadeCnh, setValidadeCnh] = useState("");
  const [passaporte, setPassaporte] = useState("");
  const [validadePassaporte, setValidadePassaporte] = useState("");
  const [telefone, setTelefone] = useState("");
  const [email, setEmail] = useState("");
  const [telefoneEmergencia, setTelefoneEmergencia] = useState("");
  const [contatoEmergenciaNome, setContatoEmergenciaNome] = useState("");
  const [contatoEmergenciaRelacao, setContatoEmergenciaRelacao] = useState("");
  const [endereco, setEndereco] = useState("");
  const [cidade, setCidade] = useState("");
  const [estado, setEstado] = useState("");
  const [cep, setCep] = useState("");
  const [pais, setPais] = useState("Brasil");
  const [dataAdmissao, setDataAdmissao] = useState("");
  const [jornadaTrabalho, setJornadaTrabalho] = useState("DIURNA");
  const [horasSemanais, setHorasSemanais] = useState("44");
  const [disponivelViagensLongas, setDisponivelViagensLongas] = useState(true);
  const [disponivelInternacional, setDisponivelInternacional] = useState(false);
  const [observacoes, setObservacoes] = useState("");
  const [isSearchingCep, setIsSearchingCep] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [isFetching, setIsFetching] = useState(true);
  const [error, setError] = useState("");
  const [success, setSuccess] = useState("");
  useEffect(() => {
    const fetchMotorista = async () => {
      if (!id) return;
      setIsFetching(true);
      try {
        const response = await fetch(`${"https://api.yourdomain.com"}/api/fleet/drivers/${id}`, {
          credentials: "include"
        });
        if (!response.ok) {
          throw new Error("Failed to fetch driver");
        }
        const data2 = await response.json();
        setNome(data2.nome || "");
        setStatus(data2.status || DriverStatus.AVAILABLE);
        setCnh(data2.cnh || "");
        setCategoriaCnh(data2.categoria_cnh || "D");
        setValidadeCnh(data2.validade_cnh ? data2.validade_cnh.split("T")[0] : "");
        setPassaporte(data2.passaporte || "");
        setValidadePassaporte(data2.validade_passaporte ? data2.validade_passaporte.split("T")[0] : "");
        setTelefone(data2.telefone || "");
        setEmail(data2.email || "");
        setEndereco(data2.endereco || "");
        setCidade(data2.cidade || "");
        setEstado(data2.estado || "");
        setPais(data2.pais || "Brasil");
        setDataAdmissao(data2.data_contratacao ? data2.data_contratacao.split("T")[0] : "");
        setDisponivelInternacional(data2.disponivel_internacional || false);
        setObservacoes(data2.observacoes || "");
      } catch (error2) {
        console.error("Erro ao buscar motorista:", error2);
        setError("Erro ao carregar motorista. Redirecionando...");
        setTimeout(() => navigate("/admin/motoristas"), 2e3);
      } finally {
        setIsFetching(false);
      }
    };
    fetchMotorista();
  }, [id, navigate]);
  const verificarValidade = (dataValidade) => {
    if (!dataValidade) return null;
    const hoje = /* @__PURE__ */ new Date();
    const validade = new Date(dataValidade);
    const diasRestantes = Math.floor((validade.getTime() - hoje.getTime()) / (1e3 * 60 * 60 * 24));
    if (diasRestantes < 0) return {
      texto: "Vencido",
      cor: "red"
    };
    if (diasRestantes < 30) return {
      texto: `Vence em ${diasRestantes} dias`,
      cor: "orange"
    };
    return {
      texto: "V√°lido",
      cor: "green"
    };
  };
  const cnhValidade = verificarValidade(validadeCnh);
  verificarValidade(validadePassaporte);
  const handleSalvar = async () => {
    setError("");
    setSuccess("");
    if (!nome.trim()) {
      setError("Nome √© obrigat√≥rio");
      return;
    }
    if (!cnh.trim()) {
      setError("N√∫mero da CNH √© obrigat√≥rio");
      return;
    }
    if (!validadeCnh) {
      setError("Validade da CNH √© obrigat√≥ria");
      return;
    }
    setIsLoading(true);
    try {
      const driverData = {
        nome,
        cnh,
        categoria_cnh: categoriaCnh,
        validade_cnh: validadeCnh,
        passaporte: passaporte || null,
        validade_passaporte: validadePassaporte || null,
        telefone: telefone || null,
        email: email || null,
        endereco: endereco || null,
        cidade: cidade || null,
        estado: estado || null,
        pais: pais || null,
        status,
        data_contratacao: dataAdmissao || (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
        disponivel_internacional: disponivelInternacional,
        observacoes: observacoes || null
      };
      const response = await fetch(`${"https://api.yourdomain.com"}/api/fleet/drivers/${id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json"
        },
        credentials: "include",
        body: JSON.stringify(driverData)
      });
      if (!response.ok) {
        throw new Error("Failed to update driver");
      }
      setSuccess(`Motorista ${nome} atualizado com sucesso!`);
      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
      setTimeout(() => navigate(`/admin/motoristas/${id}`), 2e3);
    } catch (error2) {
      console.error("Erro ao atualizar motorista:", error2);
      setError("Erro ao atualizar motorista. Por favor, tente novamente.");
      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    } finally {
      setIsLoading(false);
    }
  };
  const handleCepChange = async (e) => {
    const rawCep = e.target.value.replace(/\D/g, "");
    setCep(rawCep);
    if (rawCep.length === 8) {
      setIsSearchingCep(true);
      try {
        const response = await fetch(`https://viacep.com.br/ws/${rawCep}/json/`);
        const data2 = await response.json();
        if (!data2.erro) {
          if (data2.logradouro) setEndereco(data2.logradouro);
          if (data2.localidade) setCidade(data2.localidade);
          if (data2.uf) setEstado(data2.uf);
        }
      } catch (err) {
        console.error("Erro ao buscar CEP:", err);
      } finally {
        setIsSearchingCep(false);
      }
    }
  };
  if (isFetching) {
    return /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center h-64",
      children: /* @__PURE__ */ jsx("p", {
        className: "text-slate-500 dark:text-slate-400",
        children: "Carregando motorista..."
      })
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Editar Registro",
      subtitle: `Atualizando credenciais de: ${nome || "..."}`,
      suffix: "MOTORISTA",
      icon: User,
      backLink: `/admin/motoristas/${id}`,
      backLabel: "Painel do Motorista",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex items-center gap-3",
        children: [/* @__PURE__ */ jsx(Button, {
          variant: "ghost",
          onClick: () => navigate(`/admin/motoristas/${id}`),
          className: "h-14 rounded-2xl px-6 font-black uppercase text-[12px] tracking-widest",
          children: "Descartar"
        }), /* @__PURE__ */ jsxs(Button, {
          onClick: handleSalvar,
          disabled: isLoading,
          className: "h-14 rounded-2xl px-8 bg-primary hover:bg-primary/90 text-primary-foreground font-black uppercase text-[12px] tracking-widest shadow-lg shadow-primary/20 transition-all hover:scale-[1.02] active:scale-[0.98]",
          children: [isLoading ? /* @__PURE__ */ jsx(Loader, {
            className: "w-4 h-4 animate-spin mr-2"
          }) : /* @__PURE__ */ jsx(Save, {
            className: "w-4 h-4 mr-2"
          }), isLoading ? "Sincronizando..." : "Salvar Altera√ß√µes"]
        })]
      })
    }), error && /* @__PURE__ */ jsxs(Alert, {
      variant: "destructive",
      className: "animate-in fade-in slide-in-from-top-2 duration-300 rounded-3xl border-destructive/20 bg-destructive/5 backdrop-blur-sm",
      children: [/* @__PURE__ */ jsx(TriangleAlert, {
        className: "h-4 w-4"
      }), /* @__PURE__ */ jsx(AlertTitle, {
        className: "font-black uppercase text-[12px] tracking-widest",
        children: "Erro na Atualiza√ß√£o"
      }), /* @__PURE__ */ jsx(AlertDescription, {
        className: "text-xs font-medium",
        children: error
      })]
    }), success && /* @__PURE__ */ jsxs(Alert, {
      className: "animate-in fade-in slide-in-from-top-2 duration-300 rounded-3xl border-emerald-500/20 bg-emerald-500/5 backdrop-blur-sm",
      children: [/* @__PURE__ */ jsx(CircleCheckBig, {
        className: "h-4 w-4 text-emerald-500"
      }), /* @__PURE__ */ jsx(AlertTitle, {
        className: "font-black uppercase text-[12px] tracking-widest text-emerald-500",
        children: "Sucesso"
      }), /* @__PURE__ */ jsx(AlertDescription, {
        className: "text-xs font-medium text-emerald-600/80",
        children: success
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-3 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-2 space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Identifica√ß√£o e Perfil",
          icon: User,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "Nome Completo *"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: nome,
                onChange: (e) => setNome(e.target.value),
                placeholder: "Ex: Carlos Alberto Silva",
                className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Status Operacional"
                }), /* @__PURE__ */ jsxs("select", {
                  value: status,
                  onChange: (e) => setStatus(e.target.value),
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none appearance-none",
                  children: [/* @__PURE__ */ jsx("option", {
                    value: DriverStatus.AVAILABLE,
                    children: "Dispon√≠vel"
                  }), /* @__PURE__ */ jsx("option", {
                    value: DriverStatus.IN_TRANSIT,
                    children: "Em Viagem"
                  }), /* @__PURE__ */ jsx("option", {
                    value: DriverStatus.ON_LEAVE,
                    children: "F√©rias"
                  }), /* @__PURE__ */ jsx("option", {
                    value: DriverStatus.AWAY,
                    children: "Afastado"
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Email Corporativo"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "relative group",
                  children: [/* @__PURE__ */ jsx(Mail, {
                    className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",
                    size: 18
                  }), /* @__PURE__ */ jsx("input", {
                    type: "email",
                    value: email,
                    onChange: (e) => setEmail(e.target.value),
                    placeholder: "motorista@email.com",
                    className: "w-full h-14 pl-12 pr-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
                  })]
                })]
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Resid√™ncia e Localiza√ß√£o",
          icon: MapPin,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-3 gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5 md:col-span-1",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "CEP"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "relative",
                  children: [/* @__PURE__ */ jsx("input", {
                    type: "text",
                    value: cep,
                    onChange: handleCepChange,
                    placeholder: "00000000",
                    maxLength: 8,
                    className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
                  }), isSearchingCep && /* @__PURE__ */ jsx(Loader, {
                    className: "absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-primary"
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5 md:col-span-2",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Logradouro / Endere√ßo"
                }), /* @__PURE__ */ jsx("input", {
                  type: "text",
                  value: endereco,
                  onChange: (e) => setEndereco(e.target.value),
                  placeholder: "Rua, n√∫mero, complemento",
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-3 gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Cidade"
                }), /* @__PURE__ */ jsx("input", {
                  type: "text",
                  value: cidade,
                  onChange: (e) => setCidade(e.target.value),
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Estado (UF)"
                }), /* @__PURE__ */ jsx("input", {
                  type: "text",
                  value: estado,
                  onChange: (e) => setEstado(e.target.value.toUpperCase()),
                  maxLength: 2,
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none font-sans"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Pa√≠s"
                }), /* @__PURE__ */ jsx("input", {
                  type: "text",
                  value: pais,
                  onChange: (e) => setPais(e.target.value),
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
                })]
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Gest√£o e Disponibilidade",
          icon: Briefcase,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Data de Admiss√£o"
                }), /* @__PURE__ */ jsx(DatePicker, {
                  value: dataAdmissao,
                  onChange: setDataAdmissao,
                  placeholder: "DD/MM/AAAA"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Jornada de Trabalho"
                }), /* @__PURE__ */ jsxs("select", {
                  value: jornadaTrabalho,
                  onChange: (e) => setJornadaTrabalho(e.target.value),
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none appearance-none",
                  children: [/* @__PURE__ */ jsx("option", {
                    value: "DIURNA",
                    children: "Diurna"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "NOTURNA",
                    children: "Noturna"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "MISTA",
                    children: "Mista"
                  }), /* @__PURE__ */ jsx("option", {
                    value: "FLEXIVEL",
                    children: "Flex√≠vel"
                  })]
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-6 items-end",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Horas Semanais"
                }), /* @__PURE__ */ jsx("input", {
                  type: "number",
                  value: horasSemanais,
                  onChange: (e) => setHorasSemanais(e.target.value),
                  min: "1",
                  max: "60",
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex flex-col gap-3 pb-2",
                children: [/* @__PURE__ */ jsxs("label", {
                  className: "flex items-center gap-3 group cursor-pointer",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: cn$1("w-5 h-5 rounded border-2 flex items-center justify-center transition-all", disponivelViagensLongas ? "bg-primary border-primary" : "border-border group-hover:border-primary/50"),
                    children: [/* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: disponivelViagensLongas,
                      onChange: (e) => setDisponivelViagensLongas(e.target.checked),
                      className: "hidden"
                    }), disponivelViagensLongas && /* @__PURE__ */ jsx(CircleCheckBig, {
                      className: "w-4 h-4 text-primary-foreground"
                    })]
                  }), /* @__PURE__ */ jsx("span", {
                    className: "text-[13px] font-bold text-muted-foreground group-hover:text-foreground transition-colors uppercase tracking-tight",
                    children: "Viagens Longas"
                  })]
                }), /* @__PURE__ */ jsxs("label", {
                  className: "flex items-center gap-3 group cursor-pointer",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: cn$1("w-5 h-5 rounded border-2 flex items-center justify-center transition-all", disponivelInternacional ? "bg-primary border-primary" : "border-border group-hover:border-primary/50"),
                    children: [/* @__PURE__ */ jsx("input", {
                      type: "checkbox",
                      checked: disponivelInternacional,
                      onChange: (e) => setDisponivelInternacional(e.target.checked),
                      className: "hidden"
                    }), disponivelInternacional && /* @__PURE__ */ jsx(CircleCheckBig, {
                      className: "w-4 h-4 text-primary-foreground"
                    })]
                  }), /* @__PURE__ */ jsx("span", {
                    className: "text-[13px] font-bold text-muted-foreground group-hover:text-foreground transition-colors uppercase tracking-tight",
                    children: "Viagens Internacionais"
                  })]
                })]
              })]
            })]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Habilita√ß√£o (CNH)",
          icon: FileText$1,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "N¬∫ Registro CNH *"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: cnh,
                onChange: (e) => setCnh(e.target.value.replace(/\D/g, "")),
                maxLength: 11,
                className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Categoria"
                }), /* @__PURE__ */ jsx("select", {
                  value: categoriaCnh,
                  onChange: (e) => setCategoriaCnh(e.target.value),
                  className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none appearance-none",
                  children: ["A", "B", "C", "D", "E", "AB", "AC", "AD", "AE"].map((cat) => /* @__PURE__ */ jsx("option", {
                    value: cat,
                    children: cat
                  }, cat))
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1.5",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                  children: "Vencimento"
                }), /* @__PURE__ */ jsx(DatePicker, {
                  value: validadeCnh,
                  onChange: setValidadeCnh
                })]
              })]
            }), cnhValidade && /* @__PURE__ */ jsxs("div", {
              className: cn$1("p-4 rounded-xl border-2 flex items-center gap-3", cnhValidade.cor === "green" ? "bg-emerald-500/5 border-emerald-500/20 text-emerald-500" : cnhValidade.cor === "orange" ? "bg-orange-500/5 border-orange-500/20 text-orange-500" : "bg-red-500/5 border-red-500/20 text-red-500"),
              children: [/* @__PURE__ */ jsx(TriangleAlert, {
                size: 16
              }), /* @__PURE__ */ jsx("span", {
                className: "text-xs font-black uppercase tracking-widest",
                children: cnhValidade.texto
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Passaporte (Opcional)",
          icon: Globe,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "N¬∫ Passaporte"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: passaporte,
                onChange: (e) => setPassaporte(e.target.value.toUpperCase()),
                className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-1.5",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "Vencimento"
              }), /* @__PURE__ */ jsx(DatePicker, {
                value: validadePassaporte,
                onChange: setValidadePassaporte,
                disabled: !passaporte
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Observa√ß√µes Internas",
          icon: FileText$1,
          children: /* @__PURE__ */ jsx("div", {
            className: "p-2",
            children: /* @__PURE__ */ jsx("textarea", {
              value: observacoes,
              onChange: (e) => setObservacoes(e.target.value),
              rows: 5,
              className: "w-full p-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none resize-none"
            })
          })
        })]
      })]
    })]
  }, "editar-motorista-main");
};
const route57 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  EditarMotorista
}, Symbol.toStringTag, { value: "Module" }));
function ParcelForm({ intent, defaultValues = {}, trips: trips2, vehicles }) {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const isSubmitting = navigation.state !== "idle";
  const isEdit = intent === "edit";
  return /* @__PURE__ */ jsxs(Form, { method: "post", className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [
    /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-8", children: [
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-8", children: [
        /* @__PURE__ */ jsx(FormSection, { title: "Remetente", icon: User, children: /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Nome Completo" }),
          /* @__PURE__ */ jsx(Input, { name: "sender_name", defaultValue: defaultValues.sender_name, required: true, placeholder: "Nome do remetente", className: "h-14 rounded-xl bg-muted/40" })
        ] }) }),
        /* @__PURE__ */ jsx(FormSection, { title: "Destinat√°rio", icon: User, children: /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Nome Completo" }),
            /* @__PURE__ */ jsx(Input, { name: "recipient_name", defaultValue: defaultValues.recipient_name, required: true, placeholder: "Nome do destinat√°rio", className: "h-14 rounded-xl bg-muted/40" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Telefone" }),
            /* @__PURE__ */ jsx(Input, { name: "recipient_phone", defaultValue: defaultValues.recipient_phone, placeholder: "(00) 00000-0000", className: "h-14 rounded-xl bg-muted/40" })
          ] })
        ] }) })
      ] }),
      /* @__PURE__ */ jsx(FormSection, { title: "Log√≠stica e Rota", icon: MapPin, children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Origem" }),
          /* @__PURE__ */ jsx(Input, { name: "origin", defaultValue: defaultValues.origin, required: true, placeholder: "Cidade de Coleta", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Destino" }),
          /* @__PURE__ */ jsx(Input, { name: "destination", defaultValue: defaultValues.destination, required: true, placeholder: "Cidade de Entrega", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Previs√£o de Entrega" }),
          /* @__PURE__ */ jsx(
            Input,
            {
              type: "date",
              name: "delivery_estimate",
              defaultValue: defaultValues.delivery_estimate ? new Date(defaultValues.delivery_estimate).toISOString().split("T")[0] : "",
              className: "h-14 rounded-xl bg-muted/40"
            }
          )
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Detalhes da Carga", icon: Package, children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Peso (kg)" }),
          /* @__PURE__ */ jsx(Input, { type: "number", step: "0.1", name: "weight_kg", defaultValue: defaultValues.weight_kg, placeholder: "0.0", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Volume (m¬≥)" }),
          /* @__PURE__ */ jsx(Input, { type: "number", step: "0.01", name: "volume_m3", defaultValue: defaultValues.volume_m3, placeholder: "0.00", className: "h-14 rounded-xl bg-muted/40" })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Modalidade e Valor", icon: DollarSign$1, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Tipo de Frete" }),
          /* @__PURE__ */ jsxs("select", { name: "type", defaultValue: defaultValues.type, required: true, className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
            /* @__PURE__ */ jsx("option", { value: "BUS_CARGO", children: "√îNIBUS (Carga Fracionada)" }),
            /* @__PURE__ */ jsx("option", { value: "TRUCK_FREIGHT", children: "CAMINH√ÉO (Frete Direto)" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Valor Declarado (R$)" }),
          /* @__PURE__ */ jsx(Input, { type: "number", step: "0.01", name: "declared_value", defaultValue: defaultValues.declared_value, required: true, placeholder: "0,00", className: "h-14 rounded-xl bg-muted/40 text-xl font-black text-emerald-600" })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Embarque", icon: Truck, children: /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Vincular a Viagem/Ve√≠culo" }),
        /* @__PURE__ */ jsxs("select", { name: "trip_id", defaultValue: defaultValues.trip_id || "", className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none mb-4", children: [
          /* @__PURE__ */ jsx("option", { value: "", children: "N√£o vincular a viagem..." }),
          trips2.map((t) => /* @__PURE__ */ jsxs("option", { value: t.id, children: [
            t.id.substring(0, 8),
            " - ",
            t.departure_date
          ] }, t.id))
        ] }),
        /* @__PURE__ */ jsxs("select", { name: "vehicle_id", defaultValue: defaultValues.vehicle_id || "", className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
          /* @__PURE__ */ jsx("option", { value: "", children: "N√£o vincular a ve√≠culo..." }),
          vehicles.map((v) => /* @__PURE__ */ jsxs("option", { value: v.id, children: [
            v.placa,
            " - ",
            v.modelo
          ] }, v.id))
        ] })
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4", children: [
        /* @__PURE__ */ jsx(Button, { type: "submit", disabled: isSubmitting, className: "h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20", children: isSubmitting ? /* @__PURE__ */ jsx(LoaderCircle, { className: "animate-spin" }) : isEdit ? "SALVAR ALTERA√á√ïES" : "REGISTRAR CARGA" }),
        /* @__PURE__ */ jsx(Button, { type: "button", variant: "ghost", onClick: () => navigate(-1), className: "h-14 rounded-xl font-black uppercase text-[10px] tracking-widest", children: "CANCELAR" })
      ] })
    ] })
  ] });
}
const loader$r = async ({
  params
}) => {
  const {
    id
  } = params;
  const [parcel$1, trips$1, vehicles] = await Promise.all([db.query.parcel.findFirst({
    where: eq(parcel.id, id)
  }), db.select().from(trips).where(eq(trips.status, "SCHEDULED")), db.select().from(vehicle).where(eq(vehicle.status, "ACTIVE"))]);
  if (!parcel$1) throw new Response("Encomenda n√£o encontrada", {
    status: 404
  });
  return data({
    parcel: parcel$1,
    trips: trips$1,
    vehicles
  });
};
const action$q = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const payload = {
    type: formData.get("type"),
    origin: formData.get("origin"),
    destination: formData.get("destination"),
    sender_name: formData.get("sender_name"),
    recipient_name: formData.get("recipient_name"),
    recipient_phone: formData.get("recipient_phone"),
    weight_kg: formData.get("weight_kg"),
    volume_m3: formData.get("volume_m3"),
    declared_value: formData.get("declared_value"),
    delivery_estimate: formData.get("delivery_estimate") ? new Date(formData.get("delivery_estimate")) : null,
    trip_id: formData.get("trip_id") || null,
    vehicle_id: formData.get("vehicle_id") || null,
    updatedAt: /* @__PURE__ */ new Date()
  };
  await db.update(parcel).set(payload).where(eq(parcel.id, id));
  return redirect("/admin/parcels");
};
const admin_parcels_$id_edit = UNSAFE_withComponentProps(function EditParcelPage() {
  const {
    parcel: parcel2,
    trips: trips2,
    vehicles
  } = useLoaderData();
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Editar Encomenda",
      subtitle: `Alterando dados da carga ${parcel2.code}`,
      backLink: "/admin/parcels"
    }), /* @__PURE__ */ jsx(ParcelForm, {
      intent: "edit",
      defaultValues: parcel2,
      trips: trips2,
      vehicles
    })]
  }, "edit-parcel-main");
});
const route58 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$q,
  default: admin_parcels_$id_edit,
  loader: loader$r
}, Symbol.toStringTag, { value: "Module" }));
const loader$q = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const reservation$1 = await db.query.reservation.findFirst({
    where: eq(reservation.id, id),
    with: {
      trip: {
        with: {
          route: true
        }
      },
      client: true
    }
  });
  if (!reservation$1) throw new Response("Reserva n√£o encontrada", {
    status: 404
  });
  return data({
    reservation: reservation$1
  });
};
const action$p = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  if (!id) return null;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "cancel") {
    await db.update(reservation).set({
      status: ReservationStatus.CANCELLED,
      updatedAt: /* @__PURE__ */ new Date()
    }).where(eq(reservation.id, id));
    return data({
      success: true
    });
  }
  return null;
};
const admin_reservations_$id = UNSAFE_withComponentProps(function ReservationDetailPage() {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
  const {
    reservation: reservation2
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const statusConfigs = {
    [ReservationStatus.PENDING]: {
      icon: Clock,
      color: "text-amber-500",
      bg: "bg-amber-500/10",
      label: "Pendente"
    },
    [ReservationStatus.CONFIRMED]: {
      icon: BadgeCheck,
      color: "text-emerald-500",
      bg: "bg-emerald-500/10",
      label: "Confirmada"
    },
    [ReservationStatus.CANCELLED]: {
      icon: ShieldAlert,
      color: "text-destructive",
      bg: "bg-destructive/10",
      label: "Cancelada"
    },
    [ReservationStatus.CHECKED_IN]: {
      icon: CircleCheck,
      color: "text-blue-500",
      bg: "bg-blue-500/10",
      label: "Check-in Realizado"
    }
  };
  const config2 = statusConfigs[reservation2.status] || statusConfigs[ReservationStatus.PENDING];
  const StatusIcon = config2.icon;
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: `Ticket #${reservation2.ticket_code || reservation2.id.substring(0, 8)}`,
      subtitle: "Detalhes da reserva e status de embarque",
      backLink: "/admin/reservations",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex gap-3",
        children: [/* @__PURE__ */ jsxs(Button, {
          variant: "outline",
          onClick: () => window.print(),
          className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px]",
          children: [/* @__PURE__ */ jsx(Printer, {
            size: 18,
            className: "mr-2"
          }), " Imprimir"]
        }), /* @__PURE__ */ jsx(Button, {
          variant: "outline",
          className: "h-14 rounded-xl px-4",
          children: /* @__PURE__ */ jsx(Share2, {
            size: 18
          })
        }), reservation2.status !== ReservationStatus.CANCELLED && /* @__PURE__ */ jsx(Button, {
          variant: "destructive",
          onClick: () => fetcher.submit({
            intent: "cancel"
          }, {
            method: "post"
          }),
          className: "h-14 rounded-xl px-8 font-bold uppercase text-[12px]",
          children: "CANCELAR RESERVA"
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-12 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-8 space-y-8",
        children: [/* @__PURE__ */ jsxs(Card, {
          className: "rounded-[40px] overflow-hidden border-none shadow-2xl bg-gradient-to-br from-card to-muted/20 relative",
          children: [/* @__PURE__ */ jsxs("div", {
            className: cn$1("absolute top-8 right-8 px-6 py-2 rounded-full flex items-center gap-2 font-black uppercase text-[12px] tracking-widest", config2.bg, config2.color),
            children: [/* @__PURE__ */ jsx(StatusIcon, {
              size: 16
            }), config2.label]
          }), /* @__PURE__ */ jsxs("div", {
            className: "p-12 space-y-12",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-start gap-8",
              children: [/* @__PURE__ */ jsx("div", {
                className: "w-24 h-24 rounded-3xl bg-primary/10 flex items-center justify-center text-primary",
                children: /* @__PURE__ */ jsx(Bus, {
                  size: 48,
                  strokeWidth: 1.5
                })
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("h2", {
                  className: "text-4xl font-black tracking-tighter uppercase",
                  children: ((_b = (_a = reservation2.trip) == null ? void 0 : _a.route) == null ? void 0 : _b.name) || "Viagem Operacional"
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-muted-foreground font-bold",
                  children: [(_c = reservation2.trip) == null ? void 0 : _c.departure_date, " ‚Ä¢ ", (_d = reservation2.trip) == null ? void 0 : _d.departure_time]
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-2 md:grid-cols-4 gap-8 py-10 border-y border-border/50",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Passageiro"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold truncate",
                  children: reservation2.passenger_name
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Documento"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold",
                  children: reservation2.passenger_document || "---"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Assento"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-3xl font-black text-primary",
                  children: reservation2.seat_number
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Valor"
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-lg font-bold",
                  children: ["R$ ", Number(reservation2.total_price).toFixed(2)]
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex-1 space-y-1",
                children: [/* @__PURE__ */ jsxs("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground flex items-center gap-1",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: "w-1.5 h-1.5 rounded-full bg-emerald-500"
                  }), " Origem"]
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-bold",
                  children: ((_f = (_e = reservation2.trip) == null ? void 0 : _e.route) == null ? void 0 : _f.origin_city) || "---"
                })]
              }), /* @__PURE__ */ jsx(ArrowLeft, {
                className: "text-muted-foreground rotate-180",
                size: 24,
                strokeWidth: 1
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex-1 space-y-1 text-right",
                children: [/* @__PURE__ */ jsxs("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground flex items-center justify-end gap-1",
                  children: ["Destino ", /* @__PURE__ */ jsx("div", {
                    className: "w-1.5 h-1.5 rounded-full bg-destructive"
                  })]
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-bold",
                  children: ((_h = (_g = reservation2.trip) == null ? void 0 : _g.route) == null ? void 0 : _h.destination_city) || "---"
                })]
              })]
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "h-4 bg-muted/30 w-full flex gap-2 px-8 overflow-hidden",
            children: Array.from({
              length: 30
            }).map((_, i) => /* @__PURE__ */ jsx("div", {
              className: "w-4 h-4 bg-background rounded-full -mt-2 shrink-0"
            }, i))
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground ml-4 flex items-center gap-2",
            children: [/* @__PURE__ */ jsx(History, {
              size: 16
            }), " Linha do Tempo"]
          }), /* @__PURE__ */ jsx(Card, {
            className: "p-8 rounded-[32px] border-none shadow-xl space-y-8",
            children: /* @__PURE__ */ jsxs("div", {
              className: "flex gap-6 relative",
              children: [/* @__PURE__ */ jsx("div", {
                className: "w-1 h-full absolute left-3 top-2 bg-muted/50 rounded-full"
              }), /* @__PURE__ */ jsx("div", {
                className: "w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center shrink-0 z-10",
                children: /* @__PURE__ */ jsx(CircleCheck, {
                  size: 12,
                  className: "text-white"
                })
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "font-bold text-sm",
                  children: "Reserva Emitida"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-[11px] text-muted-foreground uppercase",
                  children: reservation2.createdAt
                })]
              })]
            })
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-4 space-y-8",
        children: [/* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[40px] border-none shadow-2xl bg-gradient-to-br from-indigo-500 to-blue-600 text-white space-y-6",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex items-center justify-between",
            children: [/* @__PURE__ */ jsx("h3", {
              className: "text-[12px] font-black uppercase tracking-widest opacity-80",
              children: "Pagamento"
            }), /* @__PURE__ */ jsx(CreditCard, {
              size: 20
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsx("p", {
              className: "text-sm font-medium opacity-80",
              children: "Total Pago"
            }), /* @__PURE__ */ jsxs("p", {
              className: "text-4xl font-black",
              children: ["R$ ", Number(reservation2.total_price).toFixed(2)]
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "pt-6 border-t border-white/20",
            children: /* @__PURE__ */ jsx(Badge$1, {
              className: "bg-white/20 hover:bg-white/30 text-white border-none rounded-lg px-4 py-1.5 font-bold text-[10px] uppercase",
              children: "LIQUIDADO EM CONTA"
            })
          })]
        }), /* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[40px] border-none shadow-2xl space-y-6",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground",
            children: "V√≠nculo de Cliente"
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex items-center gap-4",
            children: [/* @__PURE__ */ jsx("div", {
              className: "w-16 h-16 rounded-2xl bg-muted flex items-center justify-center text-muted-foreground font-black text-xl",
              children: ((_j = (_i = reservation2.client) == null ? void 0 : _i.nome) == null ? void 0 : _j.charAt(0)) || "P"
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("p", {
                className: "font-bold",
                children: ((_k = reservation2.client) == null ? void 0 : _k.nome) || reservation2.passenger_name
              }), /* @__PURE__ */ jsx("p", {
                className: "text-xs text-muted-foreground truncate",
                children: ((_l = reservation2.client) == null ? void 0 : _l.email) || "Sem email cadastrado"
              })]
            })]
          }), /* @__PURE__ */ jsx(Button, {
            asChild: true,
            variant: "outline",
            className: "w-full h-14 rounded-xl font-bold uppercase text-[11px] tracking-widest border-border/50",
            children: /* @__PURE__ */ jsx(Link, {
              to: `/admin/clients/${reservation2.client_id}`,
              children: "VER PERFIL COMPLETO"
            })
          })]
        })]
      })]
    })]
  });
});
const route59 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$p,
  default: admin_reservations_$id,
  loader: loader$q
}, Symbol.toStringTag, { value: "Module" }));
const StatusBadge$6 = ({ status }) => {
  const configs = {
    SCHEDULED: { color: "yellow", icon: Clock, label: "Agendada" },
    AGENDADA: { color: "yellow", icon: Clock, label: "Agendada" },
    CONFIRMED: { color: "green", icon: CircleCheckBig, label: "Confirmada" },
    CONFIRMADA: { color: "green", icon: CircleCheckBig, label: "Confirmada" },
    IN_TRANSIT: { color: "blue", icon: Loader, label: "Em Curso" },
    EM_CURSO: { color: "blue", icon: Loader, label: "Em Curso" },
    COMPLETED: { color: "slate", icon: CircleCheckBig, label: "Finalizada" },
    FINALIZADA: { color: "slate", icon: CircleCheckBig, label: "Finalizada" },
    CANCELLED: { color: "red", icon: CircleX, label: "Cancelada" },
    CANCELADA: { color: "red", icon: CircleX, label: "Cancelada" },
    DELAYED: { color: "orange", icon: Clock, label: "Atrasada" }
  };
  const config2 = configs[status] || configs["SCHEDULED"];
  const Icon2 = config2.icon;
  return /* @__PURE__ */ jsxs("span", { className: `inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold bg-${config2.color}-100 dark:bg-${config2.color}-900/30 text-${config2.color}-700 dark:text-${config2.color}-300`, children: [
    /* @__PURE__ */ jsx(Icon2, { size: 12 }),
    config2.label
  ] });
};
const SeletorViagem = ({
  viagens,
  viagemSelecionada,
  onChange
}) => {
  var _a;
  const [busca, setBusca] = useState("");
  const [filtroStatus, setFiltroStatus] = useState("TODOS");
  const formatarDataHora = (dateValue) => {
    if (!dateValue) return "Data n√£o definida";
    try {
      let dateStr = "";
      if (dateValue instanceof Date) {
        dateStr = dateValue.toISOString().split("T")[0];
      } else if (typeof dateValue === "string") {
        if (dateValue.includes("T")) {
          dateStr = dateValue.split("T")[0];
        } else {
          dateStr = dateValue;
        }
      }
      if (!dateStr || dateStr.length !== 10) return "Data Inv√°lida";
      const [year, month, day] = dateStr.split("-").map(Number);
      return new Date(year, month - 1, day, 12).toLocaleDateString();
    } catch (error) {
      return "Erro Data";
    }
  };
  const viagensFiltradas = viagens.filter((v) => {
    var _a2, _b, _c, _d, _e, _f;
    const matchStatus = filtroStatus === "TODOS" || filtroStatus === "AGENDADA" && (v.status === "AGENDADA" || v.status === "SCHEDULED") || filtroStatus === "CONFIRMADA" && (v.status === "CONFIRMADA" || v.status === "CONFIRMED");
    const matchBusca = busca === "" || ((_a2 = v.titulo) == null ? void 0 : _a2.toLowerCase().includes(busca.toLowerCase())) || ((_b = v.origem) == null ? void 0 : _b.toLowerCase().includes(busca.toLowerCase())) || ((_c = v.destino) == null ? void 0 : _c.toLowerCase().includes(busca.toLowerCase())) || ((_d = v.route_name) == null ? void 0 : _d.toLowerCase().includes(busca.toLowerCase())) || ((_e = v.origin_city) == null ? void 0 : _e.toLowerCase().includes(busca.toLowerCase())) || ((_f = v.destination_city) == null ? void 0 : _f.toLowerCase().includes(busca.toLowerCase()));
    return matchStatus && matchBusca && (v.status === "AGENDADA" || v.status === "CONFIRMADA" || v.status === "SCHEDULED" || v.status === "CONFIRMED");
  });
  return /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "space-y-3", children: [
      /* @__PURE__ */ jsxs("div", { className: "relative", children: [
        /* @__PURE__ */ jsx(Search, { size: 18, className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400" }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            placeholder: "Buscar por origem, destino ou t√≠tulo...",
            value: busca,
            onChange: (e) => setBusca(e.target.value),
            className: "w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => setFiltroStatus("TODOS"),
            className: `px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${filtroStatus === "TODOS" ? "bg-blue-600 text-white" : "bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,
            children: "Todas"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => setFiltroStatus("AGENDADA"),
            className: `px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${filtroStatus === "AGENDADA" ? "bg-yellow-600 text-white" : "bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,
            children: "Agendadas"
          }
        ),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => setFiltroStatus("CONFIRMADA"),
            className: `px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${filtroStatus === "CONFIRMADA" ? "bg-green-600 text-white" : "bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,
            children: "Confirmadas"
          }
        )
      ] })
    ] }),
    viagemSelecionada && /* @__PURE__ */ jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-500 rounded-lg p-4", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mb-2", children: [
        /* @__PURE__ */ jsx("span", { className: "text-xs font-semibold text-blue-700 dark:text-blue-400 uppercase tracking-wide", children: "Viagem Selecionada" }),
        /* @__PURE__ */ jsx(Check, { size: 20, className: "text-blue-600 dark:text-blue-400" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap items-center gap-3 mb-2", children: [
        /* @__PURE__ */ jsx("h4", { className: "font-bold text-slate-800 dark:text-white", children: viagemSelecionada.title || viagemSelecionada.titulo || "Viagem sem t√≠tulo" }),
        /* @__PURE__ */ jsx(StatusBadge$6, { status: viagemSelecionada.status })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 gap-2 text-sm text-slate-600 dark:text-slate-300", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx(Calendar$1, { size: 14 }),
          /* @__PURE__ */ jsx("span", { children: formatarDataHora(viagemSelecionada.departure_date) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx(Clock, { size: 14 }),
          /* @__PURE__ */ jsx("span", { children: (_a = viagemSelecionada.departure_time) == null ? void 0 : _a.substring(0, 5) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx(MapPin, { size: 14, className: "text-green-600" }),
          /* @__PURE__ */ jsx("span", { children: viagemSelecionada.route_name || viagemSelecionada.origem })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
          /* @__PURE__ */ jsx(MapPin, { size: 14, className: "text-red-600" }),
          /* @__PURE__ */ jsx("span", { children: viagemSelecionada.return_route_name || viagemSelecionada.destino })
        ] })
      ] })
    ] }),
    !viagemSelecionada && /* @__PURE__ */ jsx("div", { className: "max-h-96 overflow-y-auto space-y-4", children: viagensFiltradas.length === 0 ? /* @__PURE__ */ jsxs("div", { className: "text-center py-8 text-slate-500 dark:text-slate-400", children: [
      /* @__PURE__ */ jsx(Bus, { size: 48, className: "mx-auto mb-2 opacity-50" }),
      /* @__PURE__ */ jsx("p", { children: "Nenhuma viagem dispon√≠vel" })
    ] }) : viagensFiltradas.map((viagem) => {
      var _a2, _b;
      return /* @__PURE__ */ jsx(
        "div",
        {
          onClick: () => onChange(viagem),
          className: `cursor-pointer bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 
                                shadow-sm hover:shadow-md hover:border-blue-500 dark:hover:border-blue-500 transition-all overflow-hidden group`,
          children: /* @__PURE__ */ jsx("div", { className: "p-4", children: /* @__PURE__ */ jsx("div", { className: "flex items-start justify-between", children: /* @__PURE__ */ jsxs("div", { className: "flex-1", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap items-center gap-2 mb-3", children: [
              /* @__PURE__ */ jsx("h3", { className: "font-bold text-slate-800 dark:text-slate-100 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors", children: viagem.title || viagem.titulo || "Viagem sem t√≠tulo" }),
              viagem.trip_type && /* @__PURE__ */ jsx("span", { className: "px-2 py-0.5 rounded text-xs font-bold bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 uppercase", children: viagem.trip_type.replace("_", " ") }),
              /* @__PURE__ */ jsx(StatusBadge$6, { status: viagem.status })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "space-y-2 mb-3", children: [
              /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 text-sm", children: [
                /* @__PURE__ */ jsx(MapPin, { size: 16, className: "text-green-600 shrink-0" }),
                /* @__PURE__ */ jsx("span", { className: "font-medium text-slate-700 dark:text-slate-300", children: viagem.route_name || viagem.origem || "Origem n√£o definida" }),
                /* @__PURE__ */ jsxs("span", { className: "text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 ml-auto", children: [
                  /* @__PURE__ */ jsx(Calendar$1, { size: 12 }),
                  " ",
                  formatarDataHora(viagem.departure_date),
                  /* @__PURE__ */ jsx(Clock, { size: 12 }),
                  " ",
                  (_a2 = viagem.departure_time) == null ? void 0 : _a2.substring(0, 5)
                ] })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 text-sm", children: [
                /* @__PURE__ */ jsx(MapPin, { size: 16, className: "text-red-600 shrink-0" }),
                /* @__PURE__ */ jsx("span", { className: "font-medium text-slate-700 dark:text-slate-300", children: viagem.return_route_name || viagem.destino || "Destino n√£o definido" }),
                (viagem.arrival_date || viagem.arrival_time) && /* @__PURE__ */ jsxs("span", { className: "text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 ml-auto", children: [
                  viagem.arrival_date && /* @__PURE__ */ jsxs(Fragment, { children: [
                    /* @__PURE__ */ jsx(Calendar$1, { size: 12 }),
                    " ",
                    formatarDataHora(viagem.arrival_date)
                  ] }),
                  viagem.arrival_time && /* @__PURE__ */ jsxs(Fragment, { children: [
                    /* @__PURE__ */ jsx(Clock, { size: 12 }),
                    " ",
                    (_b = viagem.arrival_time) == null ? void 0 : _b.substring(0, 5)
                  ] })
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap items-center gap-3 text-xs text-slate-500 dark:text-slate-400 border-t border-slate-100 dark:border-slate-700/50 pt-2", children: [
              viagem.vehicle_plate && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
                /* @__PURE__ */ jsx(Bus, { size: 12 }),
                /* @__PURE__ */ jsx("span", { children: viagem.vehicle_plate })
              ] }),
              viagem.driver_name && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-1", children: [
                /* @__PURE__ */ jsx(Users, { size: 12 }),
                /* @__PURE__ */ jsx("span", { children: viagem.driver_name })
              ] }),
              /* @__PURE__ */ jsx("span", { className: "text-slate-300", children: "|" }),
              /* @__PURE__ */ jsxs("span", { className: "font-medium text-blue-600 dark:text-blue-400", children: [
                viagem.seats_available,
                " lugares livres"
              ] })
            ] })
          ] }) }) })
        },
        viagem.id
      );
    }) })
  ] });
};
const SeletorPassageiro = ({
  clientes,
  clienteSelecionado,
  onSelecionarCliente,
  onNovoCliente
}) => {
  const [busca, setBusca] = useState("");
  const clientesFiltrados = clientes.filter(
    (c) => c.nome.toLowerCase().includes(busca.toLowerCase()) || c.email.toLowerCase().includes(busca.toLowerCase()) || (c.documento || "").includes(busca)
  );
  const handleSelecionarCliente = (cliente) => {
    if (onSelecionarCliente) {
      if ((clienteSelecionado == null ? void 0 : clienteSelecionado.id) === cliente.id) {
        onSelecionarCliente(null);
      } else {
        onSelecionarCliente(cliente);
      }
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsx("h3", { className: "font-bold text-slate-700 dark:text-slate-200 mb-3", children: "Selecionar Passageiro" }),
      /* @__PURE__ */ jsx("p", { className: "text-sm text-slate-500 dark:text-slate-400 mb-4", children: "Busque e selecione um passageiro, depois escolha um assento no mapa ao lado" })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ jsxs("div", { className: "relative flex-1", children: [
        /* @__PURE__ */ jsx(Search, { size: 18, className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400" }),
        /* @__PURE__ */ jsx(
          "input",
          {
            type: "text",
            placeholder: "Buscar por nome, email ou documento...",
            value: busca,
            onChange: (e) => setBusca(e.target.value),
            className: "w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          }
        )
      ] }),
      onNovoCliente && /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: (e) => {
            e.preventDefault();
            onNovoCliente();
          },
          title: "Cadastrar Novo Cliente",
          className: "p-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors flex items-center justify-center min-w-[42px]",
          children: [
            /* @__PURE__ */ jsx(User, { size: 20 }),
            /* @__PURE__ */ jsx("span", { className: "hidden sm:inline-block ml-2 text-sm font-semibold", children: "Novo" })
          ]
        }
      )
    ] }),
    clienteSelecionado && /* @__PURE__ */ jsx("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3", children: [
      /* @__PURE__ */ jsx("div", { className: "w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0", children: /* @__PURE__ */ jsx(Check, { size: 16, className: "text-white" }) }),
      /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
        /* @__PURE__ */ jsx("p", { className: "font-semibold text-slate-800 dark:text-white text-sm truncate", children: clienteSelecionado.nome }),
        /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400 truncate", children: "Agora selecione um assento ‚Üí" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx("div", { className: "max-h-96 overflow-y-auto space-y-2 border border-slate-200 dark:border-slate-700 rounded-lg p-2", children: clientesFiltrados.length > 0 ? clientesFiltrados.map((cliente) => {
      const isSelected = (clienteSelecionado == null ? void 0 : clienteSelecionado.id) === cliente.id;
      return /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => handleSelecionarCliente(cliente),
          className: `w-full p-3 rounded-lg border transition-all text-left ${isSelected ? "border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-sm" : "border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,
          children: /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3", children: [
            /* @__PURE__ */ jsx("div", { className: `w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${isSelected ? "bg-blue-600" : "bg-slate-200 dark:bg-slate-700"}`, children: isSelected ? /* @__PURE__ */ jsx(Check, { size: 16, className: "text-white" }) : /* @__PURE__ */ jsx(User, { size: 16, className: "text-slate-600 dark:text-slate-400" }) }),
            /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ jsx("p", { className: `font-semibold ${isSelected ? "text-blue-700 dark:text-blue-300" : "text-slate-800 dark:text-white"}`, children: cliente.nome }),
              /* @__PURE__ */ jsxs("p", { className: "text-xs text-slate-500 dark:text-slate-400 truncate", children: [
                cliente.documento,
                " ‚Ä¢ ",
                cliente.email
              ] })
            ] })
          ] })
        },
        cliente.id
      );
    }) : /* @__PURE__ */ jsxs("div", { className: "text-center py-8 text-slate-500 dark:text-slate-400", children: [
      /* @__PURE__ */ jsx(User, { size: 32, className: "mx-auto mb-2 opacity-50" }),
      /* @__PURE__ */ jsx("p", { className: "text-sm", children: "Nenhum cliente encontrado" })
    ] }) })
  ] });
};
const MapaAssentosReserva = ({
  veiculo,
  assentosReservados,
  assentosSelecionados,
  onSelecionarAssento,
  precos: precosViagem
}) => {
  const [andarAtivo, setAndarAtivo] = useState(1);
  const assentos = veiculo.mapa_assentos || [];
  const precos = precosViagem || veiculo.precos_assentos || {};
  const temPrecos = Object.keys(precos).length > 0;
  const SEAT_STYLES = {
    [TipoAssento.CONVENCIONAL]: { icon: Circle, label: "Convencional" },
    [TipoAssento.EXECUTIVO]: { icon: Star, label: "Executivo" },
    [TipoAssento.SEMI_LEITO]: { icon: Armchair, label: "Semi-Leito" },
    [TipoAssento.LEITO]: { icon: Moon, label: "Leito" },
    [TipoAssento.CAMA]: { icon: Bed, label: "Cama" },
    [TipoAssento.CAMA_MASTER]: { icon: Crown, label: "Cama Master" },
    [TipoAssento.BLOQUEADO]: { icon: Armchair, label: "Bloqueado" }
  };
  const getPrecoAssento = (tipo) => {
    return Number(precos && precos[tipo] || 0);
  };
  const handleClickAssento = (assento) => {
    if (assentosReservados.includes(assento.numero) || assento.status === AssentoStatus.BLOQUEADO || assento.disabled) {
      return;
    }
    onSelecionarAssento({
      numero: assento.numero,
      tipo: assento.tipo,
      valor: getPrecoAssento(assento.tipo)
    });
  };
  const getAssentoStatus = (assento) => {
    if (assentosSelecionados.some((s) => s.numero === assento.numero)) return "selecionado";
    if (assentosReservados.includes(assento.numero)) return "reservado";
    if (assento.status === AssentoStatus.BLOQUEADO || assento.disabled || assento.tipo === TipoAssento.BLOQUEADO) return "bloqueado";
    return "livre";
  };
  const assentosPorAndar = assentos.filter((a) => a.andar === andarAtivo);
  const tiposPresentes = Array.from(new Set(assentosPorAndar.map((a) => a.tipo)));
  const allX = assentosPorAndar.map((a) => Number(a.posicao_x)).filter((value, index, self) => self.indexOf(value) === index).sort((a, b) => a - b);
  const maxY = Math.max(...assentosPorAndar.map((a) => Number(a.posicao_y)), 0);
  if (assentos.length === 0) {
    return /* @__PURE__ */ jsxs("div", { className: "bg-slate-50 dark:bg-slate-900 rounded-lg p-8 text-center border border-slate-200 dark:border-slate-700", children: [
      /* @__PURE__ */ jsx(Bus, { size: 48, className: "mx-auto mb-4 text-slate-300 dark:text-slate-600" }),
      /* @__PURE__ */ jsx("p", { className: "text-slate-500 dark:text-slate-400 mb-2", children: "Mapa de assentos n√£o configurado para este ve√≠culo." }),
      /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-400 dark:text-slate-500", children: "Configure o mapa na p√°gina de detalhes do ve√≠culo." })
    ] });
  }
  if (!temPrecos) {
    return /* @__PURE__ */ jsxs("div", { className: "bg-amber-50 dark:bg-amber-900/20 rounded-lg p-6 border border-amber-200 dark:border-amber-800", children: [
      /* @__PURE__ */ jsx("p", { className: "text-amber-800 dark:text-amber-300 mb-2 font-medium", children: "‚ö†Ô∏è Pre√ßos n√£o configurados" }),
      /* @__PURE__ */ jsx("p", { className: "text-sm text-amber-700 dark:text-amber-400", children: "Configure os pre√ßos por tipo de assento na p√°gina do ve√≠culo antes de criar reservas." })
    ] });
  }
  return /* @__PURE__ */ jsxs("div", { className: "w-full", children: [
    veiculo.is_double_deck && /* @__PURE__ */ jsxs("div", { className: "flex gap-2 border-b border-slate-200 dark:border-slate-700 mb-6 justify-center", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setAndarAtivo(1),
          className: `px-4 py-2 font-medium transition-colors border-b-2 ${andarAtivo === 1 ? "border-blue-600 text-blue-600 dark:text-blue-400" : "border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,
          children: "T√©rreo"
        }
      ),
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => setAndarAtivo(2),
          className: `px-4 py-2 font-medium transition-colors border-b-2 ${andarAtivo === 2 ? "border-blue-600 text-blue-600 dark:text-blue-400" : "border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,
          children: "Superior"
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-center mb-6", children: [
      /* @__PURE__ */ jsx("div", { className: "w-20 h-2 bg-slate-300 dark:bg-slate-600 rounded-full mb-1 opacity-50" }),
      /* @__PURE__ */ jsx("div", { className: "w-16 h-8 bg-slate-200 dark:bg-slate-700/30 rounded-lg flex items-center justify-center border border-slate-300/30 dark:border-slate-600/30", children: /* @__PURE__ */ jsx(Bus, { size: 18, className: "text-slate-400 dark:text-slate-500" }) }),
      /* @__PURE__ */ jsx("p", { className: "text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mt-2", children: "Frente do √înibus" })
    ] }),
    /* @__PURE__ */ jsx("div", { className: "flex justify-center mb-10 overflow-x-auto", children: /* @__PURE__ */ jsx(
      "div",
      {
        className: "grid gap-y-3 gap-x-3 p-1",
        style: {
          gridTemplateColumns: `repeat(${allX.length + 1}, auto)`,
          justifyContent: "center",
          minWidth: "fit-content"
        },
        children: Array.from({ length: maxY + 1 }).map((_, y) => {
          const corridorIdx = Math.ceil(allX.length / 2);
          return /* @__PURE__ */ jsx(React__default.Fragment, { children: Array.from({ length: allX.length + 1 }).map((_2, i) => {
            if (i === corridorIdx) {
              return /* @__PURE__ */ jsx("div", { className: "w-8 h-12 flex items-center justify-center", children: /* @__PURE__ */ jsx("span", { className: "text-slate-300 dark:text-slate-600 font-bold text-xs", children: y + 1 }) }, `cor-${y}-${i}`);
            }
            const xIdx = i < corridorIdx ? i : i - 1;
            const xVal = allX[xIdx];
            const assento = assentosPorAndar.find((a) => a.posicao_y === y && a.posicao_x === xVal);
            if (!assento) {
              return /* @__PURE__ */ jsx("div", { className: "w-12 h-12" }, `empty-${y}-${i}`);
            }
            const status = getAssentoStatus(assento);
            const style = SEAT_STYLES[assento.tipo] || { icon: Circle, label: assento.tipo };
            const Icon2 = style.icon;
            const preco = getPrecoAssento(assento.tipo);
            let buttonClasses = "relative w-12 h-12 rounded-xl transition-all duration-300 border-2 flex flex-col items-center justify-center gap-0.5 group/seat ";
            let textClasses = "text-[12px] font-bold ";
            let iconClasses = "w-3.5 h-3.5 ";
            if (status === "selecionado") {
              buttonClasses += "bg-blue-600 border-blue-500 shadow-lg shadow-blue-500/20 scale-105 z-10 ring-2 ring-blue-400/30";
              textClasses += "text-white";
              iconClasses += "text-white";
            } else if (status === "reservado") {
              buttonClasses += "bg-red-50 border-red-200 dark:bg-red-900/10 dark:border-red-800 cursor-not-allowed";
              textClasses += "text-red-700 dark:text-red-400";
              iconClasses += "text-red-600 dark:text-red-400";
            } else if (status === "bloqueado") {
              buttonClasses += "bg-slate-50 border-slate-200 dark:bg-slate-900/50 dark:border-slate-800 cursor-not-allowed opacity-80";
              textClasses += "text-slate-400 dark:text-slate-600";
              iconClasses += "text-slate-400 dark:text-slate-600";
            } else {
              buttonClasses += "bg-white dark:bg-slate-800/20 border-slate-200 dark:border-slate-700 hover:border-green-500 hover:bg-green-50 dark:hover:bg-green-900/10 cursor-pointer shadow-sm hover:shadow-md active:scale-95";
              textClasses += "text-slate-700 dark:text-slate-300 group-hover/seat:text-green-600 dark:group-hover/seat:text-green-400";
              iconClasses += "text-slate-400 dark:text-slate-500 group-hover/seat:text-green-500 dark:group-hover/seat:text-green-400";
            }
            const isStrangeLabel = assento.numero.startsWith("DISABLED_") || assento.numero.length > 5;
            return /* @__PURE__ */ jsx(
              "button",
              {
                onClick: () => handleClickAssento(assento),
                disabled: status === "reservado" || status === "bloqueado",
                className: buttonClasses,
                title: status === "bloqueado" ? "Bloqueado" : `${style.label} - ${status === "reservado" ? "Reservado" : `R$ ${preco.toFixed(2)}`}`,
                children: status === "bloqueado" ? /* @__PURE__ */ jsx(Lock, { size: 16, className: "text-slate-400 dark:text-slate-600" }) : /* @__PURE__ */ jsxs(Fragment, { children: [
                  /* @__PURE__ */ jsx(Icon2, { className: iconClasses }),
                  /* @__PURE__ */ jsx("span", { className: textClasses, children: isStrangeLabel ? "" : assento.numero }),
                  status === "livre" && /* @__PURE__ */ jsx("div", { className: "absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-slate-800" })
                ] })
              },
              assento.id
            );
          }) }, y);
        })
      }
    ) }),
    /* @__PURE__ */ jsxs("div", { className: "pt-6 border-t border-slate-100 dark:border-slate-700 space-y-6", children: [
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("p", { className: "text-[12px] font-bold text-slate-400 dark:text-slate-600 uppercase tracking-widest mb-3 text-center", children: "Legenda" }),
        /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap justify-center gap-x-6 gap-y-3", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx("div", { className: "w-3.5 h-3.5 rounded bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 relative", children: /* @__PURE__ */ jsx("div", { className: "absolute -top-0.5 -right-0.5 w-1.5 h-1.5 bg-green-500 rounded-full border border-white dark:border-slate-800" }) }),
            /* @__PURE__ */ jsx("span", { className: "text-[12px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight", children: "Livre" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx("div", { className: "w-3.5 h-3.5 rounded bg-blue-600 border-2 border-blue-500" }),
            /* @__PURE__ */ jsx("span", { className: "text-[12px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight", children: "Selecionado" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx("div", { className: "w-3.5 h-3.5 rounded bg-red-100 dark:bg-red-900/30 border-2 border-red-200 dark:border-red-800" }),
            /* @__PURE__ */ jsx("span", { className: "text-[12px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight", children: "Ocupado" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsx("div", { className: "w-3.5 h-3.5 rounded bg-slate-100 dark:bg-slate-900/50 border-2 border-slate-200 dark:border-slate-800" }),
            /* @__PURE__ */ jsx("span", { className: "text-[12px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight", children: "Bloqueado" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex flex-wrap justify-center gap-4", children: tiposPresentes.map((tipo) => {
        const style = SEAT_STYLES[tipo] || { icon: Circle, label: tipo };
        const Icon2 = style.icon;
        return /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 px-3 py-1.5 bg-slate-50 dark:bg-slate-900/30 rounded-lg border border-slate-100 dark:border-slate-800", children: [
          /* @__PURE__ */ jsx(Icon2, { className: "w-3.5 h-3.5 text-slate-400 dark:text-slate-500" }),
          /* @__PURE__ */ jsx("span", { className: "text-[12px] font-bold text-slate-600 dark:text-slate-400 uppercase tracking-tight", children: style.label })
        ] }, tipo);
      }) })
    ] })
  ] });
};
const loader$p = async () => {
  const trips$1 = await db.query.trips.findMany({
    with: {
      route: true
    },
    where: eq(trips.status, TripStatus.SCHEDULED)
  });
  const clients$1 = await db.select().from(clients);
  const vehiclesData = await db.select().from(vehicle);
  const vehicles = await Promise.all(vehiclesData.map(async (v) => {
    const seats = await db.select().from(seat).where(eq(seat.vehicleId, v.id));
    return {
      ...v,
      mapa_assentos: seats
    };
  }));
  return data({
    trips: trips$1,
    clients: clients$1,
    vehicles
  });
};
const action$o = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "create-reservation") {
    const payload = JSON.parse(formData.get("payload"));
    const {
      trip_id,
      reservations,
      payment_method
    } = payload;
    try {
      await db.transaction(async (tx) => {
        for (const res of reservations) {
          const [newRes] = await tx.insert(reservation).values({
            organization_id: "org_default",
            trip_id,
            client_id: res.client_id,
            passenger_name: res.passenger_name,
            passenger_document: res.passenger_document,
            seat_number: res.seat_number,
            total_price: res.price,
            status: ReservationStatus.CONFIRMED,
            payment_status: "PAID",
            ticket_code: `TKT-${Math.random().toString(36).substr(2, 9).toUpperCase()}`
          }).returning();
          await tx.insert(transaction).values({
            organization_id: "org_default",
            type: "INCOME",
            description: `Venda Passagem - ${res.passenger_name}`,
            amount: res.price,
            date: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
            status: "PAID",
            payment_method: payment_method || "CASH"
          });
        }
      });
      return redirect("/admin/reservations");
    } catch (e) {
      console.error(e);
      return data({
        error: "Erro ao processar reservas"
      }, {
        status: 500
      });
    }
  }
  return null;
};
const admin_reservations_new = UNSAFE_withComponentProps(function NewReservationPage() {
  const {
    trips: trips2,
    clients: clients2,
    vehicles
  } = useLoaderData();
  useActionData();
  useNavigation();
  useNavigate();
  const fetcher = useFetcher();
  const [step, setStep] = useState(1);
  const [viagemSelecionada, setViagemSelecionada] = useState(null);
  const [assentosSelecionados, setAssentosSelecionados] = useState([]);
  const [passageirosMap, setPassageirosMap] = useState({});
  const [veiculo, setVeiculo] = useState(null);
  useEffect(() => {
    if (viagemSelecionada) {
      const v = vehicles.find((v2) => v2.id === viagemSelecionada.vehicle_id);
      setVeiculo(v || null);
    }
  }, [viagemSelecionada, vehicles]);
  const handleSelectSeat = (seat2) => {
    setAssentosSelecionados((prev) => {
      const exists = prev.find((a) => a.numero === seat2.numero);
      if (exists) return prev.filter((a) => a.numero !== seat2.numero);
      return [...prev, seat2];
    });
  };
  const handleSelectClient = (seatNumber, client) => {
    setPassageirosMap((prev) => ({
      ...prev,
      [seatNumber]: {
        name: client.nome,
        document: client.documento,
        client_id: client.id
      }
    }));
  };
  const handleConfirm = () => {
    const payload = {
      trip_id: viagemSelecionada.id,
      payment_method: "CASH",
      reservations: assentosSelecionados.map((a) => {
        var _a, _b, _c;
        return {
          seat_number: a.numero,
          price: a.valor,
          passenger_name: (_a = passageirosMap[a.numero]) == null ? void 0 : _a.name,
          passenger_document: (_b = passageirosMap[a.numero]) == null ? void 0 : _b.document,
          client_id: (_c = passageirosMap[a.numero]) == null ? void 0 : _c.client_id
        };
      })
    };
    fetcher.submit({
      intent: "create-reservation",
      payload: JSON.stringify(payload)
    }, {
      method: "post"
    });
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Nova Reserva",
      subtitle: "Emiss√£o de tickets e aloca√ß√£o de passageiros",
      backLink: "/admin/reservations"
    }), /* @__PURE__ */ jsx("div", {
      className: "flex items-center justify-center gap-4 mb-8",
      children: [1, 2, 3].map((s) => /* @__PURE__ */ jsx("div", {
        className: cn("w-10 h-10 rounded-full flex items-center justify-center font-bold", step >= s ? "bg-primary text-white" : "bg-muted text-muted-foreground"),
        children: s
      }, s))
    }), step === 1 && /* @__PURE__ */ jsxs(Card, {
      className: "p-8 rounded-3xl shadow-xl space-y-6",
      children: [/* @__PURE__ */ jsx(SeletorViagem, {
        viagens: trips2,
        viagemSelecionada,
        onChange: setViagemSelecionada
      }), /* @__PURE__ */ jsx(Button, {
        disabled: !viagemSelecionada,
        onClick: () => setStep(2),
        className: "h-14 w-full rounded-xl font-bold",
        children: "PR√ìXIMA ETAPA"
      })]
    }), step === 2 && /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-12 gap-8",
      children: [/* @__PURE__ */ jsx(Card, {
        className: "lg:col-span-5 p-8 rounded-3xl shadow-xl",
        children: veiculo && /* @__PURE__ */ jsx(MapaAssentosReserva, {
          veiculo,
          assentosReservados: [],
          assentosSelecionados,
          onSelecionarAssento: handleSelectSeat,
          precos: {
            "CONVENCIONAL": 100
          }
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-7 space-y-6",
        children: [assentosSelecionados.map((a) => /* @__PURE__ */ jsxs(Card, {
          className: "p-6 rounded-2xl shadow-md border-none bg-muted/30",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex items-center justify-between mb-4",
            children: [/* @__PURE__ */ jsxs("span", {
              className: "font-bold text-xl",
              children: ["Assento ", a.numero]
            }), /* @__PURE__ */ jsxs(Badge, {
              variant: "outline",
              children: ["R$ ", a.valor.toFixed(2)]
            })]
          }), /* @__PURE__ */ jsx(SeletorPassageiro, {
            clientes: clients2,
            onSelecionarCliente: (c) => handleSelectClient(a.numero, c)
          })]
        }, a.numero)), /* @__PURE__ */ jsx(Button, {
          disabled: assentosSelecionados.length === 0,
          onClick: () => setStep(3),
          className: "h-14 w-full rounded-xl font-bold",
          children: "REVIS√ÉO FINAL"
        })]
      })]
    }), step === 3 && /* @__PURE__ */ jsxs(Card, {
      className: "p-8 rounded-3xl shadow-xl space-y-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-4 text-center",
        children: [/* @__PURE__ */ jsx(Check, {
          size: 48,
          className: "mx-auto text-emerald-500"
        }), /* @__PURE__ */ jsx("h2", {
          className: "text-2xl font-bold",
          children: "Confirma√ß√£o de Reserva"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-muted-foreground",
          children: "Revise os dados antes de finalizar a emiss√£o"
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "space-y-2",
        children: assentosSelecionados.map((a) => {
          var _a;
          return /* @__PURE__ */ jsxs("div", {
            className: "flex justify-between border-b pb-2",
            children: [/* @__PURE__ */ jsxs("span", {
              children: [a.numero, " - ", (_a = passageirosMap[a.numero]) == null ? void 0 : _a.name]
            }), /* @__PURE__ */ jsxs("span", {
              className: "font-bold",
              children: ["R$ ", a.valor.toFixed(2)]
            })]
          }, a.numero);
        })
      }), /* @__PURE__ */ jsx(Button, {
        onClick: handleConfirm,
        className: "h-14 w-full rounded-xl font-bold bg-emerald-600 hover:bg-emerald-700",
        children: "FINALIZAR E EMITIR TICKETS"
      }), /* @__PURE__ */ jsx(Button, {
        variant: "ghost",
        onClick: () => setStep(2),
        className: "w-full",
        children: "Voltar"
      })]
    })]
  });
});
const Badge = ({
  children,
  variant
}) => /* @__PURE__ */ jsx("span", {
  className: cn("px-2 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest", variant === "outline" ? "border" : "bg-primary text-white"),
  children
});
const route60 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$o,
  default: admin_reservations_new,
  loader: loader$p
}, Symbol.toStringTag, { value: "Module" }));
const loader$o = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const transaction$1 = await db.query.transaction.findFirst({
    where: eq(transaction.id, id)
  });
  if (!transaction$1) throw new Response("Transa√ß√£o n√£o encontrada", {
    status: 404
  });
  return data({
    transaction: transaction$1
  });
};
const action$n = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  if (!id) return null;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "delete") {
    await db.delete(transaction).where(eq(transaction.id, id));
    return redirect("/admin/finance/transactions");
  }
  if (intent === "update-status") {
    const status = formData.get("status");
    await db.update(transaction).set({
      status,
      updatedAt: /* @__PURE__ */ new Date()
    }).where(eq(transaction.id, id));
    return data({
      success: true
    });
  }
  return null;
};
const admin_transactions_$id = UNSAFE_withComponentProps(function TransactionDetailPage() {
  const {
    transaction: transaction2
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const isIncome = transaction2.type === TipoTransacao.INCOME;
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: `Transa√ß√£o #${transaction2.id.substring(0, 8)}`,
      subtitle: "Detalhes do lan√ßamento financeiro e concilia√ß√£o",
      backLink: "/admin/finance/transactions",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex gap-3",
        children: [/* @__PURE__ */ jsxs(Button, {
          variant: "outline",
          onClick: () => window.print(),
          className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px] border-border/50",
          children: [/* @__PURE__ */ jsx(Printer, {
            size: 18,
            className: "mr-2"
          }), " Comprovante"]
        }), /* @__PURE__ */ jsx(Button, {
          asChild: true,
          className: "h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20",
          children: /* @__PURE__ */ jsx(Link, {
            to: `/admin/finance/transactions/edit/${transaction2.id}`,
            children: "EDITAR LAN√áAMENTO"
          })
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-12 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-8 space-y-8 focus-visible:outline-none",
        children: [/* @__PURE__ */ jsx(Card, {
          className: cn$1("rounded-[40px] overflow-hidden border-none shadow-2xl relative", isIncome ? "bg-emerald-500/5" : "bg-rose-500/5"),
          children: /* @__PURE__ */ jsxs("div", {
            className: "p-12 space-y-12",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-start justify-between",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-6",
                children: [/* @__PURE__ */ jsx("div", {
                  className: cn$1("w-20 h-20 rounded-3xl flex items-center justify-center transition-all shadow-xl", isIncome ? "bg-emerald-500 text-white shadow-emerald-500/20" : "bg-rose-500 text-white shadow-rose-500/20"),
                  children: isIncome ? /* @__PURE__ */ jsx(ArrowUpRight, {
                    size: 40,
                    strokeWidth: 2.5
                  }) : /* @__PURE__ */ jsx(ArrowDownRight, {
                    size: 40,
                    strokeWidth: 2.5
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("h2", {
                    className: "text-3xl font-black tracking-tighter uppercase",
                    children: transaction2.description
                  }), /* @__PURE__ */ jsx("p", {
                    className: "text-muted-foreground font-bold uppercase text-[10px] tracking-widest",
                    children: transaction2.category || "Sem Categoria"
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "text-right",
                children: [/* @__PURE__ */ jsxs("p", {
                  className: cn$1("text-4xl font-black tracking-tighter", isIncome ? "text-emerald-600" : "text-rose-600"),
                  children: [isIncome ? "+" : "-", " ", transaction2.currency, " ", Number(transaction2.amount).toLocaleString("pt-BR", {
                    minimumFractionDigits: 2
                  })]
                }), /* @__PURE__ */ jsx(Badge$1, {
                  variant: "outline",
                  className: "rounded-lg font-black uppercase text-[10px] mt-2",
                  children: transaction2.status
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-2 md:grid-cols-4 gap-8 py-10 border-y border-border/30",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Emiss√£o"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold",
                  children: transaction2.date
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Vencimento"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold",
                  children: transaction2.due_date || "---"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Pagamento"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold",
                  children: transaction2.payment_date || "Aguardando"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "Metodo"
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold uppercase",
                  children: transaction2.payment_method || "---"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-8",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-4",
                children: [/* @__PURE__ */ jsx("div", {
                  className: "w-12 h-12 rounded-2xl bg-muted/50 flex items-center justify-center text-muted-foreground",
                  children: /* @__PURE__ */ jsx(Building, {
                    size: 20
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-0.5",
                  children: [/* @__PURE__ */ jsx("p", {
                    className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                    children: "Centro de Custo"
                  }), /* @__PURE__ */ jsx("p", {
                    className: "font-bold uppercase text-sm",
                    children: transaction2.cost_center || "Administrativo Geral"
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-4",
                children: [/* @__PURE__ */ jsx("div", {
                  className: "w-12 h-12 rounded-2xl bg-muted/50 flex items-center justify-center text-muted-foreground",
                  children: /* @__PURE__ */ jsx(FileText$1, {
                    size: 20
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-0.5",
                  children: [/* @__PURE__ */ jsx("p", {
                    className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                    children: "Classifica√ß√£o Cont√°bil"
                  }), /* @__PURE__ */ jsx("p", {
                    className: "font-bold uppercase text-sm",
                    children: transaction2.accounting_classification || "---"
                  })]
                })]
              })]
            })]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground ml-4 flex items-center gap-2",
            children: [/* @__PURE__ */ jsx(History, {
              size: 16
            }), " Auditoria"]
          }), /* @__PURE__ */ jsxs(Card, {
            className: "p-8 rounded-[32px] border-none shadow-xl space-y-1 focus-visible:outline-none",
            children: [/* @__PURE__ */ jsxs("p", {
              className: "text-sm font-medium",
              children: ["Lan√ßamento efetuado por ", /* @__PURE__ */ jsx("span", {
                className: "font-black text-primary",
                children: transaction2.createdBy || "Sistema"
              })]
            }), /* @__PURE__ */ jsxs("p", {
              className: "text-xs text-muted-foreground uppercase font-bold tracking-widest",
              children: ["Registrado em ", new Date(transaction2.createdAt).toLocaleString()]
            })]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-4 space-y-8",
        children: [/* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[40px] border-none shadow-2xl space-y-6",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground",
            children: "Documento Fiscal"
          }), /* @__PURE__ */ jsx("div", {
            className: "p-6 rounded-3xl bg-muted/20 border border-border/30 flex items-center justify-between",
            children: /* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-3",
              children: [/* @__PURE__ */ jsx(FileText$1, {
                className: "text-muted-foreground",
                size: 24
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-0.5",
                children: [/* @__PURE__ */ jsx("p", {
                  className: "text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                  children: "N¬∫ Documento"
                }), /* @__PURE__ */ jsx("p", {
                  className: "font-bold text-sm",
                  children: transaction2.document_number || "N√£o Anexado"
                })]
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[40px] border-none shadow-2xl space-y-6",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground",
            children: "Observa√ß√µes"
          }), /* @__PURE__ */ jsxs("div", {
            className: "bg-card p-6 rounded-3xl border border-border/50 text-slate-600 dark:text-slate-300 font-medium leading-relaxed italic shadow-sm",
            children: ['"', transaction2.notes || "Sem observa√ß√µes registradas para este lan√ßamento.", '"']
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "space-y-4",
          children: /* @__PURE__ */ jsxs(Button, {
            variant: "destructive",
            className: "w-full h-14 rounded-2xl font-black uppercase text-[11px] tracking-widest shadow-xl shadow-destructive/10",
            onClick: () => {
              if (confirm("Excluir este lan√ßamento permanentemente?")) {
                fetcher.submit({
                  intent: "delete"
                }, {
                  method: "post"
                });
              }
            },
            children: [/* @__PURE__ */ jsx(Trash2, {
              size: 16,
              className: "mr-2"
            }), " EXCLUIR TRANSA√á√ÉO"]
          })
        })]
      })]
    })]
  });
});
const route61 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$n,
  default: admin_transactions_$id,
  loader: loader$o
}, Symbol.toStringTag, { value: "Module" }));
const loader$n = async () => {
  const vehicles = await db.select().from(vehicle).where(eq(vehicle.status, "ACTIVE"));
  return data({
    vehicles
  });
};
const action$m = async ({
  request
}) => {
  const formData = await request.formData();
  const organization_id = "org_placeholder";
  const vehicle_id = formData.get("vehicle_id");
  const status = formData.get("status");
  const custo_pecas = formData.get("custo_pecas");
  const custo_mao_de_obra = formData.get("custo_mao_de_obra");
  const [newMaintenance] = await db.insert(maintenance).values({
    organization_id,
    vehicle_id,
    tipo: formData.get("tipo"),
    status,
    descricao: formData.get("descricao"),
    oficina: formData.get("oficina"),
    responsavel: formData.get("responsavel"),
    custo_pecas,
    custo_mao_de_obra,
    data_agendada: new Date(formData.get("data_agendada")),
    data_inicio: formData.get("data_inicio") ? new Date(formData.get("data_inicio")) : null,
    data_conclusao: formData.get("data_conclusao") ? new Date(formData.get("data_conclusao")) : null,
    km_veiculo: parseInt(formData.get("km_veiculo"))
  }).returning();
  if (status === StatusManutencao.IN_PROGRESS) {
    await db.update(vehicle).set({
      status: "MAINTENANCE"
    }).where(eq(vehicle.id, vehicle_id));
  }
  return redirect("/admin/maintenance");
};
const admin_maintenance_new = UNSAFE_withComponentProps(function NewMaintenancePage() {
  const {
    vehicles
  } = useLoaderData();
  useNavigate();
  const navigation = useNavigation();
  navigation.state !== "idle";
  const [pecas, setPecas] = useState(0);
  const [maoDeObra, setMaoDeObra] = useState(0);
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Nova Manuten√ß√£o",
      subtitle: "Agende ou registre ordens de servi√ßo para a frota",
      backLink: "/admin/maintenance"
    }), /* @__PURE__ */ jsx(MaintenanceForm, {
      intent: "create",
      vehicles
    })]
  }, "new-maintenance-main");
});
const route62 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$m,
  default: admin_maintenance_new,
  loader: loader$n
}, Symbol.toStringTag, { value: "Module" }));
function getApiUrl() {
  {
    return "https://api.yourdomain.com";
  }
}
const API_URL = getApiUrl();
const defaultHeaders = {
  "Content-Type": "application/json"
};
const api = {
  get: async (endpoint) => {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: "GET",
      headers: defaultHeaders,
      credentials: "include"
    });
    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
    return response.json();
  },
  post: async (endpoint, data2) => {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: "POST",
      headers: defaultHeaders,
      credentials: "include",
      body: JSON.stringify(data2)
    });
    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
    return response.json();
  },
  put: async (endpoint, data2) => {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: "PUT",
      headers: defaultHeaders,
      credentials: "include",
      body: JSON.stringify(data2)
    });
    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
    return response.json();
  },
  delete: async (endpoint) => {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: "DELETE",
      headers: defaultHeaders,
      credentials: "include"
    });
    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
    return response.json();
  }
};
const locationService = {
  getStates: async () => {
    return await api.get("/api/locations/states");
  },
  getCities: async (stateId) => {
    return await api.get(`/api/locations/cities/${stateId}`);
  },
  getNeighborhoods: async (cityId) => {
    return await api.get(`/api/locations/neighborhoods/${cityId}`);
  },
  createCity: async (name, stateId) => {
    return await api.post("/api/locations/cities", { name, stateId });
  },
  updateCity: async (id, name) => {
    return await api.put(`/api/locations/cities/${id}`, { name });
  },
  deleteCity: async (id) => {
    await api.delete(`/api/locations/cities/${id}`);
  },
  createNeighborhood: async (name, cityId) => {
    return await api.post("/api/locations/neighborhoods", { name, cityId });
  },
  updateNeighborhood: async (id, name) => {
    return await api.put(`/api/locations/neighborhoods/${id}`, { name });
  },
  deleteNeighborhood: async (id) => {
    await api.delete(`/api/locations/neighborhoods/${id}`);
  }
};
const TimePicker = ({
  value,
  onChange,
  label,
  required = false,
  placeholder = "HH:MM",
  showIcon = true,
  className = "",
  containerClassName = ""
}) => {
  const [displayValue, setDisplayValue] = useState(value || "");
  const [error, setError] = useState(false);
  useEffect(() => {
    setDisplayValue(value || "");
  }, [value]);
  const handleChange = (e) => {
    let input = e.target.value.replace(/\D/g, "");
    if (input.length > 4) input = input.substring(0, 4);
    let formatted = input;
    if (input.length >= 3) {
      formatted = `${input.substring(0, 2)}:${input.substring(2)}`;
    }
    setDisplayValue(formatted);
    if (input.length === 4) {
      const hours = parseInt(input.substring(0, 2));
      const minutes = parseInt(input.substring(2, 4));
      if (hours >= 0 && hours <= 23 && minutes >= 0 && minutes <= 59) {
        const finalValue = `${String(hours).padStart(2, "0")}:${String(minutes).padStart(2, "0")}`;
        onChange(finalValue);
        setError(false);
      } else {
        setError(true);
      }
    } else if (input.length === 0) {
      if (!required) {
        onChange("");
        setError(false);
      }
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: cn$1("space-y-2", containerClassName), children: [
    label && /* @__PURE__ */ jsxs(Label$1, { className: "flex items-center gap-1", children: [
      label,
      " ",
      required && /* @__PURE__ */ jsx("span", { className: "text-destructive", children: "*" })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "relative", children: [
      showIcon && /* @__PURE__ */ jsx("div", { className: cn$1(
        "absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground transition-colors",
        error && "text-destructive"
      ), children: /* @__PURE__ */ jsx(Clock, { size: 18 }) }),
      /* @__PURE__ */ jsx(
        Input,
        {
          type: "text",
          inputMode: "numeric",
          value: displayValue,
          onChange: handleChange,
          placeholder,
          maxLength: 5,
          className: cn$1(
            "h-14",
            showIcon ? "pl-10" : "px-4",
            error ? "border-destructive focus-visible:ring-destructive" : "",
            className
          )
        }
      )
    ] }),
    error && /* @__PURE__ */ jsx("p", { className: "text-[0.8rem] font-medium text-destructive", children: "Hora inv√°lida (00:00 - 23:59)" })
  ] });
};
const SeletorPontoRota = ({
  ponto,
  onChange,
  readonly = false
}) => {
  const [states, setStates] = useState([]);
  const [cities, setCities] = useState([]);
  const [neighborhoods, setNeighborhoods] = useState([]);
  const [selectedState, setSelectedState] = useState("");
  const [selectedCity, setSelectedCity] = useState("");
  const [selectedNeighborhood, setSelectedNeighborhood] = useState("");
  const [newNeighborhoodName, setNewNeighborhoodName] = useState("");
  const [showNewNeighborhoodInput, setShowNewNeighborhoodInput] = useState(false);
  const [newCityName, setNewCityName] = useState("");
  const [showNewCityInput, setShowNewCityInput] = useState(false);
  useEffect(() => {
    if (!readonly) {
      locationService.getStates().then(setStates).catch(console.error);
    }
  }, [readonly]);
  useEffect(() => {
    console.log("Loading location IDs from ponto:", {
      state_id: ponto.state_id,
      city_id: ponto.city_id,
      neighborhood_id: ponto.neighborhood_id,
      selectedState,
      selectedCity,
      selectedNeighborhood
    });
    if (ponto.state_id && !selectedState) {
      console.log("Setting selectedState to:", ponto.state_id);
      setSelectedState(ponto.state_id);
    }
    if (ponto.city_id && !selectedCity) {
      console.log("Setting selectedCity to:", ponto.city_id);
      setSelectedCity(ponto.city_id);
    }
    if (ponto.neighborhood_id && !selectedNeighborhood) {
      console.log("Setting selectedNeighborhood to:", ponto.neighborhood_id);
      setSelectedNeighborhood(ponto.neighborhood_id);
    }
  }, [ponto.state_id, ponto.city_id, ponto.neighborhood_id, selectedState, selectedCity, selectedNeighborhood]);
  useEffect(() => {
    if (selectedState) {
      locationService.getCities(Number(selectedState)).then(setCities).catch(console.error);
      setNeighborhoods([]);
      setSelectedCity("");
      setSelectedNeighborhood("");
    }
  }, [selectedState]);
  useEffect(() => {
    if (selectedCity) {
      locationService.getNeighborhoods(Number(selectedCity)).then(setNeighborhoods).catch(console.error);
      setSelectedNeighborhood("");
    }
  }, [selectedCity]);
  const handleLocationChange = (neighborhoodName, cityName, stateUf, stateId, cityId, neighborhoodId) => {
    const fullName = `${neighborhoodName}, ${cityName} - ${stateUf}`;
    onChange({
      ...ponto,
      nome: fullName,
      state_id: stateId,
      city_id: cityId,
      neighborhood_id: neighborhoodId
    });
  };
  const handleStateSelect = (e) => {
    const stateId = Number(e.target.value);
    setSelectedState(stateId);
    setSelectedCity("");
    setSelectedNeighborhood("");
    setShowNewCityInput(false);
    setShowNewNeighborhoodInput(false);
    setNewCityName("");
    setNewNeighborhoodName("");
  };
  const handleCitySelect = (e) => {
    const value = e.target.value;
    if (value === "new") {
      setShowNewCityInput(true);
      setSelectedCity("");
      setSelectedNeighborhood("");
    } else {
      const cityId = Number(value);
      setSelectedCity(cityId);
      setShowNewCityInput(false);
      setSelectedNeighborhood("");
    }
  };
  const handleNeighborhoodSelect = (e) => {
    const value = e.target.value;
    if (value === "new") {
      setShowNewNeighborhoodInput(true);
      setSelectedNeighborhood("");
    } else {
      const neighborhoodId = Number(value);
      setSelectedNeighborhood(neighborhoodId);
      setShowNewNeighborhoodInput(false);
      const neighborhood2 = neighborhoods.find((n) => n.id === neighborhoodId);
      const city2 = cities.find((c) => c.id === Number(selectedCity));
      const state2 = states.find((s) => s.id === Number(selectedState));
      if (neighborhood2 && city2 && state2) {
        handleLocationChange(neighborhood2.name, city2.name, state2.uf, state2.id, city2.id, neighborhood2.id);
      }
    }
  };
  const handleCreateCity = async () => {
    if (!newCityName || !selectedState) return;
    try {
      const newCity = await locationService.createCity(newCityName, Number(selectedState));
      setCities([...cities, newCity]);
      setSelectedCity(newCity.id);
      setShowNewCityInput(false);
      setNewCityName("");
      const state2 = states.find((s) => s.id === Number(selectedState));
      if (state2) {
        onChange({
          ...ponto,
          nome: `${newCity.name} - ${state2.uf}`,
          state_id: state2.id,
          city_id: newCity.id,
          neighborhood_id: void 0
        });
      }
    } catch (error) {
      console.error("Error creating city:", error);
      alert("Erro ao criar cidade. Verifique se j√° existe.");
    }
  };
  const handleCreateNeighborhood = async () => {
    if (!newNeighborhoodName || !selectedCity) return;
    try {
      const newNeighborhood = await locationService.createNeighborhood(newNeighborhoodName, Number(selectedCity));
      setNeighborhoods([...neighborhoods, newNeighborhood]);
      setSelectedNeighborhood(newNeighborhood.id);
      setShowNewNeighborhoodInput(false);
      setNewNeighborhoodName("");
      const city2 = cities.find((c) => c.id === Number(selectedCity));
      const state2 = states.find((s) => s.id === Number(selectedState));
      if (city2 && state2) {
        handleLocationChange(newNeighborhood.name, city2.name, state2.uf, state2.id, city2.id, newNeighborhood.id);
      }
    } catch (error) {
      console.error("Error creating neighborhood:", error);
      alert("Erro ao criar bairro. Verifique se j√° existe.");
    }
  };
  const handleChange = (campo, valor) => {
    onChange({ ...ponto, [campo]: valor });
  };
  const getTipoLabel = () => {
    switch (ponto.tipo) {
      case "ORIGEM":
        return "Origem";
      case "DESTINO":
        return "Destino";
      case "PARADA_INTERMEDIARIA":
        return "Parada";
      default:
        return ponto.tipo;
    }
  };
  const getTipoColor = () => {
    switch (ponto.tipo) {
      case "ORIGEM":
        return "text-green-600 bg-green-50 dark:bg-green-900/20";
      case "DESTINO":
        return "text-red-600 bg-red-50 dark:bg-red-900/20";
      case "PARADA_INTERMEDIARIA":
        return "text-blue-600 bg-blue-50 dark:bg-blue-900/20";
      default:
        return "text-slate-600 bg-slate-50";
    }
  };
  const minutesToHHMM = (minutes) => {
    if (!minutes) return "00:00";
    const h = Math.floor(minutes / 60).toString().padStart(2, "0");
    const m = (minutes % 60).toString().padStart(2, "0");
    return `${h}:${m}`;
  };
  const hhmmToMinutes = (hhmm) => {
    const [h, m] = hhmm.split(":").map(Number);
    if (!isNaN(h) && !isNaN(m)) {
      return h * 60 + m;
    }
    return 0;
  };
  return /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
      /* @__PURE__ */ jsx(MapPin, { size: 18, className: ponto.tipo === "ORIGEM" ? "text-green-600" : ponto.tipo === "DESTINO" ? "text-red-600" : "text-blue-600" }),
      /* @__PURE__ */ jsx("span", { className: `px-3 py-1 rounded-full text-sm font-semibold ${getTipoColor()}`, children: getTipoLabel() })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-3", children: [
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1", children: "Estado" }),
        /* @__PURE__ */ jsxs(
          "select",
          {
            value: selectedState,
            onChange: handleStateSelect,
            disabled: readonly,
            className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm disabled:opacity-50",
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Selecione..." }),
              states.map((state2) => /* @__PURE__ */ jsxs("option", { value: state2.id, children: [
                state2.name,
                " (",
                state2.uf,
                ")"
              ] }, state2.id))
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1", children: "Cidade" }),
        !showNewCityInput ? /* @__PURE__ */ jsxs(
          "select",
          {
            value: selectedCity,
            onChange: handleCitySelect,
            disabled: readonly || !selectedState,
            className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm disabled:opacity-50",
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Selecione..." }),
              cities.map((city2) => /* @__PURE__ */ jsx("option", { value: city2.id, children: city2.name }, city2.id)),
              /* @__PURE__ */ jsx("option", { value: "new", className: "font-semibold text-blue-600", children: "+ Nova Cidade" })
            ]
          }
        ) : /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              value: newCityName,
              onChange: (e) => setNewCityName(e.target.value),
              placeholder: "Nome da cidade",
              onKeyDown: (e) => {
                if (e.key === "Escape") setShowNewCityInput(false);
                if (e.key === "Enter" && newCityName) handleCreateCity();
              },
              className: "flex-1 p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",
              autoFocus: true
            }
          ),
          /* @__PURE__ */ jsx(
            "button",
            {
              onClick: handleCreateCity,
              disabled: !newCityName,
              className: "p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 disabled:opacity-50",
              title: "Criar cidade",
              children: /* @__PURE__ */ jsx(Plus, { size: 16 })
            }
          )
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1", children: "Bairro" }),
        !showNewNeighborhoodInput ? /* @__PURE__ */ jsxs(
          "select",
          {
            value: selectedNeighborhood,
            onChange: handleNeighborhoodSelect,
            disabled: readonly || !selectedCity,
            className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm disabled:opacity-50",
            children: [
              /* @__PURE__ */ jsx("option", { value: "", children: "Selecione..." }),
              neighborhoods.map((neighborhood2) => /* @__PURE__ */ jsx("option", { value: neighborhood2.id, children: neighborhood2.name }, neighborhood2.id)),
              /* @__PURE__ */ jsx("option", { value: "new", className: "font-semibold text-blue-600", children: "+ Novo Bairro" })
            ]
          }
        ) : /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              value: newNeighborhoodName,
              onChange: (e) => setNewNeighborhoodName(e.target.value),
              placeholder: "Nome do bairro",
              onKeyDown: (e) => {
                if (e.key === "Escape") setShowNewNeighborhoodInput(false);
                if (e.key === "Enter" && newNeighborhoodName) handleCreateNeighborhood();
              },
              className: "flex-1 p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",
              autoFocus: true
            }
          ),
          /* @__PURE__ */ jsx(
            "button",
            {
              onClick: handleCreateNeighborhood,
              disabled: !newNeighborhoodName,
              className: "p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 disabled:opacity-50",
              title: "Criar bairro",
              children: /* @__PURE__ */ jsx(Plus, { size: 16 })
            }
          )
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsx("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1", children: "Local" }),
      /* @__PURE__ */ jsx(
        "input",
        {
          type: "text",
          value: ponto.nome,
          onChange: (e) => handleChange("nome", e.target.value),
          className: "w-full p-2 border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded-lg text-sm"
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-3", children: [
      ponto.tipo !== "ORIGEM" && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1 flex items-center gap-1", children: [
            /* @__PURE__ */ jsx(MapPin, { size: 14 }),
            "Dist√¢ncia do anterior (km)"
          ] }),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "number",
              min: "0",
              step: "0.1",
              value: ponto.distancia_do_anterior_km || "",
              onChange: (e) => handleChange("distancia_do_anterior_km", parseFloat(e.target.value)),
              disabled: readonly,
              placeholder: "0 km",
              className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm disabled:opacity-50"
            }
          )
        ] }),
        /* @__PURE__ */ jsxs("div", { children: [
          /* @__PURE__ */ jsxs("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1 flex items-center gap-1", children: [
            /* @__PURE__ */ jsx(Clock, { size: 14 }),
            "Tempo do anterior"
          ] }),
          /* @__PURE__ */ jsx(
            TimePicker,
            {
              value: minutesToHHMM(ponto.duracao_deslocamento_minutos),
              onChange: (val) => handleChange("duracao_deslocamento_minutos", hhmmToMinutes(val)),
              disabled: readonly,
              showIcon: false,
              className: "text-sm py-1.5"
            }
          )
        ] })
      ] }),
      ponto.tipo === "PARADA_INTERMEDIARIA" && /* @__PURE__ */ jsxs("div", { className: "md:col-span-2", children: [
        /* @__PURE__ */ jsxs("label", { className: "block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1 flex items-center gap-1", children: [
          /* @__PURE__ */ jsx(Clock, { size: 14, className: "text-orange-500" }),
          "Tempo de Parada"
        ] }),
        /* @__PURE__ */ jsx(
          TimePicker,
          {
            value: minutesToHHMM(ponto.duracao_parada_minutos),
            onChange: (val) => handleChange("duracao_parada_minutos", hhmmToMinutes(val)),
            disabled: readonly,
            showIcon: false,
            className: "text-sm py-1.5"
          }
        )
      ] })
    ] }),
    ponto.tipo !== "ORIGEM" && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 p-2 rounded", children: [
      /* @__PURE__ */ jsx(Clock, { size: 12 }),
      /* @__PURE__ */ jsxs("span", { children: [
        "Chegada estimada ap√≥s in√≠cio:",
        /* @__PURE__ */ jsx("strong", { className: "ml-1 text-slate-700 dark:text-slate-300", children: ponto.tempo_acumulado_minutos ? `+ ${Math.floor(ponto.tempo_acumulado_minutos / 60)}h ${ponto.tempo_acumulado_minutos % 60}min` : "--" })
      ] })
    ] }),
    ponto.tipo === "PARADA_INTERMEDIARIA" && /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
      /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300", children: "Opera√ß√µes Permitidas" }),
      /* @__PURE__ */ jsxs("div", { className: "flex gap-4", children: [
        /* @__PURE__ */ jsxs("label", { className: "flex items-center gap-2 cursor-pointer", children: [
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "checkbox",
              checked: ponto.permite_embarque,
              onChange: (e) => handleChange("permite_embarque", e.target.checked),
              disabled: readonly,
              className: "w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"
            }
          ),
          /* @__PURE__ */ jsxs("span", { className: "text-sm text-slate-700 dark:text-slate-300 flex items-center gap-1", children: [
            /* @__PURE__ */ jsx(SquareCheckBig, { size: 16, className: "text-green-600" }),
            "Permite Embarque"
          ] })
        ] }),
        /* @__PURE__ */ jsxs("label", { className: "flex items-center gap-2 cursor-pointer", children: [
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "checkbox",
              checked: ponto.permite_desembarque,
              onChange: (e) => handleChange("permite_desembarque", e.target.checked),
              disabled: readonly,
              className: "w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 disabled:opacity-50"
            }
          ),
          /* @__PURE__ */ jsxs("span", { className: "text-sm text-slate-700 dark:text-slate-300 flex items-center gap-1", children: [
            /* @__PURE__ */ jsx(SquareCheckBig, { size: 16, className: "text-red-600" }),
            "Permite Desembarque"
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1", children: "Observa√ß√µes (opcional)" }),
      /* @__PURE__ */ jsx(
        "textarea",
        {
          value: ponto.observacoes || "",
          onChange: (e) => handleChange("observacoes", e.target.value),
          placeholder: "Ex: Terminal Rodovi√°rio Central",
          disabled: readonly,
          rows: 2,
          className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 resize-none disabled:opacity-50"
        }
      )
    ] })
  ] });
};
function validarRota(rota) {
  const erros = [];
  if (!rota.pontos || rota.pontos.length < 2) {
    erros.push("A rota deve ter pelo menos uma origem e um destino");
    return { valida: false, erros };
  }
  if (rota.pontos[0].tipo !== "ORIGEM") {
    erros.push("O primeiro ponto da rota deve ser do tipo ORIGEM");
  }
  const ultimoPonto = rota.pontos[rota.pontos.length - 1];
  if (ultimoPonto.tipo !== "DESTINO") {
    erros.push("O √∫ltimo ponto da rota deve ser do tipo DESTINO");
  }
  for (let i = 1; i < rota.pontos.length - 1; i++) {
    if (rota.pontos[i].tipo !== "PARADA_INTERMEDIARIA") {
      erros.push(`O ponto #${i + 1} deve ser do tipo PARADA_INTERMEDIARIA`);
    }
  }
  rota.pontos.forEach((ponto, idx) => {
    if (!ponto.nome || ponto.nome.trim() === "") {
      erros.push(`O ponto #${idx + 1} deve ter um nome`);
    }
  });
  if (!validarOrdemHorarios(rota.pontos)) ;
  return {
    valida: erros.length === 0,
    erros
  };
}
function validarOrdemHorarios(pontos) {
  for (let i = 0; i < pontos.length - 1; i++) {
    const pontoAtual = pontos[i];
    const proximoPonto = pontos[i + 1];
    const horarioAtual = pontoAtual.horario_partida || pontoAtual.horario_chegada;
    const proximoHorario = proximoPonto.horario_chegada || proximoPonto.horario_partida;
    if (horarioAtual && proximoHorario) {
      new Date(proximoPonto.horario_chegada || proximoPonto.horario_partida);
    }
  }
  return true;
}
function calcularDuracaoRota(pontos) {
  if (pontos.length < 2) return 0;
  let totalMinutos = 0;
  for (let i = 1; i < pontos.length; i++) {
    const ponto = pontos[i];
    if (ponto.duracao_deslocamento_minutos) {
      totalMinutos += ponto.duracao_deslocamento_minutos;
    }
    if (i < pontos.length - 1 && ponto.duracao_parada_minutos) {
      totalMinutos += ponto.duracao_parada_minutos;
    }
  }
  return totalMinutos;
}
function gerarNomeRota(pontos) {
  if (pontos.length < 2) return "";
  const origem = pontos[0].nome;
  const destino = pontos[pontos.length - 1].nome;
  if (pontos.length === 2) {
    return `${origem} ‚Üí ${destino}`;
  }
  const paradas = pontos.slice(1, pontos.length - 1);
  const nomeParadas = paradas.map((p) => p.nome).join(", ");
  return `${origem} ‚Üí ${destino} (via ${nomeParadas})`;
}
function criarPontoRotaVazio(tipo, ordem) {
  return {
    id: `ponto_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
    nome: "",
    ordem,
    tipo,
    permite_embarque: tipo !== "DESTINO",
    permite_desembarque: tipo !== "ORIGEM",
    observacoes: ""
  };
}
function criarRotaVazia(tipo) {
  return {
    id: `rota_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
    tipo_rota: RouteType.OUTBOUND,
    pontos: [
      criarPontoRotaVazio("ORIGEM", 0),
      criarPontoRotaVazio("DESTINO", 1)
    ],
    ativa: true
  };
}
function calcularTemposRelativos(pontos) {
  let minutosAcumulados = 0;
  return pontos.map((ponto, index) => {
    if (index === 0) {
      return {
        ...ponto,
        tempo_acumulado_minutos: 0
      };
    }
    minutosAcumulados += ponto.duracao_deslocamento_minutos || 0;
    const pontoComChegada = {
      ...ponto,
      tempo_acumulado_minutos: minutosAcumulados
      // Tempo de chegada neste ponto
    };
    if (ponto.duracao_parada_minutos) {
      minutosAcumulados += ponto.duracao_parada_minutos;
    }
    return pontoComChegada;
  });
}
const EditorRota = ({
  rota,
  onChange,
  readonly = false
}) => {
  const handlePontoChange = (index, pontoAtualizado) => {
    let novosPontos = [...rota.pontos];
    novosPontos[index] = pontoAtualizado;
    novosPontos = calcularTemposRelativos(novosPontos);
    onChange({
      ...rota,
      pontos: novosPontos,
      nome: gerarNomeRota(novosPontos),
      duracao_estimada_minutos: calcularDuracaoRota(novosPontos)
    });
  };
  const adicionarParada = () => {
    const novosPontos = [...rota.pontos];
    const novaPosicao = novosPontos.length - 1;
    const novaParada = criarPontoRotaVazio("PARADA_INTERMEDIARIA", novaPosicao);
    novosPontos.splice(novaPosicao, 0, novaParada);
    let pontosReordenados = novosPontos.map((p, idx) => ({ ...p, ordem: idx }));
    pontosReordenados = calcularTemposRelativos(pontosReordenados);
    onChange({
      ...rota,
      pontos: pontosReordenados,
      nome: gerarNomeRota(pontosReordenados),
      duracao_estimada_minutos: calcularDuracaoRota(pontosReordenados)
    });
  };
  const removerParada = (index) => {
    if (index === 0 || index === rota.pontos.length - 1) return;
    const novosPontos = rota.pontos.filter((_, i) => i !== index);
    let pontosReordenados = novosPontos.map((p, idx) => ({ ...p, ordem: idx }));
    pontosReordenados = calcularTemposRelativos(pontosReordenados);
    onChange({
      ...rota,
      pontos: pontosReordenados,
      nome: gerarNomeRota(pontosReordenados),
      duracao_estimada_minutos: calcularDuracaoRota(pontosReordenados)
    });
  };
  const moverParada = (index, direcao) => {
    if (index === 0 || index === rota.pontos.length - 1) return;
    const novoIndice = direcao === "up" ? index - 1 : index + 1;
    if (novoIndice < 1 || novoIndice >= rota.pontos.length - 1) return;
    const novosPontos = [...rota.pontos];
    [novosPontos[index], novosPontos[novoIndice]] = [novosPontos[novoIndice], novosPontos[index]];
    let pontosReordenados = novosPontos.map((p, idx) => ({ ...p, ordem: idx }));
    pontosReordenados = calcularTemposRelativos(pontosReordenados);
    onChange({
      ...rota,
      pontos: pontosReordenados,
      nome: gerarNomeRota(pontosReordenados),
      duracao_estimada_minutos: calcularDuracaoRota(pontosReordenados)
    });
  };
  const validacao = validarRota(rota);
  const duracaoHoras = rota.duracao_estimada_minutos ? Math.floor(rota.duracao_estimada_minutos / 60) : 0;
  const duracaoMinutos = rota.duracao_estimada_minutos ? rota.duracao_estimada_minutos % 60 : 0;
  return /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs("div", { className: "bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mb-2", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx(Route, { size: 20, className: "text-blue-600" }),
          /* @__PURE__ */ jsx("h4", { className: "font-semibold text-slate-800 dark:text-slate-200", children: rota.nome || "Rota sem nome" })
        ] }),
        /* @__PURE__ */ jsx("span", { className: `px-3 py-1 rounded-full text-xs font-semibold ${rota.tipo_rota === "IDA" ? "bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400" : "bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"}`, children: rota.tipo_rota })
      ] }),
      rota.duracao_estimada_minutos && rota.duracao_estimada_minutos > 0 && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400", children: [
        /* @__PURE__ */ jsx(Clock, { size: 16 }),
        /* @__PURE__ */ jsxs("span", { children: [
          "Dura√ß√£o estimada: ",
          duracaoHoras,
          "h ",
          duracaoMinutos,
          "min"
        ] })
      ] })
    ] }),
    !validacao.valida && /* @__PURE__ */ jsx("div", { className: "bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4", children: /* @__PURE__ */ jsxs("div", { className: "flex items-start gap-2", children: [
      /* @__PURE__ */ jsx(CircleAlert, { size: 20, className: "text-red-600 flex-shrink-0 mt-0.5" }),
      /* @__PURE__ */ jsxs("div", { className: "flex-1", children: [
        /* @__PURE__ */ jsx("h5", { className: "font-semibold text-red-800 dark:text-red-400 mb-2", children: "Problemas encontrados na rota:" }),
        /* @__PURE__ */ jsx("ul", { className: "list-disc list-inside space-y-1 text-sm text-red-700 dark:text-red-300", children: validacao.erros.map((erro, idx) => /* @__PURE__ */ jsx("li", { children: erro }, idx)) })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx("div", { className: "space-y-4", children: rota.pontos.map((ponto, index) => /* @__PURE__ */ jsxs(
      "div",
      {
        className: "relative",
        children: [
          index < rota.pontos.length - 1 && /* @__PURE__ */ jsx("div", { className: "absolute left-6 top-full h-4 w-0.5 bg-gradient-to-b from-blue-400 to-blue-300 dark:from-blue-600 dark:to-blue-700 z-0" }),
          /* @__PURE__ */ jsx("div", { className: "bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-4 relative z-10", children: /* @__PURE__ */ jsxs("div", { className: "flex items-start gap-4", children: [
            /* @__PURE__ */ jsx("div", { className: "flex flex-col items-center gap-2 pt-2", children: /* @__PURE__ */ jsx("div", { className: `w-3 h-3 rounded-full ${ponto.tipo === "ORIGEM" ? "bg-green-500" : ponto.tipo === "DESTINO" ? "bg-red-500" : "bg-blue-500"}` }) }),
            /* @__PURE__ */ jsx("div", { className: "flex-1", children: /* @__PURE__ */ jsx(
              SeletorPontoRota,
              {
                ponto,
                onChange: (p) => handlePontoChange(index, p),
                readonly
              }
            ) }),
            !readonly && ponto.tipo === "PARADA_INTERMEDIARIA" && /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-2 pt-2", children: [
              /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: () => moverParada(index, "up"),
                  disabled: index === 1,
                  className: "p-2 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",
                  title: "Mover para cima",
                  children: /* @__PURE__ */ jsx(ArrowUp, { size: 16, className: "text-slate-600 dark:text-slate-400" })
                }
              ),
              /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: () => moverParada(index, "down"),
                  disabled: index === rota.pontos.length - 2,
                  className: "p-2 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",
                  title: "Mover para baixo",
                  children: /* @__PURE__ */ jsx(ArrowDown, { size: 16, className: "text-slate-600 dark:text-slate-400" })
                }
              ),
              /* @__PURE__ */ jsx(
                "button",
                {
                  onClick: () => removerParada(index),
                  className: "p-2 rounded-lg bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors",
                  title: "Remover parada",
                  children: /* @__PURE__ */ jsx(X, { size: 16, className: "text-red-600 dark:text-red-400" })
                }
              )
            ] })
          ] }) })
        ]
      },
      ponto.id
    )) }),
    !readonly && /* @__PURE__ */ jsxs(
      "button",
      {
        onClick: adicionarParada,
        className: "w-full py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center justify-center gap-2 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 font-medium",
        children: [
          /* @__PURE__ */ jsx(Plus, { size: 20 }),
          "Adicionar Parada Intermedi√°ria"
        ]
      }
    )
  ] });
};
function RouteForm({ initialRota, isEdicao, error }) {
  const navigate = useNavigate();
  const fetcher = useFetcher();
  const [rota, setRota] = useState(initialRota);
  const [nomeRota, setNomeRota] = useState(initialRota.name || "");
  const [tipoRota, setTipoRota] = useState(initialRota.type || "IDA");
  const [distanciaTotal, setDistanciaTotal] = useState(initialRota.distance_km || "");
  const [rotaAtiva, setRotaAtiva] = useState(initialRota.active ?? true);
  const isSaving = fetcher.state === "submitting";
  const handleSalvar = () => {
    var _a, _b;
    const payload = {
      name: nomeRota,
      type: tipoRota,
      distance_km: Number(distanciaTotal),
      active: rotaAtiva,
      stops: rota.pontos,
      origin_city: rota.pontos[0].nome.split(",")[0],
      origin_state: ((_a = rota.pontos[0].nome.split("-")[1]) == null ? void 0 : _a.trim()) || "UF",
      destination_city: rota.pontos[rota.pontos.length - 1].nome.split(",")[0],
      destination_state: ((_b = rota.pontos[rota.pontos.length - 1].nome.split("-")[1]) == null ? void 0 : _b.trim()) || "UF",
      duration_minutes: rota.duracao_estimada_minutos
    };
    fetcher.submit({ intent: "save-route", payload: JSON.stringify(payload) }, { method: "post" });
  };
  return /* @__PURE__ */ jsxs("div", { className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10", children: [
    /* @__PURE__ */ jsx(
      PageHeader,
      {
        title: isEdicao ? "Editar Rota" : "Nova Rota",
        subtitle: "Configura√ß√£o de trajetos e pontos operacionais",
        backLink: "/admin/routes",
        rightElement: /* @__PURE__ */ jsxs("div", { className: "flex gap-3", children: [
          /* @__PURE__ */ jsx(Button, { variant: "ghost", type: "button", onClick: () => navigate("/admin/routes"), className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px]", children: "Cancelar" }),
          /* @__PURE__ */ jsxs(Button, { type: "button", onClick: handleSalvar, disabled: isSaving, className: "h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20", children: [
            isSaving ? /* @__PURE__ */ jsx(Loader, { className: "w-4 h-4 animate-spin mr-2" }) : /* @__PURE__ */ jsx(Save, { className: "w-4 h-4 mr-2" }),
            isEdicao ? "Atualizar Rota" : "Salvar Rota"
          ] })
        ] })
      }
    ),
    error && /* @__PURE__ */ jsxs(Alert, { variant: "destructive", className: "rounded-3xl border-destructive/20 bg-destructive/5", children: [
      /* @__PURE__ */ jsx(TriangleAlert, { className: "h-4 w-4" }),
      /* @__PURE__ */ jsx(AlertTitle, { className: "font-bold uppercase text-[12px]", children: "Erro no Processamento" }),
      /* @__PURE__ */ jsx(AlertDescription, { className: "text-xs font-medium", children: error })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-4 gap-8", children: [
      /* @__PURE__ */ jsx("div", { className: "lg:col-span-1 space-y-8", children: /* @__PURE__ */ jsx(FormSection, { title: "Estrutura da Rota", icon: Route, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1", children: "Nome / C√≥digo" }),
          /* @__PURE__ */ jsx("input", { value: nomeRota, onChange: (e) => setNomeRota(e.target.value), className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-bold text-[12px] uppercase outline-none" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1", children: "Sentido Operacional" }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 gap-2", children: [
            /* @__PURE__ */ jsx(Button, { variant: tipoRota === "IDA" ? "default" : "outline", onClick: () => setTipoRota("IDA"), className: "h-14 rounded-xl font-bold", children: "IDA" }),
            /* @__PURE__ */ jsx(Button, { variant: tipoRota === "VOLTA" ? "default" : "outline", onClick: () => setTipoRota("VOLTA"), className: "h-14 rounded-xl font-bold", children: "VOLTA" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1", children: "Dist√¢ncia (KM)" }),
          /* @__PURE__ */ jsx("input", { type: "number", value: distanciaTotal, onChange: (e) => setDistanciaTotal(e.target.value), className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-bold text-sm outline-none" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3 pt-4 border-t", children: [
          /* @__PURE__ */ jsx("button", { onClick: () => setRotaAtiva(!rotaAtiva), className: cn$1("w-10 h-6 rounded-full p-1 transition-all", rotaAtiva ? "bg-primary" : "bg-muted"), children: /* @__PURE__ */ jsx("div", { className: cn$1("w-4 h-4 bg-white rounded-full transition-all", rotaAtiva ? "translate-x-4" : "translate-x-0") }) }),
          /* @__PURE__ */ jsx("span", { className: "text-[12px] font-semibold uppercase text-muted-foreground", children: "Rota Ativa" })
        ] })
      ] }) }) }),
      /* @__PURE__ */ jsx("div", { className: "lg:col-span-3", children: /* @__PURE__ */ jsx(FormSection, { title: "Paradas e Itiner√°rio", icon: Route, children: /* @__PURE__ */ jsx(EditorRota, { rota, onChange: setRota }) }) })
    ] })
  ] });
}
const loader$m = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const rota = await db.query.routes.findFirst({
    where: eq(routes$1.id, id)
  });
  if (!rota) throw new Response("Rota n√£o encontrada", {
    status: 404
  });
  const initialRota = {
    ...rota,
    pontos: typeof rota.stops === "string" ? JSON.parse(rota.stops) : rota.stops
  };
  return data({
    initialRota,
    isEdicao: true
  });
};
const action$l = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "save-route") {
    const payload = JSON.parse(formData.get("payload"));
    try {
      await db.update(routes$1).set({
        name: payload.name,
        origin_city: payload.origin_city,
        origin_state: payload.origin_state,
        destination_city: payload.destination_city,
        destination_state: payload.destination_state,
        distance_km: payload.distance_km,
        duration_minutes: payload.duration_minutes,
        stops: JSON.stringify(payload.stops),
        active: payload.active,
        type: payload.type,
        updatedAt: /* @__PURE__ */ new Date()
      }).where(eq(routes$1.id, id));
      return redirect("/admin/routes");
    } catch (e) {
      console.error(e);
      return data({
        error: "Erro ao salvar rota"
      }, {
        status: 500
      });
    }
  }
  return null;
};
const admin_routes_$id_edit = UNSAFE_withComponentProps(function EditRoutePage() {
  const {
    initialRota,
    isEdicao
  } = useLoaderData();
  const actionData = useActionData();
  return /* @__PURE__ */ jsx(RouteForm, {
    initialRota,
    isEdicao,
    error: actionData == null ? void 0 : actionData.error
  });
});
const route63 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$l,
  default: admin_routes_$id_edit,
  loader: loader$m
}, Symbol.toStringTag, { value: "Module" }));
const loader$l = async ({
  request
}) => {
  const parameters = await db.select().from(organization_parameter);
  return data({
    parameters
  });
};
const action$k = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  const organizationId = formData.get("organizationId") || "default";
  if (intent === "save-batch") {
    const data$1 = JSON.parse(formData.get("data"));
    for (const item of data$1) {
      await db.insert(organization_parameter).values({
        id: crypto.randomUUID(),
        organization_id: organizationId,
        key: item.key,
        value: String(item.value),
        description: item.description,
        group_name: item.group_name
      }).onConflictDoUpdate({
        target: [organization_parameter.organization_id, organization_parameter.key],
        set: {
          value: String(item.value),
          updated_at: /* @__PURE__ */ new Date()
        }
      });
    }
    return data({
      success: true,
      message: "Configura√ß√µes sincronizadas"
    });
  }
  if (intent === "delete") {
    await db.delete(organization_parameter).where(eq(organization_parameter.id, id));
    return data({
      success: true,
      message: "Par√¢metro removido"
    });
  }
  return null;
};
const SettingField = ({
  label,
  description,
  k,
  type = "text",
  placeholder = "",
  options = [],
  allSettings,
  setAllSettings
}) => {
  const value = allSettings[k] || "";
  const handleChange = (newVal) => setAllSettings((prev) => ({
    ...prev,
    [k]: newVal
  }));
  return /* @__PURE__ */ jsxs("div", {
    className: "space-y-2",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex justify-between items-baseline",
      children: [/* @__PURE__ */ jsx("label", {
        className: "text-label-caps ml-1",
        children: label
      }), /* @__PURE__ */ jsx("code", {
        className: "text-[10px] bg-primary/5 px-2 py-0.5 rounded-lg border border-primary/10 text-primary font-mono",
        children: k
      })]
    }), description && /* @__PURE__ */ jsx("p", {
      className: "text-[11px] font-medium text-muted-foreground/80 leading-relaxed mb-2 px-1",
      children: description
    }), type === "textarea" ? /* @__PURE__ */ jsx("textarea", {
      value,
      onChange: (e) => handleChange(e.target.value),
      placeholder,
      className: "w-full p-4 bg-muted/40 border border-border/50 rounded-xl font-medium text-sm transition-all focus:ring-2 focus:ring-primary/20 outline-none resize-none h-28"
    }) : type === "select" ? /* @__PURE__ */ jsxs("div", {
      className: "relative group",
      children: [/* @__PURE__ */ jsx("select", {
        value,
        onChange: (e) => handleChange(e.target.value),
        className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold transition-all focus:ring-2 focus:ring-primary/20 outline-none appearance-none cursor-pointer text-sm",
        children: options.map((opt) => /* @__PURE__ */ jsx("option", {
          value: opt.value,
          children: opt.label
        }, opt.value))
      }), /* @__PURE__ */ jsx(ChevronRight, {
        size: 16,
        className: "absolute right-4 top-1/2 -translate-y-1/2 rotate-90 text-muted-foreground"
      })]
    }) : type === "checkbox" ? /* @__PURE__ */ jsxs("div", {
      className: "flex items-center gap-3 bg-muted/20 p-4 rounded-xl border border-border/40",
      children: [/* @__PURE__ */ jsx("input", {
        type: "checkbox",
        checked: value === "true",
        onChange: (e) => handleChange(e.target.checked ? "true" : "false"),
        className: "w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary"
      }), /* @__PURE__ */ jsx("span", {
        className: "text-[10px] font-black uppercase tracking-widest text-foreground",
        children: value === "true" ? "ATIVADO" : "DESATIVADO"
      })]
    }) : /* @__PURE__ */ jsx(Input, {
      type,
      value,
      onChange: (e) => handleChange(e.target.value),
      placeholder,
      className: "h-14 bg-muted/40 border-input rounded-xl font-bold"
    })]
  });
};
const PARAM_METADATA = {
  "system_name": {
    label: "Nome do Sistema",
    group: "Sistema",
    type: "text",
    description: "Nome do dashboard administrativo."
  },
  "system_slogan": {
    label: "Slogan/Subt√≠tulo",
    group: "Sistema",
    type: "text",
    description: "Slogan ou subt√≠tulo do sistema."
  },
  "system_support_email": {
    label: "Email de Suporte",
    group: "Sistema",
    type: "text",
    description: "Email para suporte t√©cnico."
  },
  "auto_start_trips": {
    label: "Automa√ß√£o de Status",
    group: "Viagens",
    type: "checkbox",
    description: "Mudar para 'Em Tr√¢nsito' automaticamente no hor√°rio de partida."
  },
  "system_currency": {
    label: "Moeda",
    group: "Financeiro",
    type: "text",
    description: "S√≠mbolo monet√°rio (ex: R$, $)."
  }
};
const admin_settings__index = UNSAFE_withComponentProps(function SettingsPage() {
  const {
    parameters
  } = useLoaderData();
  const fetcher = useFetcher();
  const {
    currentContext
  } = useApp();
  const [selectedGroup, setSelectedGroup] = useState("Sistema");
  const [searchQuery, setSearchQuery] = useState("");
  const [allSettings, setAllSettings] = useState(() => {
    const dict = {};
    parameters.forEach((p) => {
      dict[p.key] = p.value;
    });
    return dict;
  });
  const groups = ["Sistema", "Viagens", "Financeiro", "Frota", "Portal P√∫blico", "Avan√ßado"];
  const filteredParameters = parameters.filter((p) => {
    const meta = PARAM_METADATA[p.key];
    const group = p.group_name || (meta == null ? void 0 : meta.group) || "Avan√ßado";
    return group === selectedGroup;
  });
  const handleSaveBatch = () => {
    const batchData = filteredParameters.map((p) => ({
      key: p.key,
      value: allSettings[p.key],
      description: p.description,
      group_name: p.group_name
    }));
    fetcher.submit({
      intent: "save-batch",
      data: JSON.stringify(batchData)
    }, {
      method: "post"
    });
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Configura√ß√µes do Sistema",
      subtitle: "Ajustes globais e pol√≠ticas de infraestrutura",
      icon: Settings2,
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex items-center gap-3",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "relative md:w-64",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",
            size: 16
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Localizar...",
            value: searchQuery,
            onChange: (e) => setSearchQuery(e.target.value),
            className: "h-14 pl-12 bg-card/50 rounded-xl"
          })]
        }), /* @__PURE__ */ jsxs(Button, {
          className: "h-14 rounded-xl px-8 font-black uppercase text-[12px] tracking-widest shadow-lg shadow-primary/20",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 16,
            className: "mr-2",
            strokeWidth: 3
          }), " NOVO"]
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-4 gap-8",
      children: [/* @__PURE__ */ jsxs(Card, {
        className: "lg:col-span-1 shadow-2xl bg-card/50 backdrop-blur-sm rounded-[2.5rem] p-3 flex flex-col h-fit",
        children: [/* @__PURE__ */ jsx("div", {
          className: "p-4 border-b border-border/50 mb-2 font-bold text-xs uppercase tracking-widest text-muted-foreground/60",
          children: "M√≥dulos"
        }), groups.map((group) => /* @__PURE__ */ jsxs("button", {
          onClick: () => setSelectedGroup(group),
          className: cn$1("w-full flex items-center justify-between px-6 py-4 rounded-xl transition-all font-bold text-sm tracking-tight", selectedGroup === group ? "bg-primary text-primary-foreground shadow-lg" : "text-muted-foreground hover:bg-muted/50"),
          children: [group, selectedGroup === group && /* @__PURE__ */ jsx(ChevronRight, {
            size: 14
          })]
        }, group))]
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-3 space-y-8",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center justify-between",
          children: [/* @__PURE__ */ jsx("h2", {
            className: "text-xl font-black flex items-center gap-3 tracking-tighter uppercase",
            children: selectedGroup
          }), /* @__PURE__ */ jsxs(Button, {
            onClick: handleSaveBatch,
            disabled: fetcher.state !== "idle",
            className: "h-12 rounded-xl px-10 bg-foreground text-background font-black uppercase text-[12px]",
            children: [fetcher.state !== "idle" ? /* @__PURE__ */ jsx(LoaderCircle, {
              className: "animate-spin mr-2",
              size: 16
            }) : /* @__PURE__ */ jsx(Save, {
              className: "mr-2",
              size: 16
            }), "SALVAR M√ìDULO"]
          })]
        }), /* @__PURE__ */ jsx("div", {
          className: "grid grid-cols-1 xl:grid-cols-2 gap-6",
          children: filteredParameters.map((param) => {
            const meta = PARAM_METADATA[param.key];
            return /* @__PURE__ */ jsxs(Card, {
              className: "group/card shadow-xl bg-card/50 backdrop-blur-sm border border-border/40 rounded-3xl p-8 hover:border-primary/40 transition-all",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex justify-between items-start mb-4",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "space-y-1",
                  children: [/* @__PURE__ */ jsx("h4", {
                    className: "font-black text-sm uppercase tracking-tight",
                    children: (meta == null ? void 0 : meta.label) || param.key
                  }), /* @__PURE__ */ jsx("code", {
                    className: "text-[10px] bg-muted/50 px-2 py-0.5 rounded-lg text-primary font-mono",
                    children: param.key
                  })]
                }), /* @__PURE__ */ jsx(Button, {
                  variant: "ghost",
                  size: "icon",
                  onClick: () => fetcher.submit({
                    intent: "delete",
                    id: param.id
                  }, {
                    method: "post"
                  }),
                  className: "opacity-0 group-hover/card:opacity-100",
                  children: /* @__PURE__ */ jsx(Trash2, {
                    size: 14
                  })
                })]
              }), /* @__PURE__ */ jsx("p", {
                className: "text-xs text-muted-foreground mb-6 leading-relaxed",
                children: (meta == null ? void 0 : meta.description) || param.description
              }), /* @__PURE__ */ jsx("div", {
                className: "p-6 bg-muted/20 rounded-xl border border-border/30",
                children: /* @__PURE__ */ jsx(SettingField, {
                  label: "",
                  k: param.key,
                  type: (meta == null ? void 0 : meta.type) || "text",
                  options: meta == null ? void 0 : meta.options,
                  allSettings,
                  setAllSettings
                })
              })]
            }, param.id);
          })
        })]
      })]
    })]
  }, "settings-main");
});
const route64 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$k,
  default: admin_settings__index,
  loader: loader$l
}, Symbol.toStringTag, { value: "Module" }));
const AlertDialog = AlertDialogPrimitive.Root;
const AlertDialogPortal = AlertDialogPrimitive.Portal;
const AlertDialogOverlay = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AlertDialogPrimitive.Overlay,
  {
    className: cn$1(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=fadeOut]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    ),
    ...props,
    ref
  }
));
AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName;
const AlertDialogContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsxs(AlertDialogPortal, { children: [
  /* @__PURE__ */ jsx(AlertDialogOverlay, {}),
  /* @__PURE__ */ jsx(
    AlertDialogPrimitive.Content,
    {
      ref,
      className: cn$1(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      ),
      ...props
    }
  )
] }));
AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName;
const AlertDialogHeader = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx(
  "div",
  {
    className: cn$1(
      "flex flex-col space-y-2 text-center sm:text-left",
      className
    ),
    ...props
  }
);
AlertDialogHeader.displayName = "AlertDialogHeader";
const AlertDialogFooter = ({
  className,
  ...props
}) => /* @__PURE__ */ jsx(
  "div",
  {
    className: cn$1(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    ),
    ...props
  }
);
AlertDialogFooter.displayName = "AlertDialogFooter";
const AlertDialogTitle = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AlertDialogPrimitive.Title,
  {
    ref,
    className: cn$1("text-lg font-semibold", className),
    ...props
  }
));
AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName;
const AlertDialogDescription = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AlertDialogPrimitive.Description,
  {
    ref,
    className: cn$1("text-sm text-muted-foreground", className),
    ...props
  }
));
AlertDialogDescription.displayName = AlertDialogPrimitive.Description.displayName;
const AlertDialogAction = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AlertDialogPrimitive.Action,
  {
    ref,
    className: cn$1(buttonVariants(), className),
    ...props
  }
));
AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName;
const AlertDialogCancel = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  AlertDialogPrimitive.Cancel,
  {
    ref,
    className: cn$1(
      buttonVariants({ variant: "outline" }),
      "mt-2 sm:mt-0",
      className
    ),
    ...props
  }
));
AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName;
const loader$k = async () => {
  const chartersData = await db.query.charter.findMany({
    with: {
      client: true
    },
    orderBy: [desc(charter.createdAt)]
  });
  return data({
    charters: chartersData
  });
};
const action$j = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(charter).where(eq(charter.id, id));
    return data({
      success: true,
      message: "Fretamento exclu√≠do"
    });
  }
  return null;
};
const StatusBadge$5 = ({
  status
}) => {
  const configs = {
    [FretamentoStatus.REQUEST]: {
      className: "bg-slate-500/10 text-slate-600 border-slate-500/20",
      label: FretamentoStatusLabel[FretamentoStatus.REQUEST]
    },
    [FretamentoStatus.QUOTED]: {
      className: "bg-amber-500/10 text-amber-600 border-amber-500/20",
      label: FretamentoStatusLabel[FretamentoStatus.QUOTED]
    },
    [FretamentoStatus.CONFIRMED]: {
      className: "bg-emerald-500/10 text-emerald-600 border-emerald-500/20",
      label: FretamentoStatusLabel[FretamentoStatus.CONFIRMED]
    },
    [FretamentoStatus.IN_PROGRESS]: {
      className: "bg-blue-500/10 text-blue-600 border-blue-500/20",
      label: FretamentoStatusLabel[FretamentoStatus.IN_PROGRESS]
    },
    [FretamentoStatus.COMPLETED]: {
      className: "bg-slate-500/10 text-slate-600 border-slate-500/20",
      label: FretamentoStatusLabel[FretamentoStatus.COMPLETED]
    },
    [FretamentoStatus.CANCELLED]: {
      className: "bg-rose-500/10 text-rose-600 border-rose-500/20",
      label: FretamentoStatusLabel[FretamentoStatus.CANCELLED]
    }
  };
  const config2 = configs[status] || configs[FretamentoStatus.REQUEST];
  return /* @__PURE__ */ jsx(Badge$1, {
    variant: "outline",
    className: cn$1("rounded-lg font-bold px-2 py-0.5 border-none", config2.className),
    children: config2.label
  });
};
const admin_charter__index = UNSAFE_withComponentProps(function CharterPage() {
  const {
    charters: initialCharters
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const {
    formatDate
  } = useDateFormatter();
  const [busca, setBusca] = useState("");
  const [statusFilter, setStatusFilter] = useState("todos");
  const [itemToDelete, setItemToDelete] = useState(null);
  const charters = initialCharters;
  const totalSolicitacoes = charters.length;
  const orcamentosPendentes = charters.filter((f) => f.status === FretamentoStatus.REQUEST).length;
  const contratosAtivos = charters.filter((f) => f.status === FretamentoStatus.CONFIRMED || f.status === FretamentoStatus.IN_PROGRESS).length;
  const receitaProjetada = charters.filter((f) => f.status === FretamentoStatus.CONFIRMED || f.status === FretamentoStatus.IN_PROGRESS).reduce((sum, f) => sum + Number(f.total_value || 0), 0);
  const filteredCharters = charters.filter((f) => {
    var _a, _b, _c, _d;
    const matchesSearch = ((_a = f.origin) == null ? void 0 : _a.toLowerCase().includes(busca.toLowerCase())) || ((_b = f.destination) == null ? void 0 : _b.toLowerCase().includes(busca.toLowerCase())) || ((_d = (_c = f.client) == null ? void 0 : _c.nome) == null ? void 0 : _d.toLowerCase().includes(busca.toLowerCase()));
    const matchesStatus = statusFilter === "todos" || statusFilter === "solicitacao" && f.status === FretamentoStatus.REQUEST || statusFilter === "orcamento" && f.status === FretamentoStatus.QUOTED || statusFilter === "confirmado" && f.status === FretamentoStatus.CONFIRMED || statusFilter === "andamento" && f.status === FretamentoStatus.IN_PROGRESS;
    return matchesSearch && matchesStatus;
  });
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Fretamento B2B",
      subtitle: "Gest√£o corporativa de aluguel de frota",
      icon: Building2,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold gap-2 shadow-lg shadow-primary/20 transition-all hover:scale-105 active:scale-95",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/charter/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            strokeWidth: 2.5
          }), "NOVA SOLICITA√á√ÉO"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total de Solicita√ß√µes",
        value: totalSolicitacoes,
        icon: FileText$1,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Or√ßamentos Pendentes",
        value: orcamentosPendentes,
        icon: Clock,
        variant: "amber"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Contratos Ativos",
        value: contratosAtivos,
        icon: CircleCheckBig,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Receita Projetada",
        value: `R$ ${(receitaProjetada / 1e3).toFixed(0)}k`,
        icon: TrendingUp,
        variant: "blue"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Solicita√ß√£o"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Cliente, origem ou destino...",
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20",
            value: busca,
            onChange: (e) => setBusca(e.target.value)
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Status da Solicita√ß√£o"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: statusFilter,
          onValueChange: setStatusFilter,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "todos",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "solicitacao",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",
              children: "SOLICIT."
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "orcamento",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",
              children: "OR√áAM."
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "confirmado",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",
              children: "CONFIRM."
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "andamento",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",
              children: "ATIVO"
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "border-none shadow-2xl shadow-muted/20 overflow-hidden rounded-[2.5rem] bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Cliente"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Rota"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Per√≠odo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Valor"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 text-right h-14 text-table-head",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: filteredCharters.map((fretamento) => {
            var _a;
            return /* @__PURE__ */ jsxs(TableRow, {
              className: "group hover:bg-muted/20 border-border/30 transition-colors h-24",
              children: [/* @__PURE__ */ jsx(TableCell, {
                className: "pl-8",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "space-y-1",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: "font-semibold text-base group-hover:text-primary transition-colors",
                    children: ((_a = fretamento.client) == null ? void 0 : _a.nome) || "Cliente Indefinido"
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-[10px] font-black text-muted-foreground uppercase tracking-widest",
                    children: ["ID: ", fretamento.id.substring(0, 8)]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "space-y-1",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "flex items-center gap-2 text-sm font-bold",
                    children: [/* @__PURE__ */ jsx(MapPin, {
                      size: 14,
                      className: "text-emerald-500"
                    }), fretamento.origin]
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "flex items-center gap-2 text-sm font-bold text-muted-foreground",
                    children: [/* @__PURE__ */ jsx(MapPin, {
                      size: 14,
                      className: "text-rose-500"
                    }), fretamento.destination]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "space-y-1 text-xs font-bold",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "flex items-center gap-1.5",
                    children: [/* @__PURE__ */ jsx(Calendar$1, {
                      size: 14,
                      className: "text-primary"
                    }), " ", formatDate(fretamento.start_date)]
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "text-muted-foreground opacity-60 ml-5",
                    children: ["at√© ", formatDate(fretamento.end_date)]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "font-black text-base text-emerald-600 tracking-tighter",
                  children: [fretamento.currency || "R$", " ", Number(fretamento.total_value).toLocaleString("pt-BR", {
                    minimumFractionDigits: 2
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsx(StatusBadge$5, {
                  status: fretamento.status
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                className: "pr-8 text-right",
                children: /* @__PURE__ */ jsxs(DropdownMenu, {
                  children: [/* @__PURE__ */ jsx(DropdownMenuTrigger, {
                    asChild: true,
                    children: /* @__PURE__ */ jsx(Button, {
                      variant: "ghost",
                      size: "icon",
                      className: "h-10 w-10 rounded-xl transition-all hover:bg-muted/80",
                      children: /* @__PURE__ */ jsx(Ellipsis, {
                        size: 20
                      })
                    })
                  }), /* @__PURE__ */ jsxs(DropdownMenuContent, {
                    align: "end",
                    className: "w-56 rounded-2xl p-2 bg-card/95 backdrop-blur-md shadow-2xl border-none",
                    children: [/* @__PURE__ */ jsx(DropdownMenuItem, {
                      asChild: true,
                      className: "rounded-xl h-11 px-3 cursor-pointer",
                      children: /* @__PURE__ */ jsxs(Link, {
                        to: `/admin/charter/${fretamento.id}`,
                        className: "flex items-center gap-3 font-bold text-xs uppercase tracking-widest",
                        children: [/* @__PURE__ */ jsx(FileText$1, {
                          size: 16
                        }), " Ver Detalhes"]
                      })
                    }), /* @__PURE__ */ jsxs(DropdownMenuItem, {
                      className: "rounded-xl h-11 px-3 cursor-pointer flex items-center gap-3 font-bold text-xs uppercase tracking-widest",
                      children: [/* @__PURE__ */ jsx(SquarePen, {
                        size: 16
                      }), " Editar"]
                    }), /* @__PURE__ */ jsx(DropdownMenuSeparator, {
                      className: "bg-border/40 my-1"
                    }), /* @__PURE__ */ jsxs(DropdownMenuItem, {
                      onClick: () => setItemToDelete(fretamento.id),
                      className: "rounded-xl h-11 px-3 cursor-pointer flex items-center gap-3 font-bold text-xs uppercase tracking-widest text-destructive focus:bg-destructive/10",
                      children: [/* @__PURE__ */ jsx(Trash2, {
                        size: 16
                      }), " Excluir"]
                    })]
                  })]
                })
              })]
            }, fretamento.id);
          })
        })]
      })
    }), /* @__PURE__ */ jsx(AlertDialog, {
      open: !!itemToDelete,
      onOpenChange: (open) => !open && setItemToDelete(null),
      children: /* @__PURE__ */ jsxs(AlertDialogContent, {
        className: "rounded-[2rem] border-none shadow-2xl bg-card/95 backdrop-blur-md",
        children: [/* @__PURE__ */ jsxs(AlertDialogHeader, {
          children: [/* @__PURE__ */ jsx(AlertDialogTitle, {
            className: "text-2xl font-black uppercase tracking-tighter",
            children: "Confirmar Exclus√£o"
          }), /* @__PURE__ */ jsx(AlertDialogDescription, {
            className: "font-medium text-muted-foreground",
            children: "Tem certeza que deseja excluir esta solicita√ß√£o de fretamento? Esta a√ß√£o √© irrevers√≠vel e remover√° todos os dados associados."
          })]
        }), /* @__PURE__ */ jsxs(AlertDialogFooter, {
          className: "gap-3",
          children: [/* @__PURE__ */ jsx(AlertDialogCancel, {
            className: "rounded-xl font-bold border-none bg-muted hover:bg-muted/80 h-12 px-6",
            children: "CANCELAR"
          }), /* @__PURE__ */ jsx(AlertDialogAction, {
            onClick: () => {
              if (itemToDelete) {
                fetcher.submit({
                  intent: "delete",
                  id: itemToDelete
                }, {
                  method: "post"
                });
                setItemToDelete(null);
              }
            },
            className: "rounded-xl font-black uppercase text-[10px] tracking-widest bg-destructive text-destructive-foreground hover:bg-destructive/90 h-12 px-8",
            children: "CONFIRMAR EXCLUS√ÉO"
          })]
        })]
      })
    })]
  }, "charter-main");
});
const route65 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$j,
  default: admin_charter__index,
  loader: loader$k
}, Symbol.toStringTag, { value: "Module" }));
const clientsService = {
  getAll: async (search) => {
    const query = search ? `?search=${search}` : "";
    return api.get(`/api/clients${query}`);
  },
  getById: async (id) => {
    return api.get(`/api/clients/${id}`);
  },
  create: async (cliente) => {
    return api.post("/api/clients", cliente);
  },
  update: async (id, cliente) => {
    return api.put(`/api/clients/${id}`, cliente);
  },
  delete: async (id) => {
    return api.delete(`/api/clients/${id}`);
  },
  getInteractions: async (id) => {
    return api.get(`/api/clients/${id}/interactions`);
  },
  addInteraction: async (id, interaction) => {
    return api.post(`/api/clients/${id}/interactions`, interaction);
  },
  getNotes: async (id) => {
    return api.get(`/api/clients/${id}/notes`);
  },
  addNote: async (id, note) => {
    return api.post(`/api/clients/${id}/notes`, note);
  }
};
const isActionGroups = (actions) => {
  return actions.length > 0 && "actions" in actions[0];
};
const flattenActions = (actions) => {
  if (isActionGroups(actions)) {
    return actions.flatMap((group) => group.actions);
  }
  return actions;
};
const getInlineButtonClasses = (color = "slate", disabled) => {
  const baseClasses = "p-2 rounded-lg transition-colors";
  const disabledClasses = disabled ? "opacity-50 cursor-not-allowed" : "";
  const colorMap = {
    slate: "bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600",
    blue: "bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50",
    red: "bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50",
    green: "bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-900/50",
    yellow: "bg-yellow-100 dark:bg-yellow-900/30 hover:bg-yellow-200 dark:hover:bg-yellow-900/50",
    orange: "bg-orange-100 dark:bg-orange-900/30 hover:bg-orange-200 dark:hover:bg-orange-900/50",
    indigo: "bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-900/50",
    teal: "bg-teal-100 dark:bg-teal-900/30 hover:bg-teal-200 dark:hover:bg-teal-900/50"
  };
  return `${baseClasses} ${colorMap[color] || colorMap.slate} ${disabledClasses}`;
};
const getIconClasses = (color = "slate") => {
  const colorMap = {
    slate: "text-slate-600 dark:text-slate-400",
    blue: "text-blue-600 dark:text-blue-400",
    red: "text-red-600 dark:text-red-400",
    green: "text-green-600 dark:text-green-400",
    yellow: "text-yellow-600 dark:text-yellow-400",
    orange: "text-orange-600 dark:text-orange-400",
    indigo: "text-indigo-600 dark:text-indigo-400",
    teal: "text-teal-600 dark:text-teal-400"
  };
  return colorMap[color] || colorMap.slate;
};
const getMenuItemClasses = (color = "slate") => {
  const colorMap = {
    slate: "hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300",
    blue: "hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400",
    red: "hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400",
    green: "hover:bg-green-50 dark:hover:bg-green-900/20 text-green-600 dark:text-green-400",
    yellow: "hover:bg-yellow-50 dark:hover:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400",
    orange: "hover:bg-orange-50 dark:hover:bg-orange-900/20 text-orange-600 dark:text-orange-400",
    indigo: "hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",
    teal: "hover:bg-teal-50 dark:hover:bg-teal-900/20 text-teal-600 dark:text-teal-400"
  };
  return colorMap[color] || colorMap.slate;
};
const ResponsiveActions = ({ actions }) => {
  const [showMenu, setShowMenu] = useState(false);
  const allActions = flattenActions(actions).filter((a) => !a.hidden);
  const handleActionClick = (action2, e) => {
    if (action2.disabled) return;
    e.preventDefault();
    e.stopPropagation();
    setShowMenu(false);
    action2.onClick(e);
  };
  const renderMenuContent = () => {
    if (isActionGroups(actions)) {
      return actions.map((group, groupIndex) => {
        const visibleActions = group.actions.filter((a) => !a.hidden);
        if (visibleActions.length === 0) return null;
        return /* @__PURE__ */ jsxs(React__default.Fragment, { children: [
          groupIndex > 0 && /* @__PURE__ */ jsx("div", { className: "my-1 border-t border-slate-100 dark:border-slate-700" }),
          group.label && /* @__PURE__ */ jsx("div", { className: "px-4 py-1.5 text-xs font-semibold text-slate-400 uppercase tracking-wider", children: group.label }),
          visibleActions.map((action2, actionIndex) => {
            const Icon2 = action2.icon;
            return /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: (e) => handleActionClick(action2, e),
                disabled: action2.disabled,
                className: `w-full px-4 py-2.5 text-left flex items-center gap-2 transition-colors text-sm
                                        ${getMenuItemClasses(action2.color)}
                                        ${action2.disabled ? "opacity-50 cursor-not-allowed" : ""}
                                    `,
                children: [
                  /* @__PURE__ */ jsx(Icon2, { size: 16 }),
                  action2.label
                ]
              },
              actionIndex
            );
          })
        ] }, groupIndex);
      });
    }
    return allActions.map((action2, index) => {
      const Icon2 = action2.icon;
      return /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: (e) => handleActionClick(action2, e),
          disabled: action2.disabled,
          className: `w-full px-4 py-2.5 text-left flex items-center gap-2 transition-colors text-sm
                        ${getMenuItemClasses(action2.color)}
                        ${action2.disabled ? "opacity-50 cursor-not-allowed" : ""}
                    `,
          children: [
            /* @__PURE__ */ jsx(Icon2, { size: 16 }),
            action2.label
          ]
        },
        index
      );
    });
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-end gap-2", onClick: (e) => e.preventDefault(), children: [
    /* @__PURE__ */ jsx("div", { className: "hidden md:flex items-center gap-2", children: allActions.map((action2, index) => {
      const Icon2 = action2.icon;
      return /* @__PURE__ */ jsx(
        "button",
        {
          onClick: (e) => handleActionClick(action2, e),
          disabled: action2.disabled,
          className: getInlineButtonClasses(action2.color, action2.disabled),
          title: action2.label,
          children: /* @__PURE__ */ jsx(Icon2, { size: 18, className: getIconClasses(action2.color) })
        },
        index
      );
    }) }),
    /* @__PURE__ */ jsxs("div", { className: "relative md:hidden", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: (e) => {
            e.preventDefault();
            e.stopPropagation();
            setShowMenu(!showMenu);
          },
          className: "p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",
          children: /* @__PURE__ */ jsx(EllipsisVertical, { size: 18, className: "text-slate-600 dark:text-slate-400" })
        }
      ),
      showMenu && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsx(
          "div",
          {
            className: "fixed inset-0 z-10",
            onClick: (e) => {
              e.preventDefault();
              e.stopPropagation();
              setShowMenu(false);
            }
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "absolute right-0 mt-2 w-52 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-20 overflow-hidden py-1 animate-in fade-in slide-in-from-top-2", children: renderMenuContent() })
      ] })
    ] })
  ] });
};
const ClientActions = ({ cliente, onUpdate }) => {
  const navigate = useNavigate();
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      await clientsService.delete(cliente.id);
      if (onUpdate) {
        onUpdate();
      }
    } catch (error) {
      console.error("Erro ao excluir cliente:", error);
      alert("Erro ao excluir cliente. Por favor, tente novamente.");
    } finally {
      setIsDeleting(false);
      setShowDeleteConfirm(false);
    }
  };
  const actions = [
    {
      icon: Eye,
      label: "Ver Detalhes",
      onClick: () => navigate(`/admin/clientes/${cliente.id}`),
      color: "blue"
    },
    {
      icon: SquarePen,
      label: "Editar",
      onClick: () => navigate(`/admin/clientes/${cliente.id}/editar`),
      color: "slate"
    },
    {
      icon: Trash2,
      label: "Excluir",
      onClick: () => setShowDeleteConfirm(true),
      color: "red"
    }
  ];
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsx(ResponsiveActions, { actions }),
    showDeleteConfirm && /* @__PURE__ */ jsx("div", { className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50", onClick: (e) => e.stopPropagation(), children: /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-slate-800 rounded-xl p-6 max-w-md w-full mx-4 shadow-xl", children: [
      /* @__PURE__ */ jsx("h3", { className: "text-lg font-bold text-slate-800 dark:text-white mb-2", children: "Confirmar Exclus√£o" }),
      /* @__PURE__ */ jsxs("p", { className: "text-slate-600 dark:text-slate-400 mb-6", children: [
        "Tem certeza que deseja excluir o cliente ",
        /* @__PURE__ */ jsx("strong", { children: cliente.nome }),
        "? Esta a√ß√£o n√£o pode ser desfeita."
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex gap-3 justify-end", children: [
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => setShowDeleteConfirm(false),
            disabled: isDeleting,
            className: "px-4 py-2 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-white rounded-lg font-semibold transition-colors disabled:opacity-50",
            children: "Cancelar"
          }
        ),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: handleDelete,
            disabled: isDeleting,
            className: "px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 flex items-center gap-2",
            children: [
              /* @__PURE__ */ jsx(Trash2, { size: 16 }),
              isDeleting ? "Excluindo..." : "Excluir"
            ]
          }
        )
      ] })
    ] }) })
  ] });
};
const loader$j = async () => {
  const clientsData = await db.select().from(clients).orderBy(desc(clients.createdAt));
  return data({
    clients: clientsData
  });
};
const action$i = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(clients).where(eq(clients.id, id));
    return data({
      success: true,
      message: "Cliente exclu√≠do"
    });
  }
  return null;
};
const SegmentoBadge = ({
  segmento
}) => {
  const configs = {
    VIP: {
      color: "purple",
      icon: Star,
      label: "VIP",
      class: "bg-purple-500/15 text-purple-700 dark:text-purple-400 border-purple-500/20"
    },
    REGULAR: {
      color: "blue",
      icon: Users,
      label: "Regular",
      class: "bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-500/20"
    },
    NOVO: {
      color: "green",
      icon: UserPlus,
      label: "Novo",
      class: "bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-500/20"
    },
    INATIVO: {
      color: "slate",
      icon: Users,
      label: "Inativo",
      class: "bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-500/20"
    }
  };
  const config2 = configs[segmento] || configs.REGULAR;
  const Icon2 = config2.icon;
  return /* @__PURE__ */ jsxs(Badge$1, {
    variant: "outline",
    className: cn$1("flex items-center gap-1 font-bold px-2 py-0.5 rounded-full", config2.class),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 12
    }), config2.label]
  });
};
const admin_clients__index = UNSAFE_withComponentProps(function ClientsPage() {
  const {
    clients: initialClients
  } = useLoaderData();
  useFetcher();
  const [filtroSegmento, setFiltroSegmento] = useState("TODOS");
  const [busca, setBusca] = useState("");
  const navigate = useNavigate();
  const clients2 = initialClients;
  const clientsFiltrados = clients2.filter((c) => {
    var _a;
    const matchSegmento = filtroSegmento === "TODOS" || c.segmento === filtroSegmento;
    const matchBusca = busca === "" || c.nome.toLowerCase().includes(busca.toLowerCase()) || c.email.toLowerCase().includes(busca.toLowerCase()) || (c.documento || "").includes(busca) || ((_a = c.telefone) == null ? void 0 : _a.includes(busca));
    return matchSegmento && matchBusca;
  });
  const totalClients = clients2.length;
  const clientsVIP = clients2.filter((c) => c.segmento === "VIP").length;
  const totalViagens = clients2.reduce((sum, c) => sum + (c.historico_viagens || 0), 0);
  const valorTotal = clients2.reduce((sum, c) => sum + Number(c.valor_total_gasto || 0), 0);
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Clientes (CRM)",
      subtitle: "Relacionamento e fideliza√ß√£o de passageiros",
      icon: Users,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold gap-2 shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/clients/new",
          children: [/* @__PURE__ */ jsx(UserPlus, {
            size: 20,
            strokeWidth: 2.5
          }), "NOVO CLIENTE"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total de Clientes",
        value: totalClients,
        icon: Users,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Clientes VIP",
        value: clientsVIP,
        icon: Star,
        variant: "purple"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Total de Viagens",
        value: totalViagens,
        icon: TrendingUp,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Receita Total",
        value: `R$ ${Math.round(valorTotal / 1e3)}k`,
        icon: Award,
        variant: "emerald"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Cliente"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Nome, email, documento...",
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20",
            value: busca,
            onChange: (e) => setBusca(e.target.value)
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Segmento do Cliente"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: filtroSegmento,
          onValueChange: setFiltroSegmento,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "VIP",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest text-purple-600",
              children: "VIP"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "REGULAR",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest text-blue-600",
              children: "REGULAR"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "NOVO",
              className: "flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest text-emerald-600",
              children: "NOVOS"
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 overflow-hidden rounded-[2.5rem] bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Cliente"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Contato"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-center",
              children: "Segmento"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-center",
              children: "Viagens"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-right",
              children: "Receita"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 text-right h-14 text-table-head",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: clientsFiltrados.length === 0 ? /* @__PURE__ */ jsx(TableRow, {
            children: /* @__PURE__ */ jsx(TableCell, {
              colSpan: 6,
              className: "h-96 text-center border-none",
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex flex-col items-center justify-center gap-4 py-20 grayscale opacity-40",
                children: [/* @__PURE__ */ jsx(Users, {
                  size: 48
                }), /* @__PURE__ */ jsx("p", {
                  className: "text-lg font-bold",
                  children: "Nenhum cliente encontrado"
                })]
              })
            })
          }) : clientsFiltrados.map((cliente) => /* @__PURE__ */ jsxs(TableRow, {
            className: "group hover:bg-muted/20 border-border/30 transition-colors",
            children: [/* @__PURE__ */ jsx(TableCell, {
              className: "pl-8 py-5",
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-3",
                children: [/* @__PURE__ */ jsx(Avatar, {
                  className: "h-10 w-10 border-2 border-background shadow-sm ring-1 ring-primary/10",
                  children: /* @__PURE__ */ jsx(AvatarFallback, {
                    className: "bg-gradient-to-br from-primary/10 to-purple-600/10 text-primary text-sm font-semibold",
                    children: cliente.nome.substring(0, 2).toUpperCase()
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx(Link, {
                    to: `/admin/clients/${cliente.id}`,
                    className: "font-bold text-sm hover:text-primary transition-colors",
                    children: cliente.nome
                  }), /* @__PURE__ */ jsx("p", {
                    className: "text-xs text-muted-foreground",
                    children: cliente.documento || "Sem documento"
                  })]
                })]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "py-5",
              children: /* @__PURE__ */ jsxs("div", {
                className: "space-y-1 text-xs",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-2 font-medium truncate max-w-[200px]",
                  children: [/* @__PURE__ */ jsx(Mail, {
                    size: 12,
                    className: "text-blue-600"
                  }), " ", cliente.email]
                }), cliente.telefone && /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-2 text-muted-foreground",
                  children: [/* @__PURE__ */ jsx(Phone, {
                    size: 12,
                    className: "text-emerald-600"
                  }), " ", cliente.telefone]
                })]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "text-center py-5",
              children: /* @__PURE__ */ jsx(SegmentoBadge, {
                segmento: cliente.segmento
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "text-center py-5",
              children: /* @__PURE__ */ jsx("span", {
                className: "text-lg font-semibold",
                children: cliente.historico_viagens || 0
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "text-right py-5",
              children: /* @__PURE__ */ jsxs("span", {
                className: "text-sm font-semibold text-emerald-600",
                children: ["R$ ", Number(cliente.valor_total_gasto || 0).toLocaleString("pt-BR")]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "pr-8 text-right py-5",
              children: /* @__PURE__ */ jsx(ClientActions, {
                cliente,
                onUpdate: () => navigate(".", {
                  replace: true
                })
              })
            })]
          }, cliente.id))
        })]
      })
    })]
  }, "clients-main");
});
const route66 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$i,
  default: admin_clients__index,
  loader: loader$j
}, Symbol.toStringTag, { value: "Module" }));
const DriverActions = ({ motorista, onUpdate }) => {
  const navigate = useNavigate();
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/drivers/${motorista.id}`, {
        method: "DELETE",
        credentials: "include"
      });
      if (!response.ok) throw new Error("Falha ao excluir");
      if (onUpdate) {
        onUpdate();
      }
    } catch (error) {
      console.error("Erro ao excluir:", error);
      alert("Erro ao excluir motorista");
    } finally {
      setIsDeleting(false);
      setShowDeleteConfirm(false);
    }
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs(DropdownMenu, { children: [
      /* @__PURE__ */ jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs(Button, { variant: "ghost", className: "h-10 w-10 p-0 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors", children: [
        /* @__PURE__ */ jsx("span", { className: "sr-only", children: "Abrir menu" }),
        /* @__PURE__ */ jsx(Ellipsis, { className: "h-5 w-5", strokeWidth: 2.5 })
      ] }) }),
      /* @__PURE__ */ jsxs(DropdownMenuContent, { align: "end", className: "w-56 p-2 rounded-2xl shadow-2xl border-none bg-card/95 backdrop-blur-md", children: [
        /* @__PURE__ */ jsx(DropdownMenuLabel, { className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2", children: "Opera√ß√µes" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => navigate(`/admin/motoristas/${motorista.id}`),
            className: "rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(Eye, { className: "h-4 w-4" }),
              "Ver Detalhes"
            ]
          }
        ),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => navigate(`/admin/motoristas/${motorista.id}/editar`),
            className: "rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(SquarePen, { className: "h-4 w-4" }),
              "Editar Registro"
            ]
          }
        ),
        /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-border/50 my-2" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => setShowDeleteConfirm(true),
            className: "rounded-xl px-3 py-2.5 font-bold text-destructive focus:bg-destructive focus:text-destructive-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(Trash2, { className: "h-4 w-4" }),
              "Excluir Motorista"
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsx(Dialog, { open: showDeleteConfirm, onOpenChange: setShowDeleteConfirm, children: /* @__PURE__ */ jsxs(DialogContent, { className: "rounded-[2rem] border-none shadow-2xl max-w-sm p-8 bg-card/95 backdrop-blur-md", children: [
      /* @__PURE__ */ jsxs(DialogHeader, { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("div", { className: "mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx(TriangleAlert, { className: "h-8 w-8 text-destructive", strokeWidth: 2.5 }) }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-center", children: [
          /* @__PURE__ */ jsx(DialogTitle, { className: "text-2xl font-black tracking-tight", children: "Confirmar Exclus√£o" }),
          /* @__PURE__ */ jsxs(DialogDescription, { className: "font-medium text-muted-foreground leading-relaxed", children: [
            "Voc√™ tem certeza que deseja excluir o motorista ",
            /* @__PURE__ */ jsx("strong", { className: "text-foreground", children: motorista.nome }),
            "?",
            /* @__PURE__ */ jsx("br", {}),
            /* @__PURE__ */ jsx("span", { className: "text-xs uppercase font-black tracking-widest opacity-50 text-destructive", children: "Esta a√ß√£o √© irrevers√≠vel" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs(DialogFooter, { className: "mt-8 flex-col sm:flex-col gap-3", children: [
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "destructive",
            onClick: handleDelete,
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-base shadow-lg shadow-destructive/20 active:scale-95 transition-all",
            children: isDeleting ? /* @__PURE__ */ jsxs(Fragment, { children: [
              /* @__PURE__ */ jsx(LoaderCircle, { className: "mr-2 h-5 w-5 animate-spin" }),
              "EXCLUINDO..."
            ] }) : "EXCLUIR DEFINITIVAMENTE"
          }
        ),
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "ghost",
            onClick: () => setShowDeleteConfirm(false),
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-muted-foreground hover:bg-muted/50 transition-all",
            children: "CANCELAR"
          }
        )
      ] })
    ] }) })
  ] });
};
const loader$i = async () => {
  const driversData = await db.select().from(driver).orderBy(desc(driver.createdAt));
  return data({
    drivers: driversData
  });
};
const action$h = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(driver).where(eq(driver.id, id));
    return data({
      success: true,
      message: "Motorista exclu√≠do"
    });
  }
  return null;
};
const StatusBadge$4 = ({
  status
}) => {
  const configs = {
    [DriverStatus.AVAILABLE]: {
      className: "bg-emerald-500/10 text-emerald-600 border-emerald-500/20",
      icon: CircleCheckBig
    },
    [DriverStatus.IN_TRANSIT]: {
      className: "bg-blue-500/10 text-blue-600 border-blue-500/20",
      icon: Clock
    },
    [DriverStatus.ON_LEAVE]: {
      className: "bg-amber-500/10 text-amber-600 border-amber-500/20",
      icon: Calendar$1
    },
    [DriverStatus.AWAY]: {
      className: "bg-destructive/10 text-destructive border-destructive/20",
      icon: CircleX
    }
  };
  const config2 = configs[status] || configs[DriverStatus.AVAILABLE];
  const Icon2 = config2.icon;
  return /* @__PURE__ */ jsxs(Badge$1, {
    variant: "outline",
    className: cn$1("gap-1.5 font-bold px-2 py-0.5 rounded-lg", config2.className),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 12,
      strokeWidth: 2.5
    }), DriverStatusLabel[status] || status]
  });
};
const admin_drivers__index = UNSAFE_withComponentProps(function DriversPage() {
  const {
    drivers: initialDrivers
  } = useLoaderData();
  useFetcher();
  const navigate = useNavigate();
  const {
    formatDate
  } = useDateFormatter();
  const [busca, setBusca] = useState("");
  const [filtroStatus, setFiltroStatus] = useState("TODOS");
  const drivers = initialDrivers;
  const filteredDrivers = drivers.filter((d) => {
    const matchStatus = filtroStatus === "TODOS" || d.status === filtroStatus;
    const matchBusca = busca === "" || (d.nome || "").toLowerCase().includes(busca.toLowerCase()) || (d.cnh || "").includes(busca);
    return matchStatus && matchBusca;
  });
  const total = drivers.length;
  const disponiveis = drivers.filter((m) => m.status === DriverStatus.AVAILABLE).length;
  const emViagem = drivers.filter((m) => m.status === DriverStatus.IN_TRANSIT).length;
  const ferias = drivers.filter((m) => m.status === DriverStatus.ON_LEAVE).length;
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Motoristas",
      subtitle: "Controle de profissionais e documenta√ß√£o",
      icon: CircleUser,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/drivers/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 3
          }), " NOVO MOTORISTA"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total Registrados",
        value: total,
        icon: User,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Dispon√≠veis",
        value: disponiveis,
        icon: CircleCheckBig,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Em Viagem",
        value: emViagem,
        icon: Clock,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Em F√©rias/Licen√ßa",
        value: ferias,
        icon: Calendar$1,
        variant: "amber"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Motorista"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Nome ou CNH...",
            value: busca,
            onChange: (e) => setBusca(e.target.value),
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Status Operacional"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: filtroStatus,
          onValueChange: setFiltroStatus,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: DriverStatus.AVAILABLE,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "Dispon√≠veis"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: DriverStatus.IN_TRANSIT,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "Viagem"
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "border-none shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Motorista / Documento"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Validade CNH"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 h-14 text-table-head text-right",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: filteredDrivers.map((motorista) => /* @__PURE__ */ jsxs(TableRow, {
            className: "group hover:bg-muted/20 border-border/30 transition-colors",
            children: [/* @__PURE__ */ jsx(TableCell, {
              className: "pl-8 py-5",
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-4",
                children: [/* @__PURE__ */ jsx("div", {
                  className: "w-12 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white shadow-lg transition-transform group-hover:scale-110",
                  children: /* @__PURE__ */ jsx(User, {
                    size: 22
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex flex-col",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "font-semibold text-sm tracking-tight text-foreground",
                    children: motorista.nome
                  }), /* @__PURE__ */ jsxs("span", {
                    className: "text-[12px] font-semibold text-primary uppercase",
                    children: ["CNH: ", motorista.cnh]
                  })]
                })]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              children: /* @__PURE__ */ jsx(StatusBadge$4, {
                status: motorista.status
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-1.5 text-xs font-semibold text-foreground",
                children: [/* @__PURE__ */ jsx(Calendar$1, {
                  className: "w-3.5 h-3.5 text-primary",
                  strokeWidth: 3
                }), formatDate(motorista.validade_cnh)]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "pr-8 text-right",
              children: /* @__PURE__ */ jsx(DriverActions, {
                motorista,
                onUpdate: () => navigate(".", {
                  replace: true
                })
              })
            })]
          }, motorista.id))
        })]
      })
    })]
  }, "drivers-main");
});
const route67 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$h,
  default: admin_drivers__index,
  loader: loader$i
}, Symbol.toStringTag, { value: "Module" }));
const TransactionActions = ({ transacao, onUpdate }) => {
  const navigate = useNavigate();
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/finance/transactions/${transacao.id}`, {
        method: "DELETE",
        credentials: "include"
      });
      if (!response.ok) throw new Error("Falha ao excluir");
      onUpdate();
    } catch (error) {
      console.error("Erro ao excluir:", error);
      alert("Erro ao excluir transa√ß√£o");
    } finally {
      setIsDeleting(false);
      setShowDeleteConfirm(false);
    }
  };
  const handleStatusChange = async (newStatus) => {
    try {
      const response = await fetch(`${"https://api.yourdomain.com"}/api/finance/transactions/${transacao.id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ ...transacao, status: newStatus }),
        credentials: "include"
      });
      if (!response.ok) throw new Error("Falha ao atualizar status");
      onUpdate();
    } catch (error) {
      console.error("Erro ao atualizar status:", error);
      alert("Erro ao atualizar status");
    }
  };
  const isPaid = transacao.status === StatusTransacao.PAID || transacao.status === "PAGA";
  const isPending = transacao.status === StatusTransacao.PENDING || transacao.status === "PENDENTE";
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs(DropdownMenu, { children: [
      /* @__PURE__ */ jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs(Button, { variant: "ghost", className: "h-10 w-10 p-0 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors", children: [
        /* @__PURE__ */ jsx("span", { className: "sr-only", children: "Abrir menu" }),
        /* @__PURE__ */ jsx(Ellipsis, { className: "h-5 w-5", strokeWidth: 2.5 })
      ] }) }),
      /* @__PURE__ */ jsxs(DropdownMenuContent, { align: "end", className: "w-56 p-2 rounded-2xl shadow-2xl border-none bg-card/95 backdrop-blur-md", children: [
        /* @__PURE__ */ jsx(DropdownMenuLabel, { className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2", children: "Opera√ß√µes" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => navigate("/admin/financeiro/transacoes/nova", { state: transacao }),
            className: "rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(SquarePen, { className: "h-4 w-4" }),
              "Editar Registro"
            ]
          }
        ),
        /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-border/50 my-2" }),
        /* @__PURE__ */ jsx(DropdownMenuLabel, { className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2", children: "Alterar Status" }),
        !isPaid && /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => handleStatusChange(StatusTransacao.PAID),
            className: "rounded-xl px-3 py-2.5 font-bold text-emerald-600 focus:bg-emerald-500 focus:text-white gap-3",
            children: [
              /* @__PURE__ */ jsx(CircleCheckBig, { className: "h-4 w-4" }),
              "Marcar como Paga"
            ]
          }
        ),
        !isPending && /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => handleStatusChange(StatusTransacao.PENDING),
            className: "rounded-xl px-3 py-2.5 font-bold text-amber-600 focus:bg-amber-500 focus:text-white gap-3",
            children: [
              /* @__PURE__ */ jsx(Clock, { className: "h-4 w-4" }),
              "Marcar como Pendente"
            ]
          }
        ),
        /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-border/50 my-2" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => setShowDeleteConfirm(true),
            className: "rounded-xl px-3 py-2.5 font-bold text-destructive focus:bg-destructive focus:text-destructive-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(Trash2, { className: "h-4 w-4" }),
              "Excluir Transa√ß√£o"
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsx(Dialog, { open: showDeleteConfirm, onOpenChange: setShowDeleteConfirm, children: /* @__PURE__ */ jsxs(DialogContent, { className: "rounded-[2rem] border-none shadow-2xl max-w-sm p-8 bg-card/95 backdrop-blur-md", children: [
      /* @__PURE__ */ jsxs(DialogHeader, { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("div", { className: "mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx(TriangleAlert, { className: "h-8 w-8 text-destructive", strokeWidth: 2.5 }) }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-center", children: [
          /* @__PURE__ */ jsx(DialogTitle, { className: "text-2xl font-black tracking-tight", children: "Confirmar Exclus√£o" }),
          /* @__PURE__ */ jsxs(DialogDescription, { className: "font-medium text-muted-foreground leading-relaxed", children: [
            "Voc√™ tem certeza que deseja excluir esta transa√ß√£o de ",
            /* @__PURE__ */ jsxs("strong", { className: "text-foreground", children: [
              "R$ ",
              Number(transacao.valor).toLocaleString("pt-BR", { minimumFractionDigits: 2 })
            ] }),
            "?",
            /* @__PURE__ */ jsx("br", {}),
            /* @__PURE__ */ jsx("span", { className: "text-xs uppercase font-black tracking-widest opacity-50 text-destructive", children: "Esta a√ß√£o √© irrevers√≠vel" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs(DialogFooter, { className: "mt-8 flex-col sm:flex-col gap-3", children: [
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "destructive",
            onClick: handleDelete,
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-base shadow-lg shadow-destructive/20 active:scale-95 transition-all",
            children: isDeleting ? /* @__PURE__ */ jsxs(Fragment, { children: [
              /* @__PURE__ */ jsx(LoaderCircle, { className: "mr-2 h-5 w-5 animate-spin" }),
              "EXCLUINDO..."
            ] }) : "EXCLUIR DEFINITIVAMENTE"
          }
        ),
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "ghost",
            onClick: () => setShowDeleteConfirm(false),
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-muted-foreground hover:bg-muted/50 transition-all",
            children: "CANCELAR"
          }
        )
      ] })
    ] }) })
  ] });
};
const loader$h = async () => {
  const transactionsData = await db.select().from(transaction).orderBy(desc(transaction.date)).limit(50);
  return data({
    transactions: transactionsData
  });
};
const action$g = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(transaction).where(eq(transaction.id, id));
    return data({
      success: true,
      message: "Transa√ß√£o exclu√≠da"
    });
  }
  return null;
};
const StatusBadge$3 = ({
  status
}) => {
  const configs = {
    [StatusTransacao.PAID]: {
      className: "bg-emerald-500/10 text-emerald-600 border-emerald-500/20"
    },
    [StatusTransacao.PENDING]: {
      className: "bg-amber-500/10 text-amber-600 border-amber-500/20"
    },
    [StatusTransacao.OVERDUE]: {
      className: "bg-destructive/10 text-destructive border-destructive/20"
    },
    [StatusTransacao.CANCELLED]: {
      className: "bg-muted text-muted-foreground border-border"
    },
    [StatusTransacao.PARTIALLY_PAID]: {
      className: "bg-blue-500/10 text-blue-600 border-blue-500/20"
    }
  };
  const config2 = configs[status] || configs[StatusTransacao.PENDING];
  return /* @__PURE__ */ jsx(Badge$1, {
    variant: "outline",
    className: cn$1("font-bold px-2 py-0.5 rounded-xl text-[12px] uppercase tracking-wider", config2.className),
    children: StatusTransacaoLabel[status] || status
  });
};
const admin_finance__index = UNSAFE_withComponentProps(function FinancePage() {
  const {
    transactions: initialTransactions
  } = useLoaderData();
  useFetcher();
  const {
    currentContext
  } = useApp();
  const {
    formatDate: formatSystemDate
  } = useDateFormatter();
  const [periodoSelecionado, setPeriodoSelecionado] = useState("mes");
  const navigate = useNavigate();
  const transactions = initialTransactions;
  const resumo = useMemo(() => {
    const receitas = transactions.filter((t) => (t.type === TipoTransacao.INCOME || t.type === "RECEITA") && t.status !== StatusTransacao.CANCELLED).reduce((sum, t) => sum + Number(t.amount), 0);
    const despesas = transactions.filter((t) => (t.type === TipoTransacao.EXPENSE || t.type === "DESPESA") && t.status !== StatusTransacao.CANCELLED).reduce((sum, t) => sum + Number(t.amount), 0);
    const saldo = receitas - despesas;
    const receitasPagas = transactions.filter((t) => t.type === TipoTransacao.INCOME && t.status === StatusTransacao.PAID).reduce((sum, t) => sum + Number(t.amount), 0);
    const despesasPagas = transactions.filter((t) => t.type === TipoTransacao.EXPENSE && t.status === StatusTransacao.PAID).reduce((sum, t) => sum + Number(t.amount), 0);
    const contasVencidas = transactions.filter((t) => t.status === StatusTransacao.PENDING && new Date(t.due_date) < /* @__PURE__ */ new Date()).length;
    return {
      receitas,
      despesas,
      saldo,
      receitasPagas,
      despesasPagas,
      contasVencidas
    };
  }, [transactions]);
  const formatCurrency = (value) => {
    return value.toLocaleString("pt-BR", {
      style: "currency",
      currency: "BRL"
    });
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o Financeira",
      subtitle: "Fluxo de caixa e controle de transa√ß√µes",
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-8 rounded-xl font-black shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/finance/transactions/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 3
          }), "NOVA TRANSA√á√ÉO"]
        })
      })
    }), /* @__PURE__ */ jsx(Tabs, {
      value: periodoSelecionado,
      onValueChange: (v) => setPeriodoSelecionado(v),
      className: "w-fit bg-muted/40 p-1 rounded-xl border border-border/50",
      children: /* @__PURE__ */ jsxs(TabsList, {
        className: "bg-transparent h-10 gap-1",
        children: [/* @__PURE__ */ jsx(TabsTrigger, {
          value: "mes",
          className: "rounded-xl font-bold text-xs px-6",
          children: "ESTE M√äS"
        }), /* @__PURE__ */ jsx(TabsTrigger, {
          value: "trimestre",
          className: "rounded-xl font-bold text-xs px-6",
          children: "TRIMESTRE"
        }), /* @__PURE__ */ jsx(TabsTrigger, {
          value: "ano",
          className: "rounded-xl font-bold text-xs px-6",
          children: "ESTE ANO"
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Receitas Totais",
        value: formatCurrency(resumo.receitas),
        icon: TrendingUp,
        variant: "emerald",
        trend: `${formatCurrency(resumo.receitasPagas)} recebidas`
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Despesas Totais",
        value: formatCurrency(resumo.despesas),
        icon: TrendingDown,
        variant: "rose",
        trend: `${formatCurrency(resumo.despesasPagas)} pagas`
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Saldo Atual",
        value: formatCurrency(resumo.saldo),
        icon: Wallet,
        variant: resumo.saldo >= 0 ? "blue" : "rose",
        trend: resumo.saldo >= 0 ? "Super√°vit" : "D√©ficit"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Contas Vencidas",
        value: resumo.contasVencidas,
        icon: CircleAlert,
        variant: resumo.contasVencidas > 0 ? "amber" : "primary",
        trend: resumo.contasVencidas > 0 ? "A√ß√£o necess√°ria" : "Em dia"
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",
      children: [{
        label: "Contas a Receber",
        icon: ArrowUpRight,
        color: "emerald",
        path: "/admin/finance/receivables"
      }, {
        label: "Contas a Pagar",
        icon: ArrowDownRight,
        color: "red",
        path: "/admin/finance/payables"
      }, {
        label: "Relat√≥rios",
        icon: FileText$1,
        color: "blue",
        path: "/admin/reports"
      }, {
        label: "Centros de Custo",
        icon: ChartPie,
        color: "purple",
        path: "/admin/finance/cost-centers"
      }, {
        label: "Concilia√ß√£o",
        icon: Receipt,
        color: "amber",
        path: "/admin/finance/reconciliation"
      }].map((action2, i) => /* @__PURE__ */ jsx(Button, {
        asChild: true,
        variant: "outline",
        className: "h-24 p-5 flex items-center justify-start gap-4 bg-card/50 hover:bg-card border-border/50 transition-all group overflow-hidden active:scale-95 shadow-lg shadow-muted/10",
        children: /* @__PURE__ */ jsxs(Link, {
          to: action2.path,
          children: [/* @__PURE__ */ jsx("div", {
            className: cn$1("w-12 h-14 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110", action2.color === "emerald" ? "bg-emerald-500/10 text-emerald-600" : action2.color === "red" ? "bg-destructive/10 text-destructive" : action2.color === "blue" ? "bg-blue-500/10 text-blue-600" : action2.color === "purple" ? "bg-purple-500/10 text-purple-600" : "bg-amber-500/10 text-amber-600"),
            children: /* @__PURE__ */ jsx(action2.icon, {
              size: 24,
              strokeWidth: 2.5
            })
          }), /* @__PURE__ */ jsx("div", {
            className: "space-y-0.5 ml-2",
            children: /* @__PURE__ */ jsx("p", {
              className: "font-black text-sm tracking-tight text-foreground group-hover:text-primary transition-colors",
              children: action2.label
            })
          })]
        })
      }, i))
    }), /* @__PURE__ */ jsxs(Card, {
      className: "shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-8 border-b border-border/50 flex justify-between items-center",
        children: [/* @__PURE__ */ jsxs("div", {
          className: "flex items-center gap-3",
          children: [/* @__PURE__ */ jsx("div", {
            className: "w-12 h-14 bg-primary/10 rounded-xl flex items-center justify-center text-primary",
            children: /* @__PURE__ */ jsx(ArrowUpDown, {
              size: 20,
              strokeWidth: 2.5
            })
          }), /* @__PURE__ */ jsx("h2", {
            className: "text-xl font-black tracking-tight",
            children: "Transa√ß√µes Recentes"
          })]
        }), /* @__PURE__ */ jsx(Button, {
          variant: "ghost",
          asChild: true,
          className: "rounded-xl font-black text-xs hover:bg-primary/10 text-primary",
          children: /* @__PURE__ */ jsx(Link, {
            to: "/admin/finance/transactions",
            children: "VER TODAS"
          })
        })]
      }), /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Descri√ß√£o / Emiss√£o"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Tipo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Valor"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 h-14 text-table-head text-right",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: transactions.length === 0 ? /* @__PURE__ */ jsx(TableRow, {
            children: /* @__PURE__ */ jsxs(TableCell, {
              colSpan: 5,
              className: "h-64 text-center",
              children: [/* @__PURE__ */ jsx(Inbox, {
                className: "w-12 h-14 mx-auto text-muted-foreground/30"
              }), /* @__PURE__ */ jsx("p", {
                className: "font-bold text-sm text-muted-foreground",
                children: "Nenhuma transa√ß√£o encontrada"
              })]
            })
          }) : transactions.slice(0, 10).map((transacao) => {
            const isIncome = transacao.tipo === TipoTransacao.INCOME || transacao.tipo === "RECEITA";
            return /* @__PURE__ */ jsxs(TableRow, {
              className: "group hover:bg-muted/20 border-border/30 transition-colors",
              children: [/* @__PURE__ */ jsx(TableCell, {
                className: "pl-8 py-5",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-4",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: cn$1("w-10 h-10 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110", isIncome ? "bg-emerald-500/10 text-emerald-600" : "bg-destructive/10 text-destructive"),
                    children: isIncome ? /* @__PURE__ */ jsx(ArrowUpRight, {
                      size: 20,
                      strokeWidth: 2.5
                    }) : /* @__PURE__ */ jsx(ArrowDownRight, {
                      size: 20,
                      strokeWidth: 2.5
                    })
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "flex flex-col",
                    children: [/* @__PURE__ */ jsx("span", {
                      className: "font-black text-sm tracking-tight text-foreground",
                      children: transacao.descricao
                    }), /* @__PURE__ */ jsx("span", {
                      className: "text-[12px] font-bold text-muted-foreground/60",
                      children: formatSystemDate(new Date(transacao.data_emissao))
                    })]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsx(Badge$1, {
                  variant: "secondary",
                  className: cn$1("font-black text-[9px] uppercase", isIncome ? "bg-emerald-500/10 text-emerald-600" : "bg-destructive/10 text-destructive"),
                  children: isIncome ? "Receita" : "Despesa"
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsx(StatusBadge$3, {
                  status: transacao.status
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("span", {
                  className: cn$1("text-sm font-black", isIncome ? "text-emerald-600" : "text-destructive"),
                  children: [isIncome ? "+" : "-", " ", formatCurrency(Number(transacao.valor))]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                className: "pr-8 text-right",
                children: /* @__PURE__ */ jsx(TransactionActions, {
                  transacao,
                  onUpdate: () => navigate(".", {
                    replace: true
                  })
                })
              })]
            }, transacao.id);
          })
        })]
      })]
    })]
  }, "finance-main");
});
const route68 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$g,
  default: admin_finance__index,
  loader: loader$h
}, Symbol.toStringTag, { value: "Module" }));
const loader$g = async () => {
  const parcelsData = await db.select().from(parcel).orderBy(desc(parcel.createdAt));
  return data({
    parcels: parcelsData
  });
};
const action$f = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(parcel).where(eq(parcel.id, id));
    return data({
      success: true,
      message: "Encomenda removida"
    });
  }
  return null;
};
const TipoTag = ({
  tipo
}) => {
  const isBus = tipo === TipoEncomenda.BUS_CARGO;
  const Icon2 = isBus ? Bus : Truck;
  return /* @__PURE__ */ jsxs(Badge$1, {
    variant: "outline",
    className: cn$1("rounded-lg font-bold gap-1.5 px-2 py-0.5 border-none", isBus ? "bg-blue-500/10 text-blue-600" : "bg-orange-500/10 text-orange-600"),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 14,
      strokeWidth: 2.5
    }), isBus ? "√îNIBUS" : "CAMINH√ÉO"]
  });
};
const StatusBadge$2 = ({
  status
}) => {
  const configs = {
    [EncomendaStatus.AWAITING]: {
      className: "bg-slate-500/10 text-slate-600"
    },
    [EncomendaStatus.IN_TRANSIT]: {
      className: "bg-blue-500/10 text-blue-600"
    },
    [EncomendaStatus.DELIVERED]: {
      className: "bg-emerald-500/10 text-emerald-600"
    },
    [EncomendaStatus.RETURNED]: {
      className: "bg-rose-500/10 text-rose-600"
    }
  };
  const config2 = configs[status] || configs[EncomendaStatus.AWAITING];
  return /* @__PURE__ */ jsx(Badge$1, {
    variant: "outline",
    className: cn$1("rounded-lg font-bold px-2 py-0.5 border-none uppercase tracking-tighter shadow-sm", config2.className),
    children: EncomendaStatusLabel[status] || status
  });
};
const admin_parcels__index = UNSAFE_withComponentProps(function ParcelsPage() {
  const {
    parcels: initialParcels
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const {
    formatDate
  } = useDateFormatter();
  const [busca, setBusca] = useState("");
  const [filtroTipo, setFiltroTipo] = useState("TODOS");
  const [itemToDelete, setItemToDelete] = useState(null);
  const parcels = initialParcels;
  const total = parcels.length;
  const busCargo = parcels.filter((e) => e.type === TipoEncomenda.BUS_CARGO).length;
  const truckFreight = parcels.filter((e) => e.type === TipoEncomenda.TRUCK_FREIGHT).length;
  const inTransit = parcels.filter((e) => e.status === EncomendaStatus.IN_TRANSIT).length;
  const filteredParcels = parcels.filter((e) => {
    const matchesType = filtroTipo === "TODOS" || e.type === filtroTipo;
    const matchesSearch = busca === "" || (e.code || "").toLowerCase().includes(busca.toLowerCase()) || (e.sender_name || "").toLowerCase().includes(busca.toLowerCase()) || (e.recipient_name || "").toLowerCase().includes(busca.toLowerCase());
    return matchesType && matchesSearch;
  });
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Encomendas",
      subtitle: "Log√≠stica h√≠brida e rastreamento em tempo real",
      icon: Package,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold gap-2 shadow-lg shadow-primary/20 transition-all hover:scale-105 active:scale-95",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/parcels/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            strokeWidth: 2.5
          }), "NOVA ENCOMENDA"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total Encomendas",
        value: total,
        icon: Package,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Carga √înibus",
        value: busCargo,
        icon: Bus,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Frete Caminh√£o",
        value: truckFreight,
        icon: Truck,
        variant: "amber"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Em Tr√¢nsito",
        value: inTransit,
        icon: TrendingUp,
        variant: "emerald"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Modalidade de Envio"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: filtroTipo,
          onValueChange: setFiltroTipo,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsxs(TabsTrigger, {
              value: TipoEncomenda.BUS_CARGO,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest text-blue-600 gap-2",
              children: [/* @__PURE__ */ jsx(Bus, {
                size: 14
              }), " √îNIBUS"]
            }), /* @__PURE__ */ jsxs(TabsTrigger, {
              value: TipoEncomenda.TRUCK_FREIGHT,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest text-orange-600 gap-2",
              children: [/* @__PURE__ */ jsx(Truck, {
                size: 14
              }), " CAMINH√ÉO"]
            })]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col lg:col-span-2",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Log√≠stico"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "C√≥digo, remetente ou destinat√°rio...",
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20",
            value: busca,
            onChange: (e) => setBusca(e.target.value)
          })]
        })]
      })]
    }), /* @__PURE__ */ jsx("div", {
      className: "grid gap-6",
      children: filteredParcels.length === 0 ? /* @__PURE__ */ jsxs(Card, {
        className: "p-24 text-center bg-card/40 border-dashed rounded-[2.5rem]",
        children: [/* @__PURE__ */ jsx(Package, {
          size: 64,
          className: "mx-auto mb-6 text-muted-foreground/20"
        }), /* @__PURE__ */ jsx("p", {
          className: "font-black text-muted-foreground uppercase tracking-widest text-sm",
          children: "Nenhuma encomenda encontrada"
        })]
      }) : filteredParcels.map((encomenda) => /* @__PURE__ */ jsxs(Card, {
        className: "group shadow-xl bg-card/60 backdrop-blur-xl border border-border/40 rounded-[2.5rem] p-8 hover:border-primary/40 transition-all overflow-hidden relative",
        children: [/* @__PURE__ */ jsx("div", {
          className: "absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",
          children: /* @__PURE__ */ jsxs(DropdownMenu, {
            children: [/* @__PURE__ */ jsx(DropdownMenuTrigger, {
              asChild: true,
              children: /* @__PURE__ */ jsx(Button, {
                variant: "ghost",
                size: "icon",
                className: "h-10 w-10 rounded-xl hover:bg-muted/80",
                children: /* @__PURE__ */ jsx(Ellipsis, {
                  size: 20
                })
              })
            }), /* @__PURE__ */ jsxs(DropdownMenuContent, {
              align: "end",
              className: "w-56 rounded-2xl p-2 bg-card/95 backdrop-blur-md shadow-2xl border-none",
              children: [/* @__PURE__ */ jsx(DropdownMenuItem, {
                asChild: true,
                className: "rounded-xl h-11 px-3 cursor-pointer",
                children: /* @__PURE__ */ jsxs(Link, {
                  to: `/admin/parcels/${encomenda.id}`,
                  className: "flex items-center gap-3 font-bold text-xs uppercase tracking-widest",
                  children: [/* @__PURE__ */ jsx(FileText, {
                    size: 16
                  }), " Ver Detalhes"]
                })
              }), /* @__PURE__ */ jsxs(DropdownMenuItem, {
                className: "rounded-xl h-11 px-3 cursor-pointer flex items-center gap-3 font-bold text-xs uppercase tracking-widest",
                children: [/* @__PURE__ */ jsx(SquarePen, {
                  size: 16
                }), " Editar"]
              }), /* @__PURE__ */ jsx(DropdownMenuSeparator, {
                className: "bg-border/40 my-1"
              }), /* @__PURE__ */ jsxs(DropdownMenuItem, {
                onClick: () => setItemToDelete(encomenda.id),
                className: "rounded-xl h-11 px-3 cursor-pointer flex items-center gap-3 font-bold text-xs uppercase tracking-widest text-destructive focus:bg-destructive/10",
                children: [/* @__PURE__ */ jsx(Trash2, {
                  size: 16
                }), " Excluir"]
              })]
            })]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col xl:flex-row justify-between gap-8 mb-8",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "flex items-center gap-6",
            children: [/* @__PURE__ */ jsx("div", {
              className: "w-20 h-20 rounded-3xl bg-primary/10 flex items-center justify-center text-primary transition-transform group-hover:scale-110 shadow-lg",
              children: /* @__PURE__ */ jsx(Package, {
                size: 36,
                strokeWidth: 2.5
              })
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-2xl font-black tracking-tighter leading-none mb-2 mb-2",
                children: encomenda.code
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex flex-wrap gap-2",
                children: [/* @__PURE__ */ jsx(TipoTag, {
                  tipo: encomenda.type
                }), /* @__PURE__ */ jsx(StatusBadge$2, {
                  status: encomenda.status
                })]
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex flex-col xl:items-end justify-center",
            children: [/* @__PURE__ */ jsx("span", {
              className: "text-[10px] font-black text-muted-foreground uppercase tracking-widest mb-1 opacity-60",
              children: "VALOR DECLARADO"
            }), /* @__PURE__ */ jsxs("div", {
              className: "text-3xl font-black text-emerald-600 tracking-tighter",
              children: [encomenda.currency || "R$", " ", Number(encomenda.declared_value).toLocaleString("pt-BR", {
                minimumFractionDigits: 2
              })]
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-1 md:grid-cols-3 gap-8 p-8 bg-muted/20 border border-border/30 rounded-[2rem]",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2 text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-60",
              children: [/* @__PURE__ */ jsx(MapPin, {
                size: 12,
                className: "text-emerald-500"
              }), " ORIGEM"]
            }), /* @__PURE__ */ jsx("p", {
              className: "font-black text-base uppercase tracking-tight",
              children: encomenda.origin
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2 text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-60",
              children: [/* @__PURE__ */ jsx(MapPin, {
                size: 12,
                className: "text-rose-500"
              }), " DESTINO"]
            }), /* @__PURE__ */ jsx("p", {
              className: "font-black text-base uppercase tracking-tight",
              children: encomenda.destination
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-2",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2 text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-60",
              children: [/* @__PURE__ */ jsx(Calendar$1, {
                size: 12,
                className: "text-blue-500"
              }), " PREVIS√ÉO"]
            }), /* @__PURE__ */ jsx("p", {
              className: "font-black text-base uppercase tracking-tight",
              children: encomenda.delivery_estimate ? formatDate(encomenda.delivery_estimate) : "--"
            })]
          })]
        }), /* @__PURE__ */ jsxs("div", {
          className: "grid grid-cols-2 md:grid-cols-4 gap-8 mt-8 px-4",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsx("span", {
              className: "text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-40",
              children: "PESO"
            }), /* @__PURE__ */ jsxs("p", {
              className: "font-bold text-sm",
              children: [encomenda.weight_kg, " kg"]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsx("span", {
              className: "text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-40",
              children: "VOLUME"
            }), /* @__PURE__ */ jsx("p", {
              className: "font-bold text-sm tracking-tighter",
              children: encomenda.volume_m3 ? `${encomenda.volume_m3} m¬≥` : "--"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsx("span", {
              className: "text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-40",
              children: "REMETENTE"
            }), /* @__PURE__ */ jsx("p", {
              className: "font-bold text-sm truncate uppercase",
              children: encomenda.sender_name
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsx("span", {
              className: "text-[10px] font-black text-muted-foreground uppercase tracking-widest opacity-40",
              children: "DESTINAT√ÅRIO"
            }), /* @__PURE__ */ jsx("p", {
              className: "font-bold text-sm truncate uppercase",
              children: encomenda.recipient_name
            })]
          })]
        })]
      }, encomenda.id))
    }), /* @__PURE__ */ jsx(AlertDialog, {
      open: !!itemToDelete,
      onOpenChange: (open) => !open && setItemToDelete(null),
      children: /* @__PURE__ */ jsxs(AlertDialogContent, {
        className: "rounded-[2rem] border-none shadow-2xl bg-card/95 backdrop-blur-md",
        children: [/* @__PURE__ */ jsxs(AlertDialogHeader, {
          children: [/* @__PURE__ */ jsx(AlertDialogTitle, {
            className: "text-2xl font-black uppercase tracking-tighter",
            children: "Confirmar Exclus√£o"
          }), /* @__PURE__ */ jsx(AlertDialogDescription, {
            className: "font-medium text-muted-foreground",
            children: "Tem certeza que deseja remover esta encomenda do sistema? Esta a√ß√£o √© definitiva e remover√° todo o hist√≥rico de rastreamento."
          })]
        }), /* @__PURE__ */ jsxs(AlertDialogFooter, {
          className: "gap-3",
          children: [/* @__PURE__ */ jsx(AlertDialogCancel, {
            className: "rounded-xl font-bold border-none bg-muted hover:bg-muted/80 h-12 px-6",
            children: "CANCELAR"
          }), /* @__PURE__ */ jsx(AlertDialogAction, {
            onClick: () => {
              if (itemToDelete) {
                fetcher.submit({
                  intent: "delete",
                  id: itemToDelete
                }, {
                  method: "post"
                });
                setItemToDelete(null);
              }
            },
            className: "rounded-xl font-black uppercase text-[10px] tracking-widest bg-destructive text-destructive-foreground hover:bg-destructive/90 h-12 px-8",
            children: "REMOVER ENCOMENDA"
          })]
        })]
      })
    })]
  }, "parcels-main");
});
const route69 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$f,
  default: admin_parcels__index,
  loader: loader$g
}, Symbol.toStringTag, { value: "Module" }));
var EventKeys = ["dangerouslySetInnerHTML", "onCopy", "onCopyCapture", "onCut", "onCutCapture", "onPaste", "onPasteCapture", "onCompositionEnd", "onCompositionEndCapture", "onCompositionStart", "onCompositionStartCapture", "onCompositionUpdate", "onCompositionUpdateCapture", "onFocus", "onFocusCapture", "onBlur", "onBlurCapture", "onChange", "onChangeCapture", "onBeforeInput", "onBeforeInputCapture", "onInput", "onInputCapture", "onReset", "onResetCapture", "onSubmit", "onSubmitCapture", "onInvalid", "onInvalidCapture", "onLoad", "onLoadCapture", "onError", "onErrorCapture", "onKeyDown", "onKeyDownCapture", "onKeyPress", "onKeyPressCapture", "onKeyUp", "onKeyUpCapture", "onAbort", "onAbortCapture", "onCanPlay", "onCanPlayCapture", "onCanPlayThrough", "onCanPlayThroughCapture", "onDurationChange", "onDurationChangeCapture", "onEmptied", "onEmptiedCapture", "onEncrypted", "onEncryptedCapture", "onEnded", "onEndedCapture", "onLoadedData", "onLoadedDataCapture", "onLoadedMetadata", "onLoadedMetadataCapture", "onLoadStart", "onLoadStartCapture", "onPause", "onPauseCapture", "onPlay", "onPlayCapture", "onPlaying", "onPlayingCapture", "onProgress", "onProgressCapture", "onRateChange", "onRateChangeCapture", "onSeeked", "onSeekedCapture", "onSeeking", "onSeekingCapture", "onStalled", "onStalledCapture", "onSuspend", "onSuspendCapture", "onTimeUpdate", "onTimeUpdateCapture", "onVolumeChange", "onVolumeChangeCapture", "onWaiting", "onWaitingCapture", "onAuxClick", "onAuxClickCapture", "onClick", "onClickCapture", "onContextMenu", "onContextMenuCapture", "onDoubleClick", "onDoubleClickCapture", "onDrag", "onDragCapture", "onDragEnd", "onDragEndCapture", "onDragEnter", "onDragEnterCapture", "onDragExit", "onDragExitCapture", "onDragLeave", "onDragLeaveCapture", "onDragOver", "onDragOverCapture", "onDragStart", "onDragStartCapture", "onDrop", "onDropCapture", "onMouseDown", "onMouseDownCapture", "onMouseEnter", "onMouseLeave", "onMouseMove", "onMouseMoveCapture", "onMouseOut", "onMouseOutCapture", "onMouseOver", "onMouseOverCapture", "onMouseUp", "onMouseUpCapture", "onSelect", "onSelectCapture", "onTouchCancel", "onTouchCancelCapture", "onTouchEnd", "onTouchEndCapture", "onTouchMove", "onTouchMoveCapture", "onTouchStart", "onTouchStartCapture", "onPointerDown", "onPointerDownCapture", "onPointerMove", "onPointerMoveCapture", "onPointerUp", "onPointerUpCapture", "onPointerCancel", "onPointerCancelCapture", "onPointerEnter", "onPointerEnterCapture", "onPointerLeave", "onPointerLeaveCapture", "onPointerOver", "onPointerOverCapture", "onPointerOut", "onPointerOutCapture", "onGotPointerCapture", "onGotPointerCaptureCapture", "onLostPointerCapture", "onLostPointerCaptureCapture", "onScroll", "onScrollCapture", "onWheel", "onWheelCapture", "onAnimationStart", "onAnimationStartCapture", "onAnimationEnd", "onAnimationEndCapture", "onAnimationIteration", "onAnimationIterationCapture", "onTransitionEnd", "onTransitionEndCapture"];
function isEventKey(key) {
  if (typeof key !== "string") {
    return false;
  }
  var allowedEventKeys = EventKeys;
  return allowedEventKeys.includes(key);
}
var SVGElementPropKeys = [
  "aria-activedescendant",
  "aria-atomic",
  "aria-autocomplete",
  "aria-busy",
  "aria-checked",
  "aria-colcount",
  "aria-colindex",
  "aria-colspan",
  "aria-controls",
  "aria-current",
  "aria-describedby",
  "aria-details",
  "aria-disabled",
  "aria-errormessage",
  "aria-expanded",
  "aria-flowto",
  "aria-haspopup",
  "aria-hidden",
  "aria-invalid",
  "aria-keyshortcuts",
  "aria-label",
  "aria-labelledby",
  "aria-level",
  "aria-live",
  "aria-modal",
  "aria-multiline",
  "aria-multiselectable",
  "aria-orientation",
  "aria-owns",
  "aria-placeholder",
  "aria-posinset",
  "aria-pressed",
  "aria-readonly",
  "aria-relevant",
  "aria-required",
  "aria-roledescription",
  "aria-rowcount",
  "aria-rowindex",
  "aria-rowspan",
  "aria-selected",
  "aria-setsize",
  "aria-sort",
  "aria-valuemax",
  "aria-valuemin",
  "aria-valuenow",
  "aria-valuetext",
  "className",
  "color",
  "height",
  "id",
  "lang",
  "max",
  "media",
  "method",
  "min",
  "name",
  "style",
  /*
   * removed 'type' SVGElementPropKey because we do not currently use any SVG elements
   * that can use it, and it conflicts with the recharts prop 'type'
   * https://github.com/recharts/recharts/pull/3327
   * https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/type
   */
  // 'type',
  "target",
  "width",
  "role",
  "tabIndex",
  "accentHeight",
  "accumulate",
  "additive",
  "alignmentBaseline",
  "allowReorder",
  "alphabetic",
  "amplitude",
  "arabicForm",
  "ascent",
  "attributeName",
  "attributeType",
  "autoReverse",
  "azimuth",
  "baseFrequency",
  "baselineShift",
  "baseProfile",
  "bbox",
  "begin",
  "bias",
  "by",
  "calcMode",
  "capHeight",
  "clip",
  "clipPath",
  "clipPathUnits",
  "clipRule",
  "colorInterpolation",
  "colorInterpolationFilters",
  "colorProfile",
  "colorRendering",
  "contentScriptType",
  "contentStyleType",
  "cursor",
  "cx",
  "cy",
  "d",
  "decelerate",
  "descent",
  "diffuseConstant",
  "direction",
  "display",
  "divisor",
  "dominantBaseline",
  "dur",
  "dx",
  "dy",
  "edgeMode",
  "elevation",
  "enableBackground",
  "end",
  "exponent",
  "externalResourcesRequired",
  "fill",
  "fillOpacity",
  "fillRule",
  "filter",
  "filterRes",
  "filterUnits",
  "floodColor",
  "floodOpacity",
  "focusable",
  "fontFamily",
  "fontSize",
  "fontSizeAdjust",
  "fontStretch",
  "fontStyle",
  "fontVariant",
  "fontWeight",
  "format",
  "from",
  "fx",
  "fy",
  "g1",
  "g2",
  "glyphName",
  "glyphOrientationHorizontal",
  "glyphOrientationVertical",
  "glyphRef",
  "gradientTransform",
  "gradientUnits",
  "hanging",
  "horizAdvX",
  "horizOriginX",
  "href",
  "ideographic",
  "imageRendering",
  "in2",
  "in",
  "intercept",
  "k1",
  "k2",
  "k3",
  "k4",
  "k",
  "kernelMatrix",
  "kernelUnitLength",
  "kerning",
  "keyPoints",
  "keySplines",
  "keyTimes",
  "lengthAdjust",
  "letterSpacing",
  "lightingColor",
  "limitingConeAngle",
  "local",
  "markerEnd",
  "markerHeight",
  "markerMid",
  "markerStart",
  "markerUnits",
  "markerWidth",
  "mask",
  "maskContentUnits",
  "maskUnits",
  "mathematical",
  "mode",
  "numOctaves",
  "offset",
  "opacity",
  "operator",
  "order",
  "orient",
  "orientation",
  "origin",
  "overflow",
  "overlinePosition",
  "overlineThickness",
  "paintOrder",
  "panose1",
  "pathLength",
  "patternContentUnits",
  "patternTransform",
  "patternUnits",
  "pointerEvents",
  "pointsAtX",
  "pointsAtY",
  "pointsAtZ",
  "preserveAlpha",
  "preserveAspectRatio",
  "primitiveUnits",
  "r",
  "radius",
  "refX",
  "refY",
  "renderingIntent",
  "repeatCount",
  "repeatDur",
  "requiredExtensions",
  "requiredFeatures",
  "restart",
  "result",
  "rotate",
  "rx",
  "ry",
  "seed",
  "shapeRendering",
  "slope",
  "spacing",
  "specularConstant",
  "specularExponent",
  "speed",
  "spreadMethod",
  "startOffset",
  "stdDeviation",
  "stemh",
  "stemv",
  "stitchTiles",
  "stopColor",
  "stopOpacity",
  "strikethroughPosition",
  "strikethroughThickness",
  "string",
  "stroke",
  "strokeDasharray",
  "strokeDashoffset",
  "strokeLinecap",
  "strokeLinejoin",
  "strokeMiterlimit",
  "strokeOpacity",
  "strokeWidth",
  "surfaceScale",
  "systemLanguage",
  "tableValues",
  "targetX",
  "targetY",
  "textAnchor",
  "textDecoration",
  "textLength",
  "textRendering",
  "to",
  "transform",
  "u1",
  "u2",
  "underlinePosition",
  "underlineThickness",
  "unicode",
  "unicodeBidi",
  "unicodeRange",
  "unitsPerEm",
  "vAlphabetic",
  "values",
  "vectorEffect",
  "version",
  "vertAdvY",
  "vertOriginX",
  "vertOriginY",
  "vHanging",
  "vIdeographic",
  "viewTarget",
  "visibility",
  "vMathematical",
  "widths",
  "wordSpacing",
  "writingMode",
  "x1",
  "x2",
  "x",
  "xChannelSelector",
  "xHeight",
  "xlinkActuate",
  "xlinkArcrole",
  "xlinkHref",
  "xlinkRole",
  "xlinkShow",
  "xlinkTitle",
  "xlinkType",
  "xmlBase",
  "xmlLang",
  "xmlns",
  "xmlnsXlink",
  "xmlSpace",
  "y1",
  "y2",
  "y",
  "yChannelSelector",
  "z",
  "zoomAndPan",
  "ref",
  "key",
  "angle"
];
function isSvgElementPropKey(key) {
  if (typeof key !== "string") {
    return false;
  }
  var allowedSvgKeys = SVGElementPropKeys;
  return allowedSvgKeys.includes(key);
}
function isDataAttribute(key) {
  return typeof key === "string" && key.startsWith("data-");
}
function svgPropertiesNoEvents(obj) {
  var filteredEntries = Object.entries(obj).filter((_ref2) => {
    var [key] = _ref2;
    return isSvgElementPropKey(key) || isDataAttribute(key);
  });
  return Object.fromEntries(filteredEntries);
}
function svgPropertiesNoEventsFromUnknown(input) {
  if (input == null) {
    return null;
  }
  if (/* @__PURE__ */ isValidElement(input) && typeof input.props === "object" && input.props !== null) {
    var p = input.props;
    return svgPropertiesNoEvents(p);
  }
  if (typeof input === "object" && !Array.isArray(input)) {
    return svgPropertiesNoEvents(input);
  }
  return null;
}
function svgPropertiesAndEvents(obj) {
  var filteredEntries = Object.entries(obj).filter((_ref2) => {
    var [key] = _ref2;
    return isSvgElementPropKey(key) || isDataAttribute(key) || isEventKey(key);
  });
  return Object.fromEntries(filteredEntries);
}
function svgPropertiesAndEventsFromUnknown(input) {
  if (input == null) {
    return null;
  }
  if (/* @__PURE__ */ isValidElement(input)) {
    return svgPropertiesAndEvents(input.props);
  }
  if (typeof input === "object" && !Array.isArray(input)) {
    return svgPropertiesAndEvents(input);
  }
  return null;
}
var _excluded$o = ["children", "width", "height", "viewBox", "className", "style", "title", "desc"];
function _extends$u() {
  return _extends$u = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$u.apply(null, arguments);
}
function _objectWithoutProperties$o(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$o(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$o(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var Surface = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    children,
    width,
    height,
    viewBox,
    className,
    style,
    title,
    desc: desc2
  } = props, others = _objectWithoutProperties$o(props, _excluded$o);
  var svgView = viewBox || {
    width,
    height,
    x: 0,
    y: 0
  };
  var layerClass = clsx("recharts-surface", className);
  return /* @__PURE__ */ React.createElement("svg", _extends$u({}, svgPropertiesAndEvents(others), {
    className: layerClass,
    width,
    height,
    style,
    viewBox: "".concat(svgView.x, " ").concat(svgView.y, " ").concat(svgView.width, " ").concat(svgView.height),
    ref
  }), /* @__PURE__ */ React.createElement("title", null, title), /* @__PURE__ */ React.createElement("desc", null, desc2), children);
});
var _excluded$n = ["children", "className"];
function _extends$t() {
  return _extends$t = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$t.apply(null, arguments);
}
function _objectWithoutProperties$n(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$n(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$n(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var Layer = /* @__PURE__ */ React.forwardRef((props, ref) => {
  var {
    children,
    className
  } = props, others = _objectWithoutProperties$n(props, _excluded$n);
  var layerClass = clsx("recharts-layer", className);
  return /* @__PURE__ */ React.createElement("g", _extends$t({
    className: layerClass
  }, svgPropertiesAndEvents(others), {
    ref
  }), children);
});
var LegendPortalContext = /* @__PURE__ */ createContext(null);
var useLegendPortal = () => useContext(LegendPortalContext);
var mathSign = (value) => {
  if (value === 0) {
    return 0;
  }
  if (value > 0) {
    return 1;
  }
  return -1;
};
var isNan = (value) => {
  return typeof value == "number" && value != +value;
};
var isPercent = (value) => typeof value === "string" && value.indexOf("%") === value.length - 1;
var isNumber = (value) => (typeof value === "number" || value instanceof Number) && !isNan(value);
var isNumOrStr = (value) => isNumber(value) || typeof value === "string";
var idCounter = 0;
var uniqueId = (prefix) => {
  var id = ++idCounter;
  return "".concat(prefix || "").concat(id);
};
var getPercentValue = function getPercentValue2(percent, totalValue) {
  var defaultValue = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
  var validate = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
  if (!isNumber(percent) && typeof percent !== "string") {
    return defaultValue;
  }
  var value;
  if (isPercent(percent)) {
    if (totalValue == null) {
      return defaultValue;
    }
    var index = percent.indexOf("%");
    value = totalValue * parseFloat(percent.slice(0, index)) / 100;
  } else {
    value = +percent;
  }
  if (isNan(value)) {
    value = defaultValue;
  }
  if (validate && totalValue != null && value > totalValue) {
    value = totalValue;
  }
  return value;
};
var hasDuplicate = (ary) => {
  if (!Array.isArray(ary)) {
    return false;
  }
  var len = ary.length;
  var cache = {};
  for (var i = 0; i < len; i++) {
    if (!cache[ary[i]]) {
      cache[ary[i]] = true;
    } else {
      return true;
    }
  }
  return false;
};
function interpolate(start, end, t) {
  if (isNumber(start) && isNumber(end)) {
    return start + t * (end - start);
  }
  return end;
}
function findEntryInArray(ary, specifiedKey, specifiedValue) {
  if (!ary || !ary.length) {
    return void 0;
  }
  return ary.find((entry2) => entry2 && (typeof specifiedKey === "function" ? specifiedKey(entry2) : get(entry2, specifiedKey)) === specifiedValue);
}
var isNullish = (value) => {
  return value === null || typeof value === "undefined";
};
var upperFirst = (value) => {
  if (isNullish(value)) {
    return value;
  }
  return "".concat(value.charAt(0).toUpperCase()).concat(value.slice(1));
};
function isNotNil(value) {
  return value != null;
}
function noop$1() {
}
var _excluded$m = ["type", "size", "sizeType"];
function _extends$s() {
  return _extends$s = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$s.apply(null, arguments);
}
function ownKeys$F(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$F(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$F(Object(t), true).forEach(function(r3) {
      _defineProperty$H(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$F(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$H(e, r2, t) {
  return (r2 = _toPropertyKey$H(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$H(t) {
  var i = _toPrimitive$H(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$H(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$m(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$m(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$m(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var symbolFactories = {
  symbolCircle,
  symbolCross,
  symbolDiamond,
  symbolSquare,
  symbolStar,
  symbolTriangle,
  symbolWye
};
var RADIAN$1 = Math.PI / 180;
var getSymbolFactory = (type) => {
  var name = "symbol".concat(upperFirst(type));
  return symbolFactories[name] || symbolCircle;
};
var calculateAreaSize = (size, sizeType, type) => {
  if (sizeType === "area") {
    return size;
  }
  switch (type) {
    case "cross":
      return 5 * size * size / 9;
    case "diamond":
      return 0.5 * size * size / Math.sqrt(3);
    case "square":
      return size * size;
    case "star": {
      var angle = 18 * RADIAN$1;
      return 1.25 * size * size * (Math.tan(angle) - Math.tan(angle * 2) * Math.tan(angle) ** 2);
    }
    case "triangle":
      return Math.sqrt(3) * size * size / 4;
    case "wye":
      return (21 - 10 * Math.sqrt(3)) * size * size / 8;
    default:
      return Math.PI * size * size / 4;
  }
};
var registerSymbol = (key, factory) => {
  symbolFactories["symbol".concat(upperFirst(key))] = factory;
};
var Symbols = (_ref2) => {
  var {
    type = "circle",
    size = 64,
    sizeType = "area"
  } = _ref2, rest = _objectWithoutProperties$m(_ref2, _excluded$m);
  var props = _objectSpread$F(_objectSpread$F({}, rest), {}, {
    type,
    size,
    sizeType
  });
  var realType = "circle";
  if (typeof type === "string") {
    realType = type;
  }
  var getPath2 = () => {
    var symbolFactory = getSymbolFactory(realType);
    var symbol$1 = symbol().type(symbolFactory).size(calculateAreaSize(size, sizeType, realType));
    var s = symbol$1();
    if (s === null) {
      return void 0;
    }
    return s;
  };
  var {
    className,
    cx,
    cy
  } = props;
  var filteredProps = svgPropertiesAndEvents(props);
  if (isNumber(cx) && isNumber(cy) && isNumber(size)) {
    return /* @__PURE__ */ React.createElement("path", _extends$s({}, filteredProps, {
      className: clsx("recharts-symbols", className),
      transform: "translate(".concat(cx, ", ").concat(cy, ")"),
      d: getPath2()
    }));
  }
  return null;
};
Symbols.registerSymbol = registerSymbol;
var isPolarCoordinate = (c) => {
  return "radius" in c && "startAngle" in c && "endAngle" in c;
};
var adaptEventHandlers = (props, newHandler) => {
  if (!props || typeof props === "function" || typeof props === "boolean") {
    return null;
  }
  var inputProps = props;
  if (/* @__PURE__ */ isValidElement(props)) {
    inputProps = props.props;
  }
  if (typeof inputProps !== "object" && typeof inputProps !== "function") {
    return null;
  }
  var out = {};
  Object.keys(inputProps).forEach((key) => {
    if (isEventKey(key)) {
      out[key] = ((e) => inputProps[key](inputProps, e));
    }
  });
  return out;
};
var getEventHandlerOfChild = (originalHandler, data2, index) => (e) => {
  originalHandler(data2, index, e);
  return null;
};
var adaptEventsOfChild = (props, data2, index) => {
  if (props === null || typeof props !== "object" && typeof props !== "function") {
    return null;
  }
  var out = null;
  Object.keys(props).forEach((key) => {
    var item = props[key];
    if (isEventKey(key) && typeof item === "function") {
      if (!out) out = {};
      out[key] = getEventHandlerOfChild(item, data2, index);
    }
  });
  return out;
};
function ownKeys$E(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$E(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$E(Object(t), true).forEach(function(r3) {
      _defineProperty$G(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$E(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$G(e, r2, t) {
  return (r2 = _toPropertyKey$G(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$G(t) {
  var i = _toPrimitive$G(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$G(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function resolveDefaultProps(realProps, defaultProps2) {
  var resolvedProps = _objectSpread$E({}, realProps);
  var dp = defaultProps2;
  var keys = Object.keys(defaultProps2);
  var withDefaults = keys.reduce((acc, key) => {
    if (acc[key] === void 0 && dp[key] !== void 0) {
      acc[key] = dp[key];
    }
    return acc;
  }, resolvedProps);
  return withDefaults;
}
function _extends$r() {
  return _extends$r = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$r.apply(null, arguments);
}
function ownKeys$D(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$D(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$D(Object(t), true).forEach(function(r3) {
      _defineProperty$F(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$D(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$F(e, r2, t) {
  return (r2 = _toPropertyKey$F(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$F(t) {
  var i = _toPrimitive$F(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$F(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var SIZE = 32;
var defaultLegendContentDefaultProps = {
  align: "center",
  iconSize: 14,
  inactiveColor: "#ccc",
  layout: "horizontal",
  verticalAlign: "middle"
};
function Icon(_ref2) {
  var {
    data: data2,
    iconType,
    inactiveColor
  } = _ref2;
  var halfSize = SIZE / 2;
  var sixthSize = SIZE / 6;
  var thirdSize = SIZE / 3;
  var color = data2.inactive ? inactiveColor : data2.color;
  var preferredIcon = iconType !== null && iconType !== void 0 ? iconType : data2.type;
  if (preferredIcon === "none") {
    return null;
  }
  if (preferredIcon === "plainline") {
    var _data$payload;
    return /* @__PURE__ */ React.createElement("line", {
      strokeWidth: 4,
      fill: "none",
      stroke: color,
      strokeDasharray: (_data$payload = data2.payload) === null || _data$payload === void 0 ? void 0 : _data$payload.strokeDasharray,
      x1: 0,
      y1: halfSize,
      x2: SIZE,
      y2: halfSize,
      className: "recharts-legend-icon"
    });
  }
  if (preferredIcon === "line") {
    return /* @__PURE__ */ React.createElement("path", {
      strokeWidth: 4,
      fill: "none",
      stroke: color,
      d: "M0,".concat(halfSize, "h").concat(thirdSize, "\n            A").concat(sixthSize, ",").concat(sixthSize, ",0,1,1,").concat(2 * thirdSize, ",").concat(halfSize, "\n            H").concat(SIZE, "M").concat(2 * thirdSize, ",").concat(halfSize, "\n            A").concat(sixthSize, ",").concat(sixthSize, ",0,1,1,").concat(thirdSize, ",").concat(halfSize),
      className: "recharts-legend-icon"
    });
  }
  if (preferredIcon === "rect") {
    return /* @__PURE__ */ React.createElement("path", {
      stroke: "none",
      fill: color,
      d: "M0,".concat(SIZE / 8, "h").concat(SIZE, "v").concat(SIZE * 3 / 4, "h").concat(-SIZE, "z"),
      className: "recharts-legend-icon"
    });
  }
  if (/* @__PURE__ */ React.isValidElement(data2.legendIcon)) {
    var iconProps = _objectSpread$D({}, data2);
    delete iconProps.legendIcon;
    return /* @__PURE__ */ React.cloneElement(data2.legendIcon, iconProps);
  }
  return /* @__PURE__ */ React.createElement(Symbols, {
    fill: color,
    cx: halfSize,
    cy: halfSize,
    size: SIZE,
    sizeType: "diameter",
    type: preferredIcon
  });
}
function Items(props) {
  var {
    payload,
    iconSize,
    layout,
    formatter,
    inactiveColor,
    iconType
  } = props;
  var viewBox = {
    x: 0,
    y: 0,
    width: SIZE,
    height: SIZE
  };
  var itemStyle = {
    display: layout === "horizontal" ? "inline-block" : "block",
    marginRight: 10
  };
  var svgStyle = {
    display: "inline-block",
    verticalAlign: "middle",
    marginRight: 4
  };
  return payload.map((entry2, i) => {
    var finalFormatter = entry2.formatter || formatter;
    var className = clsx({
      "recharts-legend-item": true,
      ["legend-item-".concat(i)]: true,
      inactive: entry2.inactive
    });
    if (entry2.type === "none") {
      return null;
    }
    var color = entry2.inactive ? inactiveColor : entry2.color;
    var finalValue = finalFormatter ? finalFormatter(entry2.value, entry2, i) : entry2.value;
    return /* @__PURE__ */ React.createElement("li", _extends$r({
      className,
      style: itemStyle,
      key: "legend-item-".concat(i)
    }, adaptEventsOfChild(props, entry2, i)), /* @__PURE__ */ React.createElement(Surface, {
      width: iconSize,
      height: iconSize,
      viewBox,
      style: svgStyle,
      "aria-label": "".concat(finalValue, " legend icon")
    }, /* @__PURE__ */ React.createElement(Icon, {
      data: entry2,
      iconType,
      inactiveColor
    })), /* @__PURE__ */ React.createElement("span", {
      className: "recharts-legend-item-text",
      style: {
        color
      }
    }, finalValue));
  });
}
var DefaultLegendContent = (outsideProps) => {
  var props = resolveDefaultProps(outsideProps, defaultLegendContentDefaultProps);
  var {
    payload,
    layout,
    align
  } = props;
  if (!payload || !payload.length) {
    return null;
  }
  var finalStyle = {
    padding: 0,
    margin: 0,
    textAlign: layout === "horizontal" ? align : "left"
  };
  return /* @__PURE__ */ React.createElement("ul", {
    className: "recharts-default-legend",
    style: finalStyle
  }, /* @__PURE__ */ React.createElement(Items, _extends$r({}, props, {
    payload
  })));
};
function getUniqPayload(payload, option, defaultUniqBy2) {
  if (option === true) {
    return uniqBy(payload, defaultUniqBy2);
  }
  if (typeof option === "function") {
    return uniqBy(payload, option);
  }
  return payload;
}
var RechartsReduxContext = /* @__PURE__ */ createContext(null);
var noopDispatch = (a) => a;
var useAppDispatch = () => {
  var context = useContext(RechartsReduxContext);
  if (context) {
    return context.store.dispatch;
  }
  return noopDispatch;
};
var noop = () => {
};
var addNestedSubNoop = () => noop;
var refEquality = (a, b) => a === b;
function useAppSelector(selector) {
  var context = useContext(RechartsReduxContext);
  return useSyncExternalStoreWithSelector(context ? context.subscription.addNestedSub : addNestedSubNoop, context ? context.store.getState : noop, context ? context.store.getState : noop, context ? selector : noop, refEquality);
}
var selectLegendSettings = (state2) => state2.legend.settings;
var selectLegendSize = (state2) => state2.legend.size;
var selectAllLegendPayload2DArray = (state2) => state2.legend.payload;
var selectLegendPayload = createSelector([selectAllLegendPayload2DArray, selectLegendSettings], (payloads, _ref2) => {
  var {
    itemSorter
  } = _ref2;
  var flat = payloads.flat(1);
  return itemSorter ? sortBy(flat, itemSorter) : flat;
});
function useLegendPayload() {
  return useAppSelector(selectLegendPayload);
}
var EPS$1 = 1;
function useElementOffset() {
  var extraDependencies = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : [];
  var [lastBoundingBox, setLastBoundingBox] = useState({
    height: 0,
    left: 0,
    top: 0,
    width: 0
  });
  var updateBoundingBox = useCallback(
    (node) => {
      if (node != null) {
        var rect = node.getBoundingClientRect();
        var box = {
          height: rect.height,
          left: rect.left,
          top: rect.top,
          width: rect.width
        };
        if (Math.abs(box.height - lastBoundingBox.height) > EPS$1 || Math.abs(box.left - lastBoundingBox.left) > EPS$1 || Math.abs(box.top - lastBoundingBox.top) > EPS$1 || Math.abs(box.width - lastBoundingBox.width) > EPS$1) {
          setLastBoundingBox({
            height: box.height,
            left: box.left,
            top: box.top,
            width: box.width
          });
        }
      }
    },
    // eslint-disable-next-line react-hooks/exhaustive-deps
    [lastBoundingBox.width, lastBoundingBox.height, lastBoundingBox.top, lastBoundingBox.left, ...extraDependencies]
  );
  return [lastBoundingBox, updateBoundingBox];
}
var initialState$b = {
  layoutType: "horizontal",
  width: 0,
  height: 0,
  margin: {
    top: 5,
    right: 5,
    bottom: 5,
    left: 5
  },
  scale: 1
};
var chartLayoutSlice = createSlice({
  name: "chartLayout",
  initialState: initialState$b,
  reducers: {
    setLayout(state2, action2) {
      state2.layoutType = action2.payload;
    },
    setChartSize(state2, action2) {
      state2.width = action2.payload.width;
      state2.height = action2.payload.height;
    },
    setMargin(state2, action2) {
      var _action$payload$top, _action$payload$right, _action$payload$botto, _action$payload$left;
      state2.margin.top = (_action$payload$top = action2.payload.top) !== null && _action$payload$top !== void 0 ? _action$payload$top : 0;
      state2.margin.right = (_action$payload$right = action2.payload.right) !== null && _action$payload$right !== void 0 ? _action$payload$right : 0;
      state2.margin.bottom = (_action$payload$botto = action2.payload.bottom) !== null && _action$payload$botto !== void 0 ? _action$payload$botto : 0;
      state2.margin.left = (_action$payload$left = action2.payload.left) !== null && _action$payload$left !== void 0 ? _action$payload$left : 0;
    },
    setScale(state2, action2) {
      state2.scale = action2.payload;
    }
  }
});
var {
  setMargin,
  setLayout,
  setChartSize,
  setScale
} = chartLayoutSlice.actions;
var chartLayoutReducer = chartLayoutSlice.reducer;
function getSliced(arr, startIndex, endIndex) {
  if (!Array.isArray(arr)) {
    return arr;
  }
  if (arr && startIndex + endIndex !== 0) {
    return arr.slice(startIndex, endIndex + 1);
  }
  return arr;
}
function ownKeys$C(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$C(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$C(Object(t), true).forEach(function(r3) {
      _defineProperty$E(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$C(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$E(e, r2, t) {
  return (r2 = _toPropertyKey$E(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$E(t) {
  var i = _toPrimitive$E(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$E(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function getValueByDataKey(obj, dataKey, defaultValue) {
  if (isNullish(obj) || isNullish(dataKey)) {
    return defaultValue;
  }
  if (isNumOrStr(dataKey)) {
    return get(obj, dataKey, defaultValue);
  }
  if (typeof dataKey === "function") {
    return dataKey(obj);
  }
  return defaultValue;
}
var appendOffsetOfLegend = (offset, legendSettings, legendSize) => {
  if (legendSettings && legendSize) {
    var {
      width: boxWidth,
      height: boxHeight
    } = legendSize;
    var {
      align,
      verticalAlign,
      layout
    } = legendSettings;
    if ((layout === "vertical" || layout === "horizontal" && verticalAlign === "middle") && align !== "center" && isNumber(offset[align])) {
      return _objectSpread$C(_objectSpread$C({}, offset), {}, {
        [align]: offset[align] + (boxWidth || 0)
      });
    }
    if ((layout === "horizontal" || layout === "vertical" && align === "center") && verticalAlign !== "middle" && isNumber(offset[verticalAlign])) {
      return _objectSpread$C(_objectSpread$C({}, offset), {}, {
        [verticalAlign]: offset[verticalAlign] + (boxHeight || 0)
      });
    }
  }
  return offset;
};
var isCategoricalAxis = (layout, axisType) => layout === "horizontal" && axisType === "xAxis" || layout === "vertical" && axisType === "yAxis" || layout === "centric" && axisType === "angleAxis" || layout === "radial" && axisType === "radiusAxis";
var getCoordinatesOfGrid = (ticks, minValue, maxValue, syncWithTicks) => {
  if (syncWithTicks) {
    return ticks.map((entry2) => entry2.coordinate);
  }
  var hasMin, hasMax;
  var values = ticks.map((entry2) => {
    if (entry2.coordinate === minValue) {
      hasMin = true;
    }
    if (entry2.coordinate === maxValue) {
      hasMax = true;
    }
    return entry2.coordinate;
  });
  if (!hasMin) {
    values.push(minValue);
  }
  if (!hasMax) {
    values.push(maxValue);
  }
  return values;
};
var getTicksOfAxis = (axis, isGrid, isAll) => {
  if (!axis) {
    return null;
  }
  var {
    duplicateDomain,
    type,
    range: range2,
    scale,
    realScaleType,
    isCategorical,
    categoricalDomain,
    tickCount,
    ticks,
    niceTicks,
    axisType
  } = axis;
  if (!scale) {
    return null;
  }
  var offsetForBand = realScaleType === "scaleBand" && scale.bandwidth ? scale.bandwidth() / 2 : 2;
  var offset = type === "category" && scale.bandwidth ? scale.bandwidth() / offsetForBand : 0;
  offset = axisType === "angleAxis" && range2 && range2.length >= 2 ? mathSign(range2[0] - range2[1]) * 2 * offset : offset;
  if (ticks || niceTicks) {
    var result = (ticks || niceTicks || []).map((entry2, index) => {
      var scaleContent = duplicateDomain ? duplicateDomain.indexOf(entry2) : entry2;
      return {
        // If the scaleContent is not a number, the coordinate will be NaN.
        // That could be the case for example with a PointScale and a string as domain.
        coordinate: scale(scaleContent) + offset,
        value: entry2,
        offset,
        index
      };
    });
    return result.filter((row) => !isNan(row.coordinate));
  }
  if (isCategorical && categoricalDomain) {
    return categoricalDomain.map((entry2, index) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      index,
      offset
    }));
  }
  if (scale.ticks && true && tickCount != null) {
    return scale.ticks(tickCount).map((entry2, index) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      offset,
      index
    }));
  }
  return scale.domain().map((entry2, index) => ({
    coordinate: scale(entry2) + offset,
    value: duplicateDomain ? duplicateDomain[entry2] : entry2,
    index,
    offset
  }));
};
var EPS = 1e-4;
var checkDomainOfScale = (scale) => {
  var domain = scale.domain();
  if (!domain || domain.length <= 2) {
    return;
  }
  var len = domain.length;
  var range2 = scale.range();
  var minValue = Math.min(range2[0], range2[1]) - EPS;
  var maxValue = Math.max(range2[0], range2[1]) + EPS;
  var first = scale(domain[0]);
  var last2 = scale(domain[len - 1]);
  if (first < minValue || first > maxValue || last2 < minValue || last2 > maxValue) {
    scale.domain([domain[0], domain[len - 1]]);
  }
};
var truncateByDomain = (value, domain) => {
  if (!domain || domain.length !== 2 || !isNumber(domain[0]) || !isNumber(domain[1])) {
    return value;
  }
  var minValue = Math.min(domain[0], domain[1]);
  var maxValue = Math.max(domain[0], domain[1]);
  var result = [value[0], value[1]];
  if (!isNumber(value[0]) || value[0] < minValue) {
    result[0] = minValue;
  }
  if (!isNumber(value[1]) || value[1] > maxValue) {
    result[1] = maxValue;
  }
  if (result[0] > maxValue) {
    result[0] = maxValue;
  }
  if (result[1] < minValue) {
    result[1] = minValue;
  }
  return result;
};
var offsetSign = (series) => {
  var n = series.length;
  if (n <= 0) {
    return;
  }
  for (var j = 0, m = series[0].length; j < m; ++j) {
    var positive = 0;
    var negative = 0;
    for (var i = 0; i < n; ++i) {
      var value = isNan(series[i][j][1]) ? series[i][j][0] : series[i][j][1];
      if (value >= 0) {
        series[i][j][0] = positive;
        series[i][j][1] = positive + value;
        positive = series[i][j][1];
      } else {
        series[i][j][0] = negative;
        series[i][j][1] = negative + value;
        negative = series[i][j][1];
      }
    }
  }
};
var offsetPositive = (series) => {
  var n = series.length;
  if (n <= 0) {
    return;
  }
  for (var j = 0, m = series[0].length; j < m; ++j) {
    var positive = 0;
    for (var i = 0; i < n; ++i) {
      var value = isNan(series[i][j][1]) ? series[i][j][0] : series[i][j][1];
      if (value >= 0) {
        series[i][j][0] = positive;
        series[i][j][1] = positive + value;
        positive = series[i][j][1];
      } else {
        series[i][j][0] = 0;
        series[i][j][1] = 0;
      }
    }
  }
};
var STACK_OFFSET_MAP = {
  sign: offsetSign,
  // @ts-expect-error definitelytyped types are incorrect
  expand: stackOffsetExpand,
  // @ts-expect-error definitelytyped types are incorrect
  none: stackOffsetNone,
  // @ts-expect-error definitelytyped types are incorrect
  silhouette: stackOffsetSilhouette,
  // @ts-expect-error definitelytyped types are incorrect
  wiggle: stackOffsetWiggle,
  positive: offsetPositive
};
var getStackedData = (data2, dataKeys, offsetType) => {
  var offsetAccessor = STACK_OFFSET_MAP[offsetType];
  var stack$1 = stack().keys(dataKeys).value((d, key) => Number(getValueByDataKey(d, key, 0))).order(stackOrderNone).offset(offsetAccessor);
  return stack$1(data2);
};
function getNormalizedStackId(publicStackId) {
  return publicStackId == null ? void 0 : String(publicStackId);
}
function getCateCoordinateOfLine(_ref2) {
  var {
    axis,
    ticks,
    bandSize,
    entry: entry2,
    index,
    dataKey
  } = _ref2;
  if (axis.type === "category") {
    if (!axis.allowDuplicatedCategory && axis.dataKey && !isNullish(entry2[axis.dataKey])) {
      var matchedTick = findEntryInArray(ticks, "value", entry2[axis.dataKey]);
      if (matchedTick) {
        return matchedTick.coordinate + bandSize / 2;
      }
    }
    return ticks[index] ? ticks[index].coordinate + bandSize / 2 : null;
  }
  var value = getValueByDataKey(entry2, !isNullish(dataKey) ? dataKey : axis.dataKey);
  return !isNullish(value) ? axis.scale(value) : null;
}
var getCateCoordinateOfBar = (_ref2) => {
  var {
    axis,
    ticks,
    offset,
    bandSize,
    entry: entry2,
    index
  } = _ref2;
  if (axis.type === "category") {
    return ticks[index] ? ticks[index].coordinate + offset : null;
  }
  var value = getValueByDataKey(entry2, axis.dataKey, axis.scale.domain()[index]);
  return !isNullish(value) ? axis.scale(value) - bandSize / 2 + offset : null;
};
var getBaseValueOfBar = (_ref3) => {
  var {
    numericAxis
  } = _ref3;
  var domain = numericAxis.scale.domain();
  if (numericAxis.type === "number") {
    var minValue = Math.min(domain[0], domain[1]);
    var maxValue = Math.max(domain[0], domain[1]);
    if (minValue <= 0 && maxValue >= 0) {
      return 0;
    }
    if (maxValue < 0) {
      return maxValue;
    }
    return minValue;
  }
  return domain[0];
};
var getDomainOfSingle = (data2) => {
  var flat = data2.flat(2).filter(isNumber);
  return [Math.min(...flat), Math.max(...flat)];
};
var makeDomainFinite = (domain) => {
  return [domain[0] === Infinity ? 0 : domain[0], domain[1] === -Infinity ? 0 : domain[1]];
};
var getDomainOfStackGroups = (stackGroups, startIndex, endIndex) => {
  if (stackGroups == null) {
    return void 0;
  }
  return makeDomainFinite(Object.keys(stackGroups).reduce((result, stackId) => {
    var group = stackGroups[stackId];
    var {
      stackedData
    } = group;
    var domain = stackedData.reduce((res, entry2) => {
      var sliced = getSliced(entry2, startIndex, endIndex);
      var s = getDomainOfSingle(sliced);
      return [Math.min(res[0], s[0]), Math.max(res[1], s[1])];
    }, [Infinity, -Infinity]);
    return [Math.min(domain[0], result[0]), Math.max(domain[1], result[1])];
  }, [Infinity, -Infinity]));
};
var MIN_VALUE_REG = /^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/;
var MAX_VALUE_REG = /^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/;
var getBandSizeOfAxis = (axis, ticks, isBar) => {
  if (axis && axis.scale && axis.scale.bandwidth) {
    var bandWidth = axis.scale.bandwidth();
    if (!isBar || bandWidth > 0) {
      return bandWidth;
    }
  }
  if (axis && ticks && ticks.length >= 2) {
    var orderedTicks = sortBy(ticks, (o) => o.coordinate);
    var bandSize = Infinity;
    for (var i = 1, len = orderedTicks.length; i < len; i++) {
      var cur = orderedTicks[i];
      var prev = orderedTicks[i - 1];
      bandSize = Math.min((cur.coordinate || 0) - (prev.coordinate || 0), bandSize);
    }
    return bandSize === Infinity ? 0 : bandSize;
  }
  return isBar ? void 0 : 0;
};
function getTooltipEntry(_ref4) {
  var {
    tooltipEntrySettings,
    dataKey,
    payload,
    value,
    name
  } = _ref4;
  return _objectSpread$C(_objectSpread$C({}, tooltipEntrySettings), {}, {
    dataKey,
    payload,
    value,
    name
  });
}
function getTooltipNameProp(nameFromItem, dataKey) {
  if (nameFromItem) {
    return String(nameFromItem);
  }
  if (typeof dataKey === "string") {
    return dataKey;
  }
  return void 0;
}
var calculateCartesianTooltipPos = (coordinate, layout) => {
  if (layout === "horizontal") {
    return coordinate.chartX;
  }
  if (layout === "vertical") {
    return coordinate.chartY;
  }
  return void 0;
};
var calculatePolarTooltipPos = (rangeObj, layout) => {
  if (layout === "centric") {
    return rangeObj.angle;
  }
  return rangeObj.radius;
};
var selectChartWidth = (state2) => state2.layout.width;
var selectChartHeight = (state2) => state2.layout.height;
var selectContainerScale = (state2) => state2.layout.scale;
var selectMargin = (state2) => state2.layout.margin;
var selectAllXAxes = createSelector((state2) => state2.cartesianAxis.xAxis, (xAxisMap) => {
  return Object.values(xAxisMap);
});
var selectAllYAxes = createSelector((state2) => state2.cartesianAxis.yAxis, (yAxisMap) => {
  return Object.values(yAxisMap);
});
var DATA_ITEM_INDEX_ATTRIBUTE_NAME = "data-recharts-item-index";
var DATA_ITEM_DATAKEY_ATTRIBUTE_NAME = "data-recharts-item-data-key";
var DEFAULT_Y_AXIS_WIDTH = 60;
function ownKeys$B(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$B(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$B(Object(t), true).forEach(function(r3) {
      _defineProperty$D(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$B(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$D(e, r2, t) {
  return (r2 = _toPropertyKey$D(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$D(t) {
  var i = _toPrimitive$D(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$D(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var selectBrushHeight = (state2) => state2.brush.height;
function selectLeftAxesOffset(state2) {
  var yAxes = selectAllYAxes(state2);
  return yAxes.reduce((result, entry2) => {
    if (entry2.orientation === "left" && !entry2.mirror && !entry2.hide) {
      var width = typeof entry2.width === "number" ? entry2.width : DEFAULT_Y_AXIS_WIDTH;
      return result + width;
    }
    return result;
  }, 0);
}
function selectRightAxesOffset(state2) {
  var yAxes = selectAllYAxes(state2);
  return yAxes.reduce((result, entry2) => {
    if (entry2.orientation === "right" && !entry2.mirror && !entry2.hide) {
      var width = typeof entry2.width === "number" ? entry2.width : DEFAULT_Y_AXIS_WIDTH;
      return result + width;
    }
    return result;
  }, 0);
}
function selectTopAxesOffset(state2) {
  var xAxes = selectAllXAxes(state2);
  return xAxes.reduce((result, entry2) => {
    if (entry2.orientation === "top" && !entry2.mirror && !entry2.hide) {
      return result + entry2.height;
    }
    return result;
  }, 0);
}
function selectBottomAxesOffset(state2) {
  var xAxes = selectAllXAxes(state2);
  return xAxes.reduce((result, entry2) => {
    if (entry2.orientation === "bottom" && !entry2.mirror && !entry2.hide) {
      return result + entry2.height;
    }
    return result;
  }, 0);
}
var selectChartOffsetInternal = createSelector([selectChartWidth, selectChartHeight, selectMargin, selectBrushHeight, selectLeftAxesOffset, selectRightAxesOffset, selectTopAxesOffset, selectBottomAxesOffset, selectLegendSettings, selectLegendSize], (chartWidth, chartHeight, margin, brushHeight, leftAxesOffset, rightAxesOffset, topAxesOffset, bottomAxesOffset, legendSettings, legendSize) => {
  var offsetH = {
    left: (margin.left || 0) + leftAxesOffset,
    right: (margin.right || 0) + rightAxesOffset
  };
  var offsetV = {
    top: (margin.top || 0) + topAxesOffset,
    bottom: (margin.bottom || 0) + bottomAxesOffset
  };
  var offset = _objectSpread$B(_objectSpread$B({}, offsetV), offsetH);
  var brushBottom = offset.bottom;
  offset.bottom += brushHeight;
  offset = appendOffsetOfLegend(offset, legendSettings, legendSize);
  var offsetWidth = chartWidth - offset.left - offset.right;
  var offsetHeight = chartHeight - offset.top - offset.bottom;
  return _objectSpread$B(_objectSpread$B({
    brushBottom
  }, offset), {}, {
    // never return negative values for height and width
    width: Math.max(offsetWidth, 0),
    height: Math.max(offsetHeight, 0)
  });
});
var selectChartViewBox = createSelector(selectChartOffsetInternal, (offset) => ({
  x: offset.left,
  y: offset.top,
  width: offset.width,
  height: offset.height
}));
var selectAxisViewBox = createSelector(selectChartWidth, selectChartHeight, (width, height) => ({
  x: 0,
  y: 0,
  width,
  height
}));
var PanoramaContext = /* @__PURE__ */ createContext(null);
var useIsPanorama = () => useContext(PanoramaContext) != null;
var selectBrushSettings = (state2) => state2.brush;
var selectBrushDimensions = createSelector([selectBrushSettings, selectChartOffsetInternal, selectMargin], (brushSettings, offset, margin) => ({
  height: brushSettings.height,
  x: isNumber(brushSettings.x) ? brushSettings.x : offset.left,
  y: isNumber(brushSettings.y) ? brushSettings.y : offset.top + offset.height + offset.brushBottom - ((margin === null || margin === void 0 ? void 0 : margin.bottom) || 0),
  width: isNumber(brushSettings.width) ? brushSettings.width : offset.width
}));
var isDev = process.env.NODE_ENV !== "production";
var warn = function warn2(condition, format2) {
  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
    args[_key - 2] = arguments[_key];
  }
  if (isDev && typeof console !== "undefined" && console.warn) {
    if (format2 === void 0) {
      console.warn("LogUtils requires an error message argument");
    }
    if (!condition) {
      if (format2 === void 0) {
        console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
      } else {
        var argIndex = 0;
        console.warn(format2.replace(/%s/g, () => args[argIndex++]));
      }
    }
  }
};
var calculateChartDimensions = (containerWidth, containerHeight, props) => {
  var {
    width = "100%",
    height = "100%",
    aspect,
    maxHeight
  } = props;
  var calculatedWidth = isPercent(width) ? containerWidth : Number(width);
  var calculatedHeight = isPercent(height) ? containerHeight : Number(height);
  if (aspect && aspect > 0) {
    if (calculatedWidth) {
      calculatedHeight = calculatedWidth / aspect;
    } else if (calculatedHeight) {
      calculatedWidth = calculatedHeight * aspect;
    }
    if (maxHeight && calculatedHeight != null && calculatedHeight > maxHeight) {
      calculatedHeight = maxHeight;
    }
  }
  return {
    calculatedWidth,
    calculatedHeight
  };
};
var bothOverflow = {
  width: 0,
  height: 0,
  overflow: "visible"
};
var overflowX = {
  width: 0,
  overflowX: "visible"
};
var overflowY = {
  height: 0,
  overflowY: "visible"
};
var noStyle = {};
var getInnerDivStyle = (props) => {
  var {
    width,
    height
  } = props;
  var isWidthPercent = isPercent(width);
  var isHeightPercent = isPercent(height);
  if (isWidthPercent && isHeightPercent) {
    return bothOverflow;
  }
  if (isWidthPercent) {
    return overflowX;
  }
  if (isHeightPercent) {
    return overflowY;
  }
  return noStyle;
};
function getDefaultWidthAndHeight(_ref2) {
  var {
    width,
    height,
    aspect
  } = _ref2;
  var calculatedWidth = width;
  var calculatedHeight = height;
  if (calculatedWidth === void 0 && calculatedHeight === void 0) {
    calculatedWidth = "100%";
    calculatedHeight = "100%";
  } else if (calculatedWidth === void 0) {
    calculatedWidth = aspect && aspect > 0 ? void 0 : "100%";
  } else if (calculatedHeight === void 0) {
    calculatedHeight = aspect && aspect > 0 ? void 0 : "100%";
  }
  return {
    width: calculatedWidth,
    height: calculatedHeight
  };
}
function isWellBehavedNumber(n) {
  return Number.isFinite(n);
}
function isPositiveNumber(n) {
  return typeof n === "number" && n > 0 && Number.isFinite(n);
}
function _extends$q() {
  return _extends$q = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$q.apply(null, arguments);
}
function ownKeys$A(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$A(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$A(Object(t), true).forEach(function(r3) {
      _defineProperty$C(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$A(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$C(e, r2, t) {
  return (r2 = _toPropertyKey$C(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$C(t) {
  var i = _toPrimitive$C(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$C(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var ResponsiveContainerContext = /* @__PURE__ */ createContext({
  width: -1,
  height: -1
});
function isAcceptableSize(size) {
  return isPositiveNumber(size.width) && isPositiveNumber(size.height);
}
function ResponsiveContainerContextProvider(_ref2) {
  var {
    children,
    width,
    height
  } = _ref2;
  var size = useMemo(() => ({
    width,
    height
  }), [width, height]);
  if (!isAcceptableSize(size)) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(ResponsiveContainerContext.Provider, {
    value: size
  }, children);
}
var useResponsiveContainerContext = () => useContext(ResponsiveContainerContext);
var SizeDetectorContainer = /* @__PURE__ */ forwardRef((_ref2, ref) => {
  var {
    aspect,
    initialDimension = {
      width: -1,
      height: -1
    },
    width,
    height,
    /*
     * default min-width to 0 if not specified - 'auto' causes issues with flexbox
     * https://github.com/recharts/recharts/issues/172
     */
    minWidth = 0,
    minHeight,
    maxHeight,
    children,
    debounce = 0,
    id,
    className,
    onResize,
    style = {}
  } = _ref2;
  var containerRef = useRef(null);
  var onResizeRef = useRef();
  onResizeRef.current = onResize;
  useImperativeHandle(ref, () => containerRef.current);
  var [sizes, setSizes] = useState({
    containerWidth: initialDimension.width,
    containerHeight: initialDimension.height
  });
  var setContainerSize = useCallback((newWidth, newHeight) => {
    setSizes((prevState) => {
      var roundedWidth = Math.round(newWidth);
      var roundedHeight = Math.round(newHeight);
      if (prevState.containerWidth === roundedWidth && prevState.containerHeight === roundedHeight) {
        return prevState;
      }
      return {
        containerWidth: roundedWidth,
        containerHeight: roundedHeight
      };
    });
  }, []);
  useEffect(() => {
    if (containerRef.current == null || typeof ResizeObserver === "undefined") {
      return noop$1;
    }
    var callback = (entries) => {
      var _onResizeRef$current;
      var {
        width: containerWidth3,
        height: containerHeight3
      } = entries[0].contentRect;
      setContainerSize(containerWidth3, containerHeight3);
      (_onResizeRef$current = onResizeRef.current) === null || _onResizeRef$current === void 0 || _onResizeRef$current.call(onResizeRef, containerWidth3, containerHeight3);
    };
    if (debounce > 0) {
      callback = throttle(callback, debounce, {
        trailing: true,
        leading: false
      });
    }
    var observer = new ResizeObserver(callback);
    var {
      width: containerWidth2,
      height: containerHeight2
    } = containerRef.current.getBoundingClientRect();
    setContainerSize(containerWidth2, containerHeight2);
    observer.observe(containerRef.current);
    return () => {
      observer.disconnect();
    };
  }, [setContainerSize, debounce]);
  var {
    containerWidth,
    containerHeight
  } = sizes;
  warn(!aspect || aspect > 0, "The aspect(%s) must be greater than zero.", aspect);
  var {
    calculatedWidth,
    calculatedHeight
  } = calculateChartDimensions(containerWidth, containerHeight, {
    width,
    height,
    aspect,
    maxHeight
  });
  warn(calculatedWidth != null && calculatedWidth > 0 || calculatedHeight != null && calculatedHeight > 0, "The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.", calculatedWidth, calculatedHeight, width, height, minWidth, minHeight, aspect);
  return /* @__PURE__ */ React.createElement("div", {
    id: id ? "".concat(id) : void 0,
    className: clsx("recharts-responsive-container", className),
    style: _objectSpread$A(_objectSpread$A({}, style), {}, {
      width,
      height,
      minWidth,
      minHeight,
      maxHeight
    }),
    ref: containerRef
  }, /* @__PURE__ */ React.createElement("div", {
    style: getInnerDivStyle({
      width,
      height
    })
  }, /* @__PURE__ */ React.createElement(ResponsiveContainerContextProvider, {
    width: calculatedWidth,
    height: calculatedHeight
  }, children)));
});
var ResponsiveContainer = /* @__PURE__ */ forwardRef((props, ref) => {
  var responsiveContainerContext = useResponsiveContainerContext();
  if (isPositiveNumber(responsiveContainerContext.width) && isPositiveNumber(responsiveContainerContext.height)) {
    return props.children;
  }
  var {
    width,
    height
  } = getDefaultWidthAndHeight({
    width: props.width,
    height: props.height,
    aspect: props.aspect
  });
  var {
    calculatedWidth,
    calculatedHeight
  } = calculateChartDimensions(void 0, void 0, {
    width,
    height,
    aspect: props.aspect,
    maxHeight: props.maxHeight
  });
  if (isNumber(calculatedWidth) && isNumber(calculatedHeight)) {
    return /* @__PURE__ */ React.createElement(ResponsiveContainerContextProvider, {
      width: calculatedWidth,
      height: calculatedHeight
    }, props.children);
  }
  return /* @__PURE__ */ React.createElement(SizeDetectorContainer, _extends$q({}, props, {
    width,
    height,
    ref
  }));
});
function cartesianViewBoxToTrapezoid(box) {
  if (!box) {
    return void 0;
  }
  return {
    x: box.x,
    y: box.y,
    upperWidth: "upperWidth" in box ? box.upperWidth : box.width,
    lowerWidth: "lowerWidth" in box ? box.lowerWidth : box.width,
    width: box.width,
    height: box.height
  };
}
var useViewBox = () => {
  var _useAppSelector;
  var panorama = useIsPanorama();
  var rootViewBox = useAppSelector(selectChartViewBox);
  var brushDimensions = useAppSelector(selectBrushDimensions);
  var brushPadding = (_useAppSelector = useAppSelector(selectBrushSettings)) === null || _useAppSelector === void 0 ? void 0 : _useAppSelector.padding;
  if (!panorama || !brushDimensions || !brushPadding) {
    return rootViewBox;
  }
  return {
    width: brushDimensions.width - brushPadding.left - brushPadding.right,
    height: brushDimensions.height - brushPadding.top - brushPadding.bottom,
    x: brushPadding.left,
    y: brushPadding.top
  };
};
var manyComponentsThrowErrorsIfOffsetIsUndefined = {
  top: 0,
  bottom: 0,
  left: 0,
  right: 0,
  width: 0,
  height: 0,
  brushBottom: 0
};
var useOffsetInternal = () => {
  var _useAppSelector2;
  return (_useAppSelector2 = useAppSelector(selectChartOffsetInternal)) !== null && _useAppSelector2 !== void 0 ? _useAppSelector2 : manyComponentsThrowErrorsIfOffsetIsUndefined;
};
var useChartWidth = () => {
  return useAppSelector(selectChartWidth);
};
var useChartHeight = () => {
  return useAppSelector(selectChartHeight);
};
var useMargin = () => {
  return useAppSelector((state2) => state2.layout.margin);
};
var selectChartLayout = (state2) => state2.layout.layoutType;
var useChartLayout = () => useAppSelector(selectChartLayout);
var useIsInChartContext = () => {
  var layout = useChartLayout();
  return layout !== void 0;
};
var ReportChartSize = (props) => {
  var dispatch = useAppDispatch();
  var isPanorama = useIsPanorama();
  var {
    width: widthFromProps,
    height: heightFromProps
  } = props;
  var responsiveContainerCalculations = useResponsiveContainerContext();
  var width = widthFromProps;
  var height = heightFromProps;
  if (responsiveContainerCalculations) {
    width = responsiveContainerCalculations.width > 0 ? responsiveContainerCalculations.width : widthFromProps;
    height = responsiveContainerCalculations.height > 0 ? responsiveContainerCalculations.height : heightFromProps;
  }
  useEffect(() => {
    if (!isPanorama && isPositiveNumber(width) && isPositiveNumber(height)) {
      dispatch(setChartSize({
        width,
        height
      }));
    }
  }, [dispatch, isPanorama, width, height]);
  return null;
};
var initialState$a = {
  settings: {
    layout: "horizontal",
    align: "center",
    verticalAlign: "middle",
    itemSorter: "value"
  },
  size: {
    width: 0,
    height: 0
  },
  payload: []
};
var legendSlice = createSlice({
  name: "legend",
  initialState: initialState$a,
  reducers: {
    setLegendSize(state2, action2) {
      state2.size.width = action2.payload.width;
      state2.size.height = action2.payload.height;
    },
    setLegendSettings(state2, action2) {
      state2.settings.align = action2.payload.align;
      state2.settings.layout = action2.payload.layout;
      state2.settings.verticalAlign = action2.payload.verticalAlign;
      state2.settings.itemSorter = action2.payload.itemSorter;
    },
    addLegendPayload: {
      reducer(state2, action2) {
        state2.payload.push(castDraft(action2.payload));
      },
      prepare: prepareAutoBatched()
    },
    removeLegendPayload: {
      reducer(state2, action2) {
        var index = current(state2).payload.indexOf(castDraft(action2.payload));
        if (index > -1) {
          state2.payload.splice(index, 1);
        }
      },
      prepare: prepareAutoBatched()
    }
  }
});
var {
  setLegendSize,
  setLegendSettings,
  addLegendPayload,
  removeLegendPayload
} = legendSlice.actions;
var legendReducer = legendSlice.reducer;
var _excluded$l = ["contextPayload"];
function _extends$p() {
  return _extends$p = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$p.apply(null, arguments);
}
function ownKeys$z(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$z(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$z(Object(t), true).forEach(function(r3) {
      _defineProperty$B(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$z(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$B(e, r2, t) {
  return (r2 = _toPropertyKey$B(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$B(t) {
  var i = _toPrimitive$B(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$B(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$l(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$l(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$l(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function defaultUniqBy$1(entry2) {
  return entry2.value;
}
function LegendContent(props) {
  var {
    contextPayload
  } = props, otherProps = _objectWithoutProperties$l(props, _excluded$l);
  var finalPayload = getUniqPayload(contextPayload, props.payloadUniqBy, defaultUniqBy$1);
  var contentProps = _objectSpread$z(_objectSpread$z({}, otherProps), {}, {
    payload: finalPayload
  });
  if (/* @__PURE__ */ React.isValidElement(props.content)) {
    return /* @__PURE__ */ React.cloneElement(props.content, contentProps);
  }
  if (typeof props.content === "function") {
    return /* @__PURE__ */ React.createElement(props.content, contentProps);
  }
  return /* @__PURE__ */ React.createElement(DefaultLegendContent, contentProps);
}
function getDefaultPosition(style, props, margin, chartWidth, chartHeight, box) {
  var {
    layout,
    align,
    verticalAlign
  } = props;
  var hPos, vPos;
  if (!style || (style.left === void 0 || style.left === null) && (style.right === void 0 || style.right === null)) {
    if (align === "center" && layout === "vertical") {
      hPos = {
        left: ((chartWidth || 0) - box.width) / 2
      };
    } else {
      hPos = align === "right" ? {
        right: margin && margin.right || 0
      } : {
        left: margin && margin.left || 0
      };
    }
  }
  if (!style || (style.top === void 0 || style.top === null) && (style.bottom === void 0 || style.bottom === null)) {
    if (verticalAlign === "middle") {
      vPos = {
        top: ((chartHeight || 0) - box.height) / 2
      };
    } else {
      vPos = verticalAlign === "bottom" ? {
        bottom: margin && margin.bottom || 0
      } : {
        top: margin && margin.top || 0
      };
    }
  }
  return _objectSpread$z(_objectSpread$z({}, hPos), vPos);
}
function LegendSettingsDispatcher(props) {
  var dispatch = useAppDispatch();
  useEffect(() => {
    dispatch(setLegendSettings(props));
  }, [dispatch, props]);
  return null;
}
function LegendSizeDispatcher(props) {
  var dispatch = useAppDispatch();
  useEffect(() => {
    dispatch(setLegendSize(props));
    return () => {
      dispatch(setLegendSize({
        width: 0,
        height: 0
      }));
    };
  }, [dispatch, props]);
  return null;
}
function getWidthOrHeight(layout, height, width, maxWidth) {
  if (layout === "vertical" && isNumber(height)) {
    return {
      height
    };
  }
  if (layout === "horizontal") {
    return {
      width: width || maxWidth
    };
  }
  return null;
}
var legendDefaultProps = {
  align: "center",
  iconSize: 14,
  itemSorter: "value",
  layout: "horizontal",
  verticalAlign: "bottom"
};
function Legend(outsideProps) {
  var props = resolveDefaultProps(outsideProps, legendDefaultProps);
  var contextPayload = useLegendPayload();
  var legendPortalFromContext = useLegendPortal();
  var margin = useMargin();
  var {
    width: widthFromProps,
    height: heightFromProps,
    wrapperStyle,
    portal: portalFromProps
  } = props;
  var [lastBoundingBox, updateBoundingBox] = useElementOffset([contextPayload]);
  var chartWidth = useChartWidth();
  var chartHeight = useChartHeight();
  if (chartWidth == null || chartHeight == null) {
    return null;
  }
  var maxWidth = chartWidth - ((margin === null || margin === void 0 ? void 0 : margin.left) || 0) - ((margin === null || margin === void 0 ? void 0 : margin.right) || 0);
  var widthOrHeight = getWidthOrHeight(props.layout, heightFromProps, widthFromProps, maxWidth);
  var outerStyle = portalFromProps ? wrapperStyle : _objectSpread$z(_objectSpread$z({
    position: "absolute",
    width: (widthOrHeight === null || widthOrHeight === void 0 ? void 0 : widthOrHeight.width) || widthFromProps || "auto",
    height: (widthOrHeight === null || widthOrHeight === void 0 ? void 0 : widthOrHeight.height) || heightFromProps || "auto"
  }, getDefaultPosition(wrapperStyle, props, margin, chartWidth, chartHeight, lastBoundingBox)), wrapperStyle);
  var legendPortal = portalFromProps !== null && portalFromProps !== void 0 ? portalFromProps : legendPortalFromContext;
  if (legendPortal == null || contextPayload == null) {
    return null;
  }
  var legendElement = /* @__PURE__ */ React.createElement("div", {
    className: "recharts-legend-wrapper",
    style: outerStyle,
    ref: updateBoundingBox
  }, /* @__PURE__ */ React.createElement(LegendSettingsDispatcher, {
    layout: props.layout,
    align: props.align,
    verticalAlign: props.verticalAlign,
    itemSorter: props.itemSorter
  }), /* @__PURE__ */ React.createElement(LegendSizeDispatcher, {
    width: lastBoundingBox.width,
    height: lastBoundingBox.height
  }), /* @__PURE__ */ React.createElement(LegendContent, _extends$p({}, props, widthOrHeight, {
    margin,
    chartWidth,
    chartHeight,
    contextPayload
  })));
  return /* @__PURE__ */ createPortal(legendElement, legendPortal);
}
Legend.displayName = "Legend";
function _extends$o() {
  return _extends$o = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$o.apply(null, arguments);
}
function ownKeys$y(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$y(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$y(Object(t), true).forEach(function(r3) {
      _defineProperty$A(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$y(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$A(e, r2, t) {
  return (r2 = _toPropertyKey$A(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$A(t) {
  var i = _toPrimitive$A(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$A(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function defaultFormatter(value) {
  return Array.isArray(value) && isNumOrStr(value[0]) && isNumOrStr(value[1]) ? value.join(" ~ ") : value;
}
var DefaultTooltipContent = (props) => {
  var {
    separator = " : ",
    contentStyle = {},
    itemStyle = {},
    labelStyle = {},
    payload,
    formatter,
    itemSorter,
    wrapperClassName,
    labelClassName,
    label,
    labelFormatter,
    accessibilityLayer = false
  } = props;
  var renderContent2 = () => {
    if (payload && payload.length) {
      var listStyle = {
        padding: 0,
        margin: 0
      };
      var items = (itemSorter ? sortBy(payload, itemSorter) : payload).map((entry2, i) => {
        if (entry2.type === "none") {
          return null;
        }
        var finalFormatter = entry2.formatter || formatter || defaultFormatter;
        var {
          value,
          name
        } = entry2;
        var finalValue = value;
        var finalName = name;
        if (finalFormatter) {
          var formatted = finalFormatter(value, name, entry2, i, payload);
          if (Array.isArray(formatted)) {
            [finalValue, finalName] = formatted;
          } else if (formatted != null) {
            finalValue = formatted;
          } else {
            return null;
          }
        }
        var finalItemStyle = _objectSpread$y({
          display: "block",
          paddingTop: 4,
          paddingBottom: 4,
          color: entry2.color || "#000"
        }, itemStyle);
        return /* @__PURE__ */ React.createElement("li", {
          className: "recharts-tooltip-item",
          key: "tooltip-item-".concat(i),
          style: finalItemStyle
        }, isNumOrStr(finalName) ? /* @__PURE__ */ React.createElement("span", {
          className: "recharts-tooltip-item-name"
        }, finalName) : null, isNumOrStr(finalName) ? /* @__PURE__ */ React.createElement("span", {
          className: "recharts-tooltip-item-separator"
        }, separator) : null, /* @__PURE__ */ React.createElement("span", {
          className: "recharts-tooltip-item-value"
        }, finalValue), /* @__PURE__ */ React.createElement("span", {
          className: "recharts-tooltip-item-unit"
        }, entry2.unit || ""));
      });
      return /* @__PURE__ */ React.createElement("ul", {
        className: "recharts-tooltip-item-list",
        style: listStyle
      }, items);
    }
    return null;
  };
  var finalStyle = _objectSpread$y({
    margin: 0,
    padding: 10,
    backgroundColor: "#fff",
    border: "1px solid #ccc",
    whiteSpace: "nowrap"
  }, contentStyle);
  var finalLabelStyle = _objectSpread$y({
    margin: 0
  }, labelStyle);
  var hasLabel = !isNullish(label);
  var finalLabel = hasLabel ? label : "";
  var wrapperCN = clsx("recharts-default-tooltip", wrapperClassName);
  var labelCN = clsx("recharts-tooltip-label", labelClassName);
  if (hasLabel && labelFormatter && payload !== void 0 && payload !== null) {
    finalLabel = labelFormatter(label, payload);
  }
  var accessibilityAttributes = accessibilityLayer ? {
    role: "status",
    "aria-live": "assertive"
  } : {};
  return /* @__PURE__ */ React.createElement("div", _extends$o({
    className: wrapperCN,
    style: finalStyle
  }, accessibilityAttributes), /* @__PURE__ */ React.createElement("p", {
    className: labelCN,
    style: finalLabelStyle
  }, /* @__PURE__ */ React.isValidElement(finalLabel) ? finalLabel : "".concat(finalLabel)), renderContent2());
};
var CSS_CLASS_PREFIX = "recharts-tooltip-wrapper";
var TOOLTIP_HIDDEN = {
  visibility: "hidden"
};
function getTooltipCSSClassName(_ref2) {
  var {
    coordinate,
    translateX,
    translateY
  } = _ref2;
  return clsx(CSS_CLASS_PREFIX, {
    ["".concat(CSS_CLASS_PREFIX, "-right")]: isNumber(translateX) && coordinate && isNumber(coordinate.x) && translateX >= coordinate.x,
    ["".concat(CSS_CLASS_PREFIX, "-left")]: isNumber(translateX) && coordinate && isNumber(coordinate.x) && translateX < coordinate.x,
    ["".concat(CSS_CLASS_PREFIX, "-bottom")]: isNumber(translateY) && coordinate && isNumber(coordinate.y) && translateY >= coordinate.y,
    ["".concat(CSS_CLASS_PREFIX, "-top")]: isNumber(translateY) && coordinate && isNumber(coordinate.y) && translateY < coordinate.y
  });
}
function getTooltipTranslateXY(_ref2) {
  var {
    allowEscapeViewBox,
    coordinate,
    key,
    offsetTopLeft,
    position,
    reverseDirection,
    tooltipDimension,
    viewBox,
    viewBoxDimension
  } = _ref2;
  if (position && isNumber(position[key])) {
    return position[key];
  }
  var negative = coordinate[key] - tooltipDimension - (offsetTopLeft > 0 ? offsetTopLeft : 0);
  var positive = coordinate[key] + offsetTopLeft;
  if (allowEscapeViewBox[key]) {
    return reverseDirection[key] ? negative : positive;
  }
  var viewBoxKey = viewBox[key];
  if (viewBoxKey == null) {
    return 0;
  }
  if (reverseDirection[key]) {
    var _tooltipBoundary = negative;
    var _viewBoxBoundary = viewBoxKey;
    if (_tooltipBoundary < _viewBoxBoundary) {
      return Math.max(positive, viewBoxKey);
    }
    return Math.max(negative, viewBoxKey);
  }
  if (viewBoxDimension == null) {
    return 0;
  }
  var tooltipBoundary = positive + tooltipDimension;
  var viewBoxBoundary = viewBoxKey + viewBoxDimension;
  if (tooltipBoundary > viewBoxBoundary) {
    return Math.max(negative, viewBoxKey);
  }
  return Math.max(positive, viewBoxKey);
}
function getTransformStyle(_ref3) {
  var {
    translateX,
    translateY,
    useTranslate3d
  } = _ref3;
  return {
    transform: useTranslate3d ? "translate3d(".concat(translateX, "px, ").concat(translateY, "px, 0)") : "translate(".concat(translateX, "px, ").concat(translateY, "px)")
  };
}
function getTooltipTranslate(_ref4) {
  var {
    allowEscapeViewBox,
    coordinate,
    offsetTopLeft,
    position,
    reverseDirection,
    tooltipBox,
    useTranslate3d,
    viewBox
  } = _ref4;
  var cssProperties, translateX, translateY;
  if (tooltipBox.height > 0 && tooltipBox.width > 0 && coordinate) {
    translateX = getTooltipTranslateXY({
      allowEscapeViewBox,
      coordinate,
      key: "x",
      offsetTopLeft,
      position,
      reverseDirection,
      tooltipDimension: tooltipBox.width,
      viewBox,
      viewBoxDimension: viewBox.width
    });
    translateY = getTooltipTranslateXY({
      allowEscapeViewBox,
      coordinate,
      key: "y",
      offsetTopLeft,
      position,
      reverseDirection,
      tooltipDimension: tooltipBox.height,
      viewBox,
      viewBoxDimension: viewBox.height
    });
    cssProperties = getTransformStyle({
      translateX,
      translateY,
      useTranslate3d
    });
  } else {
    cssProperties = TOOLTIP_HIDDEN;
  }
  return {
    cssProperties,
    cssClasses: getTooltipCSSClassName({
      translateX,
      translateY,
      coordinate
    })
  };
}
function ownKeys$x(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$x(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$x(Object(t), true).forEach(function(r3) {
      _defineProperty$z(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$x(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$z(e, r2, t) {
  return (r2 = _toPropertyKey$z(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$z(t) {
  var i = _toPrimitive$z(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$z(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
class TooltipBoundingBox extends PureComponent {
  constructor() {
    super(...arguments);
    _defineProperty$z(this, "state", {
      dismissed: false,
      dismissedAtCoordinate: {
        x: 0,
        y: 0
      }
    });
    _defineProperty$z(this, "handleKeyDown", (event) => {
      if (event.key === "Escape") {
        var _this$props$coordinat, _this$props$coordinat2, _this$props$coordinat3, _this$props$coordinat4;
        this.setState({
          dismissed: true,
          dismissedAtCoordinate: {
            x: (_this$props$coordinat = (_this$props$coordinat2 = this.props.coordinate) === null || _this$props$coordinat2 === void 0 ? void 0 : _this$props$coordinat2.x) !== null && _this$props$coordinat !== void 0 ? _this$props$coordinat : 0,
            y: (_this$props$coordinat3 = (_this$props$coordinat4 = this.props.coordinate) === null || _this$props$coordinat4 === void 0 ? void 0 : _this$props$coordinat4.y) !== null && _this$props$coordinat3 !== void 0 ? _this$props$coordinat3 : 0
          }
        });
      }
    });
  }
  componentDidMount() {
    document.addEventListener("keydown", this.handleKeyDown);
  }
  componentWillUnmount() {
    document.removeEventListener("keydown", this.handleKeyDown);
  }
  componentDidUpdate() {
    var _this$props$coordinat5, _this$props$coordinat6;
    if (!this.state.dismissed) {
      return;
    }
    if (((_this$props$coordinat5 = this.props.coordinate) === null || _this$props$coordinat5 === void 0 ? void 0 : _this$props$coordinat5.x) !== this.state.dismissedAtCoordinate.x || ((_this$props$coordinat6 = this.props.coordinate) === null || _this$props$coordinat6 === void 0 ? void 0 : _this$props$coordinat6.y) !== this.state.dismissedAtCoordinate.y) {
      this.state.dismissed = false;
    }
  }
  render() {
    var {
      active,
      allowEscapeViewBox,
      animationDuration,
      animationEasing,
      children,
      coordinate,
      hasPayload,
      isAnimationActive,
      offset,
      position,
      reverseDirection,
      useTranslate3d,
      viewBox,
      wrapperStyle,
      lastBoundingBox,
      innerRef,
      hasPortalFromProps
    } = this.props;
    var {
      cssClasses,
      cssProperties
    } = getTooltipTranslate({
      allowEscapeViewBox,
      coordinate,
      offsetTopLeft: offset,
      position,
      reverseDirection,
      tooltipBox: {
        height: lastBoundingBox.height,
        width: lastBoundingBox.width
      },
      useTranslate3d,
      viewBox
    });
    var positionStyles = hasPortalFromProps ? {} : _objectSpread$x(_objectSpread$x({
      transition: isAnimationActive && active ? "transform ".concat(animationDuration, "ms ").concat(animationEasing) : void 0
    }, cssProperties), {}, {
      pointerEvents: "none",
      visibility: !this.state.dismissed && active && hasPayload ? "visible" : "hidden",
      position: "absolute",
      top: 0,
      left: 0
    });
    var outerStyle = _objectSpread$x(_objectSpread$x({}, positionStyles), {}, {
      visibility: !this.state.dismissed && active && hasPayload ? "visible" : "hidden"
    }, wrapperStyle);
    return (
      // This element allow listening to the `Escape` key. See https://github.com/recharts/recharts/pull/2925
      /* @__PURE__ */ React.createElement("div", {
        // @ts-expect-error typescript library does not recognize xmlns attribute, but it's required for an HTML chunk inside SVG.
        xmlns: "http://www.w3.org/1999/xhtml",
        tabIndex: -1,
        className: cssClasses,
        style: outerStyle,
        ref: innerRef
      }, children)
    );
  }
}
var parseIsSsrByDefault = () => !(typeof window !== "undefined" && window.document && Boolean(window.document.createElement) && window.setTimeout);
var Global = {
  devToolsEnabled: false,
  isSsr: parseIsSsrByDefault()
};
var useAccessibilityLayer = () => {
  var _useAppSelector;
  return (_useAppSelector = useAppSelector((state2) => state2.rootProps.accessibilityLayer)) !== null && _useAppSelector !== void 0 ? _useAppSelector : true;
};
function _extends$n() {
  return _extends$n = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$n.apply(null, arguments);
}
function ownKeys$w(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$w(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$w(Object(t), true).forEach(function(r3) {
      _defineProperty$y(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$w(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$y(e, r2, t) {
  return (r2 = _toPropertyKey$y(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$y(t) {
  var i = _toPrimitive$y(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$y(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var CURVE_FACTORIES = {
  curveBasisClosed,
  curveBasisOpen,
  curveBasis,
  curveBumpX,
  curveBumpY,
  curveLinearClosed,
  curveLinear,
  curveMonotoneX,
  curveMonotoneY,
  curveNatural,
  curveStep,
  curveStepAfter,
  curveStepBefore
};
var defined = (p) => isWellBehavedNumber(p.x) && isWellBehavedNumber(p.y);
var areaDefined = (d) => d.base != null && defined(d.base) && defined(d);
var getX = (p) => p.x;
var getY = (p) => p.y;
var getCurveFactory = (type, layout) => {
  if (typeof type === "function") {
    return type;
  }
  var name = "curve".concat(upperFirst(type));
  if ((name === "curveMonotone" || name === "curveBump") && layout) {
    return CURVE_FACTORIES["".concat(name).concat(layout === "vertical" ? "Y" : "X")];
  }
  return CURVE_FACTORIES[name] || curveLinear;
};
var getPath$1 = (_ref2) => {
  var {
    type = "linear",
    points = [],
    baseLine,
    layout,
    connectNulls = false
  } = _ref2;
  var curveFactory = getCurveFactory(type, layout);
  var formatPoints = connectNulls ? points.filter(defined) : points;
  var lineFunction;
  if (Array.isArray(baseLine)) {
    var areaPoints = points.map((entry2, index) => _objectSpread$w(_objectSpread$w({}, entry2), {}, {
      base: baseLine[index]
    }));
    if (layout === "vertical") {
      lineFunction = area().y(getY).x1(getX).x0((d) => d.base.x);
    } else {
      lineFunction = area().x(getX).y1(getY).y0((d) => d.base.y);
    }
    var _nullableLineFunction = lineFunction.defined(areaDefined).curve(curveFactory);
    var finalPoints = connectNulls ? areaPoints.filter(areaDefined) : areaPoints;
    return _nullableLineFunction(finalPoints);
  }
  if (layout === "vertical" && isNumber(baseLine)) {
    lineFunction = area().y(getY).x1(getX).x0(baseLine);
  } else if (isNumber(baseLine)) {
    lineFunction = area().x(getX).y1(getY).y0(baseLine);
  } else {
    lineFunction = line().x(getX).y(getY);
  }
  var nullableLineFunction = lineFunction.defined(defined).curve(curveFactory);
  return nullableLineFunction(formatPoints);
};
var Curve = (props) => {
  var {
    className,
    points,
    path: path2,
    pathRef
  } = props;
  if ((!points || !points.length) && !path2) {
    return null;
  }
  var realPath = points && points.length ? getPath$1(props) : path2;
  return /* @__PURE__ */ React.createElement("path", _extends$n({}, svgPropertiesNoEvents(props), adaptEventHandlers(props), {
    className: clsx("recharts-curve", className),
    d: realPath === null ? void 0 : realPath,
    ref: pathRef
  }));
};
var _excluded$k = ["x", "y", "top", "left", "width", "height", "className"];
function _extends$m() {
  return _extends$m = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$m.apply(null, arguments);
}
function ownKeys$v(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$v(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$v(Object(t), true).forEach(function(r3) {
      _defineProperty$x(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$v(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$x(e, r2, t) {
  return (r2 = _toPropertyKey$x(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$x(t) {
  var i = _toPrimitive$x(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$x(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$k(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$k(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$k(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var getPath = (x, y, width, height, top, left) => {
  return "M".concat(x, ",").concat(top, "v").concat(height, "M").concat(left, ",").concat(y, "h").concat(width);
};
var Cross = (_ref2) => {
  var {
    x = 0,
    y = 0,
    top = 0,
    left = 0,
    width = 0,
    height = 0,
    className
  } = _ref2, rest = _objectWithoutProperties$k(_ref2, _excluded$k);
  var props = _objectSpread$v({
    x,
    y,
    top,
    left,
    width,
    height
  }, rest);
  if (!isNumber(x) || !isNumber(y) || !isNumber(width) || !isNumber(height) || !isNumber(top) || !isNumber(left)) {
    return null;
  }
  return /* @__PURE__ */ React.createElement("path", _extends$m({}, svgPropertiesAndEvents(props), {
    className: clsx("recharts-cross", className),
    d: getPath(x, y, width, height, top, left)
  }));
};
function getCursorRectangle(layout, activeCoordinate, offset, tooltipAxisBandSize) {
  var halfSize = tooltipAxisBandSize / 2;
  return {
    stroke: "none",
    fill: "#ccc",
    x: layout === "horizontal" ? activeCoordinate.x - halfSize : offset.left + 0.5,
    y: layout === "horizontal" ? offset.top + 0.5 : activeCoordinate.y - halfSize,
    width: layout === "horizontal" ? tooltipAxisBandSize : offset.width - 1,
    height: layout === "horizontal" ? offset.height - 1 : tooltipAxisBandSize
  };
}
function ownKeys$u(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$u(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$u(Object(t), true).forEach(function(r3) {
      _defineProperty$w(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$u(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$w(e, r2, t) {
  return (r2 = _toPropertyKey$w(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$w(t) {
  var i = _toPrimitive$w(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$w(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var getDashCase = (name) => name.replace(/([A-Z])/g, (v) => "-".concat(v.toLowerCase()));
var getTransitionVal = (props, duration, easing) => props.map((prop) => "".concat(getDashCase(prop), " ").concat(duration, "ms ").concat(easing)).join(",");
var getIntersectionKeys = (preObj, nextObj) => [Object.keys(preObj), Object.keys(nextObj)].reduce((a, b) => a.filter((c) => b.includes(c)));
var mapObject = (fn, obj) => Object.keys(obj).reduce((res, key) => _objectSpread$u(_objectSpread$u({}, res), {}, {
  [key]: fn(key, obj[key])
}), {});
function ownKeys$t(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$t(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$t(Object(t), true).forEach(function(r3) {
      _defineProperty$v(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$t(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$v(e, r2, t) {
  return (r2 = _toPropertyKey$v(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$v(t) {
  var i = _toPrimitive$v(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$v(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var alpha = (begin, end, k) => begin + (end - begin) * k;
var needContinue = (_ref2) => {
  var {
    from: from2,
    to: to2
  } = _ref2;
  return from2 !== to2;
};
var calStepperVals = (easing, preVals, steps) => {
  var nextStepVals = mapObject((key, val) => {
    if (needContinue(val)) {
      var [newX, newV] = easing(val.from, val.to, val.velocity);
      return _objectSpread$t(_objectSpread$t({}, val), {}, {
        from: newX,
        velocity: newV
      });
    }
    return val;
  }, preVals);
  if (steps < 1) {
    return mapObject((key, val) => {
      if (needContinue(val)) {
        return _objectSpread$t(_objectSpread$t({}, val), {}, {
          velocity: alpha(val.velocity, nextStepVals[key].velocity, steps),
          from: alpha(val.from, nextStepVals[key].from, steps)
        });
      }
      return val;
    }, preVals);
  }
  return calStepperVals(easing, nextStepVals, steps - 1);
};
function createStepperUpdate(from2, to2, easing, interKeys, render, timeoutController) {
  var preTime;
  var stepperStyle = interKeys.reduce((res, key) => _objectSpread$t(_objectSpread$t({}, res), {}, {
    [key]: {
      from: from2[key],
      velocity: 0,
      to: to2[key]
    }
  }), {});
  var getCurrStyle = () => mapObject((key, val) => val.from, stepperStyle);
  var shouldStopAnimation = () => !Object.values(stepperStyle).filter(needContinue).length;
  var stopAnimation = null;
  var stepperUpdate = (now) => {
    if (!preTime) {
      preTime = now;
    }
    var deltaTime = now - preTime;
    var steps = deltaTime / easing.dt;
    stepperStyle = calStepperVals(easing, stepperStyle, steps);
    render(_objectSpread$t(_objectSpread$t(_objectSpread$t({}, from2), to2), getCurrStyle()));
    preTime = now;
    if (!shouldStopAnimation()) {
      stopAnimation = timeoutController.setTimeout(stepperUpdate);
    }
  };
  return () => {
    stopAnimation = timeoutController.setTimeout(stepperUpdate);
    return () => {
      var _stopAnimation;
      (_stopAnimation = stopAnimation) === null || _stopAnimation === void 0 || _stopAnimation();
    };
  };
}
function createTimingUpdate(from2, to2, easing, duration, interKeys, render, timeoutController) {
  var stopAnimation = null;
  var timingStyle = interKeys.reduce((res, key) => _objectSpread$t(_objectSpread$t({}, res), {}, {
    [key]: [from2[key], to2[key]]
  }), {});
  var beginTime;
  var timingUpdate = (now) => {
    if (!beginTime) {
      beginTime = now;
    }
    var t = (now - beginTime) / duration;
    var currStyle = mapObject((key, val) => alpha(...val, easing(t)), timingStyle);
    render(_objectSpread$t(_objectSpread$t(_objectSpread$t({}, from2), to2), currStyle));
    if (t < 1) {
      stopAnimation = timeoutController.setTimeout(timingUpdate);
    } else {
      var finalStyle = mapObject((key, val) => alpha(...val, easing(1)), timingStyle);
      render(_objectSpread$t(_objectSpread$t(_objectSpread$t({}, from2), to2), finalStyle));
    }
  };
  return () => {
    stopAnimation = timeoutController.setTimeout(timingUpdate);
    return () => {
      var _stopAnimation2;
      (_stopAnimation2 = stopAnimation) === null || _stopAnimation2 === void 0 || _stopAnimation2();
    };
  };
}
const configUpdate = (from2, to2, easing, duration, render, timeoutController) => {
  var interKeys = getIntersectionKeys(from2, to2);
  if (easing == null) {
    return () => {
      render(_objectSpread$t(_objectSpread$t({}, from2), to2));
      return () => {
      };
    };
  }
  return easing.isStepper === true ? createStepperUpdate(from2, to2, easing, interKeys, render, timeoutController) : createTimingUpdate(from2, to2, easing, duration, interKeys, render, timeoutController);
};
var ACCURACY = 1e-4;
var cubicBezierFactor = (c1, c2) => [0, 3 * c1, 3 * c2 - 6 * c1, 3 * c1 - 3 * c2 + 1];
var evaluatePolynomial = (params, t) => params.map((param, i) => param * t ** i).reduce((pre, curr) => pre + curr);
var cubicBezier = (c1, c2) => (t) => {
  var params = cubicBezierFactor(c1, c2);
  return evaluatePolynomial(params, t);
};
var derivativeCubicBezier = (c1, c2) => (t) => {
  var params = cubicBezierFactor(c1, c2);
  var newParams = [...params.map((param, i) => param * i).slice(1), 0];
  return evaluatePolynomial(newParams, t);
};
var getBezierCoordinates = function getBezierCoordinates2() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  if (args.length === 1) {
    switch (args[0]) {
      case "linear":
        return [0, 0, 1, 1];
      case "ease":
        return [0.25, 0.1, 0.25, 1];
      case "ease-in":
        return [0.42, 0, 1, 1];
      case "ease-out":
        return [0.42, 0, 0.58, 1];
      case "ease-in-out":
        return [0, 0, 0.58, 1];
      default: {
        var _easing$;
        var easing = args[0].split("(");
        if (easing[0] === "cubic-bezier" && ((_easing$ = easing[1]) === null || _easing$ === void 0 ? void 0 : _easing$.split(")")[0].split(",").length) === 4) {
          var coords = easing[1].split(")")[0].split(",").map((x) => parseFloat(x));
          return [coords[0], coords[1], coords[2], coords[3]];
        }
      }
    }
  }
  if (args.length === 4) {
    return args;
  }
  return [0, 0, 1, 1];
};
var createBezierEasing = (x1, y1, x2, y2) => {
  var curveX = cubicBezier(x1, x2);
  var curveY = cubicBezier(y1, y2);
  var derCurveX = derivativeCubicBezier(x1, x2);
  var rangeValue = (value) => {
    if (value > 1) {
      return 1;
    }
    if (value < 0) {
      return 0;
    }
    return value;
  };
  var bezier = (_t) => {
    var t = _t > 1 ? 1 : _t;
    var x = t;
    for (var i = 0; i < 8; ++i) {
      var evalT = curveX(x) - t;
      var derVal = derCurveX(x);
      if (Math.abs(evalT - t) < ACCURACY || derVal < ACCURACY) {
        return curveY(x);
      }
      x = rangeValue(x - evalT / derVal);
    }
    return curveY(x);
  };
  bezier.isStepper = false;
  return bezier;
};
var configBezier = function configBezier2() {
  return createBezierEasing(...getBezierCoordinates(...arguments));
};
var configSpring = function configSpring2() {
  var config2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
  var {
    stiff = 100,
    damping = 8,
    dt = 17
  } = config2;
  var stepper = (currX, destX, currV) => {
    var FSpring = -(currX - destX) * stiff;
    var FDamping = currV * damping;
    var newV = currV + (FSpring - FDamping) * dt / 1e3;
    var newX = currV * dt / 1e3 + currX;
    if (Math.abs(newX - destX) < ACCURACY && Math.abs(newV) < ACCURACY) {
      return [destX, 0];
    }
    return [newX, newV];
  };
  stepper.isStepper = true;
  stepper.dt = dt;
  return stepper;
};
var configEasing = (easing) => {
  if (typeof easing === "string") {
    switch (easing) {
      case "ease":
      case "ease-in-out":
      case "ease-out":
      case "ease-in":
      case "linear":
        return configBezier(easing);
      case "spring":
        return configSpring();
      default:
        if (easing.split("(")[0] === "cubic-bezier") {
          return configBezier(easing);
        }
    }
  }
  if (typeof easing === "function") {
    return easing;
  }
  return null;
};
function createAnimateManager(timeoutController) {
  var currStyle;
  var handleChange = () => null;
  var shouldStop = false;
  var cancelTimeout = null;
  var setStyle = (_style) => {
    if (shouldStop) {
      return;
    }
    if (Array.isArray(_style)) {
      if (!_style.length) {
        return;
      }
      var styles = _style;
      var [curr, ...restStyles] = styles;
      if (typeof curr === "number") {
        cancelTimeout = timeoutController.setTimeout(setStyle.bind(null, restStyles), curr);
        return;
      }
      setStyle(curr);
      cancelTimeout = timeoutController.setTimeout(setStyle.bind(null, restStyles));
      return;
    }
    if (typeof _style === "string") {
      currStyle = _style;
      handleChange(currStyle);
    }
    if (typeof _style === "object") {
      currStyle = _style;
      handleChange(currStyle);
    }
    if (typeof _style === "function") {
      _style();
    }
  };
  return {
    stop: () => {
      shouldStop = true;
    },
    start: (style) => {
      shouldStop = false;
      if (cancelTimeout) {
        cancelTimeout();
        cancelTimeout = null;
      }
      setStyle(style);
    },
    subscribe: (_handleChange) => {
      handleChange = _handleChange;
      return () => {
        handleChange = () => null;
      };
    },
    getTimeoutController: () => timeoutController
  };
}
class RequestAnimationFrameTimeoutController {
  setTimeout(callback) {
    var delay = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
    var startTime = performance.now();
    var requestId = null;
    var executeCallback = (now) => {
      if (now - startTime >= delay) {
        callback(now);
      } else if (typeof requestAnimationFrame === "function") {
        requestId = requestAnimationFrame(executeCallback);
      }
    };
    requestId = requestAnimationFrame(executeCallback);
    return () => {
      if (requestId != null) {
        cancelAnimationFrame(requestId);
      }
    };
  }
}
function createDefaultAnimationManager() {
  return createAnimateManager(new RequestAnimationFrameTimeoutController());
}
var AnimationManagerContext = /* @__PURE__ */ createContext(createDefaultAnimationManager);
function useAnimationManager(animationId, animationManagerFromProps) {
  var contextAnimationManager = useContext(AnimationManagerContext);
  return useMemo(() => animationManagerFromProps !== null && animationManagerFromProps !== void 0 ? animationManagerFromProps : contextAnimationManager(animationId), [animationId, animationManagerFromProps, contextAnimationManager]);
}
var defaultJavascriptAnimateProps = {
  begin: 0,
  duration: 1e3,
  easing: "ease",
  isActive: true,
  canBegin: true,
  onAnimationEnd: () => {
  },
  onAnimationStart: () => {
  }
};
var from = {
  t: 0
};
var to = {
  t: 1
};
function JavascriptAnimate(outsideProps) {
  var props = resolveDefaultProps(outsideProps, defaultJavascriptAnimateProps);
  var {
    isActive,
    canBegin,
    duration,
    easing,
    begin,
    onAnimationEnd,
    onAnimationStart,
    children
  } = props;
  var animationManager = useAnimationManager(props.animationId, props.animationManager);
  var [style, setStyle] = useState(isActive ? from : to);
  var stopJSAnimation = useRef(null);
  useEffect(() => {
    if (!isActive) {
      setStyle(to);
    }
  }, [isActive]);
  useEffect(() => {
    if (!isActive || !canBegin) {
      return noop$1;
    }
    var startAnimation = configUpdate(from, to, configEasing(easing), duration, setStyle, animationManager.getTimeoutController());
    var onAnimationActive = () => {
      stopJSAnimation.current = startAnimation();
    };
    animationManager.start([onAnimationStart, begin, onAnimationActive, duration, onAnimationEnd]);
    return () => {
      animationManager.stop();
      if (stopJSAnimation.current) {
        stopJSAnimation.current();
      }
      onAnimationEnd();
    };
  }, [isActive, canBegin, duration, easing, begin, onAnimationStart, onAnimationEnd, animationManager]);
  return children(style.t);
}
function useAnimationId(input) {
  var prefix = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "animation-";
  var animationId = useRef(uniqueId(prefix));
  var prevProps = useRef(input);
  if (prevProps.current !== input) {
    animationId.current = uniqueId(prefix);
    prevProps.current = input;
  }
  return animationId.current;
}
var _excluded$j = ["radius"], _excluded2$a = ["radius"];
function ownKeys$s(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$s(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$s(Object(t), true).forEach(function(r3) {
      _defineProperty$u(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$s(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$u(e, r2, t) {
  return (r2 = _toPropertyKey$u(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$u(t) {
  var i = _toPrimitive$u(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$u(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$l() {
  return _extends$l = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$l.apply(null, arguments);
}
function _objectWithoutProperties$j(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$j(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$j(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var getRectanglePath = (x, y, width, height, radius) => {
  var maxRadius = Math.min(Math.abs(width) / 2, Math.abs(height) / 2);
  var ySign = height >= 0 ? 1 : -1;
  var xSign = width >= 0 ? 1 : -1;
  var clockWise = height >= 0 && width >= 0 || height < 0 && width < 0 ? 1 : 0;
  var path2;
  if (maxRadius > 0 && radius instanceof Array) {
    var newRadius = [0, 0, 0, 0];
    for (var i = 0, len = 4; i < len; i++) {
      newRadius[i] = radius[i] > maxRadius ? maxRadius : radius[i];
    }
    path2 = "M".concat(x, ",").concat(y + ySign * newRadius[0]);
    if (newRadius[0] > 0) {
      path2 += "A ".concat(newRadius[0], ",").concat(newRadius[0], ",0,0,").concat(clockWise, ",").concat(x + xSign * newRadius[0], ",").concat(y);
    }
    path2 += "L ".concat(x + width - xSign * newRadius[1], ",").concat(y);
    if (newRadius[1] > 0) {
      path2 += "A ".concat(newRadius[1], ",").concat(newRadius[1], ",0,0,").concat(clockWise, ",\n        ").concat(x + width, ",").concat(y + ySign * newRadius[1]);
    }
    path2 += "L ".concat(x + width, ",").concat(y + height - ySign * newRadius[2]);
    if (newRadius[2] > 0) {
      path2 += "A ".concat(newRadius[2], ",").concat(newRadius[2], ",0,0,").concat(clockWise, ",\n        ").concat(x + width - xSign * newRadius[2], ",").concat(y + height);
    }
    path2 += "L ".concat(x + xSign * newRadius[3], ",").concat(y + height);
    if (newRadius[3] > 0) {
      path2 += "A ".concat(newRadius[3], ",").concat(newRadius[3], ",0,0,").concat(clockWise, ",\n        ").concat(x, ",").concat(y + height - ySign * newRadius[3]);
    }
    path2 += "Z";
  } else if (maxRadius > 0 && radius === +radius && radius > 0) {
    var _newRadius = Math.min(maxRadius, radius);
    path2 = "M ".concat(x, ",").concat(y + ySign * _newRadius, "\n            A ").concat(_newRadius, ",").concat(_newRadius, ",0,0,").concat(clockWise, ",").concat(x + xSign * _newRadius, ",").concat(y, "\n            L ").concat(x + width - xSign * _newRadius, ",").concat(y, "\n            A ").concat(_newRadius, ",").concat(_newRadius, ",0,0,").concat(clockWise, ",").concat(x + width, ",").concat(y + ySign * _newRadius, "\n            L ").concat(x + width, ",").concat(y + height - ySign * _newRadius, "\n            A ").concat(_newRadius, ",").concat(_newRadius, ",0,0,").concat(clockWise, ",").concat(x + width - xSign * _newRadius, ",").concat(y + height, "\n            L ").concat(x + xSign * _newRadius, ",").concat(y + height, "\n            A ").concat(_newRadius, ",").concat(_newRadius, ",0,0,").concat(clockWise, ",").concat(x, ",").concat(y + height - ySign * _newRadius, " Z");
  } else {
    path2 = "M ".concat(x, ",").concat(y, " h ").concat(width, " v ").concat(height, " h ").concat(-width, " Z");
  }
  return path2;
};
var defaultProps$5 = {
  x: 0,
  y: 0,
  width: 0,
  height: 0,
  // The radius of border
  // The radius of four corners when radius is a number
  // The radius of left-top, right-top, right-bottom, left-bottom when radius is an array
  radius: 0,
  isAnimationActive: false,
  isUpdateAnimationActive: false,
  animationBegin: 0,
  animationDuration: 1500,
  animationEasing: "ease"
};
var Rectangle = (rectangleProps) => {
  var props = resolveDefaultProps(rectangleProps, defaultProps$5);
  var pathRef = useRef(null);
  var [totalLength, setTotalLength] = useState(-1);
  useEffect(() => {
    if (pathRef.current && pathRef.current.getTotalLength) {
      try {
        var pathTotalLength = pathRef.current.getTotalLength();
        if (pathTotalLength) {
          setTotalLength(pathTotalLength);
        }
      } catch (_unused) {
      }
    }
  }, []);
  var {
    x,
    y,
    width,
    height,
    radius,
    className
  } = props;
  var {
    animationEasing,
    animationDuration,
    animationBegin,
    isAnimationActive,
    isUpdateAnimationActive
  } = props;
  var prevWidthRef = useRef(width);
  var prevHeightRef = useRef(height);
  var prevXRef = useRef(x);
  var prevYRef = useRef(y);
  var animationIdInput = useMemo(() => ({
    x,
    y,
    width,
    height,
    radius
  }), [x, y, width, height, radius]);
  var animationId = useAnimationId(animationIdInput, "rectangle-");
  if (x !== +x || y !== +y || width !== +width || height !== +height || width === 0 || height === 0) {
    return null;
  }
  var layerClass = clsx("recharts-rectangle", className);
  if (!isUpdateAnimationActive) {
    var _svgPropertiesAndEven = svgPropertiesAndEvents(props), {
      radius: _
    } = _svgPropertiesAndEven, otherPathProps = _objectWithoutProperties$j(_svgPropertiesAndEven, _excluded$j);
    return /* @__PURE__ */ React.createElement("path", _extends$l({}, otherPathProps, {
      radius: typeof radius === "number" ? radius : void 0,
      className: layerClass,
      d: getRectanglePath(x, y, width, height, radius)
    }));
  }
  var prevWidth = prevWidthRef.current;
  var prevHeight = prevHeightRef.current;
  var prevX = prevXRef.current;
  var prevY = prevYRef.current;
  var from2 = "0px ".concat(totalLength === -1 ? 1 : totalLength, "px");
  var to2 = "".concat(totalLength, "px 0px");
  var transition = getTransitionVal(["strokeDasharray"], animationDuration, typeof animationEasing === "string" ? animationEasing : defaultProps$5.animationEasing);
  return /* @__PURE__ */ React.createElement(JavascriptAnimate, {
    animationId,
    key: animationId,
    canBegin: totalLength > 0,
    duration: animationDuration,
    easing: animationEasing,
    isActive: isUpdateAnimationActive,
    begin: animationBegin
  }, (t) => {
    var currWidth = interpolate(prevWidth, width, t);
    var currHeight = interpolate(prevHeight, height, t);
    var currX = interpolate(prevX, x, t);
    var currY = interpolate(prevY, y, t);
    if (pathRef.current) {
      prevWidthRef.current = currWidth;
      prevHeightRef.current = currHeight;
      prevXRef.current = currX;
      prevYRef.current = currY;
    }
    var animationStyle;
    if (!isAnimationActive) {
      animationStyle = {
        strokeDasharray: to2
      };
    } else if (t > 0) {
      animationStyle = {
        transition,
        strokeDasharray: to2
      };
    } else {
      animationStyle = {
        strokeDasharray: from2
      };
    }
    var _svgPropertiesAndEven2 = svgPropertiesAndEvents(props), {
      radius: _2
    } = _svgPropertiesAndEven2, otherPathProps2 = _objectWithoutProperties$j(_svgPropertiesAndEven2, _excluded2$a);
    return /* @__PURE__ */ React.createElement("path", _extends$l({}, otherPathProps2, {
      radius: typeof radius === "number" ? radius : void 0,
      className: layerClass,
      d: getRectanglePath(currX, currY, currWidth, currHeight, radius),
      ref: pathRef,
      style: _objectSpread$s(_objectSpread$s({}, animationStyle), props.style)
    }));
  });
};
function ownKeys$r(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$r(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$r(Object(t), true).forEach(function(r3) {
      _defineProperty$t(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$r(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$t(e, r2, t) {
  return (r2 = _toPropertyKey$t(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$t(t) {
  var i = _toPrimitive$t(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$t(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var RADIAN = Math.PI / 180;
var radianToDegree = (angleInRadian) => angleInRadian * 180 / Math.PI;
var polarToCartesian = (cx, cy, radius, angle) => ({
  x: cx + Math.cos(-RADIAN * angle) * radius,
  y: cy + Math.sin(-RADIAN * angle) * radius
});
var getMaxRadius = function getMaxRadius2(width, height) {
  var offset = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
  return Math.min(Math.abs(width - (offset.left || 0) - (offset.right || 0)), Math.abs(height - (offset.top || 0) - (offset.bottom || 0))) / 2;
};
var distanceBetweenPoints = (point, anotherPoint) => {
  var {
    x: x1,
    y: y1
  } = point;
  var {
    x: x2,
    y: y2
  } = anotherPoint;
  return Math.sqrt((x1 - x2) ** 2 + (y1 - y2) ** 2);
};
var getAngleOfPoint = (_ref2, _ref22) => {
  var {
    x,
    y
  } = _ref2;
  var {
    cx,
    cy
  } = _ref22;
  var radius = distanceBetweenPoints({
    x,
    y
  }, {
    x: cx,
    y: cy
  });
  if (radius <= 0) {
    return {
      radius,
      angle: 0
    };
  }
  var cos = (x - cx) / radius;
  var angleInRadian = Math.acos(cos);
  if (y > cy) {
    angleInRadian = 2 * Math.PI - angleInRadian;
  }
  return {
    radius,
    angle: radianToDegree(angleInRadian),
    angleInRadian
  };
};
var formatAngleOfSector = (_ref3) => {
  var {
    startAngle,
    endAngle
  } = _ref3;
  var startCnt = Math.floor(startAngle / 360);
  var endCnt = Math.floor(endAngle / 360);
  var min = Math.min(startCnt, endCnt);
  return {
    startAngle: startAngle - min * 360,
    endAngle: endAngle - min * 360
  };
};
var reverseFormatAngleOfSector = (angle, _ref4) => {
  var {
    startAngle,
    endAngle
  } = _ref4;
  var startCnt = Math.floor(startAngle / 360);
  var endCnt = Math.floor(endAngle / 360);
  var min = Math.min(startCnt, endCnt);
  return angle + min * 360;
};
var inRangeOfSector = (_ref5, viewBox) => {
  var {
    chartX: x,
    chartY: y
  } = _ref5;
  var {
    radius,
    angle
  } = getAngleOfPoint({
    x,
    y
  }, viewBox);
  var {
    innerRadius,
    outerRadius
  } = viewBox;
  if (radius < innerRadius || radius > outerRadius) {
    return null;
  }
  if (radius === 0) {
    return null;
  }
  var {
    startAngle,
    endAngle
  } = formatAngleOfSector(viewBox);
  var formatAngle = angle;
  var inRange;
  if (startAngle <= endAngle) {
    while (formatAngle > endAngle) {
      formatAngle -= 360;
    }
    while (formatAngle < startAngle) {
      formatAngle += 360;
    }
    inRange = formatAngle >= startAngle && formatAngle <= endAngle;
  } else {
    while (formatAngle > startAngle) {
      formatAngle -= 360;
    }
    while (formatAngle < endAngle) {
      formatAngle += 360;
    }
    inRange = formatAngle >= endAngle && formatAngle <= startAngle;
  }
  if (inRange) {
    return _objectSpread$r(_objectSpread$r({}, viewBox), {}, {
      radius,
      angle: reverseFormatAngleOfSector(formatAngle, viewBox)
    });
  }
  return null;
};
function getRadialCursorPoints(activeCoordinate) {
  var {
    cx,
    cy,
    radius,
    startAngle,
    endAngle
  } = activeCoordinate;
  var startPoint = polarToCartesian(cx, cy, radius, startAngle);
  var endPoint = polarToCartesian(cx, cy, radius, endAngle);
  return {
    points: [startPoint, endPoint],
    cx,
    cy,
    radius,
    startAngle,
    endAngle
  };
}
function _extends$k() {
  return _extends$k = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$k.apply(null, arguments);
}
var getDeltaAngle$1 = (startAngle, endAngle) => {
  var sign = mathSign(endAngle - startAngle);
  var deltaAngle = Math.min(Math.abs(endAngle - startAngle), 359.999);
  return sign * deltaAngle;
};
var getTangentCircle = (_ref2) => {
  var {
    cx,
    cy,
    radius,
    angle,
    sign,
    isExternal,
    cornerRadius,
    cornerIsExternal
  } = _ref2;
  var centerRadius = cornerRadius * (isExternal ? 1 : -1) + radius;
  var theta = Math.asin(cornerRadius / centerRadius) / RADIAN;
  var centerAngle = cornerIsExternal ? angle : angle + sign * theta;
  var center = polarToCartesian(cx, cy, centerRadius, centerAngle);
  var circleTangency = polarToCartesian(cx, cy, radius, centerAngle);
  var lineTangencyAngle = cornerIsExternal ? angle - sign * theta : angle;
  var lineTangency = polarToCartesian(cx, cy, centerRadius * Math.cos(theta * RADIAN), lineTangencyAngle);
  return {
    center,
    circleTangency,
    lineTangency,
    theta
  };
};
var getSectorPath = (_ref2) => {
  var {
    cx,
    cy,
    innerRadius,
    outerRadius,
    startAngle,
    endAngle
  } = _ref2;
  var angle = getDeltaAngle$1(startAngle, endAngle);
  var tempEndAngle = startAngle + angle;
  var outerStartPoint = polarToCartesian(cx, cy, outerRadius, startAngle);
  var outerEndPoint = polarToCartesian(cx, cy, outerRadius, tempEndAngle);
  var path2 = "M ".concat(outerStartPoint.x, ",").concat(outerStartPoint.y, "\n    A ").concat(outerRadius, ",").concat(outerRadius, ",0,\n    ").concat(+(Math.abs(angle) > 180), ",").concat(+(startAngle > tempEndAngle), ",\n    ").concat(outerEndPoint.x, ",").concat(outerEndPoint.y, "\n  ");
  if (innerRadius > 0) {
    var innerStartPoint = polarToCartesian(cx, cy, innerRadius, startAngle);
    var innerEndPoint = polarToCartesian(cx, cy, innerRadius, tempEndAngle);
    path2 += "L ".concat(innerEndPoint.x, ",").concat(innerEndPoint.y, "\n            A ").concat(innerRadius, ",").concat(innerRadius, ",0,\n            ").concat(+(Math.abs(angle) > 180), ",").concat(+(startAngle <= tempEndAngle), ",\n            ").concat(innerStartPoint.x, ",").concat(innerStartPoint.y, " Z");
  } else {
    path2 += "L ".concat(cx, ",").concat(cy, " Z");
  }
  return path2;
};
var getSectorWithCorner = (_ref3) => {
  var {
    cx,
    cy,
    innerRadius,
    outerRadius,
    cornerRadius,
    forceCornerRadius,
    cornerIsExternal,
    startAngle,
    endAngle
  } = _ref3;
  var sign = mathSign(endAngle - startAngle);
  var {
    circleTangency: soct,
    lineTangency: solt,
    theta: sot
  } = getTangentCircle({
    cx,
    cy,
    radius: outerRadius,
    angle: startAngle,
    sign,
    cornerRadius,
    cornerIsExternal
  });
  var {
    circleTangency: eoct,
    lineTangency: eolt,
    theta: eot
  } = getTangentCircle({
    cx,
    cy,
    radius: outerRadius,
    angle: endAngle,
    sign: -sign,
    cornerRadius,
    cornerIsExternal
  });
  var outerArcAngle = cornerIsExternal ? Math.abs(startAngle - endAngle) : Math.abs(startAngle - endAngle) - sot - eot;
  if (outerArcAngle < 0) {
    if (forceCornerRadius) {
      return "M ".concat(solt.x, ",").concat(solt.y, "\n        a").concat(cornerRadius, ",").concat(cornerRadius, ",0,0,1,").concat(cornerRadius * 2, ",0\n        a").concat(cornerRadius, ",").concat(cornerRadius, ",0,0,1,").concat(-cornerRadius * 2, ",0\n      ");
    }
    return getSectorPath({
      cx,
      cy,
      innerRadius,
      outerRadius,
      startAngle,
      endAngle
    });
  }
  var path2 = "M ".concat(solt.x, ",").concat(solt.y, "\n    A").concat(cornerRadius, ",").concat(cornerRadius, ",0,0,").concat(+(sign < 0), ",").concat(soct.x, ",").concat(soct.y, "\n    A").concat(outerRadius, ",").concat(outerRadius, ",0,").concat(+(outerArcAngle > 180), ",").concat(+(sign < 0), ",").concat(eoct.x, ",").concat(eoct.y, "\n    A").concat(cornerRadius, ",").concat(cornerRadius, ",0,0,").concat(+(sign < 0), ",").concat(eolt.x, ",").concat(eolt.y, "\n  ");
  if (innerRadius > 0) {
    var {
      circleTangency: sict,
      lineTangency: silt,
      theta: sit
    } = getTangentCircle({
      cx,
      cy,
      radius: innerRadius,
      angle: startAngle,
      sign,
      isExternal: true,
      cornerRadius,
      cornerIsExternal
    });
    var {
      circleTangency: eict,
      lineTangency: eilt,
      theta: eit
    } = getTangentCircle({
      cx,
      cy,
      radius: innerRadius,
      angle: endAngle,
      sign: -sign,
      isExternal: true,
      cornerRadius,
      cornerIsExternal
    });
    var innerArcAngle = cornerIsExternal ? Math.abs(startAngle - endAngle) : Math.abs(startAngle - endAngle) - sit - eit;
    if (innerArcAngle < 0 && cornerRadius === 0) {
      return "".concat(path2, "L").concat(cx, ",").concat(cy, "Z");
    }
    path2 += "L".concat(eilt.x, ",").concat(eilt.y, "\n      A").concat(cornerRadius, ",").concat(cornerRadius, ",0,0,").concat(+(sign < 0), ",").concat(eict.x, ",").concat(eict.y, "\n      A").concat(innerRadius, ",").concat(innerRadius, ",0,").concat(+(innerArcAngle > 180), ",").concat(+(sign > 0), ",").concat(sict.x, ",").concat(sict.y, "\n      A").concat(cornerRadius, ",").concat(cornerRadius, ",0,0,").concat(+(sign < 0), ",").concat(silt.x, ",").concat(silt.y, "Z");
  } else {
    path2 += "L".concat(cx, ",").concat(cy, "Z");
  }
  return path2;
};
var defaultProps$4 = {
  cx: 0,
  cy: 0,
  innerRadius: 0,
  outerRadius: 0,
  startAngle: 0,
  endAngle: 0,
  cornerRadius: 0,
  forceCornerRadius: false,
  cornerIsExternal: false
};
var Sector = (sectorProps) => {
  var props = resolveDefaultProps(sectorProps, defaultProps$4);
  var {
    cx,
    cy,
    innerRadius,
    outerRadius,
    cornerRadius,
    forceCornerRadius,
    cornerIsExternal,
    startAngle,
    endAngle,
    className
  } = props;
  if (outerRadius < innerRadius || startAngle === endAngle) {
    return null;
  }
  var layerClass = clsx("recharts-sector", className);
  var deltaRadius = outerRadius - innerRadius;
  var cr = getPercentValue(cornerRadius, deltaRadius, 0, true);
  var path2;
  if (cr > 0 && Math.abs(startAngle - endAngle) < 360) {
    path2 = getSectorWithCorner({
      cx,
      cy,
      innerRadius,
      outerRadius,
      cornerRadius: Math.min(cr, deltaRadius / 2),
      forceCornerRadius,
      cornerIsExternal,
      startAngle,
      endAngle
    });
  } else {
    path2 = getSectorPath({
      cx,
      cy,
      innerRadius,
      outerRadius,
      startAngle,
      endAngle
    });
  }
  return /* @__PURE__ */ React.createElement("path", _extends$k({}, svgPropertiesAndEvents(props), {
    className: layerClass,
    d: path2
  }));
};
function getCursorPoints(layout, activeCoordinate, offset) {
  if (layout === "horizontal") {
    return [{
      x: activeCoordinate.x,
      y: offset.top
    }, {
      x: activeCoordinate.x,
      y: offset.top + offset.height
    }];
  }
  if (layout === "vertical") {
    return [{
      x: offset.left,
      y: activeCoordinate.y
    }, {
      x: offset.left + offset.width,
      y: activeCoordinate.y
    }];
  }
  if (isPolarCoordinate(activeCoordinate)) {
    if (layout === "centric") {
      var {
        cx,
        cy,
        innerRadius,
        outerRadius,
        angle
      } = activeCoordinate;
      var innerPoint = polarToCartesian(cx, cy, innerRadius, angle);
      var outerPoint = polarToCartesian(cx, cy, outerRadius, angle);
      return [{
        x: innerPoint.x,
        y: innerPoint.y
      }, {
        x: outerPoint.x,
        y: outerPoint.y
      }];
    }
    return getRadialCursorPoints(activeCoordinate);
  }
  return void 0;
}
var selectChartDataWithIndexes = (state2) => state2.chartData;
var selectChartDataAndAlwaysIgnoreIndexes = createSelector([selectChartDataWithIndexes], (dataState) => {
  var dataEndIndex = dataState.chartData != null ? dataState.chartData.length - 1 : 0;
  return {
    chartData: dataState.chartData,
    computedData: dataState.computedData,
    dataEndIndex,
    dataStartIndex: 0
  };
});
var selectChartDataWithIndexesIfNotInPanorama = (state2, _unused1, _unused2, isPanorama) => {
  if (isPanorama) {
    return selectChartDataAndAlwaysIgnoreIndexes(state2);
  }
  return selectChartDataWithIndexes(state2);
};
function isWellFormedNumberDomain(v) {
  if (Array.isArray(v) && v.length === 2) {
    var [min, max] = v;
    if (isWellBehavedNumber(min) && isWellBehavedNumber(max)) {
      return true;
    }
  }
  return false;
}
function extendDomain(providedDomain, boundaryDomain, allowDataOverflow) {
  if (allowDataOverflow) {
    return providedDomain;
  }
  return [Math.min(providedDomain[0], boundaryDomain[0]), Math.max(providedDomain[1], boundaryDomain[1])];
}
function numericalDomainSpecifiedWithoutRequiringData(userDomain, allowDataOverflow) {
  if (!allowDataOverflow) {
    return void 0;
  }
  if (typeof userDomain === "function") {
    return void 0;
  }
  if (Array.isArray(userDomain) && userDomain.length === 2) {
    var [providedMin, providedMax] = userDomain;
    var finalMin, finalMax;
    if (isWellBehavedNumber(providedMin)) {
      finalMin = providedMin;
    } else if (typeof providedMin === "function") {
      return void 0;
    }
    if (isWellBehavedNumber(providedMax)) {
      finalMax = providedMax;
    } else if (typeof providedMax === "function") {
      return void 0;
    }
    var candidate = [finalMin, finalMax];
    if (isWellFormedNumberDomain(candidate)) {
      return candidate;
    }
  }
  return void 0;
}
function parseNumericalUserDomain(userDomain, dataDomain, allowDataOverflow) {
  if (!allowDataOverflow && dataDomain == null) {
    return void 0;
  }
  if (typeof userDomain === "function" && dataDomain != null) {
    try {
      var result = userDomain(dataDomain, allowDataOverflow);
      if (isWellFormedNumberDomain(result)) {
        return extendDomain(result, dataDomain, allowDataOverflow);
      }
    } catch (_unused) {
    }
  }
  if (Array.isArray(userDomain) && userDomain.length === 2) {
    var [providedMin, providedMax] = userDomain;
    var finalMin, finalMax;
    if (providedMin === "auto") {
      if (dataDomain != null) {
        finalMin = Math.min(...dataDomain);
      }
    } else if (isNumber(providedMin)) {
      finalMin = providedMin;
    } else if (typeof providedMin === "function") {
      try {
        if (dataDomain != null) {
          finalMin = providedMin(dataDomain === null || dataDomain === void 0 ? void 0 : dataDomain[0]);
        }
      } catch (_unused2) {
      }
    } else if (typeof providedMin === "string" && MIN_VALUE_REG.test(providedMin)) {
      var match = MIN_VALUE_REG.exec(providedMin);
      if (match == null || dataDomain == null) {
        finalMin = void 0;
      } else {
        var value = +match[1];
        finalMin = dataDomain[0] - value;
      }
    } else {
      finalMin = dataDomain === null || dataDomain === void 0 ? void 0 : dataDomain[0];
    }
    if (providedMax === "auto") {
      if (dataDomain != null) {
        finalMax = Math.max(...dataDomain);
      }
    } else if (isNumber(providedMax)) {
      finalMax = providedMax;
    } else if (typeof providedMax === "function") {
      try {
        if (dataDomain != null) {
          finalMax = providedMax(dataDomain === null || dataDomain === void 0 ? void 0 : dataDomain[1]);
        }
      } catch (_unused3) {
      }
    } else if (typeof providedMax === "string" && MAX_VALUE_REG.test(providedMax)) {
      var _match = MAX_VALUE_REG.exec(providedMax);
      if (_match == null || dataDomain == null) {
        finalMax = void 0;
      } else {
        var _value = +_match[1];
        finalMax = dataDomain[1] + _value;
      }
    } else {
      finalMax = dataDomain === null || dataDomain === void 0 ? void 0 : dataDomain[1];
    }
    var candidate = [finalMin, finalMax];
    if (isWellFormedNumberDomain(candidate)) {
      if (dataDomain == null) {
        return candidate;
      }
      return extendDomain(candidate, dataDomain, allowDataOverflow);
    }
  }
  return void 0;
}
var identity = (i) => i;
var PLACE_HOLDER = {};
var isPlaceHolder = (val) => val === PLACE_HOLDER;
var curry0 = (fn) => function _curried() {
  if (arguments.length === 0 || arguments.length === 1 && isPlaceHolder(arguments.length <= 0 ? void 0 : arguments[0])) {
    return _curried;
  }
  return fn(...arguments);
};
var curryN = (n, fn) => {
  if (n === 1) {
    return fn;
  }
  return curry0(function() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    var argsLength = args.filter((arg) => arg !== PLACE_HOLDER).length;
    if (argsLength >= n) {
      return fn(...args);
    }
    return curryN(n - argsLength, curry0(function() {
      for (var _len2 = arguments.length, restArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        restArgs[_key2] = arguments[_key2];
      }
      var newArgs = args.map((arg) => isPlaceHolder(arg) ? restArgs.shift() : arg);
      return fn(...newArgs, ...restArgs);
    }));
  });
};
var curry = (fn) => curryN(fn.length, fn);
var range = (begin, end) => {
  var arr = [];
  for (var i = begin; i < end; ++i) {
    arr[i - begin] = i;
  }
  return arr;
};
var map = curry((fn, arr) => {
  if (Array.isArray(arr)) {
    return arr.map(fn);
  }
  return Object.keys(arr).map((key) => arr[key]).map(fn);
});
var compose = function compose2() {
  for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
    args[_key3] = arguments[_key3];
  }
  if (!args.length) {
    return identity;
  }
  var fns = args.reverse();
  var firstFn = fns[0];
  var tailsFn = fns.slice(1);
  return function() {
    return tailsFn.reduce((res, fn) => fn(res), firstFn(...arguments));
  };
};
var reverse = (arr) => {
  if (Array.isArray(arr)) {
    return arr.reverse();
  }
  return arr.split("").reverse().join("");
};
var memoize = (fn) => {
  var lastArgs = null;
  var lastResult2 = null;
  return function() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    if (lastArgs && args.every((val, i) => {
      var _lastArgs;
      return val === ((_lastArgs = lastArgs) === null || _lastArgs === void 0 ? void 0 : _lastArgs[i]);
    })) {
      return lastResult2;
    }
    lastArgs = args;
    lastResult2 = fn(...args);
    return lastResult2;
  };
};
function getDigitCount(value) {
  var result;
  if (value === 0) {
    result = 1;
  } else {
    result = Math.floor(new Decimal(value).abs().log(10).toNumber()) + 1;
  }
  return result;
}
function rangeStep(start, end, step) {
  var num = new Decimal(start);
  var i = 0;
  var result = [];
  while (num.lt(end) && i < 1e5) {
    result.push(num.toNumber());
    num = num.add(step);
    i++;
  }
  return result;
}
curry((a, b, t) => {
  var newA = +a;
  var newB = +b;
  return newA + t * (newB - newA);
});
curry((a, b, x) => {
  var diff = b - +a;
  diff = diff || Infinity;
  return (x - a) / diff;
});
curry((a, b, x) => {
  var diff = b - +a;
  diff = diff || Infinity;
  return Math.max(0, Math.min(1, (x - a) / diff));
});
var getValidInterval = (_ref2) => {
  var [min, max] = _ref2;
  var [validMin, validMax] = [min, max];
  if (min > max) {
    [validMin, validMax] = [max, min];
  }
  return [validMin, validMax];
};
var getFormatStep = (roughStep, allowDecimals, correctionFactor) => {
  if (roughStep.lte(0)) {
    return new Decimal(0);
  }
  var digitCount = getDigitCount(roughStep.toNumber());
  var digitCountValue = new Decimal(10).pow(digitCount);
  var stepRatio = roughStep.div(digitCountValue);
  var stepRatioScale = digitCount !== 1 ? 0.05 : 0.1;
  var amendStepRatio = new Decimal(Math.ceil(stepRatio.div(stepRatioScale).toNumber())).add(correctionFactor).mul(stepRatioScale);
  var formatStep = amendStepRatio.mul(digitCountValue);
  return allowDecimals ? new Decimal(formatStep.toNumber()) : new Decimal(Math.ceil(formatStep.toNumber()));
};
var getTickOfSingleValue = (value, tickCount, allowDecimals) => {
  var step = new Decimal(1);
  var middle = new Decimal(value);
  if (!middle.isint() && allowDecimals) {
    var absVal = Math.abs(value);
    if (absVal < 1) {
      step = new Decimal(10).pow(getDigitCount(value) - 1);
      middle = new Decimal(Math.floor(middle.div(step).toNumber())).mul(step);
    } else if (absVal > 1) {
      middle = new Decimal(Math.floor(value));
    }
  } else if (value === 0) {
    middle = new Decimal(Math.floor((tickCount - 1) / 2));
  } else if (!allowDecimals) {
    middle = new Decimal(Math.floor(value));
  }
  var middleIndex = Math.floor((tickCount - 1) / 2);
  var fn = compose(map((n) => middle.add(new Decimal(n - middleIndex).mul(step)).toNumber()), range);
  return fn(0, tickCount);
};
var _calculateStep = function calculateStep(min, max, tickCount, allowDecimals) {
  var correctionFactor = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 0;
  if (!Number.isFinite((max - min) / (tickCount - 1))) {
    return {
      step: new Decimal(0),
      tickMin: new Decimal(0),
      tickMax: new Decimal(0)
    };
  }
  var step = getFormatStep(new Decimal(max).sub(min).div(tickCount - 1), allowDecimals, correctionFactor);
  var middle;
  if (min <= 0 && max >= 0) {
    middle = new Decimal(0);
  } else {
    middle = new Decimal(min).add(max).div(2);
    middle = middle.sub(new Decimal(middle).mod(step));
  }
  var belowCount = Math.ceil(middle.sub(min).div(step).toNumber());
  var upCount = Math.ceil(new Decimal(max).sub(middle).div(step).toNumber());
  var scaleCount = belowCount + upCount + 1;
  if (scaleCount > tickCount) {
    return _calculateStep(min, max, tickCount, allowDecimals, correctionFactor + 1);
  }
  if (scaleCount < tickCount) {
    upCount = max > 0 ? upCount + (tickCount - scaleCount) : upCount;
    belowCount = max > 0 ? belowCount : belowCount + (tickCount - scaleCount);
  }
  return {
    step,
    tickMin: middle.sub(new Decimal(belowCount).mul(step)),
    tickMax: middle.add(new Decimal(upCount).mul(step))
  };
};
function getNiceTickValuesFn(_ref2) {
  var [min, max] = _ref2;
  var tickCount = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 6;
  var allowDecimals = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;
  var count2 = Math.max(tickCount, 2);
  var [cormin, cormax] = getValidInterval([min, max]);
  if (cormin === -Infinity || cormax === Infinity) {
    var _values = cormax === Infinity ? [cormin, ...range(0, tickCount - 1).map(() => Infinity)] : [...range(0, tickCount - 1).map(() => -Infinity), cormax];
    return min > max ? reverse(_values) : _values;
  }
  if (cormin === cormax) {
    return getTickOfSingleValue(cormin, tickCount, allowDecimals);
  }
  var {
    step,
    tickMin,
    tickMax
  } = _calculateStep(cormin, cormax, count2, allowDecimals, 0);
  var values = rangeStep(tickMin, tickMax.add(new Decimal(0.1).mul(step)), step);
  return min > max ? reverse(values) : values;
}
function getTickValuesFixedDomainFn(_ref3, tickCount) {
  var [min, max] = _ref3;
  var allowDecimals = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : true;
  var [cormin, cormax] = getValidInterval([min, max]);
  if (cormin === -Infinity || cormax === Infinity) {
    return [min, max];
  }
  if (cormin === cormax) {
    return [cormin];
  }
  var count2 = Math.max(tickCount, 2);
  var step = getFormatStep(new Decimal(cormax).sub(cormin).div(count2 - 1), allowDecimals, 0);
  var values = [...rangeStep(new Decimal(cormin), new Decimal(cormax), step), cormax];
  if (allowDecimals === false) {
    values = values.map((value) => Math.round(value));
  }
  return min > max ? reverse(values) : values;
}
var getNiceTickValues = memoize(getNiceTickValuesFn);
var getTickValuesFixedDomain = memoize(getTickValuesFixedDomainFn);
var selectRootMaxBarSize = (state2) => state2.rootProps.maxBarSize;
var selectBarGap = (state2) => state2.rootProps.barGap;
var selectBarCategoryGap = (state2) => state2.rootProps.barCategoryGap;
var selectRootBarSize = (state2) => state2.rootProps.barSize;
var selectStackOffsetType = (state2) => state2.rootProps.stackOffset;
var selectChartName = (state2) => state2.options.chartName;
var selectSyncId = (state2) => state2.rootProps.syncId;
var selectSyncMethod = (state2) => state2.rootProps.syncMethod;
var selectEventEmitter = (state2) => state2.options.eventEmitter;
var selectChartBaseValue = (state2) => state2.rootProps.baseValue;
var DefaultZIndexes = {
  /**
   * CartesianGrid and PolarGrid
   */
  grid: -100,
  /**
   * Background of Bar and RadialBar.
   * This is not visible by default but can be enabled by setting background={true} on Bar or RadialBar.
   */
  barBackground: -50,
  /*
   * other chart elements or custom elements without specific zIndex
   * render in here, at zIndex 0
   */
  /**
   * Area, Pie, Radar, and ReferenceArea
   */
  area: 100,
  /**
   * Cursor is embedded inside Tooltip and controlled by it.
   * The Tooltip itself has a separate portal and is not included in the zIndex system;
   * Cursor is the decoration inside the chart area. CursorRectangle is a rectangle box.
   * It renders below bar so that in a stacked bar chart the cursor rectangle does not hide the other bars.
   */
  cursorRectangle: 200,
  /**
   * Bar and RadialBar
   */
  bar: 300,
  /**
   * Line and ReferenceLine, and ErrorBor
   */
  line: 400,
  /**
   * XAxis and YAxis and PolarAngleAxis and PolarRadiusAxis ticks and lines and children
   */
  axis: 500,
  /**
   * Scatter and ReferenceDot,
   * and Dots of Line and Area and Radar if they have dot=true
   */
  scatter: 600,
  /**
   * Hovering over a Bar or RadialBar renders a highlight rectangle
   */
  activeBar: 1e3,
  /**
   * Cursor is embedded inside Tooltip and controlled by it.
   * The Tooltip itself has a separate portal and is not included in the zIndex system;
   * Cursor is the decoration inside the chart area, usually a cross or a box.
   * CursorLine is a line cursor rendered in Line, Area, Scatter, Radar charts.
   * It renders above the Line and Scatter so that it is always visible.
   * It renders below active dot so that the dot is always visible and shows the current point.
   * We're also assuming that the active dot is small enough that it does not fully cover the cursor line.
   *
   * This also applies to the radial cursor in RadialBarChart.
   */
  cursorLine: 1100,
  /**
   * Hovering over a Point in Line, Area, Scatter, Radar renders a highlight dot
   */
  activeDot: 1200,
  /**
   * LabelList and Label, including Axis labels
   */
  label: 2e3
};
var defaultPolarAngleAxisProps = {
  allowDuplicatedCategory: true,
  // if I set this to false then Tooltip synchronisation stops working in Radar, wtf
  angleAxisId: 0,
  reversed: false,
  scale: "auto",
  tick: true,
  type: "category"
};
var defaultPolarRadiusAxisProps = {
  allowDataOverflow: false,
  allowDuplicatedCategory: true,
  radiusAxisId: 0,
  scale: "auto",
  tick: true,
  tickCount: 5,
  type: "number"
};
var combineAxisRangeWithReverse = (axisSettings, axisRange) => {
  if (!axisSettings || !axisRange) {
    return void 0;
  }
  if (axisSettings !== null && axisSettings !== void 0 && axisSettings.reversed) {
    return [axisRange[1], axisRange[0]];
  }
  return axisRange;
};
var implicitAngleAxis = {
  allowDataOverflow: false,
  allowDecimals: false,
  allowDuplicatedCategory: false,
  // defaultPolarAngleAxisProps.allowDuplicatedCategory has it set to true but the actual axis rendering ignores the prop because reasons,
  dataKey: void 0,
  domain: void 0,
  id: defaultPolarAngleAxisProps.angleAxisId,
  includeHidden: false,
  name: void 0,
  reversed: defaultPolarAngleAxisProps.reversed,
  scale: defaultPolarAngleAxisProps.scale,
  tick: defaultPolarAngleAxisProps.tick,
  tickCount: void 0,
  ticks: void 0,
  type: defaultPolarAngleAxisProps.type,
  unit: void 0
};
var implicitRadiusAxis = {
  allowDataOverflow: defaultPolarRadiusAxisProps.allowDataOverflow,
  allowDecimals: false,
  allowDuplicatedCategory: defaultPolarRadiusAxisProps.allowDuplicatedCategory,
  dataKey: void 0,
  domain: void 0,
  id: defaultPolarRadiusAxisProps.radiusAxisId,
  includeHidden: false,
  name: void 0,
  reversed: false,
  scale: defaultPolarRadiusAxisProps.scale,
  tick: defaultPolarRadiusAxisProps.tick,
  tickCount: defaultPolarRadiusAxisProps.tickCount,
  ticks: void 0,
  type: defaultPolarRadiusAxisProps.type,
  unit: void 0
};
var implicitRadialBarAngleAxis = {
  allowDataOverflow: false,
  allowDecimals: false,
  allowDuplicatedCategory: defaultPolarAngleAxisProps.allowDuplicatedCategory,
  dataKey: void 0,
  domain: void 0,
  id: defaultPolarAngleAxisProps.angleAxisId,
  includeHidden: false,
  name: void 0,
  reversed: false,
  scale: defaultPolarAngleAxisProps.scale,
  tick: defaultPolarAngleAxisProps.tick,
  tickCount: void 0,
  ticks: void 0,
  type: "number",
  unit: void 0
};
var implicitRadialBarRadiusAxis = {
  allowDataOverflow: defaultPolarRadiusAxisProps.allowDataOverflow,
  allowDecimals: false,
  allowDuplicatedCategory: defaultPolarRadiusAxisProps.allowDuplicatedCategory,
  dataKey: void 0,
  domain: void 0,
  id: defaultPolarRadiusAxisProps.radiusAxisId,
  includeHidden: false,
  name: void 0,
  reversed: false,
  scale: defaultPolarRadiusAxisProps.scale,
  tick: defaultPolarRadiusAxisProps.tick,
  tickCount: defaultPolarRadiusAxisProps.tickCount,
  ticks: void 0,
  type: "category",
  unit: void 0
};
var selectAngleAxis = (state2, angleAxisId) => {
  if (state2.polarAxis.angleAxis[angleAxisId] != null) {
    return state2.polarAxis.angleAxis[angleAxisId];
  }
  if (state2.layout.layoutType === "radial") {
    return implicitRadialBarAngleAxis;
  }
  return implicitAngleAxis;
};
var selectRadiusAxis = (state2, radiusAxisId) => {
  if (state2.polarAxis.radiusAxis[radiusAxisId] != null) {
    return state2.polarAxis.radiusAxis[radiusAxisId];
  }
  if (state2.layout.layoutType === "radial") {
    return implicitRadialBarRadiusAxis;
  }
  return implicitRadiusAxis;
};
var selectPolarOptions = (state2) => state2.polarOptions;
var selectMaxRadius = createSelector([selectChartWidth, selectChartHeight, selectChartOffsetInternal], getMaxRadius);
var selectInnerRadius = createSelector([selectPolarOptions, selectMaxRadius], (polarChartOptions, maxRadius) => {
  if (polarChartOptions == null) {
    return void 0;
  }
  return getPercentValue(polarChartOptions.innerRadius, maxRadius, 0);
});
var selectOuterRadius = createSelector([selectPolarOptions, selectMaxRadius], (polarChartOptions, maxRadius) => {
  if (polarChartOptions == null) {
    return void 0;
  }
  return getPercentValue(polarChartOptions.outerRadius, maxRadius, maxRadius * 0.8);
});
var combineAngleAxisRange = (polarOptions) => {
  if (polarOptions == null) {
    return [0, 0];
  }
  var {
    startAngle,
    endAngle
  } = polarOptions;
  return [startAngle, endAngle];
};
var selectAngleAxisRange = createSelector([selectPolarOptions], combineAngleAxisRange);
createSelector([selectAngleAxis, selectAngleAxisRange], combineAxisRangeWithReverse);
var selectRadiusAxisRange = createSelector([selectMaxRadius, selectInnerRadius, selectOuterRadius], (maxRadius, innerRadius, outerRadius) => {
  if (maxRadius == null || innerRadius == null || outerRadius == null) {
    return void 0;
  }
  return [innerRadius, outerRadius];
});
createSelector([selectRadiusAxis, selectRadiusAxisRange], combineAxisRangeWithReverse);
var selectPolarViewBox = createSelector([selectChartLayout, selectPolarOptions, selectInnerRadius, selectOuterRadius, selectChartWidth, selectChartHeight], (layout, polarOptions, innerRadius, outerRadius, width, height) => {
  if (layout !== "centric" && layout !== "radial" || polarOptions == null || innerRadius == null || outerRadius == null) {
    return void 0;
  }
  var {
    cx,
    cy,
    startAngle,
    endAngle
  } = polarOptions;
  return {
    cx: getPercentValue(cx, width, width / 2),
    cy: getPercentValue(cy, height, height / 2),
    innerRadius,
    outerRadius,
    startAngle,
    endAngle,
    clockWise: false
    // this property look useful, why not use it?
  };
});
var pickAxisType = (_state, axisType) => axisType;
var pickAxisId = (_state, _axisType, axisId) => axisId;
function getStackSeriesIdentifier(graphicalItem) {
  return graphicalItem === null || graphicalItem === void 0 ? void 0 : graphicalItem.id;
}
function combineDisplayedStackedData(stackedGraphicalItems, _ref2, tooltipAxisSettings) {
  var {
    chartData = []
  } = _ref2;
  var {
    allowDuplicatedCategory,
    dataKey: tooltipDataKey
  } = tooltipAxisSettings;
  var knownItemsByDataKey = /* @__PURE__ */ new Map();
  stackedGraphicalItems.forEach((item) => {
    var _item$data;
    var resolvedData = (_item$data = item.data) !== null && _item$data !== void 0 ? _item$data : chartData;
    if (resolvedData == null || resolvedData.length === 0) {
      return;
    }
    var stackIdentifier = getStackSeriesIdentifier(item);
    resolvedData.forEach((entry2, index) => {
      var tooltipValue = tooltipDataKey == null || allowDuplicatedCategory ? index : String(getValueByDataKey(entry2, tooltipDataKey, null));
      var numericValue = getValueByDataKey(entry2, item.dataKey, 0);
      var curr;
      if (knownItemsByDataKey.has(tooltipValue)) {
        curr = knownItemsByDataKey.get(tooltipValue);
      } else {
        curr = {};
      }
      Object.assign(curr, {
        [stackIdentifier]: numericValue
      });
      knownItemsByDataKey.set(tooltipValue, curr);
    });
  });
  return Array.from(knownItemsByDataKey.values());
}
function isStacked(graphicalItem) {
  return graphicalItem.stackId != null && graphicalItem.dataKey != null;
}
var numberDomainEqualityCheck = (a, b) => {
  if (a === b) {
    return true;
  }
  if (a == null || b == null) {
    return false;
  }
  return a[0] === b[0] && a[1] === b[1];
};
function emptyArraysAreEqualCheck(a, b) {
  if (Array.isArray(a) && Array.isArray(b) && a.length === 0 && b.length === 0) {
    return true;
  }
  return a === b;
}
function arrayContentsAreEqualCheck(a, b) {
  if (a.length === b.length) {
    for (var i = 0; i < a.length; i++) {
      if (a[i] !== b[i]) {
        return false;
      }
    }
    return true;
  }
  return false;
}
var selectTooltipAxisType = (state2) => {
  var layout = selectChartLayout(state2);
  if (layout === "horizontal") {
    return "xAxis";
  }
  if (layout === "vertical") {
    return "yAxis";
  }
  if (layout === "centric") {
    return "angleAxis";
  }
  return "radiusAxis";
};
var selectTooltipAxisId = (state2) => state2.tooltip.settings.axisId;
function ownKeys$q(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$q(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$q(Object(t), true).forEach(function(r3) {
      _defineProperty$s(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$q(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$s(e, r2, t) {
  return (r2 = _toPropertyKey$s(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$s(t) {
  var i = _toPrimitive$s(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$s(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var defaultNumericDomain = [0, "auto"];
var implicitXAxis = {
  allowDataOverflow: false,
  allowDecimals: true,
  allowDuplicatedCategory: true,
  angle: 0,
  dataKey: void 0,
  domain: void 0,
  height: 30,
  hide: true,
  id: 0,
  includeHidden: false,
  interval: "preserveEnd",
  minTickGap: 5,
  mirror: false,
  name: void 0,
  orientation: "bottom",
  padding: {
    left: 0,
    right: 0
  },
  reversed: false,
  scale: "auto",
  tick: true,
  tickCount: 5,
  tickFormatter: void 0,
  ticks: void 0,
  type: "category",
  unit: void 0
};
var selectXAxisSettingsNoDefaults = (state2, axisId) => {
  return state2.cartesianAxis.xAxis[axisId];
};
var selectXAxisSettings = (state2, axisId) => {
  var axis = selectXAxisSettingsNoDefaults(state2, axisId);
  if (axis == null) {
    return implicitXAxis;
  }
  return axis;
};
var implicitYAxis = {
  allowDataOverflow: false,
  allowDecimals: true,
  allowDuplicatedCategory: true,
  angle: 0,
  dataKey: void 0,
  domain: defaultNumericDomain,
  hide: true,
  id: 0,
  includeHidden: false,
  interval: "preserveEnd",
  minTickGap: 5,
  mirror: false,
  name: void 0,
  orientation: "left",
  padding: {
    top: 0,
    bottom: 0
  },
  reversed: false,
  scale: "auto",
  tick: true,
  tickCount: 5,
  tickFormatter: void 0,
  ticks: void 0,
  type: "number",
  unit: void 0,
  width: DEFAULT_Y_AXIS_WIDTH
};
var selectYAxisSettingsNoDefaults = (state2, axisId) => {
  return state2.cartesianAxis.yAxis[axisId];
};
var selectYAxisSettings = (state2, axisId) => {
  var axis = selectYAxisSettingsNoDefaults(state2, axisId);
  if (axis == null) {
    return implicitYAxis;
  }
  return axis;
};
var implicitZAxis = {
  domain: [0, "auto"],
  includeHidden: false,
  reversed: false,
  allowDataOverflow: false,
  allowDuplicatedCategory: false,
  dataKey: void 0,
  id: 0,
  name: "",
  range: [64, 64],
  scale: "auto",
  type: "number",
  unit: ""
};
var selectZAxisSettings = (state2, axisId) => {
  var axis = state2.cartesianAxis.zAxis[axisId];
  if (axis == null) {
    return implicitZAxis;
  }
  return axis;
};
var selectBaseAxis = (state2, axisType, axisId) => {
  switch (axisType) {
    case "xAxis": {
      return selectXAxisSettings(state2, axisId);
    }
    case "yAxis": {
      return selectYAxisSettings(state2, axisId);
    }
    case "zAxis": {
      return selectZAxisSettings(state2, axisId);
    }
    case "angleAxis": {
      return selectAngleAxis(state2, axisId);
    }
    case "radiusAxis": {
      return selectRadiusAxis(state2, axisId);
    }
    default:
      throw new Error("Unexpected axis type: ".concat(axisType));
  }
};
var selectCartesianAxisSettings = (state2, axisType, axisId) => {
  switch (axisType) {
    case "xAxis": {
      return selectXAxisSettings(state2, axisId);
    }
    case "yAxis": {
      return selectYAxisSettings(state2, axisId);
    }
    default:
      throw new Error("Unexpected axis type: ".concat(axisType));
  }
};
var selectAxisSettings = (state2, axisType, axisId) => {
  switch (axisType) {
    case "xAxis": {
      return selectXAxisSettings(state2, axisId);
    }
    case "yAxis": {
      return selectYAxisSettings(state2, axisId);
    }
    case "angleAxis": {
      return selectAngleAxis(state2, axisId);
    }
    case "radiusAxis": {
      return selectRadiusAxis(state2, axisId);
    }
    default:
      throw new Error("Unexpected axis type: ".concat(axisType));
  }
};
var selectHasBar = (state2) => state2.graphicalItems.cartesianItems.some((item) => item.type === "bar") || state2.graphicalItems.polarItems.some((item) => item.type === "radialBar");
function itemAxisPredicate(axisType, axisId) {
  return (item) => {
    switch (axisType) {
      case "xAxis":
        return "xAxisId" in item && item.xAxisId === axisId;
      case "yAxis":
        return "yAxisId" in item && item.yAxisId === axisId;
      case "zAxis":
        return "zAxisId" in item && item.zAxisId === axisId;
      case "angleAxis":
        return "angleAxisId" in item && item.angleAxisId === axisId;
      case "radiusAxis":
        return "radiusAxisId" in item && item.radiusAxisId === axisId;
      default:
        return false;
    }
  };
}
var selectUnfilteredCartesianItems = (state2) => state2.graphicalItems.cartesianItems;
var selectAxisPredicate$1 = createSelector([pickAxisType, pickAxisId], itemAxisPredicate);
var combineGraphicalItemsSettings = (graphicalItems, axisSettings, axisPredicate) => graphicalItems.filter(axisPredicate).filter((item) => {
  if ((axisSettings === null || axisSettings === void 0 ? void 0 : axisSettings.includeHidden) === true) {
    return true;
  }
  return !item.hide;
});
var selectCartesianItemsSettings = createSelector([selectUnfilteredCartesianItems, selectBaseAxis, selectAxisPredicate$1], combineGraphicalItemsSettings, {
  memoizeOptions: {
    resultEqualityCheck: emptyArraysAreEqualCheck
  }
});
var selectStackedCartesianItemsSettings = createSelector([selectCartesianItemsSettings], (cartesianItems) => {
  return cartesianItems.filter((item) => item.type === "area" || item.type === "bar").filter(isStacked);
});
var filterGraphicalNotStackedItems = (cartesianItems) => cartesianItems.filter((item) => !("stackId" in item) || item.stackId === void 0);
var selectCartesianItemsSettingsExceptStacked = createSelector([selectCartesianItemsSettings], filterGraphicalNotStackedItems);
var combineGraphicalItemsData = (cartesianItems) => cartesianItems.map((item) => item.data).filter(Boolean).flat(1);
var selectCartesianGraphicalItemsData = createSelector([selectCartesianItemsSettings], combineGraphicalItemsData, {
  memoizeOptions: {
    resultEqualityCheck: emptyArraysAreEqualCheck
  }
});
var combineDisplayedData = (graphicalItemsData, _ref2) => {
  var {
    chartData = [],
    dataStartIndex,
    dataEndIndex
  } = _ref2;
  if (graphicalItemsData.length > 0) {
    return graphicalItemsData;
  }
  return chartData.slice(dataStartIndex, dataEndIndex + 1);
};
var selectDisplayedData$1 = createSelector([selectCartesianGraphicalItemsData, selectChartDataWithIndexesIfNotInPanorama], combineDisplayedData);
var combineAppliedValues = (data2, axisSettings, items) => {
  if ((axisSettings === null || axisSettings === void 0 ? void 0 : axisSettings.dataKey) != null) {
    return data2.map((item) => ({
      value: getValueByDataKey(item, axisSettings.dataKey)
    }));
  }
  if (items.length > 0) {
    return items.map((item) => item.dataKey).flatMap((dataKey) => data2.map((entry2) => ({
      value: getValueByDataKey(entry2, dataKey)
    })));
  }
  return data2.map((entry2) => ({
    value: entry2
  }));
};
var selectAllAppliedValues = createSelector([selectDisplayedData$1, selectBaseAxis, selectCartesianItemsSettings], combineAppliedValues);
function isErrorBarRelevantForAxisType(axisType, errorBar) {
  switch (axisType) {
    case "xAxis":
      return errorBar.direction === "x";
    case "yAxis":
      return errorBar.direction === "y";
    default:
      return false;
  }
}
function makeNumber(val) {
  if (isNumOrStr(val) || val instanceof Date) {
    var n = Number(val);
    if (isWellBehavedNumber(n)) {
      return n;
    }
  }
  return void 0;
}
function makeDomain(val) {
  if (Array.isArray(val)) {
    var attempt = [makeNumber(val[0]), makeNumber(val[1])];
    if (isWellFormedNumberDomain(attempt)) {
      return attempt;
    }
    return void 0;
  }
  var n = makeNumber(val);
  if (n == null) {
    return void 0;
  }
  return [n, n];
}
function onlyAllowNumbers(data2) {
  return data2.map(makeNumber).filter(isNotNil);
}
function getErrorDomainByDataKey(entry2, appliedValue, relevantErrorBars) {
  if (!relevantErrorBars || typeof appliedValue !== "number" || isNan(appliedValue)) {
    return [];
  }
  if (!relevantErrorBars.length) {
    return [];
  }
  return onlyAllowNumbers(relevantErrorBars.flatMap((eb) => {
    var errorValue = getValueByDataKey(entry2, eb.dataKey);
    var lowBound, highBound;
    if (Array.isArray(errorValue)) {
      [lowBound, highBound] = errorValue;
    } else {
      lowBound = highBound = errorValue;
    }
    if (!isWellBehavedNumber(lowBound) || !isWellBehavedNumber(highBound)) {
      return void 0;
    }
    return [appliedValue - lowBound, appliedValue + highBound];
  }));
}
var selectTooltipAxis = (state2) => {
  var axisType = selectTooltipAxisType(state2);
  var axisId = selectTooltipAxisId(state2);
  return selectAxisSettings(state2, axisType, axisId);
};
var selectTooltipAxisDataKey = createSelector([selectTooltipAxis], (axis) => axis === null || axis === void 0 ? void 0 : axis.dataKey);
var selectDisplayedStackedData = createSelector([selectStackedCartesianItemsSettings, selectChartDataWithIndexesIfNotInPanorama, selectTooltipAxis], combineDisplayedStackedData);
var combineStackGroups = (displayedData, items, stackOffsetType) => {
  var initialItemsGroups = {};
  var itemsGroup = items.reduce((acc, item) => {
    if (item.stackId == null) {
      return acc;
    }
    if (acc[item.stackId] == null) {
      acc[item.stackId] = [];
    }
    acc[item.stackId].push(item);
    return acc;
  }, initialItemsGroups);
  return Object.fromEntries(Object.entries(itemsGroup).map((_ref2) => {
    var [stackId, graphicalItems] = _ref2;
    var dataKeys = graphicalItems.map(getStackSeriesIdentifier);
    return [stackId, {
      // @ts-expect-error getStackedData requires that the input is array of objects, Recharts does not test for that
      stackedData: getStackedData(displayedData, dataKeys, stackOffsetType),
      graphicalItems
    }];
  }));
};
var selectStackGroups = createSelector([selectDisplayedStackedData, selectStackedCartesianItemsSettings, selectStackOffsetType], combineStackGroups);
var combineDomainOfStackGroups = (stackGroups, _ref3, axisType, domainFromUserPreference) => {
  var {
    dataStartIndex,
    dataEndIndex
  } = _ref3;
  if (domainFromUserPreference != null) {
    return void 0;
  }
  if (axisType === "zAxis") {
    return void 0;
  }
  var domainOfStackGroups = getDomainOfStackGroups(stackGroups, dataStartIndex, dataEndIndex);
  if (domainOfStackGroups != null && domainOfStackGroups[0] === 0 && domainOfStackGroups[1] === 0) {
    return void 0;
  }
  return domainOfStackGroups;
};
var selectAllowsDataOverflow = createSelector([selectBaseAxis], (axisSettings) => axisSettings.allowDataOverflow);
var getDomainDefinition = (axisSettings) => {
  var _axisSettings$domain;
  if (axisSettings == null || !("domain" in axisSettings)) {
    return defaultNumericDomain;
  }
  if (axisSettings.domain != null) {
    return axisSettings.domain;
  }
  if (axisSettings.ticks != null) {
    if (axisSettings.type === "number") {
      var allValues = onlyAllowNumbers(axisSettings.ticks);
      return [Math.min(...allValues), Math.max(...allValues)];
    }
    if (axisSettings.type === "category") {
      return axisSettings.ticks.map(String);
    }
  }
  return (_axisSettings$domain = axisSettings === null || axisSettings === void 0 ? void 0 : axisSettings.domain) !== null && _axisSettings$domain !== void 0 ? _axisSettings$domain : defaultNumericDomain;
};
var selectDomainDefinition = createSelector([selectBaseAxis], getDomainDefinition);
var selectDomainFromUserPreference = createSelector([selectDomainDefinition, selectAllowsDataOverflow], numericalDomainSpecifiedWithoutRequiringData);
var selectDomainOfStackGroups = createSelector([selectStackGroups, selectChartDataWithIndexes, pickAxisType, selectDomainFromUserPreference], combineDomainOfStackGroups, {
  memoizeOptions: {
    resultEqualityCheck: numberDomainEqualityCheck
  }
});
var selectAllErrorBarSettings = (state2) => state2.errorBars;
var combineRelevantErrorBarSettings = (cartesianItemsSettings, allErrorBarSettings, axisType) => {
  return cartesianItemsSettings.flatMap((item) => {
    return allErrorBarSettings[item.id];
  }).filter(Boolean).filter((e) => {
    return isErrorBarRelevantForAxisType(axisType, e);
  });
};
var mergeDomains = function mergeDomains2() {
  for (var _len = arguments.length, domains = new Array(_len), _key = 0; _key < _len; _key++) {
    domains[_key] = arguments[_key];
  }
  var allDomains = domains.filter(Boolean);
  if (allDomains.length === 0) {
    return void 0;
  }
  var allValues = allDomains.flat();
  var min = Math.min(...allValues);
  var max = Math.max(...allValues);
  return [min, max];
};
var combineDomainOfAllAppliedNumericalValuesIncludingErrorValues = (data2, axisSettings, items, errorBars, axisType) => {
  var lowerEnd, upperEnd;
  if (items.length > 0) {
    data2.forEach((entry2) => {
      items.forEach((item) => {
        var _errorBars$item$id, _axisSettings$dataKey;
        var relevantErrorBars = (_errorBars$item$id = errorBars[item.id]) === null || _errorBars$item$id === void 0 ? void 0 : _errorBars$item$id.filter((errorBar) => isErrorBarRelevantForAxisType(axisType, errorBar));
        var valueByDataKey = getValueByDataKey(entry2, (_axisSettings$dataKey = axisSettings.dataKey) !== null && _axisSettings$dataKey !== void 0 ? _axisSettings$dataKey : item.dataKey);
        var errorDomain = getErrorDomainByDataKey(entry2, valueByDataKey, relevantErrorBars);
        if (errorDomain.length >= 2) {
          var localLower = Math.min(...errorDomain);
          var localUpper = Math.max(...errorDomain);
          if (lowerEnd == null || localLower < lowerEnd) {
            lowerEnd = localLower;
          }
          if (upperEnd == null || localUpper > upperEnd) {
            upperEnd = localUpper;
          }
        }
        var dataValueDomain = makeDomain(valueByDataKey);
        if (dataValueDomain != null) {
          lowerEnd = lowerEnd == null ? dataValueDomain[0] : Math.min(lowerEnd, dataValueDomain[0]);
          upperEnd = upperEnd == null ? dataValueDomain[1] : Math.max(upperEnd, dataValueDomain[1]);
        }
      });
    });
  }
  if ((axisSettings === null || axisSettings === void 0 ? void 0 : axisSettings.dataKey) != null) {
    data2.forEach((item) => {
      var dataValueDomain = makeDomain(getValueByDataKey(item, axisSettings.dataKey));
      if (dataValueDomain != null) {
        lowerEnd = lowerEnd == null ? dataValueDomain[0] : Math.min(lowerEnd, dataValueDomain[0]);
        upperEnd = upperEnd == null ? dataValueDomain[1] : Math.max(upperEnd, dataValueDomain[1]);
      }
    });
  }
  if (isWellBehavedNumber(lowerEnd) && isWellBehavedNumber(upperEnd)) {
    return [lowerEnd, upperEnd];
  }
  return void 0;
};
var selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1 = createSelector([selectDisplayedData$1, selectBaseAxis, selectCartesianItemsSettingsExceptStacked, selectAllErrorBarSettings, pickAxisType], combineDomainOfAllAppliedNumericalValuesIncludingErrorValues, {
  memoizeOptions: {
    resultEqualityCheck: numberDomainEqualityCheck
  }
});
function onlyAllowNumbersAndStringsAndDates(item) {
  var {
    value
  } = item;
  if (isNumOrStr(value) || value instanceof Date) {
    return value;
  }
  return void 0;
}
var computeDomainOfTypeCategory = (allDataSquished, axisSettings, isCategorical) => {
  var categoricalDomain = allDataSquished.map(onlyAllowNumbersAndStringsAndDates).filter((v) => v != null);
  if (isCategorical && (axisSettings.dataKey == null || axisSettings.allowDuplicatedCategory && hasDuplicate(categoricalDomain))) {
    return range$1(0, allDataSquished.length);
  }
  if (axisSettings.allowDuplicatedCategory) {
    return categoricalDomain;
  }
  return Array.from(new Set(categoricalDomain));
};
var selectReferenceDots = (state2) => state2.referenceElements.dots;
var filterReferenceElements = (elements, axisType, axisId) => {
  return elements.filter((el) => el.ifOverflow === "extendDomain").filter((el) => {
    if (axisType === "xAxis") {
      return el.xAxisId === axisId;
    }
    return el.yAxisId === axisId;
  });
};
var selectReferenceDotsByAxis = createSelector([selectReferenceDots, pickAxisType, pickAxisId], filterReferenceElements);
var selectReferenceAreas = (state2) => state2.referenceElements.areas;
var selectReferenceAreasByAxis = createSelector([selectReferenceAreas, pickAxisType, pickAxisId], filterReferenceElements);
var selectReferenceLines = (state2) => state2.referenceElements.lines;
var selectReferenceLinesByAxis = createSelector([selectReferenceLines, pickAxisType, pickAxisId], filterReferenceElements);
var combineDotsDomain = (dots, axisType) => {
  var allCoords = onlyAllowNumbers(dots.map((dot) => axisType === "xAxis" ? dot.x : dot.y));
  if (allCoords.length === 0) {
    return void 0;
  }
  return [Math.min(...allCoords), Math.max(...allCoords)];
};
var selectReferenceDotsDomain = createSelector(selectReferenceDotsByAxis, pickAxisType, combineDotsDomain);
var combineAreasDomain = (areas, axisType) => {
  var allCoords = onlyAllowNumbers(areas.flatMap((area2) => [axisType === "xAxis" ? area2.x1 : area2.y1, axisType === "xAxis" ? area2.x2 : area2.y2]));
  if (allCoords.length === 0) {
    return void 0;
  }
  return [Math.min(...allCoords), Math.max(...allCoords)];
};
var selectReferenceAreasDomain = createSelector([selectReferenceAreasByAxis, pickAxisType], combineAreasDomain);
function extractXCoordinates(line2) {
  var _line$segment;
  if (line2.x != null) {
    return onlyAllowNumbers([line2.x]);
  }
  var segmentCoordinates = (_line$segment = line2.segment) === null || _line$segment === void 0 ? void 0 : _line$segment.map((s) => s.x);
  if (segmentCoordinates == null || segmentCoordinates.length === 0) {
    return [];
  }
  return onlyAllowNumbers(segmentCoordinates);
}
function extractYCoordinates(line2) {
  var _line$segment2;
  if (line2.y != null) {
    return onlyAllowNumbers([line2.y]);
  }
  var segmentCoordinates = (_line$segment2 = line2.segment) === null || _line$segment2 === void 0 ? void 0 : _line$segment2.map((s) => s.y);
  if (segmentCoordinates == null || segmentCoordinates.length === 0) {
    return [];
  }
  return onlyAllowNumbers(segmentCoordinates);
}
var combineLinesDomain = (lines, axisType) => {
  var allCoords = lines.flatMap((line2) => axisType === "xAxis" ? extractXCoordinates(line2) : extractYCoordinates(line2));
  if (allCoords.length === 0) {
    return void 0;
  }
  return [Math.min(...allCoords), Math.max(...allCoords)];
};
var selectReferenceLinesDomain = createSelector([selectReferenceLinesByAxis, pickAxisType], combineLinesDomain);
var selectReferenceElementsDomain = createSelector(selectReferenceDotsDomain, selectReferenceLinesDomain, selectReferenceAreasDomain, (dotsDomain, linesDomain, areasDomain) => {
  return mergeDomains(dotsDomain, areasDomain, linesDomain);
});
var combineNumericalDomain = (axisSettings, domainDefinition, domainFromUserPreference, domainOfStackGroups, dataAndErrorBarsDomain, referenceElementsDomain, layout, axisType) => {
  if (domainFromUserPreference != null) {
    return domainFromUserPreference;
  }
  var shouldIncludeDomainOfStackGroups = layout === "vertical" && axisType === "xAxis" || layout === "horizontal" && axisType === "yAxis";
  var mergedDomains = shouldIncludeDomainOfStackGroups ? mergeDomains(domainOfStackGroups, referenceElementsDomain, dataAndErrorBarsDomain) : mergeDomains(referenceElementsDomain, dataAndErrorBarsDomain);
  return parseNumericalUserDomain(domainDefinition, mergedDomains, axisSettings.allowDataOverflow);
};
var selectNumericalDomain = createSelector([selectBaseAxis, selectDomainDefinition, selectDomainFromUserPreference, selectDomainOfStackGroups, selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1, selectReferenceElementsDomain, selectChartLayout, pickAxisType], combineNumericalDomain, {
  memoizeOptions: {
    resultEqualityCheck: numberDomainEqualityCheck
  }
});
var expandDomain = [0, 1];
var combineAxisDomain = (axisSettings, layout, displayedData, allAppliedValues, stackOffsetType, axisType, numericalDomain) => {
  if ((axisSettings == null || displayedData == null || displayedData.length === 0) && numericalDomain === void 0) {
    return void 0;
  }
  var {
    dataKey,
    type
  } = axisSettings;
  var isCategorical = isCategoricalAxis(layout, axisType);
  if (isCategorical && dataKey == null) {
    var _displayedData$length;
    return range$1(0, (_displayedData$length = displayedData === null || displayedData === void 0 ? void 0 : displayedData.length) !== null && _displayedData$length !== void 0 ? _displayedData$length : 0);
  }
  if (type === "category") {
    return computeDomainOfTypeCategory(allAppliedValues, axisSettings, isCategorical);
  }
  if (stackOffsetType === "expand") {
    return expandDomain;
  }
  return numericalDomain;
};
var selectAxisDomain = createSelector([selectBaseAxis, selectChartLayout, selectDisplayedData$1, selectAllAppliedValues, selectStackOffsetType, pickAxisType, selectNumericalDomain], combineAxisDomain);
var combineRealScaleType = (axisConfig, layout, hasBar, chartType, axisType) => {
  if (axisConfig == null) {
    return void 0;
  }
  var {
    scale,
    type
  } = axisConfig;
  if (scale === "auto") {
    if (layout === "radial" && axisType === "radiusAxis") {
      return "band";
    }
    if (layout === "radial" && axisType === "angleAxis") {
      return "linear";
    }
    if (type === "category" && chartType && (chartType.indexOf("LineChart") >= 0 || chartType.indexOf("AreaChart") >= 0 || chartType.indexOf("ComposedChart") >= 0 && !hasBar)) {
      return "point";
    }
    if (type === "category") {
      return "band";
    }
    return "linear";
  }
  if (typeof scale === "string") {
    var name = "scale".concat(upperFirst(scale));
    return name in d3Scales ? name : "point";
  }
  return void 0;
};
var selectRealScaleType = createSelector([selectBaseAxis, selectChartLayout, selectHasBar, selectChartName, pickAxisType], combineRealScaleType);
function getD3ScaleFromType(realScaleType) {
  if (realScaleType == null) {
    return void 0;
  }
  if (realScaleType in d3Scales) {
    return d3Scales[realScaleType]();
  }
  var name = "scale".concat(upperFirst(realScaleType));
  if (name in d3Scales) {
    return d3Scales[name]();
  }
  return void 0;
}
function combineScaleFunction(axis, realScaleType, axisDomain, axisRange) {
  if (axisDomain == null || axisRange == null) {
    return void 0;
  }
  if (typeof axis.scale === "function") {
    return axis.scale.copy().domain(axisDomain).range(axisRange);
  }
  var d3ScaleFunction = getD3ScaleFromType(realScaleType);
  if (d3ScaleFunction == null) {
    return void 0;
  }
  var scale = d3ScaleFunction.domain(axisDomain).range(axisRange);
  checkDomainOfScale(scale);
  return scale;
}
var combineNiceTicks = (axisDomain, axisSettings, realScaleType) => {
  var domainDefinition = getDomainDefinition(axisSettings);
  if (realScaleType !== "auto" && realScaleType !== "linear") {
    return void 0;
  }
  if (axisSettings != null && axisSettings.tickCount && Array.isArray(domainDefinition) && (domainDefinition[0] === "auto" || domainDefinition[1] === "auto") && isWellFormedNumberDomain(axisDomain)) {
    return getNiceTickValues(axisDomain, axisSettings.tickCount, axisSettings.allowDecimals);
  }
  if (axisSettings != null && axisSettings.tickCount && axisSettings.type === "number" && isWellFormedNumberDomain(axisDomain)) {
    return getTickValuesFixedDomain(axisDomain, axisSettings.tickCount, axisSettings.allowDecimals);
  }
  return void 0;
};
var selectNiceTicks = createSelector([selectAxisDomain, selectAxisSettings, selectRealScaleType], combineNiceTicks);
var combineAxisDomainWithNiceTicks = (axisSettings, domain, niceTicks, axisType) => {
  if (
    /*
     * Angle axis for some reason uses nice ticks when rendering axis tick labels,
     * but doesn't use nice ticks for extending domain like all the other axes do.
     * Not really sure why? Is there a good reason,
     * or is it just because someone added support for nice ticks to the other axes and forgot this one?
     */
    axisType !== "angleAxis" && (axisSettings === null || axisSettings === void 0 ? void 0 : axisSettings.type) === "number" && isWellFormedNumberDomain(domain) && Array.isArray(niceTicks) && niceTicks.length > 0
  ) {
    var minFromDomain = domain[0];
    var minFromTicks = niceTicks[0];
    var maxFromDomain = domain[1];
    var maxFromTicks = niceTicks[niceTicks.length - 1];
    return [Math.min(minFromDomain, minFromTicks), Math.max(maxFromDomain, maxFromTicks)];
  }
  return domain;
};
var selectAxisDomainIncludingNiceTicks = createSelector([selectBaseAxis, selectAxisDomain, selectNiceTicks, pickAxisType], combineAxisDomainWithNiceTicks);
var selectSmallestDistanceBetweenValues = createSelector(selectAllAppliedValues, selectBaseAxis, (allDataSquished, axisSettings) => {
  if (!axisSettings || axisSettings.type !== "number") {
    return void 0;
  }
  var smallestDistanceBetweenValues = Infinity;
  var sortedValues = Array.from(onlyAllowNumbers(allDataSquished.map((d) => d.value))).sort((a, b) => a - b);
  if (sortedValues.length < 2) {
    return Infinity;
  }
  var diff = sortedValues[sortedValues.length - 1] - sortedValues[0];
  if (diff === 0) {
    return Infinity;
  }
  for (var i = 0; i < sortedValues.length - 1; i++) {
    var distance = sortedValues[i + 1] - sortedValues[i];
    smallestDistanceBetweenValues = Math.min(smallestDistanceBetweenValues, distance);
  }
  return smallestDistanceBetweenValues / diff;
});
var selectCalculatedPadding = createSelector(selectSmallestDistanceBetweenValues, selectChartLayout, selectBarCategoryGap, selectChartOffsetInternal, (_1, _2, _3, padding) => padding, (smallestDistanceInPercent, layout, barCategoryGap, offset, padding) => {
  if (!isWellBehavedNumber(smallestDistanceInPercent)) {
    return 0;
  }
  var rangeWidth = layout === "vertical" ? offset.height : offset.width;
  if (padding === "gap") {
    return smallestDistanceInPercent * rangeWidth / 2;
  }
  if (padding === "no-gap") {
    var gap = getPercentValue(barCategoryGap, smallestDistanceInPercent * rangeWidth);
    var halfBand = smallestDistanceInPercent * rangeWidth / 2;
    return halfBand - gap - (halfBand - gap) / rangeWidth * gap;
  }
  return 0;
});
var selectCalculatedXAxisPadding = (state2, axisId) => {
  var xAxisSettings = selectXAxisSettings(state2, axisId);
  if (xAxisSettings == null || typeof xAxisSettings.padding !== "string") {
    return 0;
  }
  return selectCalculatedPadding(state2, "xAxis", axisId, xAxisSettings.padding);
};
var selectCalculatedYAxisPadding = (state2, axisId) => {
  var yAxisSettings = selectYAxisSettings(state2, axisId);
  if (yAxisSettings == null || typeof yAxisSettings.padding !== "string") {
    return 0;
  }
  return selectCalculatedPadding(state2, "yAxis", axisId, yAxisSettings.padding);
};
var selectXAxisPadding = createSelector(selectXAxisSettings, selectCalculatedXAxisPadding, (xAxisSettings, calculated) => {
  var _padding$left, _padding$right;
  if (xAxisSettings == null) {
    return {
      left: 0,
      right: 0
    };
  }
  var {
    padding
  } = xAxisSettings;
  if (typeof padding === "string") {
    return {
      left: calculated,
      right: calculated
    };
  }
  return {
    left: ((_padding$left = padding.left) !== null && _padding$left !== void 0 ? _padding$left : 0) + calculated,
    right: ((_padding$right = padding.right) !== null && _padding$right !== void 0 ? _padding$right : 0) + calculated
  };
});
var selectYAxisPadding = createSelector(selectYAxisSettings, selectCalculatedYAxisPadding, (yAxisSettings, calculated) => {
  var _padding$top, _padding$bottom;
  if (yAxisSettings == null) {
    return {
      top: 0,
      bottom: 0
    };
  }
  var {
    padding
  } = yAxisSettings;
  if (typeof padding === "string") {
    return {
      top: calculated,
      bottom: calculated
    };
  }
  return {
    top: ((_padding$top = padding.top) !== null && _padding$top !== void 0 ? _padding$top : 0) + calculated,
    bottom: ((_padding$bottom = padding.bottom) !== null && _padding$bottom !== void 0 ? _padding$bottom : 0) + calculated
  };
});
var combineXAxisRange = createSelector([selectChartOffsetInternal, selectXAxisPadding, selectBrushDimensions, selectBrushSettings, (_state, _axisId, isPanorama) => isPanorama], (offset, padding, brushDimensions, _ref4, isPanorama) => {
  var {
    padding: brushPadding
  } = _ref4;
  if (isPanorama) {
    return [brushPadding.left, brushDimensions.width - brushPadding.right];
  }
  return [offset.left + padding.left, offset.left + offset.width - padding.right];
});
var combineYAxisRange = createSelector([selectChartOffsetInternal, selectChartLayout, selectYAxisPadding, selectBrushDimensions, selectBrushSettings, (_state, _axisId, isPanorama) => isPanorama], (offset, layout, padding, brushDimensions, _ref5, isPanorama) => {
  var {
    padding: brushPadding
  } = _ref5;
  if (isPanorama) {
    return [brushDimensions.height - brushPadding.bottom, brushPadding.top];
  }
  if (layout === "horizontal") {
    return [offset.top + offset.height - padding.bottom, offset.top + padding.top];
  }
  return [offset.top + padding.top, offset.top + offset.height - padding.bottom];
});
var selectAxisRange = (state2, axisType, axisId, isPanorama) => {
  var _selectZAxisSettings;
  switch (axisType) {
    case "xAxis":
      return combineXAxisRange(state2, axisId, isPanorama);
    case "yAxis":
      return combineYAxisRange(state2, axisId, isPanorama);
    case "zAxis":
      return (_selectZAxisSettings = selectZAxisSettings(state2, axisId)) === null || _selectZAxisSettings === void 0 ? void 0 : _selectZAxisSettings.range;
    case "angleAxis":
      return selectAngleAxisRange(state2);
    case "radiusAxis":
      return selectRadiusAxisRange(state2, axisId);
    default:
      return void 0;
  }
};
var selectAxisRangeWithReverse = createSelector([selectBaseAxis, selectAxisRange], combineAxisRangeWithReverse);
var selectAxisScale = createSelector([selectBaseAxis, selectRealScaleType, selectAxisDomainIncludingNiceTicks, selectAxisRangeWithReverse], combineScaleFunction);
createSelector([selectCartesianItemsSettings, selectAllErrorBarSettings, pickAxisType], combineRelevantErrorBarSettings);
function compareIds(a, b) {
  if (a.id < b.id) {
    return -1;
  }
  if (a.id > b.id) {
    return 1;
  }
  return 0;
}
var pickAxisOrientation = (_state, orientation) => orientation;
var pickMirror = (_state, _orientation, mirror) => mirror;
var selectAllXAxesWithOffsetType = createSelector(selectAllXAxes, pickAxisOrientation, pickMirror, (allAxes, orientation, mirror) => allAxes.filter((axis) => axis.orientation === orientation).filter((axis) => axis.mirror === mirror).sort(compareIds));
var selectAllYAxesWithOffsetType = createSelector(selectAllYAxes, pickAxisOrientation, pickMirror, (allAxes, orientation, mirror) => allAxes.filter((axis) => axis.orientation === orientation).filter((axis) => axis.mirror === mirror).sort(compareIds));
var getXAxisSize = (offset, axisSettings) => {
  return {
    width: offset.width,
    height: axisSettings.height
  };
};
var getYAxisSize = (offset, axisSettings) => {
  var width = typeof axisSettings.width === "number" ? axisSettings.width : DEFAULT_Y_AXIS_WIDTH;
  return {
    width,
    height: offset.height
  };
};
var selectXAxisSize = createSelector(selectChartOffsetInternal, selectXAxisSettings, getXAxisSize);
var combineXAxisPositionStartingPoint = (offset, orientation, chartHeight) => {
  switch (orientation) {
    case "top":
      return offset.top;
    case "bottom":
      return chartHeight - offset.bottom;
    default:
      return 0;
  }
};
var combineYAxisPositionStartingPoint = (offset, orientation, chartWidth) => {
  switch (orientation) {
    case "left":
      return offset.left;
    case "right":
      return chartWidth - offset.right;
    default:
      return 0;
  }
};
var selectAllXAxesOffsetSteps = createSelector(selectChartHeight, selectChartOffsetInternal, selectAllXAxesWithOffsetType, pickAxisOrientation, pickMirror, (chartHeight, offset, allAxesWithSameOffsetType, orientation, mirror) => {
  var steps = {};
  var position;
  allAxesWithSameOffsetType.forEach((axis) => {
    var axisSize = getXAxisSize(offset, axis);
    if (position == null) {
      position = combineXAxisPositionStartingPoint(offset, orientation, chartHeight);
    }
    var needSpace = orientation === "top" && !mirror || orientation === "bottom" && mirror;
    steps[axis.id] = position - Number(needSpace) * axisSize.height;
    position += (needSpace ? -1 : 1) * axisSize.height;
  });
  return steps;
});
var selectAllYAxesOffsetSteps = createSelector(selectChartWidth, selectChartOffsetInternal, selectAllYAxesWithOffsetType, pickAxisOrientation, pickMirror, (chartWidth, offset, allAxesWithSameOffsetType, orientation, mirror) => {
  var steps = {};
  var position;
  allAxesWithSameOffsetType.forEach((axis) => {
    var axisSize = getYAxisSize(offset, axis);
    if (position == null) {
      position = combineYAxisPositionStartingPoint(offset, orientation, chartWidth);
    }
    var needSpace = orientation === "left" && !mirror || orientation === "right" && mirror;
    steps[axis.id] = position - Number(needSpace) * axisSize.width;
    position += (needSpace ? -1 : 1) * axisSize.width;
  });
  return steps;
});
var selectXAxisOffsetSteps = (state2, axisId) => {
  var axisSettings = selectXAxisSettings(state2, axisId);
  if (axisSettings == null) {
    return void 0;
  }
  return selectAllXAxesOffsetSteps(state2, axisSettings.orientation, axisSettings.mirror);
};
var selectXAxisPosition = createSelector([selectChartOffsetInternal, selectXAxisSettings, selectXAxisOffsetSteps, (_, axisId) => axisId], (offset, axisSettings, allSteps, axisId) => {
  if (axisSettings == null) {
    return void 0;
  }
  var stepOfThisAxis = allSteps === null || allSteps === void 0 ? void 0 : allSteps[axisId];
  if (stepOfThisAxis == null) {
    return {
      x: offset.left,
      y: 0
    };
  }
  return {
    x: offset.left,
    y: stepOfThisAxis
  };
});
var selectYAxisOffsetSteps = (state2, axisId) => {
  var axisSettings = selectYAxisSettings(state2, axisId);
  if (axisSettings == null) {
    return void 0;
  }
  return selectAllYAxesOffsetSteps(state2, axisSettings.orientation, axisSettings.mirror);
};
var selectYAxisPosition = createSelector([selectChartOffsetInternal, selectYAxisSettings, selectYAxisOffsetSteps, (_, axisId) => axisId], (offset, axisSettings, allSteps, axisId) => {
  if (axisSettings == null) {
    return void 0;
  }
  var stepOfThisAxis = allSteps === null || allSteps === void 0 ? void 0 : allSteps[axisId];
  if (stepOfThisAxis == null) {
    return {
      x: 0,
      y: offset.top
    };
  }
  return {
    x: stepOfThisAxis,
    y: offset.top
  };
});
var selectYAxisSize = createSelector(selectChartOffsetInternal, selectYAxisSettings, (offset, axisSettings) => {
  var width = typeof axisSettings.width === "number" ? axisSettings.width : DEFAULT_Y_AXIS_WIDTH;
  return {
    width,
    height: offset.height
  };
});
var selectCartesianAxisSize = (state2, axisType, axisId) => {
  switch (axisType) {
    case "xAxis": {
      return selectXAxisSize(state2, axisId).width;
    }
    case "yAxis": {
      return selectYAxisSize(state2, axisId).height;
    }
    default: {
      return void 0;
    }
  }
};
var combineDuplicateDomain = (chartLayout, appliedValues, axis, axisType) => {
  if (axis == null) {
    return void 0;
  }
  var {
    allowDuplicatedCategory,
    type,
    dataKey
  } = axis;
  var isCategorical = isCategoricalAxis(chartLayout, axisType);
  var allData = appliedValues.map((av) => av.value);
  if (dataKey && isCategorical && type === "category" && allowDuplicatedCategory && hasDuplicate(allData)) {
    return allData;
  }
  return void 0;
};
var selectDuplicateDomain = createSelector([selectChartLayout, selectAllAppliedValues, selectBaseAxis, pickAxisType], combineDuplicateDomain);
var combineCategoricalDomain = (layout, appliedValues, axis, axisType) => {
  if (axis == null || axis.dataKey == null) {
    return void 0;
  }
  var {
    type,
    scale
  } = axis;
  var isCategorical = isCategoricalAxis(layout, axisType);
  if (isCategorical && (type === "number" || scale !== "auto")) {
    return appliedValues.map((d) => d.value);
  }
  return void 0;
};
var selectCategoricalDomain = createSelector([selectChartLayout, selectAllAppliedValues, selectAxisSettings, pickAxisType], combineCategoricalDomain);
var selectAxisPropsNeededForCartesianGridTicksGenerator = createSelector([selectChartLayout, selectCartesianAxisSettings, selectRealScaleType, selectAxisScale, selectDuplicateDomain, selectCategoricalDomain, selectAxisRange, selectNiceTicks, pickAxisType], (layout, axis, realScaleType, scale, duplicateDomain, categoricalDomain, axisRange, niceTicks, axisType) => {
  if (axis == null) {
    return void 0;
  }
  var isCategorical = isCategoricalAxis(layout, axisType);
  return {
    angle: axis.angle,
    interval: axis.interval,
    minTickGap: axis.minTickGap,
    orientation: axis.orientation,
    tick: axis.tick,
    tickCount: axis.tickCount,
    tickFormatter: axis.tickFormatter,
    ticks: axis.ticks,
    type: axis.type,
    unit: axis.unit,
    axisType,
    categoricalDomain,
    duplicateDomain,
    isCategorical,
    niceTicks,
    range: axisRange,
    realScaleType,
    scale
  };
});
var combineAxisTicks = (layout, axis, realScaleType, scale, niceTicks, axisRange, duplicateDomain, categoricalDomain, axisType) => {
  if (axis == null || scale == null) {
    return void 0;
  }
  var isCategorical = isCategoricalAxis(layout, axisType);
  var {
    type,
    ticks,
    tickCount
  } = axis;
  var offsetForBand = realScaleType === "scaleBand" && typeof scale.bandwidth === "function" ? scale.bandwidth() / 2 : 2;
  var offset = type === "category" && scale.bandwidth ? scale.bandwidth() / offsetForBand : 0;
  offset = axisType === "angleAxis" && axisRange != null && axisRange.length >= 2 ? mathSign(axisRange[0] - axisRange[1]) * 2 * offset : offset;
  var ticksOrNiceTicks = ticks || niceTicks;
  if (ticksOrNiceTicks) {
    var result = ticksOrNiceTicks.map((entry2, index) => {
      var scaleContent = duplicateDomain ? duplicateDomain.indexOf(entry2) : entry2;
      return {
        index,
        // If the scaleContent is not a number, the coordinate will be NaN.
        // That could be the case for example with a PointScale and a string as domain.
        coordinate: scale(scaleContent) + offset,
        value: entry2,
        offset
      };
    });
    return result.filter((row) => isWellBehavedNumber(row.coordinate));
  }
  if (isCategorical && categoricalDomain) {
    return categoricalDomain.map((entry2, index) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      index,
      offset
    })).filter((row) => isWellBehavedNumber(row.coordinate));
  }
  if (scale.ticks) {
    return scale.ticks(tickCount).map((entry2) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      offset
    }));
  }
  return scale.domain().map((entry2, index) => ({
    coordinate: scale(entry2) + offset,
    value: duplicateDomain ? duplicateDomain[entry2] : entry2,
    index,
    offset
  }));
};
var selectTicksOfAxis = createSelector([selectChartLayout, selectAxisSettings, selectRealScaleType, selectAxisScale, selectNiceTicks, selectAxisRange, selectDuplicateDomain, selectCategoricalDomain, pickAxisType], combineAxisTicks);
var combineGraphicalItemTicks = (layout, axis, scale, axisRange, duplicateDomain, categoricalDomain, axisType) => {
  if (axis == null || scale == null || axisRange == null || axisRange[0] === axisRange[1]) {
    return void 0;
  }
  var isCategorical = isCategoricalAxis(layout, axisType);
  var {
    tickCount
  } = axis;
  var offset = 0;
  offset = axisType === "angleAxis" && (axisRange === null || axisRange === void 0 ? void 0 : axisRange.length) >= 2 ? mathSign(axisRange[0] - axisRange[1]) * 2 * offset : offset;
  if (isCategorical && categoricalDomain) {
    return categoricalDomain.map((entry2, index) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      index,
      offset
    }));
  }
  if (scale.ticks) {
    return scale.ticks(tickCount).map((entry2) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      offset
    }));
  }
  return scale.domain().map((entry2, index) => ({
    coordinate: scale(entry2) + offset,
    value: duplicateDomain ? duplicateDomain[entry2] : entry2,
    index,
    offset
  }));
};
var selectTicksOfGraphicalItem = createSelector([selectChartLayout, selectAxisSettings, selectAxisScale, selectAxisRange, selectDuplicateDomain, selectCategoricalDomain, pickAxisType], combineGraphicalItemTicks);
var selectAxisWithScale = createSelector(selectBaseAxis, selectAxisScale, (axis, scale) => {
  if (axis == null || scale == null) {
    return void 0;
  }
  return _objectSpread$q(_objectSpread$q({}, axis), {}, {
    scale
  });
});
var selectZAxisScale = createSelector([selectBaseAxis, selectRealScaleType, selectAxisDomain, selectAxisRangeWithReverse], combineScaleFunction);
createSelector((state2, _axisType, axisId) => selectZAxisSettings(state2, axisId), selectZAxisScale, (axis, scale) => {
  if (axis == null || scale == null) {
    return void 0;
  }
  return _objectSpread$q(_objectSpread$q({}, axis), {}, {
    scale
  });
});
var selectChartDirection = createSelector([selectChartLayout, selectAllXAxes, selectAllYAxes], (layout, allXAxes, allYAxes) => {
  switch (layout) {
    case "horizontal": {
      return allXAxes.some((axis) => axis.reversed) ? "right-to-left" : "left-to-right";
    }
    case "vertical": {
      return allYAxes.some((axis) => axis.reversed) ? "bottom-to-top" : "top-to-bottom";
    }
    // TODO: make this better. For now, right arrow triggers "forward", left arrow "back"
    // however, the tooltip moves an unintuitive direction because of how the indices are rendered
    case "centric":
    case "radial": {
      return "left-to-right";
    }
    default: {
      return void 0;
    }
  }
});
var selectDefaultTooltipEventType = (state2) => state2.options.defaultTooltipEventType;
var selectValidateTooltipEventTypes = (state2) => state2.options.validateTooltipEventTypes;
function combineTooltipEventType(shared, defaultTooltipEventType, validateTooltipEventTypes) {
  if (shared == null) {
    return defaultTooltipEventType;
  }
  var eventType = shared ? "axis" : "item";
  if (validateTooltipEventTypes == null) {
    return defaultTooltipEventType;
  }
  return validateTooltipEventTypes.includes(eventType) ? eventType : defaultTooltipEventType;
}
function selectTooltipEventType$1(state2, shared) {
  var defaultTooltipEventType = selectDefaultTooltipEventType(state2);
  var validateTooltipEventTypes = selectValidateTooltipEventTypes(state2);
  return combineTooltipEventType(shared, defaultTooltipEventType, validateTooltipEventTypes);
}
function useTooltipEventType(shared) {
  return useAppSelector((state2) => selectTooltipEventType$1(state2, shared));
}
var combineActiveLabel = (tooltipTicks, activeIndex) => {
  var _tooltipTicks$n;
  var n = Number(activeIndex);
  if (isNan(n) || activeIndex == null) {
    return void 0;
  }
  return n >= 0 ? tooltipTicks === null || tooltipTicks === void 0 || (_tooltipTicks$n = tooltipTicks[n]) === null || _tooltipTicks$n === void 0 ? void 0 : _tooltipTicks$n.value : void 0;
};
var selectTooltipSettings = (state2) => state2.tooltip.settings;
var noInteraction = {
  active: false,
  index: null,
  dataKey: void 0,
  coordinate: void 0
};
var initialState$9 = {
  itemInteraction: {
    click: noInteraction,
    hover: noInteraction
  },
  axisInteraction: {
    click: noInteraction,
    hover: noInteraction
  },
  keyboardInteraction: noInteraction,
  syncInteraction: {
    active: false,
    index: null,
    dataKey: void 0,
    label: void 0,
    coordinate: void 0,
    sourceViewBox: void 0
  },
  tooltipItemPayloads: [],
  settings: {
    shared: void 0,
    trigger: "hover",
    axisId: 0,
    active: false,
    defaultIndex: void 0
  }
};
var tooltipSlice = createSlice({
  name: "tooltip",
  initialState: initialState$9,
  reducers: {
    addTooltipEntrySettings: {
      reducer(state2, action2) {
        state2.tooltipItemPayloads.push(castDraft(action2.payload));
      },
      prepare: prepareAutoBatched()
    },
    removeTooltipEntrySettings: {
      reducer(state2, action2) {
        var index = current(state2).tooltipItemPayloads.indexOf(castDraft(action2.payload));
        if (index > -1) {
          state2.tooltipItemPayloads.splice(index, 1);
        }
      },
      prepare: prepareAutoBatched()
    },
    setTooltipSettingsState(state2, action2) {
      state2.settings = action2.payload;
    },
    setActiveMouseOverItemIndex(state2, action2) {
      state2.syncInteraction.active = false;
      state2.keyboardInteraction.active = false;
      state2.itemInteraction.hover.active = true;
      state2.itemInteraction.hover.index = action2.payload.activeIndex;
      state2.itemInteraction.hover.dataKey = action2.payload.activeDataKey;
      state2.itemInteraction.hover.coordinate = action2.payload.activeCoordinate;
    },
    mouseLeaveChart(state2) {
      state2.itemInteraction.hover.active = false;
      state2.axisInteraction.hover.active = false;
    },
    mouseLeaveItem(state2) {
      state2.itemInteraction.hover.active = false;
    },
    setActiveClickItemIndex(state2, action2) {
      state2.syncInteraction.active = false;
      state2.itemInteraction.click.active = true;
      state2.keyboardInteraction.active = false;
      state2.itemInteraction.click.index = action2.payload.activeIndex;
      state2.itemInteraction.click.dataKey = action2.payload.activeDataKey;
      state2.itemInteraction.click.coordinate = action2.payload.activeCoordinate;
    },
    setMouseOverAxisIndex(state2, action2) {
      state2.syncInteraction.active = false;
      state2.axisInteraction.hover.active = true;
      state2.keyboardInteraction.active = false;
      state2.axisInteraction.hover.index = action2.payload.activeIndex;
      state2.axisInteraction.hover.dataKey = action2.payload.activeDataKey;
      state2.axisInteraction.hover.coordinate = action2.payload.activeCoordinate;
    },
    setMouseClickAxisIndex(state2, action2) {
      state2.syncInteraction.active = false;
      state2.keyboardInteraction.active = false;
      state2.axisInteraction.click.active = true;
      state2.axisInteraction.click.index = action2.payload.activeIndex;
      state2.axisInteraction.click.dataKey = action2.payload.activeDataKey;
      state2.axisInteraction.click.coordinate = action2.payload.activeCoordinate;
    },
    setSyncInteraction(state2, action2) {
      state2.syncInteraction = action2.payload;
    },
    setKeyboardInteraction(state2, action2) {
      state2.keyboardInteraction.active = action2.payload.active;
      state2.keyboardInteraction.index = action2.payload.activeIndex;
      state2.keyboardInteraction.coordinate = action2.payload.activeCoordinate;
      state2.keyboardInteraction.dataKey = action2.payload.activeDataKey;
    }
  }
});
var {
  addTooltipEntrySettings,
  removeTooltipEntrySettings,
  setTooltipSettingsState,
  setActiveMouseOverItemIndex,
  mouseLeaveItem,
  mouseLeaveChart,
  setActiveClickItemIndex,
  setMouseOverAxisIndex,
  setMouseClickAxisIndex,
  setSyncInteraction,
  setKeyboardInteraction
} = tooltipSlice.actions;
var tooltipReducer = tooltipSlice.reducer;
function ownKeys$p(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$p(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$p(Object(t), true).forEach(function(r3) {
      _defineProperty$r(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$p(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$r(e, r2, t) {
  return (r2 = _toPropertyKey$r(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$r(t) {
  var i = _toPrimitive$r(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$r(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function chooseAppropriateMouseInteraction(tooltipState, tooltipEventType, trigger) {
  if (tooltipEventType === "axis") {
    if (trigger === "click") {
      return tooltipState.axisInteraction.click;
    }
    return tooltipState.axisInteraction.hover;
  }
  if (trigger === "click") {
    return tooltipState.itemInteraction.click;
  }
  return tooltipState.itemInteraction.hover;
}
function hasBeenActivePreviously(tooltipInteractionState) {
  return tooltipInteractionState.index != null;
}
var combineTooltipInteractionState = (tooltipState, tooltipEventType, trigger, defaultIndex) => {
  if (tooltipEventType == null) {
    return noInteraction;
  }
  var appropriateMouseInteraction = chooseAppropriateMouseInteraction(tooltipState, tooltipEventType, trigger);
  if (appropriateMouseInteraction == null) {
    return noInteraction;
  }
  if (appropriateMouseInteraction.active) {
    return appropriateMouseInteraction;
  }
  if (tooltipState.keyboardInteraction.active) {
    return tooltipState.keyboardInteraction;
  }
  if (tooltipState.syncInteraction.active && tooltipState.syncInteraction.index != null) {
    return tooltipState.syncInteraction;
  }
  var activeFromProps = tooltipState.settings.active === true;
  if (hasBeenActivePreviously(appropriateMouseInteraction)) {
    if (activeFromProps) {
      return _objectSpread$p(_objectSpread$p({}, appropriateMouseInteraction), {}, {
        active: true
      });
    }
  } else if (defaultIndex != null) {
    return {
      active: true,
      coordinate: void 0,
      dataKey: void 0,
      index: defaultIndex
    };
  }
  return _objectSpread$p(_objectSpread$p({}, noInteraction), {}, {
    coordinate: appropriateMouseInteraction.coordinate
  });
};
var combineActiveTooltipIndex = (tooltipInteraction, chartData) => {
  var desiredIndex = tooltipInteraction === null || tooltipInteraction === void 0 ? void 0 : tooltipInteraction.index;
  if (desiredIndex == null) {
    return null;
  }
  var indexAsNumber = Number(desiredIndex);
  if (!isWellBehavedNumber(indexAsNumber)) {
    return desiredIndex;
  }
  var lowerLimit = 0;
  var upperLimit = Infinity;
  if (chartData.length > 0) {
    upperLimit = chartData.length - 1;
  }
  return String(Math.max(lowerLimit, Math.min(indexAsNumber, upperLimit)));
};
var combineCoordinateForDefaultIndex = (width, height, layout, offset, tooltipTicks, defaultIndex, tooltipConfigurations, tooltipPayloadSearcher) => {
  if (defaultIndex == null || tooltipPayloadSearcher == null) {
    return void 0;
  }
  var firstConfiguration = tooltipConfigurations[0];
  var maybePosition = firstConfiguration == null ? void 0 : tooltipPayloadSearcher(firstConfiguration.positions, defaultIndex);
  if (maybePosition != null) {
    return maybePosition;
  }
  var tick = tooltipTicks === null || tooltipTicks === void 0 ? void 0 : tooltipTicks[Number(defaultIndex)];
  if (!tick) {
    return void 0;
  }
  switch (layout) {
    case "horizontal": {
      return {
        x: tick.coordinate,
        y: (offset.top + height) / 2
      };
    }
    default: {
      return {
        x: (offset.left + width) / 2,
        y: tick.coordinate
      };
    }
  }
};
var combineTooltipPayloadConfigurations = (tooltipState, tooltipEventType, trigger, defaultIndex) => {
  if (tooltipEventType === "axis") {
    return tooltipState.tooltipItemPayloads;
  }
  if (tooltipState.tooltipItemPayloads.length === 0) {
    return [];
  }
  var filterByDataKey;
  if (trigger === "hover") {
    filterByDataKey = tooltipState.itemInteraction.hover.dataKey;
  } else {
    filterByDataKey = tooltipState.itemInteraction.click.dataKey;
  }
  if (filterByDataKey == null && defaultIndex != null) {
    return [tooltipState.tooltipItemPayloads[0]];
  }
  return tooltipState.tooltipItemPayloads.filter((tpc) => {
    var _tpc$settings;
    return ((_tpc$settings = tpc.settings) === null || _tpc$settings === void 0 ? void 0 : _tpc$settings.dataKey) === filterByDataKey;
  });
};
var selectTooltipPayloadSearcher = (state2) => state2.options.tooltipPayloadSearcher;
var selectTooltipState = (state2) => state2.tooltip;
function ownKeys$o(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$o(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$o(Object(t), true).forEach(function(r3) {
      _defineProperty$q(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$o(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$q(e, r2, t) {
  return (r2 = _toPropertyKey$q(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$q(t) {
  var i = _toPrimitive$q(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$q(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function selectFinalData(dataDefinedOnItem, dataDefinedOnChart) {
  if (dataDefinedOnItem != null) {
    return dataDefinedOnItem;
  }
  return dataDefinedOnChart;
}
var combineTooltipPayload = (tooltipPayloadConfigurations, activeIndex, chartDataState, tooltipAxisDataKey, activeLabel, tooltipPayloadSearcher, tooltipEventType) => {
  if (activeIndex == null || tooltipPayloadSearcher == null) {
    return void 0;
  }
  var {
    chartData,
    computedData,
    dataStartIndex,
    dataEndIndex
  } = chartDataState;
  var init = [];
  return tooltipPayloadConfigurations.reduce((agg, _ref2) => {
    var _settings$dataKey;
    var {
      dataDefinedOnItem,
      settings
    } = _ref2;
    var finalData = selectFinalData(dataDefinedOnItem, chartData);
    var sliced = Array.isArray(finalData) ? getSliced(finalData, dataStartIndex, dataEndIndex) : finalData;
    var finalDataKey = (_settings$dataKey = settings === null || settings === void 0 ? void 0 : settings.dataKey) !== null && _settings$dataKey !== void 0 ? _settings$dataKey : tooltipAxisDataKey;
    var finalNameKey = settings === null || settings === void 0 ? void 0 : settings.nameKey;
    var tooltipPayload;
    if (tooltipAxisDataKey && Array.isArray(sliced) && /*
     * findEntryInArray won't work for Scatter because Scatter provides an array of arrays
     * as tooltip payloads and findEntryInArray is not prepared to handle that.
     * Sad but also ScatterChart only allows 'item' tooltipEventType
     * and also this is only a problem if there are multiple Scatters and each has its own data array
     * so let's fix that some other time.
     */
    !Array.isArray(sliced[0]) && /*
     * If the tooltipEventType is 'axis', we should search for the dataKey in the sliced data
     * because thanks to allowDuplicatedCategory=false, the order of elements in the array
     * no longer matches the order of elements in the original data
     * and so we need to search by the active dataKey + label rather than by index.
     *
     * The same happens if multiple graphical items are present in the chart
     * and each of them has its own data array. Those arrays get concatenated
     * and again the tooltip index no longer matches the original data.
     *
     * On the other hand the tooltipEventType 'item' should always search by index
     * because we get the index from interacting over the individual elements
     * which is always accurate, irrespective of the allowDuplicatedCategory setting.
     */
    tooltipEventType === "axis") {
      tooltipPayload = findEntryInArray(sliced, tooltipAxisDataKey, activeLabel);
    } else {
      tooltipPayload = tooltipPayloadSearcher(sliced, activeIndex, computedData, finalNameKey);
    }
    if (Array.isArray(tooltipPayload)) {
      tooltipPayload.forEach((item) => {
        var newSettings = _objectSpread$o(_objectSpread$o({}, settings), {}, {
          name: item.name,
          unit: item.unit,
          // color and fill are erased to keep 100% the identical behaviour to recharts 2.x - but there's nothing stopping us from returning them here. It's technically a breaking change.
          color: void 0,
          // color and fill are erased to keep 100% the identical behaviour to recharts 2.x - but there's nothing stopping us from returning them here. It's technically a breaking change.
          fill: void 0
        });
        agg.push(getTooltipEntry({
          tooltipEntrySettings: newSettings,
          dataKey: item.dataKey,
          payload: item.payload,
          // @ts-expect-error getValueByDataKey does not validate the output type
          value: getValueByDataKey(item.payload, item.dataKey),
          name: item.name
        }));
      });
    } else {
      var _getValueByDataKey;
      agg.push(getTooltipEntry({
        tooltipEntrySettings: settings,
        dataKey: finalDataKey,
        payload: tooltipPayload,
        // @ts-expect-error getValueByDataKey does not validate the output type
        value: getValueByDataKey(tooltipPayload, finalDataKey),
        // @ts-expect-error getValueByDataKey does not validate the output type
        name: (_getValueByDataKey = getValueByDataKey(tooltipPayload, finalNameKey)) !== null && _getValueByDataKey !== void 0 ? _getValueByDataKey : settings === null || settings === void 0 ? void 0 : settings.name
      }));
    }
    return agg;
  }, init);
};
var selectTooltipAxisRealScaleType = createSelector([selectTooltipAxis, selectChartLayout, selectHasBar, selectChartName, selectTooltipAxisType], combineRealScaleType);
var selectAllUnfilteredGraphicalItems = createSelector([(state2) => state2.graphicalItems.cartesianItems, (state2) => state2.graphicalItems.polarItems], (cartesianItems, polarItems) => [...cartesianItems, ...polarItems]);
var selectTooltipAxisPredicate = createSelector([selectTooltipAxisType, selectTooltipAxisId], itemAxisPredicate);
var selectAllGraphicalItemsSettings = createSelector([selectAllUnfilteredGraphicalItems, selectTooltipAxis, selectTooltipAxisPredicate], combineGraphicalItemsSettings, {
  memoizeOptions: {
    resultEqualityCheck: emptyArraysAreEqualCheck
  }
});
var selectAllStackedGraphicalItemsSettings = createSelector([selectAllGraphicalItemsSettings], (graphicalItems) => graphicalItems.filter(isStacked));
var selectTooltipGraphicalItemsData = createSelector([selectAllGraphicalItemsSettings], combineGraphicalItemsData, {
  memoizeOptions: {
    resultEqualityCheck: emptyArraysAreEqualCheck
  }
});
var selectTooltipDisplayedData = createSelector([selectTooltipGraphicalItemsData, selectChartDataWithIndexes], combineDisplayedData);
var selectTooltipStackedData = createSelector([selectAllStackedGraphicalItemsSettings, selectChartDataWithIndexes, selectTooltipAxis], combineDisplayedStackedData);
var selectAllTooltipAppliedValues = createSelector([selectTooltipDisplayedData, selectTooltipAxis, selectAllGraphicalItemsSettings], combineAppliedValues);
var selectTooltipAxisDomainDefinition = createSelector([selectTooltipAxis], getDomainDefinition);
var selectTooltipDataOverflow = createSelector([selectTooltipAxis], (axisSettings) => axisSettings.allowDataOverflow);
var selectTooltipDomainFromUserPreferences = createSelector([selectTooltipAxisDomainDefinition, selectTooltipDataOverflow], numericalDomainSpecifiedWithoutRequiringData);
var selectAllStackedGraphicalItems = createSelector([selectAllGraphicalItemsSettings], (graphicalItems) => graphicalItems.filter(isStacked));
var selectTooltipStackGroups = createSelector([selectTooltipStackedData, selectAllStackedGraphicalItems, selectStackOffsetType], combineStackGroups);
var selectTooltipDomainOfStackGroups = createSelector([selectTooltipStackGroups, selectChartDataWithIndexes, selectTooltipAxisType, selectTooltipDomainFromUserPreferences], combineDomainOfStackGroups);
var selectTooltipItemsSettingsExceptStacked = createSelector([selectAllGraphicalItemsSettings], filterGraphicalNotStackedItems);
var selectDomainOfAllAppliedNumericalValuesIncludingErrorValues = createSelector([selectTooltipDisplayedData, selectTooltipAxis, selectTooltipItemsSettingsExceptStacked, selectAllErrorBarSettings, selectTooltipAxisType], combineDomainOfAllAppliedNumericalValuesIncludingErrorValues, {
  memoizeOptions: {
    resultEqualityCheck: numberDomainEqualityCheck
  }
});
var selectReferenceDotsByTooltipAxis = createSelector([selectReferenceDots, selectTooltipAxisType, selectTooltipAxisId], filterReferenceElements);
var selectTooltipReferenceDotsDomain = createSelector([selectReferenceDotsByTooltipAxis, selectTooltipAxisType], combineDotsDomain);
var selectReferenceAreasByTooltipAxis = createSelector([selectReferenceAreas, selectTooltipAxisType, selectTooltipAxisId], filterReferenceElements);
var selectTooltipReferenceAreasDomain = createSelector([selectReferenceAreasByTooltipAxis, selectTooltipAxisType], combineAreasDomain);
var selectReferenceLinesByTooltipAxis = createSelector([selectReferenceLines, selectTooltipAxisType, selectTooltipAxisId], filterReferenceElements);
var selectTooltipReferenceLinesDomain = createSelector([selectReferenceLinesByTooltipAxis, selectTooltipAxisType], combineLinesDomain);
var selectTooltipReferenceElementsDomain = createSelector([selectTooltipReferenceDotsDomain, selectTooltipReferenceLinesDomain, selectTooltipReferenceAreasDomain], mergeDomains);
var selectTooltipNumericalDomain = createSelector([selectTooltipAxis, selectTooltipAxisDomainDefinition, selectTooltipDomainFromUserPreferences, selectTooltipDomainOfStackGroups, selectDomainOfAllAppliedNumericalValuesIncludingErrorValues, selectTooltipReferenceElementsDomain, selectChartLayout, selectTooltipAxisType], combineNumericalDomain);
var selectTooltipAxisDomain = createSelector([selectTooltipAxis, selectChartLayout, selectTooltipDisplayedData, selectAllTooltipAppliedValues, selectStackOffsetType, selectTooltipAxisType, selectTooltipNumericalDomain], combineAxisDomain);
var selectTooltipNiceTicks = createSelector([selectTooltipAxisDomain, selectTooltipAxis, selectTooltipAxisRealScaleType], combineNiceTicks);
var selectTooltipAxisDomainIncludingNiceTicks = createSelector([selectTooltipAxis, selectTooltipAxisDomain, selectTooltipNiceTicks, selectTooltipAxisType], combineAxisDomainWithNiceTicks);
var selectTooltipAxisRange = (state2) => {
  var axisType = selectTooltipAxisType(state2);
  var axisId = selectTooltipAxisId(state2);
  var isPanorama = false;
  return selectAxisRange(state2, axisType, axisId, isPanorama);
};
var selectTooltipAxisRangeWithReverse = createSelector([selectTooltipAxis, selectTooltipAxisRange], combineAxisRangeWithReverse);
var selectTooltipAxisScale = createSelector([selectTooltipAxis, selectTooltipAxisRealScaleType, selectTooltipAxisDomainIncludingNiceTicks, selectTooltipAxisRangeWithReverse], combineScaleFunction);
var selectTooltipDuplicateDomain = createSelector([selectChartLayout, selectAllTooltipAppliedValues, selectTooltipAxis, selectTooltipAxisType], combineDuplicateDomain);
var selectTooltipCategoricalDomain = createSelector([selectChartLayout, selectAllTooltipAppliedValues, selectTooltipAxis, selectTooltipAxisType], combineCategoricalDomain);
var combineTicksOfTooltipAxis = (layout, axis, realScaleType, scale, range2, duplicateDomain, categoricalDomain, axisType) => {
  if (!axis) {
    return void 0;
  }
  var {
    type
  } = axis;
  var isCategorical = isCategoricalAxis(layout, axisType);
  if (!scale) {
    return void 0;
  }
  var offsetForBand = realScaleType === "scaleBand" && scale.bandwidth ? scale.bandwidth() / 2 : 2;
  var offset = type === "category" && scale.bandwidth ? scale.bandwidth() / offsetForBand : 0;
  offset = axisType === "angleAxis" && range2 != null && (range2 === null || range2 === void 0 ? void 0 : range2.length) >= 2 ? mathSign(range2[0] - range2[1]) * 2 * offset : offset;
  if (isCategorical && categoricalDomain) {
    return categoricalDomain.map((entry2, index) => ({
      coordinate: scale(entry2) + offset,
      value: entry2,
      index,
      offset
    }));
  }
  return scale.domain().map((entry2, index) => ({
    coordinate: scale(entry2) + offset,
    value: duplicateDomain ? duplicateDomain[entry2] : entry2,
    index,
    offset
  }));
};
var selectTooltipAxisTicks = createSelector([selectChartLayout, selectTooltipAxis, selectTooltipAxisRealScaleType, selectTooltipAxisScale, selectTooltipAxisRange, selectTooltipDuplicateDomain, selectTooltipCategoricalDomain, selectTooltipAxisType], combineTicksOfTooltipAxis);
var selectTooltipEventType = createSelector([selectDefaultTooltipEventType, selectValidateTooltipEventTypes, selectTooltipSettings], (defaultTooltipEventType, validateTooltipEventType, settings) => combineTooltipEventType(settings.shared, defaultTooltipEventType, validateTooltipEventType));
var selectTooltipTrigger = (state2) => state2.tooltip.settings.trigger;
var selectDefaultIndex = (state2) => state2.tooltip.settings.defaultIndex;
var selectTooltipInteractionState$1 = createSelector([selectTooltipState, selectTooltipEventType, selectTooltipTrigger, selectDefaultIndex], combineTooltipInteractionState);
var selectActiveTooltipIndex = createSelector([selectTooltipInteractionState$1, selectTooltipDisplayedData], combineActiveTooltipIndex);
var selectActiveLabel$1 = createSelector([selectTooltipAxisTicks, selectActiveTooltipIndex], combineActiveLabel);
var selectActiveTooltipDataKey = createSelector([selectTooltipInteractionState$1], (tooltipInteraction) => {
  if (!tooltipInteraction) {
    return void 0;
  }
  return tooltipInteraction.dataKey;
});
var selectTooltipPayloadConfigurations$1 = createSelector([selectTooltipState, selectTooltipEventType, selectTooltipTrigger, selectDefaultIndex], combineTooltipPayloadConfigurations);
var selectTooltipCoordinateForDefaultIndex = createSelector([selectChartWidth, selectChartHeight, selectChartLayout, selectChartOffsetInternal, selectTooltipAxisTicks, selectDefaultIndex, selectTooltipPayloadConfigurations$1, selectTooltipPayloadSearcher], combineCoordinateForDefaultIndex);
var selectActiveTooltipCoordinate = createSelector([selectTooltipInteractionState$1, selectTooltipCoordinateForDefaultIndex], (tooltipInteractionState, defaultIndexCoordinate) => {
  if (tooltipInteractionState !== null && tooltipInteractionState !== void 0 && tooltipInteractionState.coordinate) {
    return tooltipInteractionState.coordinate;
  }
  return defaultIndexCoordinate;
});
var selectIsTooltipActive$1 = createSelector([selectTooltipInteractionState$1], (tooltipInteractionState) => tooltipInteractionState.active);
var selectActiveTooltipPayload = createSelector([selectTooltipPayloadConfigurations$1, selectActiveTooltipIndex, selectChartDataWithIndexes, selectTooltipAxisDataKey, selectActiveLabel$1, selectTooltipPayloadSearcher, selectTooltipEventType], combineTooltipPayload);
var selectActiveTooltipDataPoints = createSelector([selectActiveTooltipPayload], (payload) => {
  if (payload == null) {
    return void 0;
  }
  var dataPoints = payload.map((p) => p.payload).filter((p) => p != null);
  return Array.from(new Set(dataPoints));
});
function ownKeys$n(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$n(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$n(Object(t), true).forEach(function(r3) {
      _defineProperty$p(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$n(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$p(e, r2, t) {
  return (r2 = _toPropertyKey$p(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$p(t) {
  var i = _toPrimitive$p(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$p(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var useTooltipAxis = () => useAppSelector(selectTooltipAxis);
var useTooltipAxisBandSize = () => {
  var tooltipAxis = useTooltipAxis();
  var tooltipTicks = useAppSelector(selectTooltipAxisTicks);
  var tooltipAxisScale = useAppSelector(selectTooltipAxisScale);
  if (!tooltipAxis || !tooltipAxisScale) {
    return getBandSizeOfAxis(void 0, tooltipTicks);
  }
  return getBandSizeOfAxis(_objectSpread$n(_objectSpread$n({}, tooltipAxis), {}, {
    scale: tooltipAxisScale
  }), tooltipTicks);
};
function ownKeys$m(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$m(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$m(Object(t), true).forEach(function(r3) {
      _defineProperty$o(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$m(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$o(e, r2, t) {
  return (r2 = _toPropertyKey$o(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$o(t) {
  var i = _toPrimitive$o(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$o(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var getActiveCartesianCoordinate = (layout, tooltipTicks, activeIndex, pointer) => {
  var entry2 = tooltipTicks.find((tick) => tick && tick.index === activeIndex);
  if (entry2) {
    if (layout === "horizontal") {
      return {
        x: entry2.coordinate,
        y: pointer.chartY
      };
    }
    if (layout === "vertical") {
      return {
        x: pointer.chartX,
        y: entry2.coordinate
      };
    }
  }
  return {
    x: 0,
    y: 0
  };
};
var getActivePolarCoordinate = (layout, tooltipTicks, activeIndex, rangeObj) => {
  var entry2 = tooltipTicks.find((tick) => tick && tick.index === activeIndex);
  if (entry2) {
    if (layout === "centric") {
      var _angle = entry2.coordinate;
      var {
        radius: _radius
      } = rangeObj;
      return _objectSpread$m(_objectSpread$m(_objectSpread$m({}, rangeObj), polarToCartesian(rangeObj.cx, rangeObj.cy, _radius, _angle)), {}, {
        angle: _angle,
        radius: _radius
      });
    }
    var radius = entry2.coordinate;
    var {
      angle
    } = rangeObj;
    return _objectSpread$m(_objectSpread$m(_objectSpread$m({}, rangeObj), polarToCartesian(rangeObj.cx, rangeObj.cy, radius, angle)), {}, {
      angle,
      radius
    });
  }
  return {
    angle: 0,
    clockWise: false,
    cx: 0,
    cy: 0,
    endAngle: 0,
    innerRadius: 0,
    outerRadius: 0,
    radius: 0,
    startAngle: 0,
    x: 0,
    y: 0
  };
};
function isInCartesianRange(pointer, offset) {
  var {
    chartX: x,
    chartY: y
  } = pointer;
  return x >= offset.left && x <= offset.left + offset.width && y >= offset.top && y <= offset.top + offset.height;
}
var calculateActiveTickIndex = (coordinate, ticks, unsortedTicks, axisType, range2) => {
  var _ticks$length;
  var index = -1;
  var len = (_ticks$length = ticks === null || ticks === void 0 ? void 0 : ticks.length) !== null && _ticks$length !== void 0 ? _ticks$length : 0;
  if (len <= 1 || coordinate == null) {
    return 0;
  }
  if (axisType === "angleAxis" && range2 != null && Math.abs(Math.abs(range2[1] - range2[0]) - 360) <= 1e-6) {
    for (var i = 0; i < len; i++) {
      var before = i > 0 ? unsortedTicks[i - 1].coordinate : unsortedTicks[len - 1].coordinate;
      var cur = unsortedTicks[i].coordinate;
      var after = i >= len - 1 ? unsortedTicks[0].coordinate : unsortedTicks[i + 1].coordinate;
      var sameDirectionCoord = void 0;
      if (mathSign(cur - before) !== mathSign(after - cur)) {
        var diffInterval = [];
        if (mathSign(after - cur) === mathSign(range2[1] - range2[0])) {
          sameDirectionCoord = after;
          var curInRange = cur + range2[1] - range2[0];
          diffInterval[0] = Math.min(curInRange, (curInRange + before) / 2);
          diffInterval[1] = Math.max(curInRange, (curInRange + before) / 2);
        } else {
          sameDirectionCoord = before;
          var afterInRange = after + range2[1] - range2[0];
          diffInterval[0] = Math.min(cur, (afterInRange + cur) / 2);
          diffInterval[1] = Math.max(cur, (afterInRange + cur) / 2);
        }
        var sameInterval = [Math.min(cur, (sameDirectionCoord + cur) / 2), Math.max(cur, (sameDirectionCoord + cur) / 2)];
        if (coordinate > sameInterval[0] && coordinate <= sameInterval[1] || coordinate >= diffInterval[0] && coordinate <= diffInterval[1]) {
          ({
            index
          } = unsortedTicks[i]);
          break;
        }
      } else {
        var minValue = Math.min(before, after);
        var maxValue = Math.max(before, after);
        if (coordinate > (minValue + cur) / 2 && coordinate <= (maxValue + cur) / 2) {
          ({
            index
          } = unsortedTicks[i]);
          break;
        }
      }
    }
  } else if (ticks) {
    for (var _i = 0; _i < len; _i++) {
      if (_i === 0 && coordinate <= (ticks[_i].coordinate + ticks[_i + 1].coordinate) / 2 || _i > 0 && _i < len - 1 && coordinate > (ticks[_i].coordinate + ticks[_i - 1].coordinate) / 2 && coordinate <= (ticks[_i].coordinate + ticks[_i + 1].coordinate) / 2 || _i === len - 1 && coordinate > (ticks[_i].coordinate + ticks[_i - 1].coordinate) / 2) {
        ({
          index
        } = ticks[_i]);
        break;
      }
    }
  }
  return index;
};
var useChartName = () => {
  return useAppSelector(selectChartName);
};
var pickTooltipEventType = (_state, tooltipEventType) => tooltipEventType;
var pickTrigger = (_state, _tooltipEventType, trigger) => trigger;
var pickDefaultIndex = (_state, _tooltipEventType, _trigger, defaultIndex) => defaultIndex;
var selectOrderedTooltipTicks = createSelector(selectTooltipAxisTicks, (ticks) => sortBy(ticks, (o) => o.coordinate));
var selectTooltipInteractionState = createSelector([selectTooltipState, pickTooltipEventType, pickTrigger, pickDefaultIndex], combineTooltipInteractionState);
var selectActiveIndex = createSelector([selectTooltipInteractionState, selectTooltipDisplayedData], combineActiveTooltipIndex);
var selectTooltipDataKey = (state2, tooltipEventType, trigger) => {
  if (tooltipEventType == null) {
    return void 0;
  }
  var tooltipState = selectTooltipState(state2);
  if (tooltipEventType === "axis") {
    if (trigger === "hover") {
      return tooltipState.axisInteraction.hover.dataKey;
    }
    return tooltipState.axisInteraction.click.dataKey;
  }
  if (trigger === "hover") {
    return tooltipState.itemInteraction.hover.dataKey;
  }
  return tooltipState.itemInteraction.click.dataKey;
};
var selectTooltipPayloadConfigurations = createSelector([selectTooltipState, pickTooltipEventType, pickTrigger, pickDefaultIndex], combineTooltipPayloadConfigurations);
var selectCoordinateForDefaultIndex = createSelector([selectChartWidth, selectChartHeight, selectChartLayout, selectChartOffsetInternal, selectTooltipAxisTicks, pickDefaultIndex, selectTooltipPayloadConfigurations, selectTooltipPayloadSearcher], combineCoordinateForDefaultIndex);
var selectActiveCoordinate = createSelector([selectTooltipInteractionState, selectCoordinateForDefaultIndex], (tooltipInteractionState, defaultIndexCoordinate) => {
  var _tooltipInteractionSt;
  return (_tooltipInteractionSt = tooltipInteractionState.coordinate) !== null && _tooltipInteractionSt !== void 0 ? _tooltipInteractionSt : defaultIndexCoordinate;
});
var selectActiveLabel = createSelector([selectTooltipAxisTicks, selectActiveIndex], combineActiveLabel);
var selectTooltipPayload = createSelector([selectTooltipPayloadConfigurations, selectActiveIndex, selectChartDataWithIndexes, selectTooltipAxisDataKey, selectActiveLabel, selectTooltipPayloadSearcher, pickTooltipEventType], combineTooltipPayload);
var selectIsTooltipActive = createSelector([selectTooltipInteractionState], (tooltipInteractionState) => {
  return {
    isActive: tooltipInteractionState.active,
    activeIndex: tooltipInteractionState.index
  };
});
var combineActiveCartesianProps = (chartEvent, layout, tooltipAxisType, tooltipAxisRange, tooltipTicks, orderedTooltipTicks, offset) => {
  if (!chartEvent || !tooltipAxisType || !tooltipAxisRange || !tooltipTicks) {
    return void 0;
  }
  if (!isInCartesianRange(chartEvent, offset)) {
    return void 0;
  }
  var pos = calculateCartesianTooltipPos(chartEvent, layout);
  var activeIndex = calculateActiveTickIndex(pos, orderedTooltipTicks, tooltipTicks, tooltipAxisType, tooltipAxisRange);
  var activeCoordinate = getActiveCartesianCoordinate(layout, tooltipTicks, activeIndex, chartEvent);
  return {
    activeIndex: String(activeIndex),
    activeCoordinate
  };
};
var combineActivePolarProps = (chartEvent, layout, polarViewBox, tooltipAxisType, tooltipAxisRange, tooltipTicks, orderedTooltipTicks) => {
  if (!chartEvent || !tooltipAxisType || !tooltipAxisRange || !tooltipTicks || !polarViewBox) {
    return void 0;
  }
  var rangeObj = inRangeOfSector(chartEvent, polarViewBox);
  if (!rangeObj) {
    return void 0;
  }
  var pos = calculatePolarTooltipPos(rangeObj, layout);
  var activeIndex = calculateActiveTickIndex(pos, orderedTooltipTicks, tooltipTicks, tooltipAxisType, tooltipAxisRange);
  var activeCoordinate = getActivePolarCoordinate(layout, tooltipTicks, activeIndex, rangeObj);
  return {
    activeIndex: String(activeIndex),
    activeCoordinate
  };
};
var combineActiveProps = (chartEvent, layout, polarViewBox, tooltipAxisType, tooltipAxisRange, tooltipTicks, orderedTooltipTicks, offset) => {
  if (!chartEvent || !layout || !tooltipAxisType || !tooltipAxisRange || !tooltipTicks) {
    return void 0;
  }
  if (layout === "horizontal" || layout === "vertical") {
    return combineActiveCartesianProps(chartEvent, layout, tooltipAxisType, tooltipAxisRange, tooltipTicks, orderedTooltipTicks, offset);
  }
  return combineActivePolarProps(chartEvent, layout, polarViewBox, tooltipAxisType, tooltipAxisRange, tooltipTicks, orderedTooltipTicks);
};
var selectZIndexPortalId = createSelector((state2) => state2.zIndex.zIndexMap, (_, zIndex) => zIndex, (_, _zIndex, isPanorama) => isPanorama, (zIndexMap, zIndex, isPanorama) => {
  if (zIndex == null) {
    return void 0;
  }
  var entry2 = zIndexMap[zIndex];
  if (entry2 == null) {
    return void 0;
  }
  if (isPanorama) {
    return entry2.panoramaElementId;
  }
  return entry2.elementId;
});
var selectAllRegisteredZIndexes = createSelector((state2) => state2.zIndex.zIndexMap, (zIndexMap) => {
  var allNumbers = Object.keys(zIndexMap).map((zIndexStr) => parseInt(zIndexStr, 10)).concat(Object.values(DefaultZIndexes));
  var uniqueNumbers = Array.from(new Set(allNumbers));
  return uniqueNumbers.sort((a, b) => a - b);
}, {
  memoizeOptions: {
    resultEqualityCheck: arrayContentsAreEqualCheck
  }
});
function ownKeys$l(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$l(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$l(Object(t), true).forEach(function(r3) {
      _defineProperty$n(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$l(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$n(e, r2, t) {
  return (r2 = _toPropertyKey$n(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$n(t) {
  var i = _toPrimitive$n(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$n(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var seed = {};
var initialState$8 = {
  zIndexMap: Object.values(DefaultZIndexes).reduce((acc, current2) => _objectSpread$l(_objectSpread$l({}, acc), {}, {
    [current2]: {
      elementId: void 0,
      panoramaElementId: void 0,
      consumers: 0
    }
  }), seed)
};
var defaultZIndexSet = new Set(Object.values(DefaultZIndexes));
function isDefaultZIndex(zIndex) {
  return defaultZIndexSet.has(zIndex);
}
var zIndexSlice = createSlice({
  name: "zIndex",
  initialState: initialState$8,
  reducers: {
    registerZIndexPortal: {
      reducer: (state2, action2) => {
        var {
          zIndex
        } = action2.payload;
        if (state2.zIndexMap[zIndex]) {
          state2.zIndexMap[zIndex].consumers += 1;
        } else {
          state2.zIndexMap[zIndex] = {
            consumers: 1,
            elementId: void 0,
            panoramaElementId: void 0
          };
        }
      },
      prepare: prepareAutoBatched()
    },
    unregisterZIndexPortal: {
      reducer: (state2, action2) => {
        var {
          zIndex
        } = action2.payload;
        if (state2.zIndexMap[zIndex]) {
          state2.zIndexMap[zIndex].consumers -= 1;
          if (state2.zIndexMap[zIndex].consumers <= 0 && !isDefaultZIndex(zIndex)) {
            delete state2.zIndexMap[zIndex];
          }
        }
      },
      prepare: prepareAutoBatched()
    },
    registerZIndexPortalId: {
      reducer: (state2, action2) => {
        var {
          zIndex,
          elementId,
          isPanorama
        } = action2.payload;
        if (state2.zIndexMap[zIndex]) {
          if (isPanorama) {
            state2.zIndexMap[zIndex].panoramaElementId = elementId;
          } else {
            state2.zIndexMap[zIndex].elementId = elementId;
          }
        } else {
          state2.zIndexMap[zIndex] = {
            consumers: 0,
            elementId: isPanorama ? void 0 : elementId,
            panoramaElementId: isPanorama ? elementId : void 0
          };
        }
      },
      prepare: prepareAutoBatched()
    },
    unregisterZIndexPortalId: {
      reducer: (state2, action2) => {
        var {
          zIndex
        } = action2.payload;
        if (state2.zIndexMap[zIndex]) {
          if (action2.payload.isPanorama) {
            state2.zIndexMap[zIndex].panoramaElementId = void 0;
          } else {
            state2.zIndexMap[zIndex].elementId = void 0;
          }
        }
      },
      prepare: prepareAutoBatched()
    }
  }
});
var {
  registerZIndexPortal,
  unregisterZIndexPortal,
  registerZIndexPortalId,
  unregisterZIndexPortalId
} = zIndexSlice.actions;
var zIndexReducer = zIndexSlice.reducer;
function ZIndexLayer(_ref2) {
  var {
    zIndex,
    children
  } = _ref2;
  var isInChartContext = useIsInChartContext();
  var shouldRenderInPortal = isInChartContext && zIndex !== void 0 && zIndex !== 0;
  var isPanorama = useIsPanorama();
  var dispatch = useAppDispatch();
  useLayoutEffect(() => {
    if (!shouldRenderInPortal) {
      return noop$1;
    }
    dispatch(registerZIndexPortal({
      zIndex
    }));
    return () => {
      dispatch(unregisterZIndexPortal({
        zIndex
      }));
    };
  }, [dispatch, zIndex, shouldRenderInPortal]);
  var portalId = useAppSelector((state2) => selectZIndexPortalId(state2, zIndex, isPanorama));
  if (!shouldRenderInPortal) {
    return children;
  }
  if (!portalId) {
    return null;
  }
  var zIndexPortal = document.getElementById(portalId);
  if (zIndexPortal) {
    return /* @__PURE__ */ createPortal(children, zIndexPortal);
  }
  return null;
}
function _extends$j() {
  return _extends$j = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$j.apply(null, arguments);
}
function ownKeys$k(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$k(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$k(Object(t), true).forEach(function(r3) {
      _defineProperty$m(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$k(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$m(e, r2, t) {
  return (r2 = _toPropertyKey$m(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$m(t) {
  var i = _toPrimitive$m(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$m(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function RenderCursor(_ref2) {
  var {
    cursor,
    cursorComp,
    cursorProps
  } = _ref2;
  if (/* @__PURE__ */ isValidElement(cursor)) {
    return /* @__PURE__ */ cloneElement(cursor, cursorProps);
  }
  return /* @__PURE__ */ createElement(cursorComp, cursorProps);
}
function CursorInternal(props) {
  var _props$zIndex;
  var {
    coordinate,
    payload,
    index,
    offset,
    tooltipAxisBandSize,
    layout,
    cursor,
    tooltipEventType,
    chartName
  } = props;
  var activeCoordinate = coordinate;
  var activePayload = payload;
  var activeTooltipIndex = index;
  if (!cursor || !activeCoordinate || chartName !== "ScatterChart" && tooltipEventType !== "axis") {
    return null;
  }
  var restProps, cursorComp, preferredZIndex;
  if (chartName === "ScatterChart") {
    restProps = activeCoordinate;
    cursorComp = Cross;
    preferredZIndex = DefaultZIndexes.cursorLine;
  } else if (chartName === "BarChart") {
    restProps = getCursorRectangle(layout, activeCoordinate, offset, tooltipAxisBandSize);
    cursorComp = Rectangle;
    preferredZIndex = DefaultZIndexes.cursorRectangle;
  } else if (layout === "radial" && isPolarCoordinate(activeCoordinate)) {
    var {
      cx,
      cy,
      radius,
      startAngle,
      endAngle
    } = getRadialCursorPoints(activeCoordinate);
    restProps = {
      cx,
      cy,
      startAngle,
      endAngle,
      innerRadius: radius,
      outerRadius: radius
    };
    cursorComp = Sector;
    preferredZIndex = DefaultZIndexes.cursorLine;
  } else {
    restProps = {
      points: getCursorPoints(layout, activeCoordinate, offset)
    };
    cursorComp = Curve;
    preferredZIndex = DefaultZIndexes.cursorLine;
  }
  var extraClassName = typeof cursor === "object" && "className" in cursor ? cursor.className : void 0;
  var cursorProps = _objectSpread$k(_objectSpread$k(_objectSpread$k(_objectSpread$k({
    stroke: "#ccc",
    pointerEvents: "none"
  }, offset), restProps), svgPropertiesNoEventsFromUnknown(cursor)), {}, {
    payload: activePayload,
    payloadIndex: activeTooltipIndex,
    className: clsx("recharts-tooltip-cursor", extraClassName)
  });
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: (_props$zIndex = props.zIndex) !== null && _props$zIndex !== void 0 ? _props$zIndex : preferredZIndex
  }, /* @__PURE__ */ React.createElement(RenderCursor, {
    cursor,
    cursorComp,
    cursorProps
  }));
}
function Cursor(props) {
  var tooltipAxisBandSize = useTooltipAxisBandSize();
  var offset = useOffsetInternal();
  var layout = useChartLayout();
  var chartName = useChartName();
  if (tooltipAxisBandSize == null || offset == null || layout == null || chartName == null) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(CursorInternal, _extends$j({}, props, {
    offset,
    layout,
    tooltipAxisBandSize,
    chartName
  }));
}
var TooltipPortalContext = /* @__PURE__ */ createContext(null);
var useTooltipPortal = () => useContext(TooltipPortalContext);
var eventCenter = new EventEmitter();
var TOOLTIP_SYNC_EVENT = "recharts.syncEvent.tooltip";
var BRUSH_SYNC_EVENT = "recharts.syncEvent.brush";
function arrayTooltipSearcher(data2, strIndex) {
  if (!strIndex) return void 0;
  var numIndex = Number.parseInt(strIndex, 10);
  if (isNan(numIndex)) {
    return void 0;
  }
  return data2 === null || data2 === void 0 ? void 0 : data2[numIndex];
}
var initialState$7 = {
  chartName: "",
  tooltipPayloadSearcher: void 0,
  eventEmitter: void 0,
  defaultTooltipEventType: "axis"
};
var optionsSlice = createSlice({
  name: "options",
  initialState: initialState$7,
  reducers: {
    createEventEmitter: (state2) => {
      if (state2.eventEmitter == null) {
        state2.eventEmitter = Symbol("rechartsEventEmitter");
      }
    }
  }
});
var optionsReducer = optionsSlice.reducer;
var {
  createEventEmitter
} = optionsSlice.actions;
function selectSynchronisedTooltipState(state2) {
  return state2.tooltip.syncInteraction;
}
var initialChartDataState = {
  chartData: void 0,
  computedData: void 0,
  dataStartIndex: 0,
  dataEndIndex: 0
};
var chartDataSlice = createSlice({
  name: "chartData",
  initialState: initialChartDataState,
  reducers: {
    setChartData(state2, action2) {
      state2.chartData = action2.payload;
      if (action2.payload == null) {
        state2.dataStartIndex = 0;
        state2.dataEndIndex = 0;
        return;
      }
      if (action2.payload.length > 0 && state2.dataEndIndex !== action2.payload.length - 1) {
        state2.dataEndIndex = action2.payload.length - 1;
      }
    },
    setComputedData(state2, action2) {
      state2.computedData = action2.payload;
    },
    setDataStartEndIndexes(state2, action2) {
      var {
        startIndex,
        endIndex
      } = action2.payload;
      if (startIndex != null) {
        state2.dataStartIndex = startIndex;
      }
      if (endIndex != null) {
        state2.dataEndIndex = endIndex;
      }
    }
  }
});
var {
  setChartData,
  setDataStartEndIndexes,
  setComputedData
} = chartDataSlice.actions;
var chartDataReducer = chartDataSlice.reducer;
var _excluded$i = ["x", "y"];
function ownKeys$j(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$j(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$j(Object(t), true).forEach(function(r3) {
      _defineProperty$l(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$j(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$l(e, r2, t) {
  return (r2 = _toPropertyKey$l(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$l(t) {
  var i = _toPrimitive$l(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$l(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$i(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$i(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$i(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function useTooltipSyncEventsListener() {
  var mySyncId = useAppSelector(selectSyncId);
  var myEventEmitter = useAppSelector(selectEventEmitter);
  var dispatch = useAppDispatch();
  var syncMethod = useAppSelector(selectSyncMethod);
  var tooltipTicks = useAppSelector(selectTooltipAxisTicks);
  var layout = useChartLayout();
  var viewBox = useViewBox();
  var className = useAppSelector((state2) => state2.rootProps.className);
  useEffect(() => {
    if (mySyncId == null) {
      return noop$1;
    }
    var listener = (incomingSyncId, action2, emitter) => {
      if (myEventEmitter === emitter) {
        return;
      }
      if (mySyncId !== incomingSyncId) {
        return;
      }
      if (syncMethod === "index") {
        var _action$payload;
        if (viewBox && action2 !== null && action2 !== void 0 && (_action$payload = action2.payload) !== null && _action$payload !== void 0 && _action$payload.coordinate && action2.payload.sourceViewBox) {
          var _action$payload$coord = action2.payload.coordinate, {
            x: _x,
            y: _y
          } = _action$payload$coord, otherCoordinateProps = _objectWithoutProperties$i(_action$payload$coord, _excluded$i);
          var {
            x: sourceX,
            y: sourceY,
            width: sourceWidth,
            height: sourceHeight
          } = action2.payload.sourceViewBox;
          var scaledCoordinate = _objectSpread$j(_objectSpread$j({}, otherCoordinateProps), {}, {
            x: viewBox.x + (sourceWidth ? (_x - sourceX) / sourceWidth : 0) * viewBox.width,
            y: viewBox.y + (sourceHeight ? (_y - sourceY) / sourceHeight : 0) * viewBox.height
          });
          dispatch(_objectSpread$j(_objectSpread$j({}, action2), {}, {
            payload: _objectSpread$j(_objectSpread$j({}, action2.payload), {}, {
              coordinate: scaledCoordinate
            })
          }));
        } else {
          dispatch(action2);
        }
        return;
      }
      if (tooltipTicks == null) {
        return;
      }
      var activeTick;
      if (typeof syncMethod === "function") {
        var syncMethodParam = {
          activeTooltipIndex: action2.payload.index == null ? void 0 : Number(action2.payload.index),
          isTooltipActive: action2.payload.active,
          activeIndex: action2.payload.index == null ? void 0 : Number(action2.payload.index),
          activeLabel: action2.payload.label,
          activeDataKey: action2.payload.dataKey,
          activeCoordinate: action2.payload.coordinate
        };
        var activeTooltipIndex = syncMethod(tooltipTicks, syncMethodParam);
        activeTick = tooltipTicks[activeTooltipIndex];
      } else if (syncMethod === "value") {
        activeTick = tooltipTicks.find((tick) => String(tick.value) === action2.payload.label);
      }
      var {
        coordinate
      } = action2.payload;
      if (activeTick == null || action2.payload.active === false || coordinate == null || viewBox == null) {
        dispatch(setSyncInteraction({
          active: false,
          coordinate: void 0,
          dataKey: void 0,
          index: null,
          label: void 0,
          sourceViewBox: void 0
        }));
        return;
      }
      var {
        x,
        y
      } = coordinate;
      var validateChartX = Math.min(x, viewBox.x + viewBox.width);
      var validateChartY = Math.min(y, viewBox.y + viewBox.height);
      var activeCoordinate = {
        x: layout === "horizontal" ? activeTick.coordinate : validateChartX,
        y: layout === "horizontal" ? validateChartY : activeTick.coordinate
      };
      var syncAction = setSyncInteraction({
        active: action2.payload.active,
        coordinate: activeCoordinate,
        dataKey: action2.payload.dataKey,
        index: String(activeTick.index),
        label: action2.payload.label,
        sourceViewBox: action2.payload.sourceViewBox
      });
      dispatch(syncAction);
    };
    eventCenter.on(TOOLTIP_SYNC_EVENT, listener);
    return () => {
      eventCenter.off(TOOLTIP_SYNC_EVENT, listener);
    };
  }, [className, dispatch, myEventEmitter, mySyncId, syncMethod, tooltipTicks, layout, viewBox]);
}
function useBrushSyncEventsListener() {
  var mySyncId = useAppSelector(selectSyncId);
  var myEventEmitter = useAppSelector(selectEventEmitter);
  var dispatch = useAppDispatch();
  useEffect(() => {
    if (mySyncId == null) {
      return noop$1;
    }
    var listener = (incomingSyncId, action2, emitter) => {
      if (myEventEmitter === emitter) {
        return;
      }
      if (mySyncId === incomingSyncId) {
        dispatch(setDataStartEndIndexes(action2));
      }
    };
    eventCenter.on(BRUSH_SYNC_EVENT, listener);
    return () => {
      eventCenter.off(BRUSH_SYNC_EVENT, listener);
    };
  }, [dispatch, myEventEmitter, mySyncId]);
}
function useSynchronisedEventsFromOtherCharts() {
  var dispatch = useAppDispatch();
  useEffect(() => {
    dispatch(createEventEmitter());
  }, [dispatch]);
  useTooltipSyncEventsListener();
  useBrushSyncEventsListener();
}
function useTooltipChartSynchronisation(tooltipEventType, trigger, activeCoordinate, activeLabel, activeIndex, isTooltipActive) {
  var activeDataKey = useAppSelector((state2) => selectTooltipDataKey(state2, tooltipEventType, trigger));
  var eventEmitterSymbol = useAppSelector(selectEventEmitter);
  var syncId = useAppSelector(selectSyncId);
  var syncMethod = useAppSelector(selectSyncMethod);
  var tooltipState = useAppSelector(selectSynchronisedTooltipState);
  var isReceivingSynchronisation = tooltipState === null || tooltipState === void 0 ? void 0 : tooltipState.active;
  var viewBox = useViewBox();
  useEffect(() => {
    if (isReceivingSynchronisation) {
      return;
    }
    if (syncId == null) {
      return;
    }
    if (eventEmitterSymbol == null) {
      return;
    }
    var syncAction = setSyncInteraction({
      active: isTooltipActive,
      coordinate: activeCoordinate,
      dataKey: activeDataKey,
      index: activeIndex,
      label: typeof activeLabel === "number" ? String(activeLabel) : activeLabel,
      sourceViewBox: viewBox
    });
    eventCenter.emit(TOOLTIP_SYNC_EVENT, syncId, syncAction, eventEmitterSymbol);
  }, [isReceivingSynchronisation, activeCoordinate, activeDataKey, activeIndex, activeLabel, eventEmitterSymbol, syncId, syncMethod, isTooltipActive, viewBox]);
}
function ownKeys$i(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$i(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$i(Object(t), true).forEach(function(r3) {
      _defineProperty$k(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$i(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$k(e, r2, t) {
  return (r2 = _toPropertyKey$k(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$k(t) {
  var i = _toPrimitive$k(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$k(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function defaultUniqBy(entry2) {
  return entry2.dataKey;
}
function renderContent(content, props) {
  if (/* @__PURE__ */ React.isValidElement(content)) {
    return /* @__PURE__ */ React.cloneElement(content, props);
  }
  if (typeof content === "function") {
    return /* @__PURE__ */ React.createElement(content, props);
  }
  return /* @__PURE__ */ React.createElement(DefaultTooltipContent, props);
}
var emptyPayload = [];
var defaultTooltipProps = {
  allowEscapeViewBox: {
    x: false,
    y: false
  },
  animationDuration: 400,
  animationEasing: "ease",
  axisId: 0,
  contentStyle: {},
  cursor: true,
  filterNull: true,
  isAnimationActive: !Global.isSsr,
  itemSorter: "name",
  itemStyle: {},
  labelStyle: {},
  offset: 10,
  reverseDirection: {
    x: false,
    y: false
  },
  separator: " : ",
  trigger: "hover",
  useTranslate3d: false,
  wrapperStyle: {}
};
function Tooltip(outsideProps) {
  var _useAppSelector, _ref2;
  var props = resolveDefaultProps(outsideProps, defaultTooltipProps);
  var {
    active: activeFromProps,
    allowEscapeViewBox,
    animationDuration,
    animationEasing,
    content,
    filterNull,
    isAnimationActive,
    offset,
    payloadUniqBy,
    position,
    reverseDirection,
    useTranslate3d,
    wrapperStyle,
    cursor,
    shared,
    trigger,
    defaultIndex,
    portal: portalFromProps,
    axisId
  } = props;
  var dispatch = useAppDispatch();
  var defaultIndexAsString = typeof defaultIndex === "number" ? String(defaultIndex) : defaultIndex;
  useEffect(() => {
    dispatch(setTooltipSettingsState({
      shared,
      trigger,
      axisId,
      active: activeFromProps,
      defaultIndex: defaultIndexAsString
    }));
  }, [dispatch, shared, trigger, axisId, activeFromProps, defaultIndexAsString]);
  var viewBox = useViewBox();
  var accessibilityLayer = useAccessibilityLayer();
  var tooltipEventType = useTooltipEventType(shared);
  var {
    activeIndex,
    isActive
  } = (_useAppSelector = useAppSelector((state2) => selectIsTooltipActive(state2, tooltipEventType, trigger, defaultIndexAsString))) !== null && _useAppSelector !== void 0 ? _useAppSelector : {};
  var payloadFromRedux = useAppSelector((state2) => selectTooltipPayload(state2, tooltipEventType, trigger, defaultIndexAsString));
  var labelFromRedux = useAppSelector((state2) => selectActiveLabel(state2, tooltipEventType, trigger, defaultIndexAsString));
  var coordinate = useAppSelector((state2) => selectActiveCoordinate(state2, tooltipEventType, trigger, defaultIndexAsString));
  var payload = payloadFromRedux;
  var tooltipPortalFromContext = useTooltipPortal();
  var finalIsActive = (_ref2 = activeFromProps !== null && activeFromProps !== void 0 ? activeFromProps : isActive) !== null && _ref2 !== void 0 ? _ref2 : false;
  var [lastBoundingBox, updateBoundingBox] = useElementOffset([payload, finalIsActive]);
  var finalLabel = tooltipEventType === "axis" ? labelFromRedux : void 0;
  useTooltipChartSynchronisation(tooltipEventType, trigger, coordinate, finalLabel, activeIndex, finalIsActive);
  var tooltipPortal = portalFromProps !== null && portalFromProps !== void 0 ? portalFromProps : tooltipPortalFromContext;
  if (tooltipPortal == null || viewBox == null || tooltipEventType == null) {
    return null;
  }
  var finalPayload = payload !== null && payload !== void 0 ? payload : emptyPayload;
  if (!finalIsActive) {
    finalPayload = emptyPayload;
  }
  if (filterNull && finalPayload.length) {
    finalPayload = getUniqPayload(finalPayload.filter((entry2) => entry2.value != null && (entry2.hide !== true || props.includeHidden)), payloadUniqBy, defaultUniqBy);
  }
  var hasPayload = finalPayload.length > 0;
  var tooltipElement = /* @__PURE__ */ React.createElement(TooltipBoundingBox, {
    allowEscapeViewBox,
    animationDuration,
    animationEasing,
    isAnimationActive,
    active: finalIsActive,
    coordinate,
    hasPayload,
    offset,
    position,
    reverseDirection,
    useTranslate3d,
    viewBox,
    wrapperStyle,
    lastBoundingBox,
    innerRef: updateBoundingBox,
    hasPortalFromProps: Boolean(portalFromProps)
  }, renderContent(content, _objectSpread$i(_objectSpread$i({}, props), {}, {
    payload: finalPayload,
    label: finalLabel,
    active: finalIsActive,
    activeIndex,
    coordinate,
    accessibilityLayer
  })));
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ createPortal(tooltipElement, tooltipPortal), finalIsActive && /* @__PURE__ */ React.createElement(Cursor, {
    cursor,
    tooltipEventType,
    coordinate,
    payload: finalPayload,
    index: activeIndex
  }));
}
var Cell = (_props) => null;
Cell.displayName = "Cell";
function _defineProperty$j(e, r2, t) {
  return (r2 = _toPropertyKey$j(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$j(t) {
  var i = _toPrimitive$j(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$j(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
class LRUCache {
  constructor(maxSize) {
    _defineProperty$j(this, "cache", /* @__PURE__ */ new Map());
    this.maxSize = maxSize;
  }
  get(key) {
    var value = this.cache.get(key);
    if (value !== void 0) {
      this.cache.delete(key);
      this.cache.set(key, value);
    }
    return value;
  }
  set(key, value) {
    if (this.cache.has(key)) {
      this.cache.delete(key);
    } else if (this.cache.size >= this.maxSize) {
      var firstKey = this.cache.keys().next().value;
      this.cache.delete(firstKey);
    }
    this.cache.set(key, value);
  }
  clear() {
    this.cache.clear();
  }
  size() {
    return this.cache.size;
  }
}
function ownKeys$h(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$h(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$h(Object(t), true).forEach(function(r3) {
      _defineProperty$i(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$h(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$i(e, r2, t) {
  return (r2 = _toPropertyKey$i(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$i(t) {
  var i = _toPrimitive$i(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$i(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var defaultConfig = {
  cacheSize: 2e3,
  enableCache: true
};
var currentConfig = _objectSpread$h({}, defaultConfig);
var stringCache = new LRUCache(currentConfig.cacheSize);
var SPAN_STYLE = {
  position: "absolute",
  top: "-20000px",
  left: 0,
  padding: 0,
  margin: 0,
  border: "none",
  whiteSpace: "pre"
};
var MEASUREMENT_SPAN_ID = "recharts_measurement_span";
function createCacheKey(text2, style) {
  var fontSize = style.fontSize || "";
  var fontFamily = style.fontFamily || "";
  var fontWeight = style.fontWeight || "";
  var fontStyle = style.fontStyle || "";
  var letterSpacing = style.letterSpacing || "";
  var textTransform = style.textTransform || "";
  return "".concat(text2, "|").concat(fontSize, "|").concat(fontFamily, "|").concat(fontWeight, "|").concat(fontStyle, "|").concat(letterSpacing, "|").concat(textTransform);
}
var measureTextWithDOM = (text2, style) => {
  try {
    var measurementSpan = document.getElementById(MEASUREMENT_SPAN_ID);
    if (!measurementSpan) {
      measurementSpan = document.createElement("span");
      measurementSpan.setAttribute("id", MEASUREMENT_SPAN_ID);
      measurementSpan.setAttribute("aria-hidden", "true");
      document.body.appendChild(measurementSpan);
    }
    Object.assign(measurementSpan.style, SPAN_STYLE, style);
    measurementSpan.textContent = "".concat(text2);
    var rect = measurementSpan.getBoundingClientRect();
    return {
      width: rect.width,
      height: rect.height
    };
  } catch (_unused) {
    return {
      width: 0,
      height: 0
    };
  }
};
var getStringSize = function getStringSize2(text2) {
  var style = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
  if (text2 === void 0 || text2 === null || Global.isSsr) {
    return {
      width: 0,
      height: 0
    };
  }
  if (!currentConfig.enableCache) {
    return measureTextWithDOM(text2, style);
  }
  var cacheKey = createCacheKey(text2, style);
  var cachedResult = stringCache.get(cacheKey);
  if (cachedResult) {
    return cachedResult;
  }
  var result = measureTextWithDOM(text2, style);
  stringCache.set(cacheKey, result);
  return result;
};
var MULTIPLY_OR_DIVIDE_REGEX = /(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/;
var ADD_OR_SUBTRACT_REGEX = /(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/;
var CSS_LENGTH_UNIT_REGEX = /^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/;
var NUM_SPLIT_REGEX = /(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/;
var CONVERSION_RATES = {
  cm: 96 / 2.54,
  mm: 96 / 25.4,
  pt: 96 / 72,
  pc: 96 / 6,
  in: 96,
  Q: 96 / (2.54 * 40),
  px: 1
};
var FIXED_CSS_LENGTH_UNITS = Object.keys(CONVERSION_RATES);
var STR_NAN = "NaN";
function convertToPx(value, unit) {
  return value * CONVERSION_RATES[unit];
}
class DecimalCSS {
  static parse(str) {
    var _NUM_SPLIT_REGEX$exec;
    var [, numStr, unit] = (_NUM_SPLIT_REGEX$exec = NUM_SPLIT_REGEX.exec(str)) !== null && _NUM_SPLIT_REGEX$exec !== void 0 ? _NUM_SPLIT_REGEX$exec : [];
    return new DecimalCSS(parseFloat(numStr), unit !== null && unit !== void 0 ? unit : "");
  }
  constructor(num, unit) {
    this.num = num;
    this.unit = unit;
    this.num = num;
    this.unit = unit;
    if (isNan(num)) {
      this.unit = "";
    }
    if (unit !== "" && !CSS_LENGTH_UNIT_REGEX.test(unit)) {
      this.num = NaN;
      this.unit = "";
    }
    if (FIXED_CSS_LENGTH_UNITS.includes(unit)) {
      this.num = convertToPx(num, unit);
      this.unit = "px";
    }
  }
  add(other) {
    if (this.unit !== other.unit) {
      return new DecimalCSS(NaN, "");
    }
    return new DecimalCSS(this.num + other.num, this.unit);
  }
  subtract(other) {
    if (this.unit !== other.unit) {
      return new DecimalCSS(NaN, "");
    }
    return new DecimalCSS(this.num - other.num, this.unit);
  }
  multiply(other) {
    if (this.unit !== "" && other.unit !== "" && this.unit !== other.unit) {
      return new DecimalCSS(NaN, "");
    }
    return new DecimalCSS(this.num * other.num, this.unit || other.unit);
  }
  divide(other) {
    if (this.unit !== "" && other.unit !== "" && this.unit !== other.unit) {
      return new DecimalCSS(NaN, "");
    }
    return new DecimalCSS(this.num / other.num, this.unit || other.unit);
  }
  toString() {
    return "".concat(this.num).concat(this.unit);
  }
  isNaN() {
    return isNan(this.num);
  }
}
function calculateArithmetic(expr) {
  if (expr.includes(STR_NAN)) {
    return STR_NAN;
  }
  var newExpr = expr;
  while (newExpr.includes("*") || newExpr.includes("/")) {
    var _MULTIPLY_OR_DIVIDE_R;
    var [, leftOperand, operator, rightOperand] = (_MULTIPLY_OR_DIVIDE_R = MULTIPLY_OR_DIVIDE_REGEX.exec(newExpr)) !== null && _MULTIPLY_OR_DIVIDE_R !== void 0 ? _MULTIPLY_OR_DIVIDE_R : [];
    var lTs = DecimalCSS.parse(leftOperand !== null && leftOperand !== void 0 ? leftOperand : "");
    var rTs = DecimalCSS.parse(rightOperand !== null && rightOperand !== void 0 ? rightOperand : "");
    var result = operator === "*" ? lTs.multiply(rTs) : lTs.divide(rTs);
    if (result.isNaN()) {
      return STR_NAN;
    }
    newExpr = newExpr.replace(MULTIPLY_OR_DIVIDE_REGEX, result.toString());
  }
  while (newExpr.includes("+") || /.-\d+(?:\.\d+)?/.test(newExpr)) {
    var _ADD_OR_SUBTRACT_REGE;
    var [, _leftOperand, _operator, _rightOperand] = (_ADD_OR_SUBTRACT_REGE = ADD_OR_SUBTRACT_REGEX.exec(newExpr)) !== null && _ADD_OR_SUBTRACT_REGE !== void 0 ? _ADD_OR_SUBTRACT_REGE : [];
    var _lTs = DecimalCSS.parse(_leftOperand !== null && _leftOperand !== void 0 ? _leftOperand : "");
    var _rTs = DecimalCSS.parse(_rightOperand !== null && _rightOperand !== void 0 ? _rightOperand : "");
    var _result = _operator === "+" ? _lTs.add(_rTs) : _lTs.subtract(_rTs);
    if (_result.isNaN()) {
      return STR_NAN;
    }
    newExpr = newExpr.replace(ADD_OR_SUBTRACT_REGEX, _result.toString());
  }
  return newExpr;
}
var PARENTHESES_REGEX = /\(([^()]*)\)/;
function calculateParentheses(expr) {
  var newExpr = expr;
  var match;
  while ((match = PARENTHESES_REGEX.exec(newExpr)) != null) {
    var [, parentheticalExpression] = match;
    newExpr = newExpr.replace(PARENTHESES_REGEX, calculateArithmetic(parentheticalExpression));
  }
  return newExpr;
}
function evaluateExpression(expression) {
  var newExpr = expression.replace(/\s+/g, "");
  newExpr = calculateParentheses(newExpr);
  newExpr = calculateArithmetic(newExpr);
  return newExpr;
}
function safeEvaluateExpression(expression) {
  try {
    return evaluateExpression(expression);
  } catch (_unused) {
    return STR_NAN;
  }
}
function reduceCSSCalc(expression) {
  var result = safeEvaluateExpression(expression.slice(5, -1));
  if (result === STR_NAN) {
    return "";
  }
  return result;
}
var _excluded$h = ["x", "y", "lineHeight", "capHeight", "fill", "scaleToFit", "textAnchor", "verticalAnchor"], _excluded2$9 = ["dx", "dy", "angle", "className", "breakAll"];
function _extends$i() {
  return _extends$i = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$i.apply(null, arguments);
}
function _objectWithoutProperties$h(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$h(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$h(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var BREAKING_SPACES = /[ \f\n\r\t\v\u2028\u2029]+/;
var calculateWordWidths = (_ref2) => {
  var {
    children,
    breakAll,
    style
  } = _ref2;
  try {
    var words = [];
    if (!isNullish(children)) {
      if (breakAll) {
        words = children.toString().split("");
      } else {
        words = children.toString().split(BREAKING_SPACES);
      }
    }
    var wordsWithComputedWidth = words.map((word) => ({
      word,
      width: getStringSize(word, style).width
    }));
    var spaceWidth = breakAll ? 0 : getStringSize("¬†", style).width;
    return {
      wordsWithComputedWidth,
      spaceWidth
    };
  } catch (_unused) {
    return null;
  }
};
function isValidTextAnchor(value) {
  return value === "start" || value === "middle" || value === "end" || value === "inherit";
}
var calculate = (words, lineWidth, spaceWidth, scaleToFit) => words.reduce((result, _ref2) => {
  var {
    word,
    width
  } = _ref2;
  var currentLine = result[result.length - 1];
  if (currentLine && width != null && (lineWidth == null || scaleToFit || currentLine.width + width + spaceWidth < Number(lineWidth))) {
    currentLine.words.push(word);
    currentLine.width += width + spaceWidth;
  } else {
    var newLine = {
      words: [word],
      width
    };
    result.push(newLine);
  }
  return result;
}, []);
var findLongestLine = (words) => words.reduce((a, b) => a.width > b.width ? a : b);
var suffix = "‚Ä¶";
var checkOverflow = (text2, index, breakAll, style, maxLines, lineWidth, spaceWidth, scaleToFit) => {
  var tempText = text2.slice(0, index);
  var words = calculateWordWidths({
    breakAll,
    style,
    children: tempText + suffix
  });
  if (!words) {
    return [false, []];
  }
  var result = calculate(words.wordsWithComputedWidth, lineWidth, spaceWidth, scaleToFit);
  var doesOverflow = result.length > maxLines || findLongestLine(result).width > Number(lineWidth);
  return [doesOverflow, result];
};
var calculateWordsByLines = (_ref3, initialWordsWithComputedWith, spaceWidth, lineWidth, scaleToFit) => {
  var {
    maxLines,
    children,
    style,
    breakAll
  } = _ref3;
  var shouldLimitLines = isNumber(maxLines);
  var text2 = String(children);
  var originalResult = calculate(initialWordsWithComputedWith, lineWidth, spaceWidth, scaleToFit);
  if (!shouldLimitLines || scaleToFit) {
    return originalResult;
  }
  var overflows = originalResult.length > maxLines || findLongestLine(originalResult).width > Number(lineWidth);
  if (!overflows) {
    return originalResult;
  }
  var start = 0;
  var end = text2.length - 1;
  var iterations = 0;
  var trimmedResult;
  while (start <= end && iterations <= text2.length - 1) {
    var middle = Math.floor((start + end) / 2);
    var prev = middle - 1;
    var [doesPrevOverflow, result] = checkOverflow(text2, prev, breakAll, style, maxLines, lineWidth, spaceWidth, scaleToFit);
    var [doesMiddleOverflow] = checkOverflow(text2, middle, breakAll, style, maxLines, lineWidth, spaceWidth, scaleToFit);
    if (!doesPrevOverflow && !doesMiddleOverflow) {
      start = middle + 1;
    }
    if (doesPrevOverflow && doesMiddleOverflow) {
      end = middle - 1;
    }
    if (!doesPrevOverflow && doesMiddleOverflow) {
      trimmedResult = result;
      break;
    }
    iterations++;
  }
  return trimmedResult || originalResult;
};
var getWordsWithoutCalculate = (children) => {
  var words = !isNullish(children) ? children.toString().split(BREAKING_SPACES) : [];
  return [{
    words,
    width: void 0
  }];
};
var getWordsByLines = (_ref4) => {
  var {
    width,
    scaleToFit,
    children,
    style,
    breakAll,
    maxLines
  } = _ref4;
  if ((width || scaleToFit) && !Global.isSsr) {
    var wordsWithComputedWidth, spaceWidth;
    var wordWidths = calculateWordWidths({
      breakAll,
      children,
      style
    });
    if (wordWidths) {
      var {
        wordsWithComputedWidth: wcw,
        spaceWidth: sw
      } = wordWidths;
      wordsWithComputedWidth = wcw;
      spaceWidth = sw;
    } else {
      return getWordsWithoutCalculate(children);
    }
    return calculateWordsByLines({
      breakAll,
      children,
      maxLines,
      style
    }, wordsWithComputedWidth, spaceWidth, width, Boolean(scaleToFit));
  }
  return getWordsWithoutCalculate(children);
};
var DEFAULT_FILL = "#808080";
var textDefaultProps = {
  breakAll: false,
  // Magic number from d3
  capHeight: "0.71em",
  fill: DEFAULT_FILL,
  lineHeight: "1em",
  scaleToFit: false,
  textAnchor: "start",
  // Maintain compat with existing charts / default SVG behavior
  verticalAnchor: "end",
  x: 0,
  y: 0
};
var Text = /* @__PURE__ */ forwardRef((outsideProps, ref) => {
  var _resolveDefaultProps = resolveDefaultProps(outsideProps, textDefaultProps), {
    x: propsX,
    y: propsY,
    lineHeight,
    capHeight,
    fill,
    scaleToFit,
    textAnchor,
    verticalAnchor
  } = _resolveDefaultProps, props = _objectWithoutProperties$h(_resolveDefaultProps, _excluded$h);
  var wordsByLines = useMemo(() => {
    return getWordsByLines({
      breakAll: props.breakAll,
      children: props.children,
      maxLines: props.maxLines,
      scaleToFit,
      style: props.style,
      width: props.width
    });
  }, [props.breakAll, props.children, props.maxLines, scaleToFit, props.style, props.width]);
  var {
    dx,
    dy,
    angle,
    className,
    breakAll
  } = props, textProps = _objectWithoutProperties$h(props, _excluded2$9);
  if (!isNumOrStr(propsX) || !isNumOrStr(propsY) || wordsByLines.length === 0) {
    return null;
  }
  var x = Number(propsX) + (isNumber(dx) ? dx : 0);
  var y = Number(propsY) + (isNumber(dy) ? dy : 0);
  if (!isWellBehavedNumber(x) || !isWellBehavedNumber(y)) {
    return null;
  }
  var startDy;
  switch (verticalAnchor) {
    case "start":
      startDy = reduceCSSCalc("calc(".concat(capHeight, ")"));
      break;
    case "middle":
      startDy = reduceCSSCalc("calc(".concat((wordsByLines.length - 1) / 2, " * -").concat(lineHeight, " + (").concat(capHeight, " / 2))"));
      break;
    default:
      startDy = reduceCSSCalc("calc(".concat(wordsByLines.length - 1, " * -").concat(lineHeight, ")"));
      break;
  }
  var transforms = [];
  if (scaleToFit) {
    var lineWidth = wordsByLines[0].width;
    var {
      width
    } = props;
    transforms.push("scale(".concat(isNumber(width) && isNumber(lineWidth) ? width / lineWidth : 1, ")"));
  }
  if (angle) {
    transforms.push("rotate(".concat(angle, ", ").concat(x, ", ").concat(y, ")"));
  }
  if (transforms.length) {
    textProps.transform = transforms.join(" ");
  }
  return /* @__PURE__ */ React.createElement("text", _extends$i({}, svgPropertiesAndEvents(textProps), {
    ref,
    x,
    y,
    className: clsx("recharts-text", className),
    textAnchor,
    fill: fill.includes("url") ? DEFAULT_FILL : fill
  }), wordsByLines.map((line2, index) => {
    var words = line2.words.join(breakAll ? "" : " ");
    return (
      // duplicate words will cause duplicate keys which is why we add the array index here
      /* @__PURE__ */ React.createElement("tspan", {
        x,
        dy: index === 0 ? startDy : lineHeight,
        key: "".concat(words, "-").concat(index)
      }, words)
    );
  }));
});
Text.displayName = "Text";
var _excluded$g = ["labelRef"];
function _objectWithoutProperties$g(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$g(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$g(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function ownKeys$g(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$g(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$g(Object(t), true).forEach(function(r3) {
      _defineProperty$h(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$g(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$h(e, r2, t) {
  return (r2 = _toPropertyKey$h(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$h(t) {
  var i = _toPrimitive$h(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$h(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$h() {
  return _extends$h = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$h.apply(null, arguments);
}
var CartesianLabelContext = /* @__PURE__ */ createContext(null);
var CartesianLabelContextProvider = (_ref2) => {
  var {
    x,
    y,
    upperWidth,
    lowerWidth,
    width,
    height,
    children
  } = _ref2;
  var viewBox = useMemo(() => ({
    x,
    y,
    upperWidth,
    lowerWidth,
    width,
    height
  }), [x, y, upperWidth, lowerWidth, width, height]);
  return /* @__PURE__ */ React.createElement(CartesianLabelContext.Provider, {
    value: viewBox
  }, children);
};
var useCartesianLabelContext = () => {
  var labelChildContext = useContext(CartesianLabelContext);
  var chartContext = useViewBox();
  return labelChildContext || cartesianViewBoxToTrapezoid(chartContext);
};
var PolarLabelContext = /* @__PURE__ */ createContext(null);
var usePolarLabelContext = () => {
  var labelChildContext = useContext(PolarLabelContext);
  var chartContext = useAppSelector(selectPolarViewBox);
  return labelChildContext || chartContext;
};
var getLabel = (props) => {
  var {
    value,
    formatter
  } = props;
  var label = isNullish(props.children) ? value : props.children;
  if (typeof formatter === "function") {
    return formatter(label);
  }
  return label;
};
var isLabelContentAFunction = (content) => {
  return content != null && typeof content === "function";
};
var getDeltaAngle = (startAngle, endAngle) => {
  var sign = mathSign(endAngle - startAngle);
  var deltaAngle = Math.min(Math.abs(endAngle - startAngle), 360);
  return sign * deltaAngle;
};
var renderRadialLabel = (labelProps, position, label, attrs, viewBox) => {
  var {
    offset,
    className
  } = labelProps;
  var {
    cx,
    cy,
    innerRadius,
    outerRadius,
    startAngle,
    endAngle,
    clockWise
  } = viewBox;
  var radius = (innerRadius + outerRadius) / 2;
  var deltaAngle = getDeltaAngle(startAngle, endAngle);
  var sign = deltaAngle >= 0 ? 1 : -1;
  var labelAngle, direction;
  switch (position) {
    case "insideStart":
      labelAngle = startAngle + sign * offset;
      direction = clockWise;
      break;
    case "insideEnd":
      labelAngle = endAngle - sign * offset;
      direction = !clockWise;
      break;
    case "end":
      labelAngle = endAngle + sign * offset;
      direction = clockWise;
      break;
    default:
      throw new Error("Unsupported position ".concat(position));
  }
  direction = deltaAngle <= 0 ? direction : !direction;
  var startPoint = polarToCartesian(cx, cy, radius, labelAngle);
  var endPoint = polarToCartesian(cx, cy, radius, labelAngle + (direction ? 1 : -1) * 359);
  var path2 = "M".concat(startPoint.x, ",").concat(startPoint.y, "\n    A").concat(radius, ",").concat(radius, ",0,1,").concat(direction ? 0 : 1, ",\n    ").concat(endPoint.x, ",").concat(endPoint.y);
  var id = isNullish(labelProps.id) ? uniqueId("recharts-radial-line-") : labelProps.id;
  return /* @__PURE__ */ React.createElement("text", _extends$h({}, attrs, {
    dominantBaseline: "central",
    className: clsx("recharts-radial-bar-label", className)
  }), /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement("path", {
    id,
    d: path2
  })), /* @__PURE__ */ React.createElement("textPath", {
    xlinkHref: "#".concat(id)
  }, label));
};
var getAttrsOfPolarLabel = (viewBox, offset, position) => {
  var {
    cx,
    cy,
    innerRadius,
    outerRadius,
    startAngle,
    endAngle
  } = viewBox;
  var midAngle = (startAngle + endAngle) / 2;
  if (position === "outside") {
    var {
      x: _x,
      y: _y
    } = polarToCartesian(cx, cy, outerRadius + offset, midAngle);
    return {
      x: _x,
      y: _y,
      textAnchor: _x >= cx ? "start" : "end",
      verticalAnchor: "middle"
    };
  }
  if (position === "center") {
    return {
      x: cx,
      y: cy,
      textAnchor: "middle",
      verticalAnchor: "middle"
    };
  }
  if (position === "centerTop") {
    return {
      x: cx,
      y: cy,
      textAnchor: "middle",
      verticalAnchor: "start"
    };
  }
  if (position === "centerBottom") {
    return {
      x: cx,
      y: cy,
      textAnchor: "middle",
      verticalAnchor: "end"
    };
  }
  var r2 = (innerRadius + outerRadius) / 2;
  var {
    x,
    y
  } = polarToCartesian(cx, cy, r2, midAngle);
  return {
    x,
    y,
    textAnchor: "middle",
    verticalAnchor: "middle"
  };
};
var isPolar = (viewBox) => "cx" in viewBox && isNumber(viewBox.cx);
var getAttrsOfCartesianLabel = (props, viewBox) => {
  var {
    parentViewBox: parentViewBoxFromProps,
    offset,
    position
  } = props;
  var parentViewBox;
  if (parentViewBoxFromProps != null && !isPolar(parentViewBoxFromProps)) {
    parentViewBox = parentViewBoxFromProps;
  }
  var {
    x,
    y,
    upperWidth,
    lowerWidth,
    height
  } = viewBox;
  var upperX = x;
  var lowerX = x + (upperWidth - lowerWidth) / 2;
  var middleX = (upperX + lowerX) / 2;
  var midHeightWidth = (upperWidth + lowerWidth) / 2;
  var centerX = upperX + upperWidth / 2;
  var verticalSign = height >= 0 ? 1 : -1;
  var verticalOffset = verticalSign * offset;
  var verticalEnd = verticalSign > 0 ? "end" : "start";
  var verticalStart = verticalSign > 0 ? "start" : "end";
  var horizontalSign = upperWidth >= 0 ? 1 : -1;
  var horizontalOffset = horizontalSign * offset;
  var horizontalEnd = horizontalSign > 0 ? "end" : "start";
  var horizontalStart = horizontalSign > 0 ? "start" : "end";
  if (position === "top") {
    var attrs = {
      x: upperX + upperWidth / 2,
      y: y - verticalOffset,
      textAnchor: "middle",
      verticalAnchor: verticalEnd
    };
    return _objectSpread$g(_objectSpread$g({}, attrs), parentViewBox ? {
      height: Math.max(y - parentViewBox.y, 0),
      width: upperWidth
    } : {});
  }
  if (position === "bottom") {
    var _attrs = {
      x: lowerX + lowerWidth / 2,
      y: y + height + verticalOffset,
      textAnchor: "middle",
      verticalAnchor: verticalStart
    };
    return _objectSpread$g(_objectSpread$g({}, _attrs), parentViewBox ? {
      height: Math.max(parentViewBox.y + parentViewBox.height - (y + height), 0),
      width: lowerWidth
    } : {});
  }
  if (position === "left") {
    var _attrs2 = {
      x: middleX - horizontalOffset,
      y: y + height / 2,
      textAnchor: horizontalEnd,
      verticalAnchor: "middle"
    };
    return _objectSpread$g(_objectSpread$g({}, _attrs2), parentViewBox ? {
      width: Math.max(_attrs2.x - parentViewBox.x, 0),
      height
    } : {});
  }
  if (position === "right") {
    var _attrs3 = {
      x: middleX + midHeightWidth + horizontalOffset,
      y: y + height / 2,
      textAnchor: horizontalStart,
      verticalAnchor: "middle"
    };
    return _objectSpread$g(_objectSpread$g({}, _attrs3), parentViewBox ? {
      width: Math.max(parentViewBox.x + parentViewBox.width - _attrs3.x, 0),
      height
    } : {});
  }
  var sizeAttrs = parentViewBox ? {
    width: midHeightWidth,
    height
  } : {};
  if (position === "insideLeft") {
    return _objectSpread$g({
      x: middleX + horizontalOffset,
      y: y + height / 2,
      textAnchor: horizontalStart,
      verticalAnchor: "middle"
    }, sizeAttrs);
  }
  if (position === "insideRight") {
    return _objectSpread$g({
      x: middleX + midHeightWidth - horizontalOffset,
      y: y + height / 2,
      textAnchor: horizontalEnd,
      verticalAnchor: "middle"
    }, sizeAttrs);
  }
  if (position === "insideTop") {
    return _objectSpread$g({
      x: upperX + upperWidth / 2,
      y: y + verticalOffset,
      textAnchor: "middle",
      verticalAnchor: verticalStart
    }, sizeAttrs);
  }
  if (position === "insideBottom") {
    return _objectSpread$g({
      x: lowerX + lowerWidth / 2,
      y: y + height - verticalOffset,
      textAnchor: "middle",
      verticalAnchor: verticalEnd
    }, sizeAttrs);
  }
  if (position === "insideTopLeft") {
    return _objectSpread$g({
      x: upperX + horizontalOffset,
      y: y + verticalOffset,
      textAnchor: horizontalStart,
      verticalAnchor: verticalStart
    }, sizeAttrs);
  }
  if (position === "insideTopRight") {
    return _objectSpread$g({
      x: upperX + upperWidth - horizontalOffset,
      y: y + verticalOffset,
      textAnchor: horizontalEnd,
      verticalAnchor: verticalStart
    }, sizeAttrs);
  }
  if (position === "insideBottomLeft") {
    return _objectSpread$g({
      x: lowerX + horizontalOffset,
      y: y + height - verticalOffset,
      textAnchor: horizontalStart,
      verticalAnchor: verticalEnd
    }, sizeAttrs);
  }
  if (position === "insideBottomRight") {
    return _objectSpread$g({
      x: lowerX + lowerWidth - horizontalOffset,
      y: y + height - verticalOffset,
      textAnchor: horizontalEnd,
      verticalAnchor: verticalEnd
    }, sizeAttrs);
  }
  if (!!position && typeof position === "object" && (isNumber(position.x) || isPercent(position.x)) && (isNumber(position.y) || isPercent(position.y))) {
    return _objectSpread$g({
      x: x + getPercentValue(position.x, midHeightWidth),
      y: y + getPercentValue(position.y, height),
      textAnchor: "end",
      verticalAnchor: "end"
    }, sizeAttrs);
  }
  return _objectSpread$g({
    x: centerX,
    y: y + height / 2,
    textAnchor: "middle",
    verticalAnchor: "middle"
  }, sizeAttrs);
};
var defaultLabelProps = {
  offset: 5,
  zIndex: DefaultZIndexes.label
};
function Label(outerProps) {
  var props = resolveDefaultProps(outerProps, defaultLabelProps);
  var {
    viewBox: viewBoxFromProps,
    position,
    value,
    children,
    content,
    className = "",
    textBreakAll,
    labelRef
  } = props;
  var polarViewBox = usePolarLabelContext();
  var cartesianViewBox = useCartesianLabelContext();
  var resolvedViewBox = position === "center" ? cartesianViewBox : polarViewBox !== null && polarViewBox !== void 0 ? polarViewBox : cartesianViewBox;
  var viewBox, label, positionAttrs;
  if (viewBoxFromProps == null) {
    viewBox = resolvedViewBox;
  } else if (isPolar(viewBoxFromProps)) {
    viewBox = viewBoxFromProps;
  } else {
    viewBox = cartesianViewBoxToTrapezoid(viewBoxFromProps);
  }
  if (!viewBox || isNullish(value) && isNullish(children) && !/* @__PURE__ */ isValidElement(content) && typeof content !== "function") {
    return null;
  }
  var propsWithViewBox = _objectSpread$g(_objectSpread$g({}, props), {}, {
    viewBox
  });
  if (/* @__PURE__ */ isValidElement(content)) {
    var {
      labelRef: _
    } = propsWithViewBox, propsWithoutLabelRef = _objectWithoutProperties$g(propsWithViewBox, _excluded$g);
    return /* @__PURE__ */ cloneElement(content, propsWithoutLabelRef);
  }
  if (typeof content === "function") {
    label = /* @__PURE__ */ createElement(content, propsWithViewBox);
    if (/* @__PURE__ */ isValidElement(label)) {
      return label;
    }
  } else {
    label = getLabel(props);
  }
  var attrs = svgPropertiesAndEvents(props);
  if (isPolar(viewBox)) {
    if (position === "insideStart" || position === "insideEnd" || position === "end") {
      return renderRadialLabel(props, position, label, attrs, viewBox);
    }
    positionAttrs = getAttrsOfPolarLabel(viewBox, props.offset, props.position);
  } else {
    positionAttrs = getAttrsOfCartesianLabel(props, viewBox);
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: props.zIndex
  }, /* @__PURE__ */ React.createElement(Text, _extends$h({
    ref: labelRef,
    className: clsx("recharts-label", className)
  }, attrs, positionAttrs, {
    /*
     * textAnchor is decided by default based on the `position`
     * but we allow overriding via props for precise control.
     */
    textAnchor: isValidTextAnchor(attrs.textAnchor) ? attrs.textAnchor : positionAttrs.textAnchor,
    breakAll: textBreakAll
  }), label));
}
Label.displayName = "Label";
var parseLabel = (label, viewBox, labelRef) => {
  if (!label) {
    return null;
  }
  var commonProps = {
    viewBox,
    labelRef
  };
  if (label === true) {
    return /* @__PURE__ */ React.createElement(Label, _extends$h({
      key: "label-implicit"
    }, commonProps));
  }
  if (isNumOrStr(label)) {
    return /* @__PURE__ */ React.createElement(Label, _extends$h({
      key: "label-implicit",
      value: label
    }, commonProps));
  }
  if (/* @__PURE__ */ isValidElement(label)) {
    if (label.type === Label) {
      return /* @__PURE__ */ cloneElement(label, _objectSpread$g({
        key: "label-implicit"
      }, commonProps));
    }
    return /* @__PURE__ */ React.createElement(Label, _extends$h({
      key: "label-implicit",
      content: label
    }, commonProps));
  }
  if (isLabelContentAFunction(label)) {
    return /* @__PURE__ */ React.createElement(Label, _extends$h({
      key: "label-implicit",
      content: label
    }, commonProps));
  }
  if (label && typeof label === "object") {
    return /* @__PURE__ */ React.createElement(Label, _extends$h({}, label, {
      key: "label-implicit"
    }, commonProps));
  }
  return null;
};
function CartesianLabelFromLabelProp(_ref3) {
  var {
    label,
    labelRef
  } = _ref3;
  var viewBox = useCartesianLabelContext();
  return parseLabel(label, viewBox, labelRef) || null;
}
var _excluded$f = ["valueAccessor"], _excluded2$8 = ["dataKey", "clockWise", "id", "textBreakAll", "zIndex"];
function _extends$g() {
  return _extends$g = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$g.apply(null, arguments);
}
function _objectWithoutProperties$f(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$f(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$f(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var defaultAccessor = (entry2) => Array.isArray(entry2.value) ? last(entry2.value) : entry2.value;
var CartesianLabelListContext = /* @__PURE__ */ createContext(void 0);
var CartesianLabelListContextProvider = CartesianLabelListContext.Provider;
var PolarLabelListContext = /* @__PURE__ */ createContext(void 0);
var PolarLabelListContextProvider = PolarLabelListContext.Provider;
function useCartesianLabelListContext() {
  return useContext(CartesianLabelListContext);
}
function usePolarLabelListContext() {
  return useContext(PolarLabelListContext);
}
function LabelList(_ref2) {
  var {
    valueAccessor = defaultAccessor
  } = _ref2, restProps = _objectWithoutProperties$f(_ref2, _excluded$f);
  var {
    dataKey,
    clockWise,
    id,
    textBreakAll,
    zIndex
  } = restProps, others = _objectWithoutProperties$f(restProps, _excluded2$8);
  var cartesianData = useCartesianLabelListContext();
  var polarData = usePolarLabelListContext();
  var data2 = cartesianData || polarData;
  if (!data2 || !data2.length) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: zIndex !== null && zIndex !== void 0 ? zIndex : DefaultZIndexes.label
  }, /* @__PURE__ */ React.createElement(Layer, {
    className: "recharts-label-list"
  }, data2.map((entry2, index) => {
    var _restProps$fill;
    var value = isNullish(dataKey) ? valueAccessor(entry2, index) : getValueByDataKey(entry2 && entry2.payload, dataKey);
    var idProps = isNullish(id) ? {} : {
      id: "".concat(id, "-").concat(index)
    };
    return /* @__PURE__ */ React.createElement(Label, _extends$g({
      key: "label-".concat(index)
    }, svgPropertiesAndEvents(entry2), others, idProps, {
      /*
       * Prefer to use the explicit fill from LabelList props.
       * Only in an absence of that, fall back to the fill of the entry.
       * The entry fill can be quite difficult to see especially in Bar, Pie, RadialBar in inside positions.
       * On the other hand it's quite convenient in Scatter, Line, or when the position is outside the Bar, Pie filled shapes.
       */
      fill: (_restProps$fill = restProps.fill) !== null && _restProps$fill !== void 0 ? _restProps$fill : entry2.fill,
      parentViewBox: entry2.parentViewBox,
      value,
      textBreakAll,
      viewBox: entry2.viewBox,
      index,
      zIndex: 0
    }));
  })));
}
LabelList.displayName = "LabelList";
function LabelListFromLabelProp(_ref2) {
  var {
    label
  } = _ref2;
  if (!label) {
    return null;
  }
  if (label === true) {
    return /* @__PURE__ */ React.createElement(LabelList, {
      key: "labelList-implicit"
    });
  }
  if (/* @__PURE__ */ React.isValidElement(label) || isLabelContentAFunction(label)) {
    return /* @__PURE__ */ React.createElement(LabelList, {
      key: "labelList-implicit",
      content: label
    });
  }
  if (typeof label === "object") {
    return /* @__PURE__ */ React.createElement(LabelList, _extends$g({
      key: "labelList-implicit"
    }, label, {
      type: String(label.type)
    }));
  }
  return null;
}
function _extends$f() {
  return _extends$f = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$f.apply(null, arguments);
}
var Dot = (props) => {
  var {
    cx,
    cy,
    r: r2,
    className
  } = props;
  var layerClass = clsx("recharts-dot", className);
  if (isNumber(cx) && isNumber(cy) && isNumber(r2)) {
    return /* @__PURE__ */ React.createElement("circle", _extends$f({}, svgPropertiesNoEvents(props), adaptEventHandlers(props), {
      className: layerClass,
      cx,
      cy,
      r: r2
    }));
  }
  return null;
};
var selectUnfilteredPolarItems = (state2) => state2.graphicalItems.polarItems;
var selectAxisPredicate = createSelector([pickAxisType, pickAxisId], itemAxisPredicate);
var selectPolarItemsSettings = createSelector([selectUnfilteredPolarItems, selectBaseAxis, selectAxisPredicate], combineGraphicalItemsSettings);
var selectPolarGraphicalItemsData = createSelector([selectPolarItemsSettings], combineGraphicalItemsData);
var selectPolarDisplayedData = createSelector([selectPolarGraphicalItemsData, selectChartDataAndAlwaysIgnoreIndexes], combineDisplayedData);
var selectPolarAppliedValues = createSelector([selectPolarDisplayedData, selectBaseAxis, selectPolarItemsSettings], combineAppliedValues);
createSelector([selectPolarDisplayedData, selectBaseAxis, selectPolarItemsSettings], (data2, axisSettings, items) => {
  if (items.length > 0) {
    return data2.flatMap((entry2) => {
      return items.flatMap((item) => {
        var _axisSettings$dataKey;
        var valueByDataKey = getValueByDataKey(entry2, (_axisSettings$dataKey = axisSettings.dataKey) !== null && _axisSettings$dataKey !== void 0 ? _axisSettings$dataKey : item.dataKey);
        return {
          value: valueByDataKey,
          errorDomain: []
          // polar charts do not have error bars
        };
      });
    }).filter(Boolean);
  }
  if ((axisSettings === null || axisSettings === void 0 ? void 0 : axisSettings.dataKey) != null) {
    return data2.map((item) => ({
      value: getValueByDataKey(item, axisSettings.dataKey),
      errorDomain: []
    }));
  }
  return data2.map((entry2) => ({
    value: entry2,
    errorDomain: []
  }));
});
var unsupportedInPolarChart = () => void 0;
var selectDomainOfAllPolarAppliedNumericalValues = createSelector([selectPolarDisplayedData, selectBaseAxis, selectPolarItemsSettings, selectAllErrorBarSettings, pickAxisType], combineDomainOfAllAppliedNumericalValuesIncludingErrorValues);
var selectPolarNumericalDomain = createSelector([selectBaseAxis, selectDomainDefinition, selectDomainFromUserPreference, unsupportedInPolarChart, selectDomainOfAllPolarAppliedNumericalValues, unsupportedInPolarChart, selectChartLayout, pickAxisType], combineNumericalDomain);
var selectPolarAxisDomain = createSelector([selectBaseAxis, selectChartLayout, selectPolarDisplayedData, selectPolarAppliedValues, selectStackOffsetType, pickAxisType, selectPolarNumericalDomain], combineAxisDomain);
var selectPolarNiceTicks = createSelector([selectPolarAxisDomain, selectBaseAxis, selectRealScaleType], combineNiceTicks);
createSelector([selectBaseAxis, selectPolarAxisDomain, selectPolarNiceTicks, pickAxisType], combineAxisDomainWithNiceTicks);
var initialState$6 = {
  radiusAxis: {},
  angleAxis: {}
};
var polarAxisSlice = createSlice({
  name: "polarAxis",
  initialState: initialState$6,
  reducers: {
    addRadiusAxis(state2, action2) {
      state2.radiusAxis[action2.payload.id] = castDraft(action2.payload);
    },
    removeRadiusAxis(state2, action2) {
      delete state2.radiusAxis[action2.payload.id];
    },
    addAngleAxis(state2, action2) {
      state2.angleAxis[action2.payload.id] = castDraft(action2.payload);
    },
    removeAngleAxis(state2, action2) {
      delete state2.angleAxis[action2.payload.id];
    }
  }
});
var {
  addRadiusAxis,
  removeRadiusAxis,
  addAngleAxis,
  removeAngleAxis
} = polarAxisSlice.actions;
var polarAxisReducer = polarAxisSlice.reducer;
function ownKeys$f(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$f(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$f(Object(t), true).forEach(function(r3) {
      _defineProperty$g(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$f(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$g(e, r2, t) {
  return (r2 = _toPropertyKey$g(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$g(t) {
  var i = _toPrimitive$g(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$g(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var pickId = (_state, id) => id;
var selectSynchronisedPieSettings = createSelector([selectUnfilteredPolarItems, pickId], (graphicalItems, id) => graphicalItems.filter((item) => item.type === "pie").find((item) => item.id === id));
var emptyArray = [];
var pickCells$1 = (_state, _id, cells) => {
  if ((cells === null || cells === void 0 ? void 0 : cells.length) === 0) {
    return emptyArray;
  }
  return cells;
};
var selectDisplayedData = createSelector([selectChartDataAndAlwaysIgnoreIndexes, selectSynchronisedPieSettings, pickCells$1], (_ref2, pieSettings, cells) => {
  var {
    chartData
  } = _ref2;
  if (pieSettings == null) {
    return void 0;
  }
  var displayedData;
  if ((pieSettings === null || pieSettings === void 0 ? void 0 : pieSettings.data) != null && pieSettings.data.length > 0) {
    displayedData = pieSettings.data;
  } else {
    displayedData = chartData;
  }
  if ((!displayedData || !displayedData.length) && cells != null) {
    displayedData = cells.map((cell) => _objectSpread$f(_objectSpread$f({}, pieSettings.presentationProps), cell.props));
  }
  if (displayedData == null) {
    return void 0;
  }
  return displayedData;
});
var selectPieLegend = createSelector([selectDisplayedData, selectSynchronisedPieSettings, pickCells$1], (displayedData, pieSettings, cells) => {
  if (displayedData == null || pieSettings == null) {
    return void 0;
  }
  return displayedData.map((entry2, i) => {
    var _cells$i;
    var name = getValueByDataKey(entry2, pieSettings.nameKey, pieSettings.name);
    var color;
    if (cells !== null && cells !== void 0 && (_cells$i = cells[i]) !== null && _cells$i !== void 0 && (_cells$i = _cells$i.props) !== null && _cells$i !== void 0 && _cells$i.fill) {
      color = cells[i].props.fill;
    } else if (typeof entry2 === "object" && entry2 != null && "fill" in entry2) {
      color = entry2.fill;
    } else {
      color = pieSettings.fill;
    }
    return {
      value: getTooltipNameProp(name, pieSettings.dataKey),
      color,
      // @ts-expect-error we need a better typing for our data inputs
      payload: entry2,
      type: pieSettings.legendType
    };
  });
});
var selectPieSectors = createSelector([selectDisplayedData, selectSynchronisedPieSettings, pickCells$1, selectChartOffsetInternal], (displayedData, pieSettings, cells, offset) => {
  if (pieSettings == null || displayedData == null) {
    return void 0;
  }
  return computePieSectors({
    offset,
    pieSettings,
    displayedData,
    cells
  });
});
var getDisplayName = (Comp) => {
  if (typeof Comp === "string") {
    return Comp;
  }
  if (!Comp) {
    return "";
  }
  return Comp.displayName || Comp.name || "Component";
};
var lastChildren = null;
var lastResult = null;
var toArray = (children) => {
  if (children === lastChildren && Array.isArray(lastResult)) {
    return lastResult;
  }
  var result = [];
  Children.forEach(children, (child) => {
    if (isNullish(child)) return;
    if (isFragment(child)) {
      result = result.concat(toArray(child.props.children));
    } else {
      result.push(child);
    }
  });
  lastResult = result;
  lastChildren = children;
  return result;
};
function findAllByType(children, type) {
  var result = [];
  var types = [];
  if (Array.isArray(type)) {
    types = type.map((t) => getDisplayName(t));
  } else {
    types = [getDisplayName(type)];
  }
  toArray(children).forEach((child) => {
    var childType = get(child, "type.displayName") || get(child, "type.name");
    if (childType && types.indexOf(childType) !== -1) {
      result.push(child);
    }
  });
  return result;
}
var isClipDot = (dot) => {
  if (dot && typeof dot === "object" && "clipDot" in dot) {
    return Boolean(dot.clipDot);
  }
  return true;
};
function ownKeys$e(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$e(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$e(Object(t), true).forEach(function(r3) {
      _defineProperty$f(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$e(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$f(e, r2, t) {
  return (r2 = _toPropertyKey$f(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$f(t) {
  var i = _toPrimitive$f(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$f(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$e() {
  return _extends$e = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$e.apply(null, arguments);
}
var getTrapezoidPath = (x, y, upperWidth, lowerWidth, height) => {
  var widthGap = upperWidth - lowerWidth;
  var path2;
  path2 = "M ".concat(x, ",").concat(y);
  path2 += "L ".concat(x + upperWidth, ",").concat(y);
  path2 += "L ".concat(x + upperWidth - widthGap / 2, ",").concat(y + height);
  path2 += "L ".concat(x + upperWidth - widthGap / 2 - lowerWidth, ",").concat(y + height);
  path2 += "L ".concat(x, ",").concat(y, " Z");
  return path2;
};
var defaultProps$3 = {
  x: 0,
  y: 0,
  upperWidth: 0,
  lowerWidth: 0,
  height: 0,
  isUpdateAnimationActive: false,
  animationBegin: 0,
  animationDuration: 1500,
  animationEasing: "ease"
};
var Trapezoid = (outsideProps) => {
  var trapezoidProps = resolveDefaultProps(outsideProps, defaultProps$3);
  var {
    x,
    y,
    upperWidth,
    lowerWidth,
    height,
    className
  } = trapezoidProps;
  var {
    animationEasing,
    animationDuration,
    animationBegin,
    isUpdateAnimationActive
  } = trapezoidProps;
  var pathRef = useRef(null);
  var [totalLength, setTotalLength] = useState(-1);
  var prevUpperWidthRef = useRef(upperWidth);
  var prevLowerWidthRef = useRef(lowerWidth);
  var prevHeightRef = useRef(height);
  var prevXRef = useRef(x);
  var prevYRef = useRef(y);
  var animationId = useAnimationId(outsideProps, "trapezoid-");
  useEffect(() => {
    if (pathRef.current && pathRef.current.getTotalLength) {
      try {
        var pathTotalLength = pathRef.current.getTotalLength();
        if (pathTotalLength) {
          setTotalLength(pathTotalLength);
        }
      } catch (_unused) {
      }
    }
  }, []);
  if (x !== +x || y !== +y || upperWidth !== +upperWidth || lowerWidth !== +lowerWidth || height !== +height || upperWidth === 0 && lowerWidth === 0 || height === 0) {
    return null;
  }
  var layerClass = clsx("recharts-trapezoid", className);
  if (!isUpdateAnimationActive) {
    return /* @__PURE__ */ React.createElement("g", null, /* @__PURE__ */ React.createElement("path", _extends$e({}, svgPropertiesAndEvents(trapezoidProps), {
      className: layerClass,
      d: getTrapezoidPath(x, y, upperWidth, lowerWidth, height)
    })));
  }
  var prevUpperWidth = prevUpperWidthRef.current;
  var prevLowerWidth = prevLowerWidthRef.current;
  var prevHeight = prevHeightRef.current;
  var prevX = prevXRef.current;
  var prevY = prevYRef.current;
  var from2 = "0px ".concat(totalLength === -1 ? 1 : totalLength, "px");
  var to2 = "".concat(totalLength, "px 0px");
  var transition = getTransitionVal(["strokeDasharray"], animationDuration, animationEasing);
  return /* @__PURE__ */ React.createElement(JavascriptAnimate, {
    animationId,
    key: animationId,
    canBegin: totalLength > 0,
    duration: animationDuration,
    easing: animationEasing,
    isActive: isUpdateAnimationActive,
    begin: animationBegin
  }, (t) => {
    var currUpperWidth = interpolate(prevUpperWidth, upperWidth, t);
    var currLowerWidth = interpolate(prevLowerWidth, lowerWidth, t);
    var currHeight = interpolate(prevHeight, height, t);
    var currX = interpolate(prevX, x, t);
    var currY = interpolate(prevY, y, t);
    if (pathRef.current) {
      prevUpperWidthRef.current = currUpperWidth;
      prevLowerWidthRef.current = currLowerWidth;
      prevHeightRef.current = currHeight;
      prevXRef.current = currX;
      prevYRef.current = currY;
    }
    var animationStyle = t > 0 ? {
      transition,
      strokeDasharray: to2
    } : {
      strokeDasharray: from2
    };
    return /* @__PURE__ */ React.createElement("path", _extends$e({}, svgPropertiesAndEvents(trapezoidProps), {
      className: layerClass,
      d: getTrapezoidPath(currX, currY, currUpperWidth, currLowerWidth, currHeight),
      ref: pathRef,
      style: _objectSpread$e(_objectSpread$e({}, animationStyle), trapezoidProps.style)
    }));
  });
};
var _excluded$e = ["option", "shapeType", "propTransformer", "activeClassName", "isActive"];
function _objectWithoutProperties$e(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$e(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$e(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function ownKeys$d(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$d(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$d(Object(t), true).forEach(function(r3) {
      _defineProperty$e(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$d(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$e(e, r2, t) {
  return (r2 = _toPropertyKey$e(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$e(t) {
  var i = _toPrimitive$e(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$e(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function defaultPropTransformer(option, props) {
  return _objectSpread$d(_objectSpread$d({}, props), option);
}
function isSymbolsProps(shapeType, _elementProps) {
  return shapeType === "symbols";
}
function ShapeSelector(_ref2) {
  var {
    shapeType,
    elementProps
  } = _ref2;
  switch (shapeType) {
    case "rectangle":
      return /* @__PURE__ */ React.createElement(Rectangle, elementProps);
    case "trapezoid":
      return /* @__PURE__ */ React.createElement(Trapezoid, elementProps);
    case "sector":
      return /* @__PURE__ */ React.createElement(Sector, elementProps);
    case "symbols":
      if (isSymbolsProps(shapeType)) {
        return /* @__PURE__ */ React.createElement(Symbols, elementProps);
      }
      break;
    case "curve":
      return /* @__PURE__ */ React.createElement(Curve, elementProps);
    default:
      return null;
  }
}
function getPropsFromShapeOption(option) {
  if (/* @__PURE__ */ isValidElement(option)) {
    return option.props;
  }
  return option;
}
function Shape(_ref2) {
  var {
    option,
    shapeType,
    propTransformer = defaultPropTransformer,
    activeClassName = "recharts-active-shape",
    isActive
  } = _ref2, props = _objectWithoutProperties$e(_ref2, _excluded$e);
  var shape;
  if (/* @__PURE__ */ isValidElement(option)) {
    shape = /* @__PURE__ */ cloneElement(option, _objectSpread$d(_objectSpread$d({}, props), getPropsFromShapeOption(option)));
  } else if (typeof option === "function") {
    shape = option(props);
  } else if (isPlainObject(option) && typeof option !== "boolean") {
    var nextProps = propTransformer(option, props);
    shape = /* @__PURE__ */ React.createElement(ShapeSelector, {
      shapeType,
      elementProps: nextProps
    });
  } else {
    var elementProps = props;
    shape = /* @__PURE__ */ React.createElement(ShapeSelector, {
      shapeType,
      elementProps
    });
  }
  if (isActive) {
    return /* @__PURE__ */ React.createElement(Layer, {
      className: activeClassName
    }, shape);
  }
  return shape;
}
var useMouseEnterItemDispatch = (onMouseEnterFromProps, dataKey) => {
  var dispatch = useAppDispatch();
  return (data2, index) => (event) => {
    onMouseEnterFromProps === null || onMouseEnterFromProps === void 0 || onMouseEnterFromProps(data2, index, event);
    dispatch(setActiveMouseOverItemIndex({
      activeIndex: String(index),
      activeDataKey: dataKey,
      activeCoordinate: data2.tooltipPosition
    }));
  };
};
var useMouseLeaveItemDispatch = (onMouseLeaveFromProps) => {
  var dispatch = useAppDispatch();
  return (data2, index) => (event) => {
    onMouseLeaveFromProps === null || onMouseLeaveFromProps === void 0 || onMouseLeaveFromProps(data2, index, event);
    dispatch(mouseLeaveItem());
  };
};
var useMouseClickItemDispatch = (onMouseClickFromProps, dataKey) => {
  var dispatch = useAppDispatch();
  return (data2, index) => (event) => {
    onMouseClickFromProps === null || onMouseClickFromProps === void 0 || onMouseClickFromProps(data2, index, event);
    dispatch(setActiveClickItemIndex({
      activeIndex: String(index),
      activeDataKey: dataKey,
      activeCoordinate: data2.tooltipPosition
    }));
  };
};
function SetTooltipEntrySettings(_ref2) {
  var {
    fn,
    args
  } = _ref2;
  var dispatch = useAppDispatch();
  var isPanorama = useIsPanorama();
  useLayoutEffect(() => {
    if (isPanorama) {
      return void 0;
    }
    var tooltipEntrySettings = fn(args);
    dispatch(addTooltipEntrySettings(tooltipEntrySettings));
    return () => {
      dispatch(removeTooltipEntrySettings(tooltipEntrySettings));
    };
  }, [fn, args, dispatch, isPanorama]);
  return null;
}
function SetLegendPayload(_ref2) {
  var {
    legendPayload
  } = _ref2;
  var dispatch = useAppDispatch();
  var isPanorama = useIsPanorama();
  useLayoutEffect(() => {
    if (isPanorama) {
      return noop$1;
    }
    dispatch(addLegendPayload(legendPayload));
    return () => {
      dispatch(removeLegendPayload(legendPayload));
    };
  }, [dispatch, isPanorama, legendPayload]);
  return null;
}
function SetPolarLegendPayload(_ref2) {
  var {
    legendPayload
  } = _ref2;
  var dispatch = useAppDispatch();
  var layout = useAppSelector(selectChartLayout);
  useLayoutEffect(() => {
    if (layout !== "centric" && layout !== "radial") {
      return noop$1;
    }
    dispatch(addLegendPayload(legendPayload));
    return () => {
      dispatch(removeLegendPayload(legendPayload));
    };
  }, [dispatch, layout, legendPayload]);
  return null;
}
var _ref;
var useIdFallback = () => {
  var [id] = React.useState(() => uniqueId("uid-"));
  return id;
};
var useId = (_ref = React["useId".toString()]) !== null && _ref !== void 0 ? _ref : useIdFallback;
function useUniqueId(prefix, customId) {
  var generatedId = useId();
  if (customId) {
    return customId;
  }
  return prefix ? "".concat(prefix, "-").concat(generatedId) : generatedId;
}
var GraphicalItemIdContext = /* @__PURE__ */ createContext(void 0);
var RegisterGraphicalItemId = (_ref2) => {
  var {
    id,
    type,
    children
  } = _ref2;
  var resolvedId = useUniqueId("recharts-".concat(type), id);
  return /* @__PURE__ */ React.createElement(GraphicalItemIdContext.Provider, {
    value: resolvedId
  }, children(resolvedId));
};
var initialState$5 = {
  cartesianItems: [],
  polarItems: []
};
var graphicalItemsSlice = createSlice({
  name: "graphicalItems",
  initialState: initialState$5,
  reducers: {
    addCartesianGraphicalItem: {
      reducer(state2, action2) {
        state2.cartesianItems.push(castDraft(action2.payload));
      },
      prepare: prepareAutoBatched()
    },
    replaceCartesianGraphicalItem: {
      reducer(state2, action2) {
        var {
          prev,
          next
        } = action2.payload;
        var index = current(state2).cartesianItems.indexOf(castDraft(prev));
        if (index > -1) {
          state2.cartesianItems[index] = castDraft(next);
        }
      },
      prepare: prepareAutoBatched()
    },
    removeCartesianGraphicalItem: {
      reducer(state2, action2) {
        var index = current(state2).cartesianItems.indexOf(castDraft(action2.payload));
        if (index > -1) {
          state2.cartesianItems.splice(index, 1);
        }
      },
      prepare: prepareAutoBatched()
    },
    addPolarGraphicalItem: {
      reducer(state2, action2) {
        state2.polarItems.push(castDraft(action2.payload));
      },
      prepare: prepareAutoBatched()
    },
    removePolarGraphicalItem: {
      reducer(state2, action2) {
        var index = current(state2).polarItems.indexOf(castDraft(action2.payload));
        if (index > -1) {
          state2.polarItems.splice(index, 1);
        }
      },
      prepare: prepareAutoBatched()
    }
  }
});
var {
  addCartesianGraphicalItem,
  replaceCartesianGraphicalItem,
  removeCartesianGraphicalItem,
  addPolarGraphicalItem,
  removePolarGraphicalItem
} = graphicalItemsSlice.actions;
var graphicalItemsReducer = graphicalItemsSlice.reducer;
function SetCartesianGraphicalItem(props) {
  var dispatch = useAppDispatch();
  var prevPropsRef = useRef(null);
  useLayoutEffect(() => {
    if (prevPropsRef.current === null) {
      dispatch(addCartesianGraphicalItem(props));
    } else if (prevPropsRef.current !== props) {
      dispatch(replaceCartesianGraphicalItem({
        prev: prevPropsRef.current,
        next: props
      }));
    }
    prevPropsRef.current = props;
  }, [dispatch, props]);
  useLayoutEffect(() => {
    return () => {
      if (prevPropsRef.current) {
        dispatch(removeCartesianGraphicalItem(prevPropsRef.current));
        prevPropsRef.current = null;
      }
    };
  }, [dispatch]);
  return null;
}
function SetPolarGraphicalItem(props) {
  var dispatch = useAppDispatch();
  useLayoutEffect(() => {
    dispatch(addPolarGraphicalItem(props));
    return () => {
      dispatch(removePolarGraphicalItem(props));
    };
  }, [dispatch, props]);
  return null;
}
var _excluded$d = ["onMouseEnter", "onClick", "onMouseLeave"], _excluded2$7 = ["id"], _excluded3$6 = ["id"];
function _objectWithoutProperties$d(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$d(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$d(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function ownKeys$c(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$c(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$c(Object(t), true).forEach(function(r3) {
      _defineProperty$d(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$c(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$d(e, r2, t) {
  return (r2 = _toPropertyKey$d(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$d(t) {
  var i = _toPrimitive$d(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$d(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$d() {
  return _extends$d = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$d.apply(null, arguments);
}
function SetPiePayloadLegend(props) {
  var cells = useMemo(() => findAllByType(props.children, Cell), [props.children]);
  var legendPayload = useAppSelector((state2) => selectPieLegend(state2, props.id, cells));
  if (legendPayload == null) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(SetPolarLegendPayload, {
    legendPayload
  });
}
function getTooltipEntrySettings$3(props) {
  var {
    dataKey,
    nameKey,
    sectors,
    stroke,
    strokeWidth,
    fill,
    name,
    hide,
    tooltipType
  } = props;
  return {
    dataDefinedOnItem: sectors.map((p) => p.tooltipPayload),
    positions: sectors.map((p) => p.tooltipPosition),
    settings: {
      stroke,
      strokeWidth,
      fill,
      dataKey,
      nameKey,
      name: getTooltipNameProp(name, dataKey),
      hide,
      type: tooltipType,
      color: fill,
      unit: ""
      // why doesn't Pie support unit?
    }
  };
}
var getTextAnchor = (x, cx) => {
  if (x > cx) {
    return "start";
  }
  if (x < cx) {
    return "end";
  }
  return "middle";
};
var getOuterRadius = (dataPoint, outerRadius, maxPieRadius) => {
  if (typeof outerRadius === "function") {
    return getPercentValue(outerRadius(dataPoint), maxPieRadius, maxPieRadius * 0.8);
  }
  return getPercentValue(outerRadius, maxPieRadius, maxPieRadius * 0.8);
};
var parseCoordinateOfPie = (pieSettings, offset, dataPoint) => {
  var {
    top,
    left,
    width,
    height
  } = offset;
  var maxPieRadius = getMaxRadius(width, height);
  var cx = left + getPercentValue(pieSettings.cx, width, width / 2);
  var cy = top + getPercentValue(pieSettings.cy, height, height / 2);
  var innerRadius = getPercentValue(pieSettings.innerRadius, maxPieRadius, 0);
  var outerRadius = getOuterRadius(dataPoint, pieSettings.outerRadius, maxPieRadius);
  var maxRadius = pieSettings.maxRadius || Math.sqrt(width * width + height * height) / 2;
  return {
    cx,
    cy,
    innerRadius,
    outerRadius,
    maxRadius
  };
};
var parseDeltaAngle = (startAngle, endAngle) => {
  var sign = mathSign(endAngle - startAngle);
  var deltaAngle = Math.min(Math.abs(endAngle - startAngle), 360);
  return sign * deltaAngle;
};
function getClassNamePropertyIfExists(u) {
  if (u && typeof u === "object" && "className" in u && typeof u.className === "string") {
    return u.className;
  }
  return "";
}
var renderLabelLineItem = (option, props) => {
  if (/* @__PURE__ */ React.isValidElement(option)) {
    return /* @__PURE__ */ React.cloneElement(option, props);
  }
  if (typeof option === "function") {
    return option(props);
  }
  var className = clsx("recharts-pie-label-line", typeof option !== "boolean" ? option.className : "");
  return /* @__PURE__ */ React.createElement(Curve, _extends$d({}, props, {
    type: "linear",
    className
  }));
};
var renderLabelItem = (option, props, value) => {
  if (/* @__PURE__ */ React.isValidElement(option)) {
    return /* @__PURE__ */ React.cloneElement(option, props);
  }
  var label = value;
  if (typeof option === "function") {
    label = option(props);
    if (/* @__PURE__ */ React.isValidElement(label)) {
      return label;
    }
  }
  var className = clsx("recharts-pie-label-text", getClassNamePropertyIfExists(option));
  return /* @__PURE__ */ React.createElement(Text, _extends$d({}, props, {
    alignmentBaseline: "middle",
    className
  }), label);
};
function PieLabels(_ref2) {
  var {
    sectors,
    props,
    showLabels
  } = _ref2;
  var {
    label,
    labelLine,
    dataKey
  } = props;
  if (!showLabels || !label || !sectors) {
    return null;
  }
  var pieProps = svgPropertiesNoEvents(props);
  var customLabelProps = svgPropertiesNoEventsFromUnknown(label);
  var customLabelLineProps = svgPropertiesNoEventsFromUnknown(labelLine);
  var offsetRadius = typeof label === "object" && "offsetRadius" in label && typeof label.offsetRadius === "number" && label.offsetRadius || 20;
  var labels = sectors.map((entry2, i) => {
    var midAngle = (entry2.startAngle + entry2.endAngle) / 2;
    var endPoint = polarToCartesian(entry2.cx, entry2.cy, entry2.outerRadius + offsetRadius, midAngle);
    var labelProps = _objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c({}, pieProps), entry2), {}, {
      // @ts-expect-error customLabelProps is contributing unknown props
      stroke: "none"
    }, customLabelProps), {}, {
      index: i,
      textAnchor: getTextAnchor(endPoint.x, entry2.cx)
    }, endPoint);
    var lineProps = _objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c({}, pieProps), entry2), {}, {
      // @ts-expect-error customLabelLineProps is contributing unknown props
      fill: "none",
      // @ts-expect-error customLabelLineProps is contributing unknown props
      stroke: entry2.fill
    }, customLabelLineProps), {}, {
      index: i,
      points: [polarToCartesian(entry2.cx, entry2.cy, entry2.outerRadius, midAngle), endPoint],
      key: "line"
    });
    return /* @__PURE__ */ React.createElement(ZIndexLayer, {
      zIndex: DefaultZIndexes.label,
      key: "label-".concat(entry2.startAngle, "-").concat(entry2.endAngle, "-").concat(entry2.midAngle, "-").concat(i)
    }, /* @__PURE__ */ React.createElement(Layer, null, labelLine && renderLabelLineItem(labelLine, lineProps), renderLabelItem(label, labelProps, getValueByDataKey(entry2, dataKey))));
  });
  return /* @__PURE__ */ React.createElement(Layer, {
    className: "recharts-pie-labels"
  }, labels);
}
function PieLabelList(_ref2) {
  var {
    sectors,
    props,
    showLabels
  } = _ref2;
  var {
    label
  } = props;
  if (typeof label === "object" && label != null && "position" in label) {
    return /* @__PURE__ */ React.createElement(LabelListFromLabelProp, {
      label
    });
  }
  return /* @__PURE__ */ React.createElement(PieLabels, {
    sectors,
    props,
    showLabels
  });
}
function PieSectors(props) {
  var {
    sectors,
    activeShape,
    inactiveShape: inactiveShapeProp,
    allOtherPieProps
  } = props;
  var activeIndex = useAppSelector(selectActiveTooltipIndex);
  var {
    onMouseEnter: onMouseEnterFromProps,
    onClick: onItemClickFromProps,
    onMouseLeave: onMouseLeaveFromProps
  } = allOtherPieProps, restOfAllOtherProps = _objectWithoutProperties$d(allOtherPieProps, _excluded$d);
  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, allOtherPieProps.dataKey);
  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);
  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, allOtherPieProps.dataKey);
  if (sectors == null || sectors.length === 0) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(React.Fragment, null, sectors.map((entry2, i) => {
    if ((entry2 === null || entry2 === void 0 ? void 0 : entry2.startAngle) === 0 && (entry2 === null || entry2 === void 0 ? void 0 : entry2.endAngle) === 0 && sectors.length !== 1) return null;
    var isSectorActive = activeShape && String(i) === activeIndex;
    var inactiveShape = activeIndex ? inactiveShapeProp : null;
    var sectorOptions = isSectorActive ? activeShape : inactiveShape;
    var sectorProps = _objectSpread$c(_objectSpread$c({}, entry2), {}, {
      stroke: entry2.stroke,
      tabIndex: -1,
      [DATA_ITEM_INDEX_ATTRIBUTE_NAME]: i,
      [DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]: allOtherPieProps.dataKey
    });
    return /* @__PURE__ */ React.createElement(Layer, _extends$d({
      key: "sector-".concat(entry2 === null || entry2 === void 0 ? void 0 : entry2.startAngle, "-").concat(entry2 === null || entry2 === void 0 ? void 0 : entry2.endAngle, "-").concat(entry2.midAngle, "-").concat(i),
      tabIndex: -1,
      className: "recharts-pie-sector"
    }, adaptEventsOfChild(restOfAllOtherProps, entry2, i), {
      // @ts-expect-error the types need a bit of attention
      onMouseEnter: onMouseEnterFromContext(entry2, i),
      onMouseLeave: onMouseLeaveFromContext(entry2, i),
      onClick: onClickFromContext(entry2, i)
    }), /* @__PURE__ */ React.createElement(Shape, _extends$d({
      option: sectorOptions,
      isActive: isSectorActive,
      shapeType: "sector"
    }, sectorProps)));
  }));
}
function computePieSectors(_ref3) {
  var _pieSettings$paddingA;
  var {
    pieSettings,
    displayedData,
    cells,
    offset
  } = _ref3;
  var {
    cornerRadius,
    startAngle,
    endAngle,
    dataKey,
    nameKey,
    tooltipType
  } = pieSettings;
  var minAngle = Math.abs(pieSettings.minAngle);
  var deltaAngle = parseDeltaAngle(startAngle, endAngle);
  var absDeltaAngle = Math.abs(deltaAngle);
  var paddingAngle = displayedData.length <= 1 ? 0 : (_pieSettings$paddingA = pieSettings.paddingAngle) !== null && _pieSettings$paddingA !== void 0 ? _pieSettings$paddingA : 0;
  var notZeroItemCount = displayedData.filter((entry2) => getValueByDataKey(entry2, dataKey, 0) !== 0).length;
  var totalPaddingAngle = (absDeltaAngle >= 360 ? notZeroItemCount : notZeroItemCount - 1) * paddingAngle;
  var realTotalAngle = absDeltaAngle - notZeroItemCount * minAngle - totalPaddingAngle;
  var sum = displayedData.reduce((result, entry2) => {
    var val = getValueByDataKey(entry2, dataKey, 0);
    return result + (isNumber(val) ? val : 0);
  }, 0);
  var sectors;
  if (sum > 0) {
    var prev;
    sectors = displayedData.map((entry2, i) => {
      var val = getValueByDataKey(entry2, dataKey, 0);
      var name = getValueByDataKey(entry2, nameKey, i);
      var coordinate = parseCoordinateOfPie(pieSettings, offset, entry2);
      var percent = (isNumber(val) ? val : 0) / sum;
      var tempStartAngle;
      var entryWithCellInfo = _objectSpread$c(_objectSpread$c({}, entry2), cells && cells[i] && cells[i].props);
      if (i) {
        tempStartAngle = prev.endAngle + mathSign(deltaAngle) * paddingAngle * (val !== 0 ? 1 : 0);
      } else {
        tempStartAngle = startAngle;
      }
      var tempEndAngle = tempStartAngle + mathSign(deltaAngle) * ((val !== 0 ? minAngle : 0) + percent * realTotalAngle);
      var midAngle = (tempStartAngle + tempEndAngle) / 2;
      var middleRadius = (coordinate.innerRadius + coordinate.outerRadius) / 2;
      var tooltipPayload = [{
        name,
        value: val,
        payload: entryWithCellInfo,
        dataKey,
        type: tooltipType
      }];
      var tooltipPosition = polarToCartesian(coordinate.cx, coordinate.cy, middleRadius, midAngle);
      prev = _objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c({}, pieSettings.presentationProps), {}, {
        percent,
        cornerRadius: typeof cornerRadius === "string" ? parseFloat(cornerRadius) : cornerRadius,
        name,
        tooltipPayload,
        midAngle,
        middleRadius,
        tooltipPosition
      }, entryWithCellInfo), coordinate), {}, {
        value: val,
        startAngle: tempStartAngle,
        endAngle: tempEndAngle,
        payload: entryWithCellInfo,
        paddingAngle: mathSign(deltaAngle) * paddingAngle
      });
      return prev;
    });
  }
  return sectors;
}
function PieLabelListProvider(_ref4) {
  var {
    showLabels,
    sectors,
    children
  } = _ref4;
  var labelListEntries = useMemo(() => {
    if (!showLabels || !sectors) {
      return [];
    }
    return sectors.map((entry2) => ({
      value: entry2.value,
      payload: entry2.payload,
      clockWise: false,
      parentViewBox: void 0,
      viewBox: {
        cx: entry2.cx,
        cy: entry2.cy,
        innerRadius: entry2.innerRadius,
        outerRadius: entry2.outerRadius,
        startAngle: entry2.startAngle,
        endAngle: entry2.endAngle,
        clockWise: false
      },
      fill: entry2.fill
    }));
  }, [sectors, showLabels]);
  return /* @__PURE__ */ React.createElement(PolarLabelListContextProvider, {
    value: showLabels ? labelListEntries : void 0
  }, children);
}
function SectorsWithAnimation(_ref5) {
  var {
    props,
    previousSectorsRef
  } = _ref5;
  var {
    sectors,
    isAnimationActive,
    animationBegin,
    animationDuration,
    animationEasing,
    activeShape,
    inactiveShape,
    onAnimationStart,
    onAnimationEnd
  } = props;
  var animationId = useAnimationId(props, "recharts-pie-");
  var prevSectors = previousSectorsRef.current;
  var [isAnimating, setIsAnimating] = useState(false);
  var handleAnimationEnd = useCallback(() => {
    if (typeof onAnimationEnd === "function") {
      onAnimationEnd();
    }
    setIsAnimating(false);
  }, [onAnimationEnd]);
  var handleAnimationStart = useCallback(() => {
    if (typeof onAnimationStart === "function") {
      onAnimationStart();
    }
    setIsAnimating(true);
  }, [onAnimationStart]);
  return /* @__PURE__ */ React.createElement(PieLabelListProvider, {
    showLabels: !isAnimating,
    sectors
  }, /* @__PURE__ */ React.createElement(JavascriptAnimate, {
    animationId,
    begin: animationBegin,
    duration: animationDuration,
    isActive: isAnimationActive,
    easing: animationEasing,
    onAnimationStart: handleAnimationStart,
    onAnimationEnd: handleAnimationEnd,
    key: animationId
  }, (t) => {
    var stepData = [];
    var first = sectors && sectors[0];
    var curAngle = first === null || first === void 0 ? void 0 : first.startAngle;
    sectors === null || sectors === void 0 || sectors.forEach((entry2, index) => {
      var prev = prevSectors && prevSectors[index];
      var paddingAngle = index > 0 ? get(entry2, "paddingAngle", 0) : 0;
      if (prev) {
        var angle = interpolate(prev.endAngle - prev.startAngle, entry2.endAngle - entry2.startAngle, t);
        var latest = _objectSpread$c(_objectSpread$c({}, entry2), {}, {
          startAngle: curAngle + paddingAngle,
          endAngle: curAngle + angle + paddingAngle
        });
        stepData.push(latest);
        curAngle = latest.endAngle;
      } else {
        var {
          endAngle,
          startAngle
        } = entry2;
        var deltaAngle = interpolate(0, endAngle - startAngle, t);
        var _latest = _objectSpread$c(_objectSpread$c({}, entry2), {}, {
          startAngle: curAngle + paddingAngle,
          endAngle: curAngle + deltaAngle + paddingAngle
        });
        stepData.push(_latest);
        curAngle = _latest.endAngle;
      }
    });
    previousSectorsRef.current = stepData;
    return /* @__PURE__ */ React.createElement(Layer, null, /* @__PURE__ */ React.createElement(PieSectors, {
      sectors: stepData,
      activeShape,
      inactiveShape,
      allOtherPieProps: props
    }));
  }), /* @__PURE__ */ React.createElement(PieLabelList, {
    showLabels: !isAnimating,
    sectors,
    props
  }), props.children);
}
var defaultPieProps = {
  animationBegin: 400,
  animationDuration: 1500,
  animationEasing: "ease",
  cx: "50%",
  cy: "50%",
  dataKey: "value",
  endAngle: 360,
  fill: "#808080",
  hide: false,
  innerRadius: 0,
  isAnimationActive: !Global.isSsr,
  labelLine: true,
  legendType: "rect",
  minAngle: 0,
  nameKey: "name",
  outerRadius: "80%",
  paddingAngle: 0,
  rootTabIndex: 0,
  startAngle: 0,
  stroke: "#fff",
  zIndex: DefaultZIndexes.area
};
function PieImpl(props) {
  var {
    id
  } = props, propsWithoutId = _objectWithoutProperties$d(props, _excluded2$7);
  var {
    hide,
    className,
    rootTabIndex
  } = props;
  var cells = useMemo(() => findAllByType(props.children, Cell), [props.children]);
  var sectors = useAppSelector((state2) => selectPieSectors(state2, id, cells));
  var previousSectorsRef = useRef(null);
  var layerClass = clsx("recharts-pie", className);
  if (hide || sectors == null) {
    previousSectorsRef.current = null;
    return /* @__PURE__ */ React.createElement(Layer, {
      tabIndex: rootTabIndex,
      className: layerClass
    });
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: props.zIndex
  }, /* @__PURE__ */ React.createElement(SetTooltipEntrySettings, {
    fn: getTooltipEntrySettings$3,
    args: _objectSpread$c(_objectSpread$c({}, props), {}, {
      sectors
    })
  }), /* @__PURE__ */ React.createElement(Layer, {
    tabIndex: rootTabIndex,
    className: layerClass
  }, /* @__PURE__ */ React.createElement(SectorsWithAnimation, {
    props: _objectSpread$c(_objectSpread$c({}, propsWithoutId), {}, {
      sectors
    }),
    previousSectorsRef
  })));
}
function Pie(outsideProps) {
  var props = resolveDefaultProps(outsideProps, defaultPieProps);
  var {
    id: externalId
  } = props, propsWithoutId = _objectWithoutProperties$d(props, _excluded3$6);
  var presentationProps = svgPropertiesNoEvents(propsWithoutId);
  return /* @__PURE__ */ React.createElement(RegisterGraphicalItemId, {
    id: externalId,
    type: "pie"
  }, (id) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SetPolarGraphicalItem, {
    type: "pie",
    id,
    data: propsWithoutId.data,
    dataKey: propsWithoutId.dataKey,
    hide: propsWithoutId.hide,
    angleAxisId: 0,
    radiusAxisId: 0,
    name: propsWithoutId.name,
    nameKey: propsWithoutId.nameKey,
    tooltipType: propsWithoutId.tooltipType,
    legendType: propsWithoutId.legendType,
    fill: propsWithoutId.fill,
    cx: propsWithoutId.cx,
    cy: propsWithoutId.cy,
    startAngle: propsWithoutId.startAngle,
    endAngle: propsWithoutId.endAngle,
    paddingAngle: propsWithoutId.paddingAngle,
    minAngle: propsWithoutId.minAngle,
    innerRadius: propsWithoutId.innerRadius,
    outerRadius: propsWithoutId.outerRadius,
    cornerRadius: propsWithoutId.cornerRadius,
    presentationProps,
    maxRadius: props.maxRadius
  }), /* @__PURE__ */ React.createElement(SetPiePayloadLegend, _extends$d({}, propsWithoutId, {
    id
  })), /* @__PURE__ */ React.createElement(PieImpl, _extends$d({}, propsWithoutId, {
    id
  }))));
}
Pie.displayName = "Pie";
var _excluded$c = ["points"];
function ownKeys$b(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$b(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$b(Object(t), true).forEach(function(r3) {
      _defineProperty$c(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$b(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$c(e, r2, t) {
  return (r2 = _toPropertyKey$c(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$c(t) {
  var i = _toPrimitive$c(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$c(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$c() {
  return _extends$c = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$c.apply(null, arguments);
}
function _objectWithoutProperties$c(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$c(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$c(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function DotItem(_ref2) {
  var {
    option,
    dotProps,
    className
  } = _ref2;
  if (/* @__PURE__ */ isValidElement(option)) {
    return /* @__PURE__ */ cloneElement(option, dotProps);
  }
  if (typeof option === "function") {
    return option(dotProps);
  }
  var finalClassName = clsx(className, typeof option !== "boolean" ? option.className : "");
  var _ref22 = dotProps !== null && dotProps !== void 0 ? dotProps : {}, {
    points
  } = _ref22, props = _objectWithoutProperties$c(_ref22, _excluded$c);
  return /* @__PURE__ */ React.createElement(Dot, _extends$c({}, props, {
    className: finalClassName
  }));
}
function shouldRenderDots(points, dot) {
  if (points == null) {
    return false;
  }
  if (dot) {
    return true;
  }
  return points.length === 1;
}
function Dots(_ref3) {
  var {
    points,
    dot,
    className,
    dotClassName,
    dataKey,
    baseProps,
    needClip,
    clipPathId,
    zIndex = DefaultZIndexes.scatter
  } = _ref3;
  if (!shouldRenderDots(points, dot)) {
    return null;
  }
  var clipDot = isClipDot(dot);
  var customDotProps = svgPropertiesAndEventsFromUnknown(dot);
  var dots = points.map((entry2, i) => {
    var _entry$x, _entry$y;
    var dotProps = _objectSpread$b(_objectSpread$b(_objectSpread$b({
      r: 3
    }, baseProps), customDotProps), {}, {
      index: i,
      cx: (_entry$x = entry2.x) !== null && _entry$x !== void 0 ? _entry$x : void 0,
      cy: (_entry$y = entry2.y) !== null && _entry$y !== void 0 ? _entry$y : void 0,
      dataKey,
      value: entry2.value,
      payload: entry2.payload,
      points
    });
    return /* @__PURE__ */ React.createElement(DotItem, {
      key: "dot-".concat(i),
      option: dot,
      dotProps,
      className: dotClassName
    });
  });
  var layerProps = {};
  if (needClip && clipPathId != null) {
    layerProps.clipPath = "url(#clipPath-".concat(clipDot ? "" : "dots-").concat(clipPathId, ")");
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex
  }, /* @__PURE__ */ React.createElement(Layer, _extends$c({
    className
  }, layerProps), dots));
}
function ownKeys$a(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$a(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$a(Object(t), true).forEach(function(r3) {
      _defineProperty$b(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$a(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$b(e, r2, t) {
  return (r2 = _toPropertyKey$b(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$b(t) {
  var i = _toPrimitive$b(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$b(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var initialState$4 = {
  xAxis: {},
  yAxis: {},
  zAxis: {}
};
var cartesianAxisSlice = createSlice({
  name: "cartesianAxis",
  initialState: initialState$4,
  reducers: {
    addXAxis: {
      reducer(state2, action2) {
        state2.xAxis[action2.payload.id] = castDraft(action2.payload);
      },
      prepare: prepareAutoBatched()
    },
    removeXAxis: {
      reducer(state2, action2) {
        delete state2.xAxis[action2.payload.id];
      },
      prepare: prepareAutoBatched()
    },
    addYAxis: {
      reducer(state2, action2) {
        state2.yAxis[action2.payload.id] = castDraft(action2.payload);
      },
      prepare: prepareAutoBatched()
    },
    removeYAxis: {
      reducer(state2, action2) {
        delete state2.yAxis[action2.payload.id];
      },
      prepare: prepareAutoBatched()
    },
    addZAxis: {
      reducer(state2, action2) {
        state2.zAxis[action2.payload.id] = castDraft(action2.payload);
      },
      prepare: prepareAutoBatched()
    },
    removeZAxis: {
      reducer(state2, action2) {
        delete state2.zAxis[action2.payload.id];
      },
      prepare: prepareAutoBatched()
    },
    updateYAxisWidth(state2, action2) {
      var {
        id,
        width
      } = action2.payload;
      var axis = state2.yAxis[id];
      if (axis) {
        var history = axis.widthHistory || [];
        if (history.length === 3 && history[0] === history[2] && width === history[1] && width !== axis.width && Math.abs(width - history[0]) <= 1) {
          return;
        }
        var newHistory = [...history, width].slice(-3);
        state2.yAxis[id] = _objectSpread$a(_objectSpread$a({}, state2.yAxis[id]), {}, {
          width,
          widthHistory: newHistory
        });
      }
    }
  }
});
var {
  addXAxis,
  removeXAxis,
  addYAxis,
  removeYAxis,
  addZAxis,
  removeZAxis,
  updateYAxisWidth
} = cartesianAxisSlice.actions;
var cartesianAxisReducer = cartesianAxisSlice.reducer;
var selectChartOffset = createSelector([selectChartOffsetInternal], (offsetInternal) => {
  return {
    top: offsetInternal.top,
    bottom: offsetInternal.bottom,
    left: offsetInternal.left,
    right: offsetInternal.right
  };
});
var selectPlotArea = createSelector([selectChartOffset, selectChartWidth, selectChartHeight], (offset, chartWidth, chartHeight) => {
  if (!offset || chartWidth == null || chartHeight == null) {
    return void 0;
  }
  return {
    x: offset.left,
    y: offset.top,
    width: Math.max(0, chartWidth - offset.left - offset.right),
    height: Math.max(0, chartHeight - offset.top - offset.bottom)
  };
});
var usePlotArea = () => {
  return useAppSelector(selectPlotArea);
};
var useActiveTooltipDataPoints = () => {
  return useAppSelector(selectActiveTooltipDataPoints);
};
function ownKeys$9(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$9(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$9(Object(t), true).forEach(function(r3) {
      _defineProperty$a(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$9(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$a(e, r2, t) {
  return (r2 = _toPropertyKey$a(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$a(t) {
  var i = _toPrimitive$a(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$a(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var ActivePoint = (_ref2) => {
  var {
    point,
    childIndex,
    mainColor,
    activeDot,
    dataKey
  } = _ref2;
  if (activeDot === false || point.x == null || point.y == null) {
    return null;
  }
  var dotPropsTyped = {
    index: childIndex,
    dataKey,
    cx: point.x,
    cy: point.y,
    r: 4,
    fill: mainColor !== null && mainColor !== void 0 ? mainColor : "none",
    strokeWidth: 2,
    stroke: "#fff",
    payload: point.payload,
    value: point.value
  };
  var dotProps = _objectSpread$9(_objectSpread$9(_objectSpread$9({}, dotPropsTyped), svgPropertiesNoEventsFromUnknown(activeDot)), adaptEventHandlers(activeDot));
  var dot;
  if (/* @__PURE__ */ isValidElement(activeDot)) {
    dot = /* @__PURE__ */ cloneElement(activeDot, dotProps);
  } else if (typeof activeDot === "function") {
    dot = activeDot(dotProps);
  } else {
    dot = /* @__PURE__ */ React.createElement(Dot, dotProps);
  }
  return /* @__PURE__ */ React.createElement(Layer, {
    className: "recharts-active-dot"
  }, dot);
};
function ActivePoints(_ref2) {
  var {
    points,
    mainColor,
    activeDot,
    itemDataKey,
    zIndex = DefaultZIndexes.activeDot
  } = _ref2;
  var activeTooltipIndex = useAppSelector(selectActiveTooltipIndex);
  var activeDataPoints = useActiveTooltipDataPoints();
  if (points == null || activeDataPoints == null) {
    return null;
  }
  var activePoint = points.find((p) => activeDataPoints.includes(p.payload));
  if (isNullish(activePoint)) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex
  }, /* @__PURE__ */ React.createElement(ActivePoint, {
    point: activePoint,
    childIndex: Number(activeTooltipIndex),
    mainColor,
    dataKey: itemDataKey,
    activeDot
  }));
}
var _excluded$b = ["x", "y"];
function _extends$b() {
  return _extends$b = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$b.apply(null, arguments);
}
function ownKeys$8(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$8(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$8(Object(t), true).forEach(function(r3) {
      _defineProperty$9(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$8(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$9(e, r2, t) {
  return (r2 = _toPropertyKey$9(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$9(t) {
  var i = _toPrimitive$9(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$9(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$b(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$b(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$b(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function typeguardBarRectangleProps(_ref2, props) {
  var {
    x: xProp,
    y: yProp
  } = _ref2, option = _objectWithoutProperties$b(_ref2, _excluded$b);
  var xValue = "".concat(xProp);
  var x = parseInt(xValue, 10);
  var yValue = "".concat(yProp);
  var y = parseInt(yValue, 10);
  var heightValue = "".concat(props.height || option.height);
  var height = parseInt(heightValue, 10);
  var widthValue = "".concat(props.width || option.width);
  var width = parseInt(widthValue, 10);
  return _objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8({}, props), option), x ? {
    x
  } : {}), y ? {
    y
  } : {}), {}, {
    height,
    width,
    name: props.name,
    radius: props.radius
  });
}
function BarRectangle(props) {
  return /* @__PURE__ */ React.createElement(Shape, _extends$b({
    shapeType: "rectangle",
    propTransformer: typeguardBarRectangleProps,
    activeClassName: "recharts-active-bar"
  }, props));
}
var minPointSizeCallback = function minPointSizeCallback2(minPointSize) {
  var defaultValue = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  return (value, index) => {
    if (isNumber(minPointSize)) return minPointSize;
    var isValueNumberOrNil = isNumber(value) || isNullish(value);
    if (isValueNumberOrNil) {
      return minPointSize(value, index);
    }
    !isValueNumberOrNil ? process.env.NODE_ENV !== "production" ? invariant(false, "minPointSize callback function received a value with type of ".concat(typeof value, ". Currently only numbers or null/undefined are supported.")) : invariant(false) : void 0;
    return defaultValue;
  };
};
var initialState$3 = {};
var errorBarSlice = createSlice({
  name: "errorBars",
  initialState: initialState$3,
  reducers: {
    addErrorBar: (state2, action2) => {
      var {
        itemId,
        errorBar
      } = action2.payload;
      if (!state2[itemId]) {
        state2[itemId] = [];
      }
      state2[itemId].push(errorBar);
    },
    replaceErrorBar: (state2, action2) => {
      var {
        itemId,
        prev,
        next
      } = action2.payload;
      if (state2[itemId]) {
        state2[itemId] = state2[itemId].map((e) => e.dataKey === prev.dataKey && e.direction === prev.direction ? next : e);
      }
    },
    removeErrorBar: (state2, action2) => {
      var {
        itemId,
        errorBar
      } = action2.payload;
      if (state2[itemId]) {
        state2[itemId] = state2[itemId].filter((e) => e.dataKey !== errorBar.dataKey || e.direction !== errorBar.direction);
      }
    }
  }
});
var {
  addErrorBar,
  replaceErrorBar,
  removeErrorBar
} = errorBarSlice.actions;
var errorBarReducer = errorBarSlice.reducer;
var _excluded$a = ["children"];
function _objectWithoutProperties$a(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$a(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$a(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var initialContextState = {
  data: [],
  xAxisId: "xAxis-0",
  yAxisId: "yAxis-0",
  dataPointFormatter: () => ({
    x: 0,
    y: 0,
    value: 0
  }),
  errorBarOffset: 0
};
var ErrorBarContext = /* @__PURE__ */ createContext(initialContextState);
function SetErrorBarContext(props) {
  var {
    children
  } = props, rest = _objectWithoutProperties$a(props, _excluded$a);
  return /* @__PURE__ */ React.createElement(ErrorBarContext.Provider, {
    value: rest
  }, children);
}
function useNeedsClip(xAxisId, yAxisId) {
  var _xAxis$allowDataOverf, _yAxis$allowDataOverf;
  var xAxis = useAppSelector((state2) => selectXAxisSettings(state2, xAxisId));
  var yAxis = useAppSelector((state2) => selectYAxisSettings(state2, yAxisId));
  var needClipX = (_xAxis$allowDataOverf = xAxis === null || xAxis === void 0 ? void 0 : xAxis.allowDataOverflow) !== null && _xAxis$allowDataOverf !== void 0 ? _xAxis$allowDataOverf : implicitXAxis.allowDataOverflow;
  var needClipY = (_yAxis$allowDataOverf = yAxis === null || yAxis === void 0 ? void 0 : yAxis.allowDataOverflow) !== null && _yAxis$allowDataOverf !== void 0 ? _yAxis$allowDataOverf : implicitYAxis.allowDataOverflow;
  var needClip = needClipX || needClipY;
  return {
    needClip,
    needClipX,
    needClipY
  };
}
function GraphicalItemClipPath(_ref2) {
  var {
    xAxisId,
    yAxisId,
    clipPathId
  } = _ref2;
  var plotArea = usePlotArea();
  var {
    needClipX,
    needClipY,
    needClip
  } = useNeedsClip(xAxisId, yAxisId);
  if (!needClip || !plotArea) {
    return null;
  }
  var {
    x,
    y,
    width,
    height
  } = plotArea;
  return /* @__PURE__ */ React.createElement("clipPath", {
    id: "clipPath-".concat(clipPathId)
  }, /* @__PURE__ */ React.createElement("rect", {
    x: needClipX ? x : x - width / 2,
    y: needClipY ? y : y - height / 2,
    width: needClipX ? width : width * 2,
    height: needClipY ? height : height * 2
  }));
}
function getZIndexFromUnknown(input, defaultZIndex) {
  if (input && typeof input === "object" && "zIndex" in input && typeof input.zIndex === "number" && isWellBehavedNumber(input.zIndex)) {
    return input.zIndex;
  }
  return defaultZIndex;
}
var _excluded$9 = ["onMouseEnter", "onMouseLeave", "onClick"], _excluded2$6 = ["value", "background", "tooltipPosition"], _excluded3$5 = ["id"], _excluded4$3 = ["onMouseEnter", "onClick", "onMouseLeave"];
function _extends$a() {
  return _extends$a = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$a.apply(null, arguments);
}
function ownKeys$7(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$7(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$7(Object(t), true).forEach(function(r3) {
      _defineProperty$8(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$7(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$8(e, r2, t) {
  return (r2 = _toPropertyKey$8(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$8(t) {
  var i = _toPrimitive$8(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$8(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$9(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$9(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$9(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var computeLegendPayloadFromBarData = (props) => {
  var {
    dataKey,
    name,
    fill,
    legendType,
    hide
  } = props;
  return [{
    inactive: hide,
    dataKey,
    type: legendType,
    color: fill,
    value: getTooltipNameProp(name, dataKey),
    payload: props
  }];
};
function getTooltipEntrySettings$2(props) {
  var {
    dataKey,
    stroke,
    strokeWidth,
    fill,
    name,
    hide,
    unit
  } = props;
  return {
    dataDefinedOnItem: void 0,
    positions: void 0,
    settings: {
      stroke,
      strokeWidth,
      fill,
      dataKey,
      nameKey: void 0,
      name: getTooltipNameProp(name, dataKey),
      hide,
      type: props.tooltipType,
      color: props.fill,
      unit
    }
  };
}
function BarBackground(props) {
  var activeIndex = useAppSelector(selectActiveTooltipIndex);
  var {
    data: data2,
    dataKey,
    background: backgroundFromProps,
    allOtherBarProps
  } = props;
  var {
    onMouseEnter: onMouseEnterFromProps,
    onMouseLeave: onMouseLeaveFromProps,
    onClick: onItemClickFromProps
  } = allOtherBarProps, restOfAllOtherProps = _objectWithoutProperties$9(allOtherBarProps, _excluded$9);
  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, dataKey);
  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);
  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, dataKey);
  if (!backgroundFromProps || data2 == null) {
    return null;
  }
  var backgroundProps = svgPropertiesNoEventsFromUnknown(backgroundFromProps);
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: getZIndexFromUnknown(backgroundFromProps, DefaultZIndexes.barBackground)
  }, data2.map((entry2, i) => {
    var {
      value,
      background: backgroundFromDataEntry,
      tooltipPosition
    } = entry2, rest = _objectWithoutProperties$9(entry2, _excluded2$6);
    if (!backgroundFromDataEntry) {
      return null;
    }
    var onMouseEnter = onMouseEnterFromContext(entry2, i);
    var onMouseLeave = onMouseLeaveFromContext(entry2, i);
    var onClick = onClickFromContext(entry2, i);
    var barRectangleProps = _objectSpread$7(_objectSpread$7(_objectSpread$7(_objectSpread$7(_objectSpread$7({
      option: backgroundFromProps,
      isActive: String(i) === activeIndex
    }, rest), {}, {
      // @ts-expect-error backgroundProps is contributing unknown props
      fill: "#eee"
    }, backgroundFromDataEntry), backgroundProps), adaptEventsOfChild(restOfAllOtherProps, entry2, i)), {}, {
      onMouseEnter,
      onMouseLeave,
      onClick,
      dataKey,
      index: i,
      className: "recharts-bar-background-rectangle"
    });
    return /* @__PURE__ */ React.createElement(BarRectangle, _extends$a({
      key: "background-bar-".concat(i)
    }, barRectangleProps));
  }));
}
function BarLabelListProvider(_ref2) {
  var {
    showLabels,
    children,
    rects
  } = _ref2;
  var labelListEntries = rects === null || rects === void 0 ? void 0 : rects.map((entry2) => {
    var viewBox = {
      x: entry2.x,
      y: entry2.y,
      width: entry2.width,
      lowerWidth: entry2.width,
      upperWidth: entry2.width,
      height: entry2.height
    };
    return _objectSpread$7(_objectSpread$7({}, viewBox), {}, {
      value: entry2.value,
      payload: entry2.payload,
      parentViewBox: entry2.parentViewBox,
      viewBox,
      fill: entry2.fill
    });
  });
  return /* @__PURE__ */ React.createElement(CartesianLabelListContextProvider, {
    value: showLabels ? labelListEntries : void 0
  }, children);
}
function BarRectangleWithActiveState(props) {
  var {
    shape,
    activeBar,
    baseProps,
    entry: entry2,
    index,
    dataKey
  } = props;
  var activeIndex = useAppSelector(selectActiveTooltipIndex);
  var activeDataKey = useAppSelector(selectActiveTooltipDataKey);
  var isActive = activeBar && String(index) === activeIndex && (activeDataKey == null || dataKey === activeDataKey);
  var option = isActive ? activeBar : shape;
  if (isActive) {
    return /* @__PURE__ */ React.createElement(ZIndexLayer, {
      zIndex: DefaultZIndexes.activeBar
    }, /* @__PURE__ */ React.createElement(BarRectangle, _extends$a({}, baseProps, {
      name: String(baseProps.name)
    }, entry2, {
      isActive,
      option,
      index,
      dataKey
    })));
  }
  return /* @__PURE__ */ React.createElement(BarRectangle, _extends$a({}, baseProps, {
    name: String(baseProps.name)
  }, entry2, {
    isActive,
    option,
    index,
    dataKey
  }));
}
function BarRectangleNeverActive(props) {
  var {
    shape,
    baseProps,
    entry: entry2,
    index,
    dataKey
  } = props;
  return /* @__PURE__ */ React.createElement(BarRectangle, _extends$a({}, baseProps, {
    name: String(baseProps.name)
  }, entry2, {
    isActive: false,
    option: shape,
    index,
    dataKey
  }));
}
function BarRectangles(_ref2) {
  var _svgPropertiesNoEvent;
  var {
    data: data2,
    props
  } = _ref2;
  var _ref3 = (_svgPropertiesNoEvent = svgPropertiesNoEvents(props)) !== null && _svgPropertiesNoEvent !== void 0 ? _svgPropertiesNoEvent : {}, {
    id
  } = _ref3, baseProps = _objectWithoutProperties$9(_ref3, _excluded3$5);
  var {
    shape,
    dataKey,
    activeBar
  } = props;
  var {
    onMouseEnter: onMouseEnterFromProps,
    onClick: onItemClickFromProps,
    onMouseLeave: onMouseLeaveFromProps
  } = props, restOfAllOtherProps = _objectWithoutProperties$9(props, _excluded4$3);
  var onMouseEnterFromContext = useMouseEnterItemDispatch(onMouseEnterFromProps, dataKey);
  var onMouseLeaveFromContext = useMouseLeaveItemDispatch(onMouseLeaveFromProps);
  var onClickFromContext = useMouseClickItemDispatch(onItemClickFromProps, dataKey);
  if (!data2) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(React.Fragment, null, data2.map((entry2, i) => {
    return /* @__PURE__ */ React.createElement(
      Layer,
      _extends$a({
        key: "rectangle-".concat(entry2 === null || entry2 === void 0 ? void 0 : entry2.x, "-").concat(entry2 === null || entry2 === void 0 ? void 0 : entry2.y, "-").concat(entry2 === null || entry2 === void 0 ? void 0 : entry2.value, "-").concat(i),
        className: "recharts-bar-rectangle"
      }, adaptEventsOfChild(restOfAllOtherProps, entry2, i), {
        // @ts-expect-error BarRectangleItem type definition says it's missing properties, but I can see them present in debugger!
        onMouseEnter: onMouseEnterFromContext(entry2, i),
        onMouseLeave: onMouseLeaveFromContext(entry2, i),
        onClick: onClickFromContext(entry2, i)
      }),
      activeBar ? /* @__PURE__ */ React.createElement(BarRectangleWithActiveState, {
        shape,
        activeBar,
        baseProps,
        entry: entry2,
        index: i,
        dataKey
      }) : (
        /*
         * If the `activeBar` prop is falsy, then let's call the variant without hooks.
         * Using the `selectActiveTooltipIndex` selector is usually fast
         * but in charts with large-ish amount of data even the few nanoseconds add up to a noticeable jank.
         * If the activeBar is false then we don't need to know which index is active - because we won't use it anyway.
         * So let's just skip the hooks altogether. That way, React can skip rendering the component,
         * and can skip the tree reconciliation for its children too.
         * Because we can't call hooks conditionally, we need to have a separate component for that.
         */
        /* @__PURE__ */ React.createElement(BarRectangleNeverActive, {
          shape,
          baseProps,
          entry: entry2,
          index: i,
          dataKey
        })
      )
    );
  }));
}
function RectanglesWithAnimation(_ref4) {
  var {
    props,
    previousRectanglesRef
  } = _ref4;
  var {
    data: data2,
    layout,
    isAnimationActive,
    animationBegin,
    animationDuration,
    animationEasing,
    onAnimationEnd,
    onAnimationStart
  } = props;
  var prevData = previousRectanglesRef.current;
  var animationId = useAnimationId(props, "recharts-bar-");
  var [isAnimating, setIsAnimating] = useState(false);
  var showLabels = !isAnimating;
  var handleAnimationEnd = useCallback(() => {
    if (typeof onAnimationEnd === "function") {
      onAnimationEnd();
    }
    setIsAnimating(false);
  }, [onAnimationEnd]);
  var handleAnimationStart = useCallback(() => {
    if (typeof onAnimationStart === "function") {
      onAnimationStart();
    }
    setIsAnimating(true);
  }, [onAnimationStart]);
  return /* @__PURE__ */ React.createElement(BarLabelListProvider, {
    showLabels,
    rects: data2
  }, /* @__PURE__ */ React.createElement(JavascriptAnimate, {
    animationId,
    begin: animationBegin,
    duration: animationDuration,
    isActive: isAnimationActive,
    easing: animationEasing,
    onAnimationEnd: handleAnimationEnd,
    onAnimationStart: handleAnimationStart,
    key: animationId
  }, (t) => {
    var stepData = t === 1 ? data2 : data2 === null || data2 === void 0 ? void 0 : data2.map((entry2, index) => {
      var prev = prevData && prevData[index];
      if (prev) {
        return _objectSpread$7(_objectSpread$7({}, entry2), {}, {
          x: interpolate(prev.x, entry2.x, t),
          y: interpolate(prev.y, entry2.y, t),
          width: interpolate(prev.width, entry2.width, t),
          height: interpolate(prev.height, entry2.height, t)
        });
      }
      if (layout === "horizontal") {
        var height = interpolate(0, entry2.height, t);
        var y = interpolate(entry2.stackedBarStart, entry2.y, t);
        return _objectSpread$7(_objectSpread$7({}, entry2), {}, {
          y,
          height
        });
      }
      var w = interpolate(0, entry2.width, t);
      var x = interpolate(entry2.stackedBarStart, entry2.x, t);
      return _objectSpread$7(_objectSpread$7({}, entry2), {}, {
        width: w,
        x
      });
    });
    if (t > 0) {
      previousRectanglesRef.current = stepData !== null && stepData !== void 0 ? stepData : null;
    }
    if (stepData == null) {
      return null;
    }
    return /* @__PURE__ */ React.createElement(Layer, null, /* @__PURE__ */ React.createElement(BarRectangles, {
      props,
      data: stepData
    }));
  }), /* @__PURE__ */ React.createElement(LabelListFromLabelProp, {
    label: props.label
  }), props.children);
}
function RenderRectangles(props) {
  var previousRectanglesRef = useRef(null);
  return /* @__PURE__ */ React.createElement(RectanglesWithAnimation, {
    previousRectanglesRef,
    props
  });
}
var defaultMinPointSize = 0;
var errorBarDataPointFormatter$1 = (dataPoint, dataKey) => {
  var value = Array.isArray(dataPoint.value) ? dataPoint.value[1] : dataPoint.value;
  return {
    x: dataPoint.x,
    y: dataPoint.y,
    value,
    // @ts-expect-error getValueByDataKey does not validate the output type
    errorVal: getValueByDataKey(dataPoint, dataKey)
  };
};
class BarWithState extends PureComponent {
  render() {
    var {
      hide,
      data: data2,
      dataKey,
      className,
      xAxisId,
      yAxisId,
      needClip,
      background,
      id
    } = this.props;
    if (hide || data2 == null) {
      return null;
    }
    var layerClass = clsx("recharts-bar", className);
    var clipPathId = id;
    return /* @__PURE__ */ React.createElement(Layer, {
      className: layerClass,
      id
    }, needClip && /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement(GraphicalItemClipPath, {
      clipPathId,
      xAxisId,
      yAxisId
    })), /* @__PURE__ */ React.createElement(Layer, {
      className: "recharts-bar-rectangles",
      clipPath: needClip ? "url(#clipPath-".concat(clipPathId, ")") : void 0
    }, /* @__PURE__ */ React.createElement(BarBackground, {
      data: data2,
      dataKey,
      background,
      allOtherBarProps: this.props
    }), /* @__PURE__ */ React.createElement(RenderRectangles, this.props)));
  }
}
var defaultBarProps = {
  activeBar: false,
  animationBegin: 0,
  animationDuration: 400,
  animationEasing: "ease",
  hide: false,
  isAnimationActive: !Global.isSsr,
  legendType: "rect",
  minPointSize: defaultMinPointSize,
  xAxisId: 0,
  yAxisId: 0,
  zIndex: DefaultZIndexes.bar
};
function BarImpl(props) {
  var {
    xAxisId,
    yAxisId,
    hide,
    legendType,
    minPointSize,
    activeBar,
    animationBegin,
    animationDuration,
    animationEasing,
    isAnimationActive
  } = props;
  var {
    needClip
  } = useNeedsClip(xAxisId, yAxisId);
  var layout = useChartLayout();
  var isPanorama = useIsPanorama();
  var cells = findAllByType(props.children, Cell);
  var rects = useAppSelector((state2) => selectBarRectangles(state2, xAxisId, yAxisId, isPanorama, props.id, cells));
  if (layout !== "vertical" && layout !== "horizontal") {
    return null;
  }
  var errorBarOffset;
  var firstDataPoint = rects === null || rects === void 0 ? void 0 : rects[0];
  if (firstDataPoint == null || firstDataPoint.height == null || firstDataPoint.width == null) {
    errorBarOffset = 0;
  } else {
    errorBarOffset = layout === "vertical" ? firstDataPoint.height / 2 : firstDataPoint.width / 2;
  }
  return /* @__PURE__ */ React.createElement(SetErrorBarContext, {
    xAxisId,
    yAxisId,
    data: rects,
    dataPointFormatter: errorBarDataPointFormatter$1,
    errorBarOffset
  }, /* @__PURE__ */ React.createElement(BarWithState, _extends$a({}, props, {
    layout,
    needClip,
    data: rects,
    xAxisId,
    yAxisId,
    hide,
    legendType,
    minPointSize,
    activeBar,
    animationBegin,
    animationDuration,
    animationEasing,
    isAnimationActive
  })));
}
function computeBarRectangles(_ref5) {
  var {
    layout,
    barSettings: {
      dataKey,
      minPointSize: minPointSizeProp
    },
    pos,
    bandSize,
    xAxis,
    yAxis,
    xAxisTicks,
    yAxisTicks,
    stackedData,
    displayedData,
    offset,
    cells,
    parentViewBox,
    dataStartIndex
  } = _ref5;
  var numericAxis = layout === "horizontal" ? yAxis : xAxis;
  var stackedDomain = stackedData ? numericAxis.scale.domain() : null;
  var baseValue = getBaseValueOfBar({
    numericAxis
  });
  var stackedBarStart = numericAxis.scale(baseValue);
  return displayedData.map((entry2, index) => {
    var value, x, y, width, height, background;
    if (stackedData) {
      value = truncateByDomain(stackedData[index + dataStartIndex], stackedDomain);
    } else {
      value = getValueByDataKey(entry2, dataKey);
      if (!Array.isArray(value)) {
        value = [baseValue, value];
      }
    }
    var minPointSize = minPointSizeCallback(minPointSizeProp, defaultMinPointSize)(value[1], index);
    if (layout === "horizontal") {
      var _ref6;
      var [baseValueScale, currentValueScale] = [yAxis.scale(value[0]), yAxis.scale(value[1])];
      x = getCateCoordinateOfBar({
        axis: xAxis,
        ticks: xAxisTicks,
        bandSize,
        offset: pos.offset,
        entry: entry2,
        index
      });
      y = (_ref6 = currentValueScale !== null && currentValueScale !== void 0 ? currentValueScale : baseValueScale) !== null && _ref6 !== void 0 ? _ref6 : void 0;
      width = pos.size;
      var computedHeight = baseValueScale - currentValueScale;
      height = isNan(computedHeight) ? 0 : computedHeight;
      background = {
        x,
        y: offset.top,
        width,
        height: offset.height
      };
      if (Math.abs(minPointSize) > 0 && Math.abs(height) < Math.abs(minPointSize)) {
        var delta = mathSign(height || minPointSize) * (Math.abs(minPointSize) - Math.abs(height));
        y -= delta;
        height += delta;
      }
    } else {
      var [_baseValueScale, _currentValueScale] = [xAxis.scale(value[0]), xAxis.scale(value[1])];
      x = _baseValueScale;
      y = getCateCoordinateOfBar({
        axis: yAxis,
        ticks: yAxisTicks,
        bandSize,
        offset: pos.offset,
        entry: entry2,
        index
      });
      width = _currentValueScale - _baseValueScale;
      height = pos.size;
      background = {
        x: offset.left,
        y,
        width: offset.width,
        height
      };
      if (Math.abs(minPointSize) > 0 && Math.abs(width) < Math.abs(minPointSize)) {
        var _delta = mathSign(width || minPointSize) * (Math.abs(minPointSize) - Math.abs(width));
        width += _delta;
      }
    }
    if (x == null || y == null || width == null || height == null) {
      return null;
    }
    var barRectangleItem = _objectSpread$7(_objectSpread$7({}, entry2), {}, {
      stackedBarStart,
      x,
      y,
      width,
      height,
      value: stackedData ? value : value[1],
      payload: entry2,
      background,
      tooltipPosition: {
        x: x + width / 2,
        y: y + height / 2
      },
      parentViewBox
    }, cells && cells[index] && cells[index].props);
    return barRectangleItem;
  }).filter(Boolean);
}
function BarFn(outsideProps) {
  var props = resolveDefaultProps(outsideProps, defaultBarProps);
  var isPanorama = useIsPanorama();
  return /* @__PURE__ */ React.createElement(RegisterGraphicalItemId, {
    id: props.id,
    type: "bar"
  }, (id) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SetLegendPayload, {
    legendPayload: computeLegendPayloadFromBarData(props)
  }), /* @__PURE__ */ React.createElement(SetTooltipEntrySettings, {
    fn: getTooltipEntrySettings$2,
    args: props
  }), /* @__PURE__ */ React.createElement(SetCartesianGraphicalItem, {
    type: "bar",
    id,
    data: void 0,
    xAxisId: props.xAxisId,
    yAxisId: props.yAxisId,
    zAxisId: 0,
    dataKey: props.dataKey,
    stackId: getNormalizedStackId(props.stackId),
    hide: props.hide,
    barSize: props.barSize,
    minPointSize: props.minPointSize,
    maxBarSize: props.maxBarSize,
    isPanorama
  }), /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: props.zIndex
  }, /* @__PURE__ */ React.createElement(BarImpl, _extends$a({}, props, {
    id
  })))));
}
var Bar = /* @__PURE__ */ React.memo(BarFn);
Bar.displayName = "Bar";
function ownKeys$6(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$6(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$6(Object(t), true).forEach(function(r3) {
      _defineProperty$7(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$6(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$7(e, r2, t) {
  return (r2 = _toPropertyKey$7(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$7(t) {
  var i = _toPrimitive$7(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$7(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var pickXAxisId = (_state, xAxisId) => xAxisId;
var pickYAxisId = (_state, _xAxisId, yAxisId) => yAxisId;
var pickIsPanorama = (_state, _xAxisId, _yAxisId, isPanorama) => isPanorama;
var pickBarId = (_state, _xAxisId, _yAxisId, _isPanorama, id) => id;
var selectSynchronisedBarSettings = createSelector([selectUnfilteredCartesianItems, pickBarId], (graphicalItems, id) => graphicalItems.filter((item) => item.type === "bar").find((item) => item.id === id));
var selectMaxBarSize = createSelector([selectSynchronisedBarSettings], (barSettings) => barSettings === null || barSettings === void 0 ? void 0 : barSettings.maxBarSize);
var pickCells = (_state, _xAxisId, _yAxisId, _isPanorama, _id, cells) => cells;
var getBarSize = (globalSize, totalSize, selfSize) => {
  var barSize = selfSize !== null && selfSize !== void 0 ? selfSize : globalSize;
  if (isNullish(barSize)) {
    return void 0;
  }
  return getPercentValue(barSize, totalSize, 0);
};
var selectAllVisibleBars = createSelector([selectChartLayout, selectUnfilteredCartesianItems, pickXAxisId, pickYAxisId, pickIsPanorama], (layout, allItems, xAxisId, yAxisId, isPanorama) => allItems.filter((i) => {
  if (layout === "horizontal") {
    return i.xAxisId === xAxisId;
  }
  return i.yAxisId === yAxisId;
}).filter((i) => i.isPanorama === isPanorama).filter((i) => i.hide === false).filter((i) => i.type === "bar"));
var selectBarStackGroups = (state2, xAxisId, yAxisId, isPanorama) => {
  var layout = selectChartLayout(state2);
  if (layout === "horizontal") {
    return selectStackGroups(state2, "yAxis", yAxisId, isPanorama);
  }
  return selectStackGroups(state2, "xAxis", xAxisId, isPanorama);
};
var selectBarCartesianAxisSize = (state2, xAxisId, yAxisId) => {
  var layout = selectChartLayout(state2);
  if (layout === "horizontal") {
    return selectCartesianAxisSize(state2, "xAxis", xAxisId);
  }
  return selectCartesianAxisSize(state2, "yAxis", yAxisId);
};
var combineBarSizeList = (allBars, globalSize, totalSize) => {
  var initialValue = {};
  var stackedBars = allBars.filter(isStacked);
  var unstackedBars = allBars.filter((b) => b.stackId == null);
  var groupByStack = stackedBars.reduce((acc, bar) => {
    if (!acc[bar.stackId]) {
      acc[bar.stackId] = [];
    }
    acc[bar.stackId].push(bar);
    return acc;
  }, initialValue);
  var stackedSizeList = Object.entries(groupByStack).map((_ref2) => {
    var [stackId, bars] = _ref2;
    var dataKeys = bars.map((b) => b.dataKey);
    var barSize = getBarSize(globalSize, totalSize, bars[0].barSize);
    return {
      stackId,
      dataKeys,
      barSize
    };
  });
  var unstackedSizeList = unstackedBars.map((b) => {
    var dataKeys = [b.dataKey].filter((dk) => dk != null);
    var barSize = getBarSize(globalSize, totalSize, b.barSize);
    return {
      stackId: void 0,
      dataKeys,
      barSize
    };
  });
  return [...stackedSizeList, ...unstackedSizeList];
};
var selectBarSizeList = createSelector([selectAllVisibleBars, selectRootBarSize, selectBarCartesianAxisSize], combineBarSizeList);
var selectBarBandSize = (state2, xAxisId, yAxisId, isPanorama, id) => {
  var _ref2, _getBandSizeOfAxis;
  var barSettings = selectSynchronisedBarSettings(state2, xAxisId, yAxisId, isPanorama, id);
  if (barSettings == null) {
    return void 0;
  }
  var layout = selectChartLayout(state2);
  var globalMaxBarSize = selectRootMaxBarSize(state2);
  var {
    maxBarSize: childMaxBarSize
  } = barSettings;
  var maxBarSize = isNullish(childMaxBarSize) ? globalMaxBarSize : childMaxBarSize;
  var axis, ticks;
  if (layout === "horizontal") {
    axis = selectAxisWithScale(state2, "xAxis", xAxisId, isPanorama);
    ticks = selectTicksOfGraphicalItem(state2, "xAxis", xAxisId, isPanorama);
  } else {
    axis = selectAxisWithScale(state2, "yAxis", yAxisId, isPanorama);
    ticks = selectTicksOfGraphicalItem(state2, "yAxis", yAxisId, isPanorama);
  }
  return (_ref2 = (_getBandSizeOfAxis = getBandSizeOfAxis(axis, ticks, true)) !== null && _getBandSizeOfAxis !== void 0 ? _getBandSizeOfAxis : maxBarSize) !== null && _ref2 !== void 0 ? _ref2 : 0;
};
var selectAxisBandSize = (state2, xAxisId, yAxisId, isPanorama) => {
  var layout = selectChartLayout(state2);
  var axis, ticks;
  if (layout === "horizontal") {
    axis = selectAxisWithScale(state2, "xAxis", xAxisId, isPanorama);
    ticks = selectTicksOfGraphicalItem(state2, "xAxis", xAxisId, isPanorama);
  } else {
    axis = selectAxisWithScale(state2, "yAxis", yAxisId, isPanorama);
    ticks = selectTicksOfGraphicalItem(state2, "yAxis", yAxisId, isPanorama);
  }
  return getBandSizeOfAxis(axis, ticks);
};
function getBarPositions(barGap, barCategoryGap, bandSize, sizeList, maxBarSize) {
  var len = sizeList.length;
  if (len < 1) {
    return void 0;
  }
  var realBarGap = getPercentValue(barGap, bandSize, 0, true);
  var result;
  var initialValue = [];
  if (isWellBehavedNumber(sizeList[0].barSize)) {
    var useFull = false;
    var fullBarSize = bandSize / len;
    var sum = sizeList.reduce((res, entry2) => res + (entry2.barSize || 0), 0);
    sum += (len - 1) * realBarGap;
    if (sum >= bandSize) {
      sum -= (len - 1) * realBarGap;
      realBarGap = 0;
    }
    if (sum >= bandSize && fullBarSize > 0) {
      useFull = true;
      fullBarSize *= 0.9;
      sum = len * fullBarSize;
    }
    var offset = (bandSize - sum) / 2 >> 0;
    var prev = {
      offset: offset - realBarGap,
      size: 0
    };
    result = sizeList.reduce((res, entry2) => {
      var _entry$barSize;
      var newPosition = {
        stackId: entry2.stackId,
        dataKeys: entry2.dataKeys,
        position: {
          offset: prev.offset + prev.size + realBarGap,
          size: useFull ? fullBarSize : (_entry$barSize = entry2.barSize) !== null && _entry$barSize !== void 0 ? _entry$barSize : 0
        }
      };
      var newRes = [...res, newPosition];
      prev = newRes[newRes.length - 1].position;
      return newRes;
    }, initialValue);
  } else {
    var _offset = getPercentValue(barCategoryGap, bandSize, 0, true);
    if (bandSize - 2 * _offset - (len - 1) * realBarGap <= 0) {
      realBarGap = 0;
    }
    var originalSize = (bandSize - 2 * _offset - (len - 1) * realBarGap) / len;
    if (originalSize > 1) {
      originalSize >>= 0;
    }
    var size = isWellBehavedNumber(maxBarSize) ? Math.min(originalSize, maxBarSize) : originalSize;
    result = sizeList.reduce((res, entry2, i) => [...res, {
      stackId: entry2.stackId,
      dataKeys: entry2.dataKeys,
      position: {
        offset: _offset + (originalSize + realBarGap) * i + (originalSize - size) / 2,
        size
      }
    }], initialValue);
  }
  return result;
}
var combineAllBarPositions = (sizeList, globalMaxBarSize, barGap, barCategoryGap, barBandSize, bandSize, childMaxBarSize) => {
  var maxBarSize = isNullish(childMaxBarSize) ? globalMaxBarSize : childMaxBarSize;
  var allBarPositions = getBarPositions(barGap, barCategoryGap, barBandSize !== bandSize ? barBandSize : bandSize, sizeList, maxBarSize);
  if (barBandSize !== bandSize && allBarPositions != null) {
    allBarPositions = allBarPositions.map((pos) => _objectSpread$6(_objectSpread$6({}, pos), {}, {
      position: _objectSpread$6(_objectSpread$6({}, pos.position), {}, {
        offset: pos.position.offset - barBandSize / 2
      })
    }));
  }
  return allBarPositions;
};
var selectAllBarPositions = createSelector([selectBarSizeList, selectRootMaxBarSize, selectBarGap, selectBarCategoryGap, selectBarBandSize, selectAxisBandSize, selectMaxBarSize], combineAllBarPositions);
var selectXAxisWithScale$2 = (state2, xAxisId, _yAxisId, isPanorama) => selectAxisWithScale(state2, "xAxis", xAxisId, isPanorama);
var selectYAxisWithScale$2 = (state2, _xAxisId, yAxisId, isPanorama) => selectAxisWithScale(state2, "yAxis", yAxisId, isPanorama);
var selectXAxisTicks$2 = (state2, xAxisId, _yAxisId, isPanorama) => selectTicksOfGraphicalItem(state2, "xAxis", xAxisId, isPanorama);
var selectYAxisTicks$2 = (state2, _xAxisId, yAxisId, isPanorama) => selectTicksOfGraphicalItem(state2, "yAxis", yAxisId, isPanorama);
var selectBarPosition = createSelector([selectAllBarPositions, selectSynchronisedBarSettings], (allBarPositions, barSettings) => {
  if (allBarPositions == null || barSettings == null) {
    return void 0;
  }
  var position = allBarPositions.find((p) => p.stackId === barSettings.stackId && barSettings.dataKey != null && p.dataKeys.includes(barSettings.dataKey));
  if (position == null) {
    return void 0;
  }
  return position.position;
});
var combineStackedData = (stackGroups, barSettings) => {
  var stackSeriesIdentifier = getStackSeriesIdentifier(barSettings);
  if (!stackGroups || stackSeriesIdentifier == null || barSettings == null) {
    return void 0;
  }
  var {
    stackId
  } = barSettings;
  if (stackId == null) {
    return void 0;
  }
  var stackGroup = stackGroups[stackId];
  if (!stackGroup) {
    return void 0;
  }
  var {
    stackedData
  } = stackGroup;
  if (!stackedData) {
    return void 0;
  }
  return stackedData.find((sd) => sd.key === stackSeriesIdentifier);
};
var selectStackedDataOfItem = createSelector([selectBarStackGroups, selectSynchronisedBarSettings], combineStackedData);
var selectBarRectangles = createSelector([selectChartOffsetInternal, selectAxisViewBox, selectXAxisWithScale$2, selectYAxisWithScale$2, selectXAxisTicks$2, selectYAxisTicks$2, selectBarPosition, selectChartLayout, selectChartDataWithIndexesIfNotInPanorama, selectAxisBandSize, selectStackedDataOfItem, selectSynchronisedBarSettings, pickCells], (offset, axisViewBox, xAxis, yAxis, xAxisTicks, yAxisTicks, pos, layout, _ref3, bandSize, stackedData, barSettings, cells) => {
  var {
    chartData,
    dataStartIndex,
    dataEndIndex
  } = _ref3;
  if (barSettings == null || pos == null || axisViewBox == null || layout !== "horizontal" && layout !== "vertical" || xAxis == null || yAxis == null || xAxisTicks == null || yAxisTicks == null || bandSize == null) {
    return void 0;
  }
  var {
    data: data2
  } = barSettings;
  var displayedData;
  if (data2 != null && data2.length > 0) {
    displayedData = data2;
  } else {
    displayedData = chartData === null || chartData === void 0 ? void 0 : chartData.slice(dataStartIndex, dataEndIndex + 1);
  }
  if (displayedData == null) {
    return void 0;
  }
  return computeBarRectangles({
    layout,
    barSettings,
    pos,
    parentViewBox: axisViewBox,
    bandSize,
    xAxis,
    yAxis,
    xAxisTicks,
    yAxisTicks,
    stackedData,
    displayedData,
    offset,
    cells,
    dataStartIndex
  });
});
var ChartDataContextProvider = (props) => {
  var {
    chartData
  } = props;
  var dispatch = useAppDispatch();
  var isPanorama = useIsPanorama();
  useEffect(() => {
    if (isPanorama) {
      return () => {
      };
    }
    dispatch(setChartData(chartData));
    return () => {
      dispatch(setChartData(void 0));
    };
  }, [chartData, dispatch, isPanorama]);
  return null;
};
var initialState$2 = {
  x: 0,
  y: 0,
  width: 0,
  height: 0,
  padding: {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  }
};
var brushSlice = createSlice({
  name: "brush",
  initialState: initialState$2,
  reducers: {
    setBrushSettings(_state, action2) {
      if (action2.payload == null) {
        return initialState$2;
      }
      return action2.payload;
    }
  }
});
var {
  setBrushSettings
} = brushSlice.actions;
var brushReducer = brushSlice.reducer;
function _defineProperty$6(e, r2, t) {
  return (r2 = _toPropertyKey$6(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$6(t) {
  var i = _toPrimitive$6(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$6(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
class ScaleHelper {
  static create(obj) {
    return new ScaleHelper(obj);
  }
  constructor(scale) {
    this.scale = scale;
  }
  get domain() {
    return this.scale.domain;
  }
  get range() {
    return this.scale.range;
  }
  get rangeMin() {
    return this.range()[0];
  }
  get rangeMax() {
    return this.range()[1];
  }
  get bandwidth() {
    return this.scale.bandwidth;
  }
  apply(value) {
    var {
      bandAware,
      position
    } = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
    if (value === void 0) {
      return void 0;
    }
    if (position) {
      switch (position) {
        case "start": {
          return this.scale(value);
        }
        case "middle": {
          var offset = this.bandwidth ? this.bandwidth() / 2 : 0;
          return this.scale(value) + offset;
        }
        case "end": {
          var _offset = this.bandwidth ? this.bandwidth() : 0;
          return this.scale(value) + _offset;
        }
        default: {
          return this.scale(value);
        }
      }
    }
    if (bandAware) {
      var _offset2 = this.bandwidth ? this.bandwidth() / 2 : 0;
      return this.scale(value) + _offset2;
    }
    return this.scale(value);
  }
  isInRange(value) {
    var range2 = this.range();
    var first = range2[0];
    var last2 = range2[range2.length - 1];
    return first <= last2 ? value >= first && value <= last2 : value >= last2 && value <= first;
  }
}
_defineProperty$6(ScaleHelper, "EPS", 1e-4);
function normalizeAngle(angle) {
  return (angle % 180 + 180) % 180;
}
var getAngledRectangleWidth = function getAngledRectangleWidth2(_ref5) {
  var {
    width,
    height
  } = _ref5;
  var angle = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
  var normalizedAngle = normalizeAngle(angle);
  var angleRadians = normalizedAngle * Math.PI / 180;
  var angleThreshold = Math.atan(height / width);
  var angledWidth = angleRadians > angleThreshold && angleRadians < Math.PI - angleThreshold ? height / Math.sin(angleRadians) : width / Math.cos(angleRadians);
  return Math.abs(angledWidth);
};
var initialState$1 = {
  dots: [],
  areas: [],
  lines: []
};
var referenceElementsSlice = createSlice({
  name: "referenceElements",
  initialState: initialState$1,
  reducers: {
    addDot: (state2, action2) => {
      state2.dots.push(action2.payload);
    },
    removeDot: (state2, action2) => {
      var index = current(state2).dots.findIndex((dot) => dot === action2.payload);
      if (index !== -1) {
        state2.dots.splice(index, 1);
      }
    },
    addArea: (state2, action2) => {
      state2.areas.push(action2.payload);
    },
    removeArea: (state2, action2) => {
      var index = current(state2).areas.findIndex((area2) => area2 === action2.payload);
      if (index !== -1) {
        state2.areas.splice(index, 1);
      }
    },
    addLine: (state2, action2) => {
      state2.lines.push(action2.payload);
    },
    removeLine: (state2, action2) => {
      var index = current(state2).lines.findIndex((line2) => line2 === action2.payload);
      if (index !== -1) {
        state2.lines.splice(index, 1);
      }
    }
  }
});
var {
  addDot,
  removeDot,
  addArea,
  removeArea,
  addLine,
  removeLine
} = referenceElementsSlice.actions;
var referenceElementsReducer = referenceElementsSlice.reducer;
var ClipPathIdContext = /* @__PURE__ */ createContext(void 0);
var ClipPathProvider = (_ref2) => {
  var {
    children
  } = _ref2;
  var [clipPathId] = useState("".concat(uniqueId("recharts"), "-clip"));
  var plotArea = usePlotArea();
  if (plotArea == null) {
    return null;
  }
  var {
    x,
    y,
    width,
    height
  } = plotArea;
  return /* @__PURE__ */ React.createElement(ClipPathIdContext.Provider, {
    value: clipPathId
  }, /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement("clipPath", {
    id: clipPathId
  }, /* @__PURE__ */ React.createElement("rect", {
    x,
    y,
    height,
    width
  }))), children);
};
function shallowEqual(a, b) {
  for (var key in a) {
    if ({}.hasOwnProperty.call(a, key) && (!{}.hasOwnProperty.call(b, key) || a[key] !== b[key])) {
      return false;
    }
  }
  for (var _key in b) {
    if ({}.hasOwnProperty.call(b, _key) && !{}.hasOwnProperty.call(a, _key)) {
      return false;
    }
  }
  return true;
}
function getEveryNthWithCondition(array, n) {
  if (n < 1) {
    return [];
  }
  if (n === 1) {
    return array;
  }
  var result = [];
  for (var i = 0; i < array.length; i += n) {
    result.push(array[i]);
  }
  return result;
}
function getAngledTickWidth(contentSize, unitSize, angle) {
  var size = {
    width: contentSize.width + unitSize.width,
    height: contentSize.height + unitSize.height
  };
  return getAngledRectangleWidth(size, angle);
}
function getTickBoundaries(viewBox, sign, sizeKey) {
  var isWidth = sizeKey === "width";
  var {
    x,
    y,
    width,
    height
  } = viewBox;
  if (sign === 1) {
    return {
      start: isWidth ? x : y,
      end: isWidth ? x + width : y + height
    };
  }
  return {
    start: isWidth ? x + width : y + height,
    end: isWidth ? x : y
  };
}
function isVisible(sign, tickPosition, getSize, start, end) {
  if (sign * tickPosition < sign * start || sign * tickPosition > sign * end) {
    return false;
  }
  var size = getSize();
  return sign * (tickPosition - sign * size / 2 - start) >= 0 && sign * (tickPosition + sign * size / 2 - end) <= 0;
}
function getNumberIntervalTicks(ticks, interval) {
  return getEveryNthWithCondition(ticks, interval + 1);
}
function getEquidistantTicks(sign, boundaries, getTickSize, ticks, minTickGap) {
  var result = (ticks || []).slice();
  var {
    start: initialStart,
    end
  } = boundaries;
  var index = 0;
  var stepsize = 1;
  var start = initialStart;
  var _loop = function _loop2() {
    var entry2 = ticks === null || ticks === void 0 ? void 0 : ticks[index];
    if (entry2 === void 0) {
      return {
        v: getEveryNthWithCondition(ticks, stepsize)
      };
    }
    var i = index;
    var size;
    var getSize = () => {
      if (size === void 0) {
        size = getTickSize(entry2, i);
      }
      return size;
    };
    var tickCoord = entry2.coordinate;
    var isShow = index === 0 || isVisible(sign, tickCoord, getSize, start, end);
    if (!isShow) {
      index = 0;
      start = initialStart;
      stepsize += 1;
    }
    if (isShow) {
      start = tickCoord + sign * (getSize() / 2 + minTickGap);
      index += stepsize;
    }
  }, _ret;
  while (stepsize <= result.length) {
    _ret = _loop();
    if (_ret) return _ret.v;
  }
  return [];
}
function ownKeys$5(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$5(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$5(Object(t), true).forEach(function(r3) {
      _defineProperty$5(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$5(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$5(e, r2, t) {
  return (r2 = _toPropertyKey$5(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$5(t) {
  var i = _toPrimitive$5(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$5(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function getTicksEnd(sign, boundaries, getTickSize, ticks, minTickGap) {
  var result = (ticks || []).slice();
  var len = result.length;
  var {
    start
  } = boundaries;
  var {
    end
  } = boundaries;
  var _loop = function _loop2(i2) {
    var entry2 = result[i2];
    var size;
    var getSize = () => {
      if (size === void 0) {
        size = getTickSize(entry2, i2);
      }
      return size;
    };
    if (i2 === len - 1) {
      var gap = sign * (entry2.coordinate + sign * getSize() / 2 - end);
      result[i2] = entry2 = _objectSpread$5(_objectSpread$5({}, entry2), {}, {
        tickCoord: gap > 0 ? entry2.coordinate - gap * sign : entry2.coordinate
      });
    } else {
      result[i2] = entry2 = _objectSpread$5(_objectSpread$5({}, entry2), {}, {
        tickCoord: entry2.coordinate
      });
    }
    if (entry2.tickCoord != null) {
      var isShow = isVisible(sign, entry2.tickCoord, getSize, start, end);
      if (isShow) {
        end = entry2.tickCoord - sign * (getSize() / 2 + minTickGap);
        result[i2] = _objectSpread$5(_objectSpread$5({}, entry2), {}, {
          isShow: true
        });
      }
    }
  };
  for (var i = len - 1; i >= 0; i--) {
    _loop(i);
  }
  return result;
}
function getTicksStart(sign, boundaries, getTickSize, ticks, minTickGap, preserveEnd) {
  var result = (ticks || []).slice();
  var len = result.length;
  var {
    start,
    end
  } = boundaries;
  if (preserveEnd) {
    var tail = ticks[len - 1];
    var tailSize = getTickSize(tail, len - 1);
    var tailGap = sign * (tail.coordinate + sign * tailSize / 2 - end);
    result[len - 1] = tail = _objectSpread$5(_objectSpread$5({}, tail), {}, {
      tickCoord: tailGap > 0 ? tail.coordinate - tailGap * sign : tail.coordinate
    });
    if (tail.tickCoord != null) {
      var isTailShow = isVisible(sign, tail.tickCoord, () => tailSize, start, end);
      if (isTailShow) {
        end = tail.tickCoord - sign * (tailSize / 2 + minTickGap);
        result[len - 1] = _objectSpread$5(_objectSpread$5({}, tail), {}, {
          isShow: true
        });
      }
    }
  }
  var count2 = preserveEnd ? len - 1 : len;
  var _loop2 = function _loop22(i2) {
    var entry2 = result[i2];
    var size;
    var getSize = () => {
      if (size === void 0) {
        size = getTickSize(entry2, i2);
      }
      return size;
    };
    if (i2 === 0) {
      var gap = sign * (entry2.coordinate - sign * getSize() / 2 - start);
      result[i2] = entry2 = _objectSpread$5(_objectSpread$5({}, entry2), {}, {
        tickCoord: gap < 0 ? entry2.coordinate - gap * sign : entry2.coordinate
      });
    } else {
      result[i2] = entry2 = _objectSpread$5(_objectSpread$5({}, entry2), {}, {
        tickCoord: entry2.coordinate
      });
    }
    if (entry2.tickCoord != null) {
      var isShow = isVisible(sign, entry2.tickCoord, getSize, start, end);
      if (isShow) {
        start = entry2.tickCoord + sign * (getSize() / 2 + minTickGap);
        result[i2] = _objectSpread$5(_objectSpread$5({}, entry2), {}, {
          isShow: true
        });
      }
    }
  };
  for (var i = 0; i < count2; i++) {
    _loop2(i);
  }
  return result;
}
function getTicks(props, fontSize, letterSpacing) {
  var {
    tick,
    ticks,
    viewBox,
    minTickGap,
    orientation,
    interval,
    tickFormatter,
    unit,
    angle
  } = props;
  if (!ticks || !ticks.length || !tick) {
    return [];
  }
  if (isNumber(interval) || Global.isSsr) {
    var _getNumberIntervalTic;
    return (_getNumberIntervalTic = getNumberIntervalTicks(ticks, isNumber(interval) ? interval : 0)) !== null && _getNumberIntervalTic !== void 0 ? _getNumberIntervalTic : [];
  }
  var candidates = [];
  var sizeKey = orientation === "top" || orientation === "bottom" ? "width" : "height";
  var unitSize = unit && sizeKey === "width" ? getStringSize(unit, {
    fontSize,
    letterSpacing
  }) : {
    width: 0,
    height: 0
  };
  var getTickSize = (content, index) => {
    var value = typeof tickFormatter === "function" ? tickFormatter(content.value, index) : content.value;
    return sizeKey === "width" ? getAngledTickWidth(getStringSize(value, {
      fontSize,
      letterSpacing
    }), unitSize, angle) : getStringSize(value, {
      fontSize,
      letterSpacing
    })[sizeKey];
  };
  var sign = ticks.length >= 2 ? mathSign(ticks[1].coordinate - ticks[0].coordinate) : 1;
  var boundaries = getTickBoundaries(viewBox, sign, sizeKey);
  if (interval === "equidistantPreserveStart") {
    return getEquidistantTicks(sign, boundaries, getTickSize, ticks, minTickGap);
  }
  if (interval === "preserveStart" || interval === "preserveStartEnd") {
    candidates = getTicksStart(sign, boundaries, getTickSize, ticks, minTickGap, interval === "preserveStartEnd");
  } else {
    candidates = getTicksEnd(sign, boundaries, getTickSize, ticks, minTickGap);
  }
  return candidates.filter((entry2) => entry2.isShow);
}
var getCalculatedYAxisWidth = (_ref2) => {
  var {
    ticks,
    label,
    labelGapWithTick = 5,
    // Default gap between label and tick
    tickSize = 0,
    tickMargin = 0
  } = _ref2;
  var maxTickWidth = 0;
  if (ticks) {
    Array.from(ticks).forEach((tickNode) => {
      if (tickNode) {
        var bbox = tickNode.getBoundingClientRect();
        if (bbox.width > maxTickWidth) {
          maxTickWidth = bbox.width;
        }
      }
    });
    var labelWidth = label ? label.getBoundingClientRect().width : 0;
    var tickWidth = tickSize + tickMargin;
    var updatedYAxisWidth = maxTickWidth + tickWidth + labelWidth + (label ? labelGapWithTick : 0);
    return Math.round(updatedYAxisWidth);
  }
  return 0;
};
var _excluded$8 = ["axisLine", "width", "height", "className", "hide", "ticks", "axisType"], _excluded2$5 = ["viewBox"], _excluded3$4 = ["viewBox"];
function _objectWithoutProperties$8(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$8(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$8(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function _extends$9() {
  return _extends$9 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$9.apply(null, arguments);
}
function ownKeys$4(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$4(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$4(Object(t), true).forEach(function(r3) {
      _defineProperty$4(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$4(e, r2, t) {
  return (r2 = _toPropertyKey$4(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$4(t) {
  var i = _toPrimitive$4(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$4(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
var defaultCartesianAxisProps = {
  x: 0,
  y: 0,
  width: 0,
  height: 0,
  viewBox: {
    x: 0,
    y: 0,
    width: 0,
    height: 0
  },
  // The orientation of axis
  orientation: "bottom",
  // The ticks
  ticks: [],
  stroke: "#666",
  tickLine: true,
  axisLine: true,
  tick: true,
  mirror: false,
  minTickGap: 5,
  // The width or height of tick
  tickSize: 6,
  tickMargin: 2,
  interval: "preserveEnd",
  zIndex: DefaultZIndexes.axis
};
function AxisLine(axisLineProps) {
  var {
    x,
    y,
    width,
    height,
    orientation,
    mirror,
    axisLine,
    otherSvgProps
  } = axisLineProps;
  if (!axisLine) {
    return null;
  }
  var props = _objectSpread$4(_objectSpread$4(_objectSpread$4({}, otherSvgProps), svgPropertiesNoEvents(axisLine)), {}, {
    fill: "none"
  });
  if (orientation === "top" || orientation === "bottom") {
    var needHeight = +(orientation === "top" && !mirror || orientation === "bottom" && mirror);
    props = _objectSpread$4(_objectSpread$4({}, props), {}, {
      x1: x,
      y1: y + needHeight * height,
      x2: x + width,
      y2: y + needHeight * height
    });
  } else {
    var needWidth = +(orientation === "left" && !mirror || orientation === "right" && mirror);
    props = _objectSpread$4(_objectSpread$4({}, props), {}, {
      x1: x + needWidth * width,
      y1: y,
      x2: x + needWidth * width,
      y2: y + height
    });
  }
  return /* @__PURE__ */ React.createElement("line", _extends$9({}, props, {
    className: clsx("recharts-cartesian-axis-line", get(axisLine, "className"))
  }));
}
function getTickLineCoord(data2, x, y, width, height, orientation, tickSize, mirror, tickMargin) {
  var x1, x2, y1, y2, tx, ty;
  var sign = mirror ? -1 : 1;
  var finalTickSize = data2.tickSize || tickSize;
  var tickCoord = isNumber(data2.tickCoord) ? data2.tickCoord : data2.coordinate;
  switch (orientation) {
    case "top":
      x1 = x2 = data2.coordinate;
      y2 = y + +!mirror * height;
      y1 = y2 - sign * finalTickSize;
      ty = y1 - sign * tickMargin;
      tx = tickCoord;
      break;
    case "left":
      y1 = y2 = data2.coordinate;
      x2 = x + +!mirror * width;
      x1 = x2 - sign * finalTickSize;
      tx = x1 - sign * tickMargin;
      ty = tickCoord;
      break;
    case "right":
      y1 = y2 = data2.coordinate;
      x2 = x + +mirror * width;
      x1 = x2 + sign * finalTickSize;
      tx = x1 + sign * tickMargin;
      ty = tickCoord;
      break;
    default:
      x1 = x2 = data2.coordinate;
      y2 = y + +mirror * height;
      y1 = y2 + sign * finalTickSize;
      ty = y1 + sign * tickMargin;
      tx = tickCoord;
      break;
  }
  return {
    line: {
      x1,
      y1,
      x2,
      y2
    },
    tick: {
      x: tx,
      y: ty
    }
  };
}
function getTickTextAnchor(orientation, mirror) {
  switch (orientation) {
    case "left":
      return mirror ? "start" : "end";
    case "right":
      return mirror ? "end" : "start";
    default:
      return "middle";
  }
}
function getTickVerticalAnchor(orientation, mirror) {
  switch (orientation) {
    case "left":
    case "right":
      return "middle";
    case "top":
      return mirror ? "start" : "end";
    default:
      return mirror ? "end" : "start";
  }
}
function TickItem(props) {
  var {
    option,
    tickProps,
    value
  } = props;
  var tickItem;
  var combinedClassName = clsx(tickProps.className, "recharts-cartesian-axis-tick-value");
  if (/* @__PURE__ */ React.isValidElement(option)) {
    tickItem = /* @__PURE__ */ React.cloneElement(option, _objectSpread$4(_objectSpread$4({}, tickProps), {}, {
      className: combinedClassName
    }));
  } else if (typeof option === "function") {
    tickItem = option(_objectSpread$4(_objectSpread$4({}, tickProps), {}, {
      className: combinedClassName
    }));
  } else {
    var className = "recharts-cartesian-axis-tick-value";
    if (typeof option !== "boolean") {
      className = clsx(className, option === null || option === void 0 ? void 0 : option.className);
    }
    tickItem = /* @__PURE__ */ React.createElement(Text, _extends$9({}, tickProps, {
      className
    }), value);
  }
  return tickItem;
}
var Ticks = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    ticks = [],
    tick,
    tickLine,
    stroke,
    tickFormatter,
    unit,
    padding,
    tickTextProps,
    orientation,
    mirror,
    x,
    y,
    width,
    height,
    tickSize,
    tickMargin,
    fontSize,
    letterSpacing,
    getTicksConfig,
    events,
    axisType
  } = props;
  var finalTicks = getTicks(_objectSpread$4(_objectSpread$4({}, getTicksConfig), {}, {
    ticks
  }), fontSize, letterSpacing);
  var textAnchor = getTickTextAnchor(orientation, mirror);
  var verticalAnchor = getTickVerticalAnchor(orientation, mirror);
  var axisProps = svgPropertiesNoEvents(getTicksConfig);
  var customTickProps = svgPropertiesNoEventsFromUnknown(tick);
  var tickLinePropsObject = {};
  if (typeof tickLine === "object") {
    tickLinePropsObject = tickLine;
  }
  var tickLineProps = _objectSpread$4(_objectSpread$4({}, axisProps), {}, {
    fill: "none"
  }, tickLinePropsObject);
  var tickLineCoords = finalTicks.map((entry2) => _objectSpread$4({
    entry: entry2
  }, getTickLineCoord(entry2, x, y, width, height, orientation, tickSize, mirror, tickMargin)));
  var tickLines = tickLineCoords.map((_ref2) => {
    var {
      entry: entry2,
      line: lineCoord
    } = _ref2;
    return /* @__PURE__ */ React.createElement(Layer, {
      className: "recharts-cartesian-axis-tick",
      key: "tick-".concat(entry2.value, "-").concat(entry2.coordinate, "-").concat(entry2.tickCoord)
    }, tickLine && /* @__PURE__ */ React.createElement("line", _extends$9({}, tickLineProps, lineCoord, {
      className: clsx("recharts-cartesian-axis-tick-line", get(tickLine, "className"))
    })));
  });
  var tickLabels = tickLineCoords.map((_ref2, i) => {
    var {
      entry: entry2,
      tick: tickCoord
    } = _ref2;
    var tickProps = _objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({
      // @ts-expect-error textAnchor from axisProps is typed as `string` but Text wants type `TextAnchor`
      textAnchor,
      verticalAnchor
    }, axisProps), {}, {
      // @ts-expect-error customTickProps is contributing unknown props
      stroke: "none",
      // @ts-expect-error customTickProps is contributing unknown props
      fill: stroke
    }, customTickProps), tickCoord), {}, {
      index: i,
      payload: entry2,
      visibleTicksCount: finalTicks.length,
      tickFormatter,
      padding
    }, tickTextProps);
    return /* @__PURE__ */ React.createElement(Layer, _extends$9({
      className: "recharts-cartesian-axis-tick-label",
      key: "tick-label-".concat(entry2.value, "-").concat(entry2.coordinate, "-").concat(entry2.tickCoord)
    }, adaptEventsOfChild(events, entry2, i)), tick && /* @__PURE__ */ React.createElement(TickItem, {
      option: tick,
      tickProps,
      value: "".concat(typeof tickFormatter === "function" ? tickFormatter(entry2.value, i) : entry2.value).concat(unit || "")
    }));
  });
  return /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-axis-ticks recharts-".concat(axisType, "-ticks")
  }, tickLabels.length > 0 && /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: DefaultZIndexes.label
  }, /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-axis-tick-labels recharts-".concat(axisType, "-tick-labels"),
    ref
  }, tickLabels)), tickLines.length > 0 && /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-axis-tick-lines recharts-".concat(axisType, "-tick-lines")
  }, tickLines));
});
var CartesianAxisComponent = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    axisLine,
    width,
    height,
    className,
    hide,
    ticks,
    axisType
  } = props, rest = _objectWithoutProperties$8(props, _excluded$8);
  var [fontSize, setFontSize] = useState("");
  var [letterSpacing, setLetterSpacing] = useState("");
  var tickRefs = useRef(null);
  useImperativeHandle(ref, () => ({
    getCalculatedWidth: () => {
      var _props$labelRef;
      return getCalculatedYAxisWidth({
        ticks: tickRefs.current,
        label: (_props$labelRef = props.labelRef) === null || _props$labelRef === void 0 ? void 0 : _props$labelRef.current,
        labelGapWithTick: 5,
        tickSize: props.tickSize,
        tickMargin: props.tickMargin
      });
    }
  }));
  var layerRef = useCallback((el) => {
    if (el) {
      var tickNodes = el.getElementsByClassName("recharts-cartesian-axis-tick-value");
      tickRefs.current = tickNodes;
      var tick = tickNodes[0];
      if (tick) {
        var computedStyle = window.getComputedStyle(tick);
        var calculatedFontSize = computedStyle.fontSize;
        var calculatedLetterSpacing = computedStyle.letterSpacing;
        if (calculatedFontSize !== fontSize || calculatedLetterSpacing !== letterSpacing) {
          setFontSize(calculatedFontSize);
          setLetterSpacing(calculatedLetterSpacing);
        }
      }
    }
  }, [fontSize, letterSpacing]);
  if (hide) {
    return null;
  }
  if (width != null && width <= 0 || height != null && height <= 0) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: props.zIndex
  }, /* @__PURE__ */ React.createElement(Layer, {
    className: clsx("recharts-cartesian-axis", className)
  }, /* @__PURE__ */ React.createElement(AxisLine, {
    x: props.x,
    y: props.y,
    width,
    height,
    orientation: props.orientation,
    mirror: props.mirror,
    axisLine,
    otherSvgProps: svgPropertiesNoEvents(props)
  }), /* @__PURE__ */ React.createElement(Ticks, {
    ref: layerRef,
    axisType,
    events: rest,
    fontSize,
    getTicksConfig: props,
    height: props.height,
    letterSpacing,
    mirror: props.mirror,
    orientation: props.orientation,
    padding: props.padding,
    stroke: props.stroke,
    tick: props.tick,
    tickFormatter: props.tickFormatter,
    tickLine: props.tickLine,
    tickMargin: props.tickMargin,
    tickSize: props.tickSize,
    tickTextProps: props.tickTextProps,
    ticks,
    unit: props.unit,
    width: props.width,
    x: props.x,
    y: props.y
  }), /* @__PURE__ */ React.createElement(CartesianLabelContextProvider, {
    x: props.x,
    y: props.y,
    width: props.width,
    height: props.height,
    lowerWidth: props.width,
    upperWidth: props.width
  }, /* @__PURE__ */ React.createElement(CartesianLabelFromLabelProp, {
    label: props.label,
    labelRef: props.labelRef
  }), props.children)));
});
var MemoCartesianAxis = /* @__PURE__ */ React.memo(CartesianAxisComponent, (prevProps, nextProps) => {
  var {
    viewBox: prevViewBox
  } = prevProps, prevRestProps = _objectWithoutProperties$8(prevProps, _excluded2$5);
  var {
    viewBox: nextViewBox
  } = nextProps, nextRestProps = _objectWithoutProperties$8(nextProps, _excluded3$4);
  return shallowEqual(prevViewBox, nextViewBox) && shallowEqual(prevRestProps, nextRestProps);
});
var CartesianAxis = /* @__PURE__ */ React.forwardRef((outsideProps, ref) => {
  var props = resolveDefaultProps(outsideProps, defaultCartesianAxisProps);
  return /* @__PURE__ */ React.createElement(MemoCartesianAxis, _extends$9({}, props, {
    ref
  }));
});
CartesianAxis.displayName = "CartesianAxis";
var _excluded$7 = ["x1", "y1", "x2", "y2", "key"], _excluded2$4 = ["offset"], _excluded3$3 = ["xAxisId", "yAxisId"], _excluded4$2 = ["xAxisId", "yAxisId"];
function ownKeys$3(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$3(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$3(Object(t), true).forEach(function(r3) {
      _defineProperty$3(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$3(e, r2, t) {
  return (r2 = _toPropertyKey$3(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$3(t) {
  var i = _toPrimitive$3(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$3(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$8() {
  return _extends$8 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$8.apply(null, arguments);
}
function _objectWithoutProperties$7(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$7(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$7(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var Background = (props) => {
  var {
    fill
  } = props;
  if (!fill || fill === "none") {
    return null;
  }
  var {
    fillOpacity,
    x,
    y,
    width,
    height,
    ry
  } = props;
  return /* @__PURE__ */ React.createElement("rect", {
    x,
    y,
    ry,
    width,
    height,
    stroke: "none",
    fill,
    fillOpacity,
    className: "recharts-cartesian-grid-bg"
  });
};
function LineItem(_ref2) {
  var {
    option,
    lineItemProps
  } = _ref2;
  var lineItem;
  if (/* @__PURE__ */ React.isValidElement(option)) {
    lineItem = /* @__PURE__ */ React.cloneElement(option, lineItemProps);
  } else if (typeof option === "function") {
    lineItem = option(lineItemProps);
  } else {
    var _svgPropertiesNoEvent;
    var {
      x1,
      y1,
      x2,
      y2,
      key
    } = lineItemProps, others = _objectWithoutProperties$7(lineItemProps, _excluded$7);
    var _ref22 = (_svgPropertiesNoEvent = svgPropertiesNoEvents(others)) !== null && _svgPropertiesNoEvent !== void 0 ? _svgPropertiesNoEvent : {}, {
      offset: __
    } = _ref22, restOfFilteredProps = _objectWithoutProperties$7(_ref22, _excluded2$4);
    lineItem = /* @__PURE__ */ React.createElement("line", _extends$8({}, restOfFilteredProps, {
      x1,
      y1,
      x2,
      y2,
      fill: "none",
      key
    }));
  }
  return lineItem;
}
function HorizontalGridLines(props) {
  var {
    x,
    width,
    horizontal = true,
    horizontalPoints
  } = props;
  if (!horizontal || !horizontalPoints || !horizontalPoints.length) {
    return null;
  }
  var {
    xAxisId,
    yAxisId
  } = props, otherLineItemProps = _objectWithoutProperties$7(props, _excluded3$3);
  var items = horizontalPoints.map((entry2, i) => {
    var lineItemProps = _objectSpread$3(_objectSpread$3({}, otherLineItemProps), {}, {
      x1: x,
      y1: entry2,
      x2: x + width,
      y2: entry2,
      key: "line-".concat(i),
      index: i
    });
    return /* @__PURE__ */ React.createElement(LineItem, {
      key: "line-".concat(i),
      option: horizontal,
      lineItemProps
    });
  });
  return /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-grid-horizontal"
  }, items);
}
function VerticalGridLines(props) {
  var {
    y,
    height,
    vertical = true,
    verticalPoints
  } = props;
  if (!vertical || !verticalPoints || !verticalPoints.length) {
    return null;
  }
  var {
    xAxisId,
    yAxisId
  } = props, otherLineItemProps = _objectWithoutProperties$7(props, _excluded4$2);
  var items = verticalPoints.map((entry2, i) => {
    var lineItemProps = _objectSpread$3(_objectSpread$3({}, otherLineItemProps), {}, {
      x1: entry2,
      y1: y,
      x2: entry2,
      y2: y + height,
      key: "line-".concat(i),
      index: i
    });
    return /* @__PURE__ */ React.createElement(LineItem, {
      option: vertical,
      lineItemProps,
      key: "line-".concat(i)
    });
  });
  return /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-grid-vertical"
  }, items);
}
function HorizontalStripes(props) {
  var {
    horizontalFill,
    fillOpacity,
    x,
    y,
    width,
    height,
    horizontalPoints,
    horizontal = true
  } = props;
  if (!horizontal || !horizontalFill || !horizontalFill.length || horizontalPoints == null) {
    return null;
  }
  var roundedSortedHorizontalPoints = horizontalPoints.map((e) => Math.round(e + y - y)).sort((a, b) => a - b);
  if (y !== roundedSortedHorizontalPoints[0]) {
    roundedSortedHorizontalPoints.unshift(0);
  }
  var items = roundedSortedHorizontalPoints.map((entry2, i) => {
    var lastStripe = !roundedSortedHorizontalPoints[i + 1];
    var lineHeight = lastStripe ? y + height - entry2 : roundedSortedHorizontalPoints[i + 1] - entry2;
    if (lineHeight <= 0) {
      return null;
    }
    var colorIndex = i % horizontalFill.length;
    return /* @__PURE__ */ React.createElement("rect", {
      key: "react-".concat(i),
      y: entry2,
      x,
      height: lineHeight,
      width,
      stroke: "none",
      fill: horizontalFill[colorIndex],
      fillOpacity,
      className: "recharts-cartesian-grid-bg"
    });
  });
  return /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-gridstripes-horizontal"
  }, items);
}
function VerticalStripes(props) {
  var {
    vertical = true,
    verticalFill,
    fillOpacity,
    x,
    y,
    width,
    height,
    verticalPoints
  } = props;
  if (!vertical || !verticalFill || !verticalFill.length) {
    return null;
  }
  var roundedSortedVerticalPoints = verticalPoints.map((e) => Math.round(e + x - x)).sort((a, b) => a - b);
  if (x !== roundedSortedVerticalPoints[0]) {
    roundedSortedVerticalPoints.unshift(0);
  }
  var items = roundedSortedVerticalPoints.map((entry2, i) => {
    var lastStripe = !roundedSortedVerticalPoints[i + 1];
    var lineWidth = lastStripe ? x + width - entry2 : roundedSortedVerticalPoints[i + 1] - entry2;
    if (lineWidth <= 0) {
      return null;
    }
    var colorIndex = i % verticalFill.length;
    return /* @__PURE__ */ React.createElement("rect", {
      key: "react-".concat(i),
      x: entry2,
      y,
      width: lineWidth,
      height,
      stroke: "none",
      fill: verticalFill[colorIndex],
      fillOpacity,
      className: "recharts-cartesian-grid-bg"
    });
  });
  return /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-gridstripes-vertical"
  }, items);
}
var defaultVerticalCoordinatesGenerator = (_ref3, syncWithTicks) => {
  var {
    xAxis,
    width,
    height,
    offset
  } = _ref3;
  return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({}, defaultCartesianAxisProps), xAxis), {}, {
    ticks: getTicksOfAxis(xAxis),
    viewBox: {
      x: 0,
      y: 0,
      width,
      height
    }
  })), offset.left, offset.left + offset.width, syncWithTicks);
};
var defaultHorizontalCoordinatesGenerator = (_ref4, syncWithTicks) => {
  var {
    yAxis,
    width,
    height,
    offset
  } = _ref4;
  return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({}, defaultCartesianAxisProps), yAxis), {}, {
    ticks: getTicksOfAxis(yAxis),
    viewBox: {
      x: 0,
      y: 0,
      width,
      height
    }
  })), offset.top, offset.top + offset.height, syncWithTicks);
};
var defaultCartesianGridProps = {
  horizontal: true,
  vertical: true,
  // The ordinates of horizontal grid lines
  horizontalPoints: [],
  // The abscissas of vertical grid lines
  verticalPoints: [],
  stroke: "#ccc",
  fill: "none",
  // The fill of colors of grid lines
  verticalFill: [],
  horizontalFill: [],
  xAxisId: 0,
  yAxisId: 0,
  syncWithTicks: false,
  zIndex: DefaultZIndexes.grid
};
function CartesianGrid(props) {
  var chartWidth = useChartWidth();
  var chartHeight = useChartHeight();
  var offset = useOffsetInternal();
  var propsIncludingDefaults = _objectSpread$3(_objectSpread$3({}, resolveDefaultProps(props, defaultCartesianGridProps)), {}, {
    x: isNumber(props.x) ? props.x : offset.left,
    y: isNumber(props.y) ? props.y : offset.top,
    width: isNumber(props.width) ? props.width : offset.width,
    height: isNumber(props.height) ? props.height : offset.height
  });
  var {
    xAxisId,
    yAxisId,
    x,
    y,
    width,
    height,
    syncWithTicks,
    horizontalValues,
    verticalValues
  } = propsIncludingDefaults;
  var isPanorama = useIsPanorama();
  var xAxis = useAppSelector((state2) => selectAxisPropsNeededForCartesianGridTicksGenerator(state2, "xAxis", xAxisId, isPanorama));
  var yAxis = useAppSelector((state2) => selectAxisPropsNeededForCartesianGridTicksGenerator(state2, "yAxis", yAxisId, isPanorama));
  if (!isPositiveNumber(width) || !isPositiveNumber(height) || !isNumber(x) || !isNumber(y)) {
    return null;
  }
  var verticalCoordinatesGenerator = propsIncludingDefaults.verticalCoordinatesGenerator || defaultVerticalCoordinatesGenerator;
  var horizontalCoordinatesGenerator = propsIncludingDefaults.horizontalCoordinatesGenerator || defaultHorizontalCoordinatesGenerator;
  var {
    horizontalPoints,
    verticalPoints
  } = propsIncludingDefaults;
  if ((!horizontalPoints || !horizontalPoints.length) && typeof horizontalCoordinatesGenerator === "function") {
    var isHorizontalValues = horizontalValues && horizontalValues.length;
    var generatorResult = horizontalCoordinatesGenerator({
      yAxis: yAxis ? _objectSpread$3(_objectSpread$3({}, yAxis), {}, {
        ticks: isHorizontalValues ? horizontalValues : yAxis.ticks
      }) : void 0,
      width: chartWidth !== null && chartWidth !== void 0 ? chartWidth : width,
      height: chartHeight !== null && chartHeight !== void 0 ? chartHeight : height,
      offset
    }, isHorizontalValues ? true : syncWithTicks);
    warn(Array.isArray(generatorResult), "horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof generatorResult, "]"));
    if (Array.isArray(generatorResult)) {
      horizontalPoints = generatorResult;
    }
  }
  if ((!verticalPoints || !verticalPoints.length) && typeof verticalCoordinatesGenerator === "function") {
    var isVerticalValues = verticalValues && verticalValues.length;
    var _generatorResult = verticalCoordinatesGenerator({
      xAxis: xAxis ? _objectSpread$3(_objectSpread$3({}, xAxis), {}, {
        ticks: isVerticalValues ? verticalValues : xAxis.ticks
      }) : void 0,
      width: chartWidth !== null && chartWidth !== void 0 ? chartWidth : width,
      height: chartHeight !== null && chartHeight !== void 0 ? chartHeight : height,
      offset
    }, isVerticalValues ? true : syncWithTicks);
    warn(Array.isArray(_generatorResult), "verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _generatorResult, "]"));
    if (Array.isArray(_generatorResult)) {
      verticalPoints = _generatorResult;
    }
  }
  return /* @__PURE__ */ React.createElement(ZIndexLayer, {
    zIndex: propsIncludingDefaults.zIndex
  }, /* @__PURE__ */ React.createElement("g", {
    className: "recharts-cartesian-grid"
  }, /* @__PURE__ */ React.createElement(Background, {
    fill: propsIncludingDefaults.fill,
    fillOpacity: propsIncludingDefaults.fillOpacity,
    x: propsIncludingDefaults.x,
    y: propsIncludingDefaults.y,
    width: propsIncludingDefaults.width,
    height: propsIncludingDefaults.height,
    ry: propsIncludingDefaults.ry
  }), /* @__PURE__ */ React.createElement(HorizontalStripes, _extends$8({}, propsIncludingDefaults, {
    horizontalPoints
  })), /* @__PURE__ */ React.createElement(VerticalStripes, _extends$8({}, propsIncludingDefaults, {
    verticalPoints
  })), /* @__PURE__ */ React.createElement(HorizontalGridLines, _extends$8({}, propsIncludingDefaults, {
    offset,
    horizontalPoints,
    xAxis,
    yAxis
  })), /* @__PURE__ */ React.createElement(VerticalGridLines, _extends$8({}, propsIncludingDefaults, {
    offset,
    verticalPoints,
    xAxis,
    yAxis
  }))));
}
CartesianGrid.displayName = "CartesianGrid";
var selectXAxisWithScale$1 = (state2, xAxisId, _yAxisId, isPanorama) => selectAxisWithScale(state2, "xAxis", xAxisId, isPanorama);
var selectXAxisTicks$1 = (state2, xAxisId, _yAxisId, isPanorama) => selectTicksOfGraphicalItem(state2, "xAxis", xAxisId, isPanorama);
var selectYAxisWithScale$1 = (state2, _xAxisId, yAxisId, isPanorama) => selectAxisWithScale(state2, "yAxis", yAxisId, isPanorama);
var selectYAxisTicks$1 = (state2, _xAxisId, yAxisId, isPanorama) => selectTicksOfGraphicalItem(state2, "yAxis", yAxisId, isPanorama);
var selectBandSize$1 = createSelector([selectChartLayout, selectXAxisWithScale$1, selectYAxisWithScale$1, selectXAxisTicks$1, selectYAxisTicks$1], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks) => {
  if (isCategoricalAxis(layout, "xAxis")) {
    return getBandSizeOfAxis(xAxis, xAxisTicks, false);
  }
  return getBandSizeOfAxis(yAxis, yAxisTicks, false);
});
var pickLineId = (_state, _xAxisId, _yAxisId, _isPanorama, id) => id;
function isLineSettings(item) {
  return item.type === "line";
}
var selectSynchronisedLineSettings = createSelector([selectUnfilteredCartesianItems, pickLineId], (graphicalItems, id) => graphicalItems.filter(isLineSettings).find((x) => x.id === id));
var selectLinePoints = createSelector([selectChartLayout, selectXAxisWithScale$1, selectYAxisWithScale$1, selectXAxisTicks$1, selectYAxisTicks$1, selectSynchronisedLineSettings, selectBandSize$1, selectChartDataWithIndexesIfNotInPanorama], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks, lineSettings, bandSize, _ref2) => {
  var {
    chartData,
    dataStartIndex,
    dataEndIndex
  } = _ref2;
  if (lineSettings == null || xAxis == null || yAxis == null || xAxisTicks == null || yAxisTicks == null || xAxisTicks.length === 0 || yAxisTicks.length === 0 || bandSize == null) {
    return void 0;
  }
  var {
    dataKey,
    data: data2
  } = lineSettings;
  var displayedData;
  if (data2 != null && data2.length > 0) {
    displayedData = data2;
  } else {
    displayedData = chartData === null || chartData === void 0 ? void 0 : chartData.slice(dataStartIndex, dataEndIndex + 1);
  }
  if (displayedData == null) {
    return void 0;
  }
  return computeLinePoints({
    layout,
    xAxis,
    yAxis,
    xAxisTicks,
    yAxisTicks,
    dataKey,
    bandSize,
    displayedData
  });
});
function getRadiusAndStrokeWidthFromDot(dot) {
  var props = svgPropertiesNoEventsFromUnknown(dot);
  var defaultR = 3;
  var defaultStrokeWidth = 2;
  if (props != null) {
    var {
      r: r2,
      strokeWidth
    } = props;
    var realR = Number(r2);
    var realStrokeWidth = Number(strokeWidth);
    if (Number.isNaN(realR) || realR < 0) {
      realR = defaultR;
    }
    if (Number.isNaN(realStrokeWidth) || realStrokeWidth < 0) {
      realStrokeWidth = defaultStrokeWidth;
    }
    return {
      r: realR,
      strokeWidth: realStrokeWidth
    };
  }
  return {
    r: defaultR,
    strokeWidth: defaultStrokeWidth
  };
}
var _excluded$6 = ["id"], _excluded2$3 = ["type", "layout", "connectNulls", "needClip", "shape"], _excluded3$2 = ["activeDot", "animateNewValues", "animationBegin", "animationDuration", "animationEasing", "connectNulls", "dot", "hide", "isAnimationActive", "label", "legendType", "xAxisId", "yAxisId", "id"];
function _extends$7() {
  return _extends$7 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$7.apply(null, arguments);
}
function ownKeys$2(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$2(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$2(Object(t), true).forEach(function(r3) {
      _defineProperty$2(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$2(e, r2, t) {
  return (r2 = _toPropertyKey$2(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$2(t) {
  var i = _toPrimitive$2(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$2(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _objectWithoutProperties$6(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$6(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$6(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var computeLegendPayloadFromAreaData$1 = (props) => {
  var {
    dataKey,
    name,
    stroke,
    legendType,
    hide
  } = props;
  return [{
    inactive: hide,
    dataKey,
    type: legendType,
    color: stroke,
    value: getTooltipNameProp(name, dataKey),
    payload: props
  }];
};
function getTooltipEntrySettings$1(props) {
  var {
    dataKey,
    data: data2,
    stroke,
    strokeWidth,
    fill,
    name,
    hide,
    unit
  } = props;
  return {
    dataDefinedOnItem: data2,
    positions: void 0,
    settings: {
      stroke,
      strokeWidth,
      fill,
      dataKey,
      nameKey: void 0,
      name: getTooltipNameProp(name, dataKey),
      hide,
      type: props.tooltipType,
      color: props.stroke,
      unit
    }
  };
}
var generateSimpleStrokeDasharray = (totalLength, length) => {
  return "".concat(length, "px ").concat(totalLength - length, "px");
};
function repeat(lines, count2) {
  var linesUnit = lines.length % 2 !== 0 ? [...lines, 0] : lines;
  var result = [];
  for (var i = 0; i < count2; ++i) {
    result = [...result, ...linesUnit];
  }
  return result;
}
var getStrokeDasharray = (length, totalLength, lines) => {
  var lineLength = lines.reduce((pre, next) => pre + next);
  if (!lineLength) {
    return generateSimpleStrokeDasharray(totalLength, length);
  }
  var count2 = Math.floor(length / lineLength);
  var remainLength = length % lineLength;
  var restLength = totalLength - length;
  var remainLines = [];
  for (var i = 0, sum = 0; i < lines.length; sum += lines[i], ++i) {
    if (sum + lines[i] > remainLength) {
      remainLines = [...lines.slice(0, i), remainLength - sum];
      break;
    }
  }
  var emptyLines = remainLines.length % 2 === 0 ? [0, restLength] : [restLength];
  return [...repeat(lines, count2), ...remainLines, ...emptyLines].map((line2) => "".concat(line2, "px")).join(", ");
};
function LineDotsWrapper(_ref2) {
  var {
    clipPathId,
    points,
    props
  } = _ref2;
  var {
    dot,
    dataKey,
    needClip
  } = props;
  var {
    id
  } = props, propsWithoutId = _objectWithoutProperties$6(props, _excluded$6);
  var lineProps = svgPropertiesNoEvents(propsWithoutId);
  return /* @__PURE__ */ React.createElement(Dots, {
    points,
    dot,
    className: "recharts-line-dots",
    dotClassName: "recharts-line-dot",
    dataKey,
    baseProps: lineProps,
    needClip,
    clipPathId
  });
}
function LineLabelListProvider(_ref2) {
  var {
    showLabels,
    children,
    points
  } = _ref2;
  var labelListEntries = useMemo(() => {
    return points === null || points === void 0 ? void 0 : points.map((point) => {
      var _point$x, _point$y;
      var viewBox = {
        x: (_point$x = point.x) !== null && _point$x !== void 0 ? _point$x : 0,
        y: (_point$y = point.y) !== null && _point$y !== void 0 ? _point$y : 0,
        width: 0,
        lowerWidth: 0,
        upperWidth: 0,
        height: 0
      };
      return _objectSpread$2(_objectSpread$2({}, viewBox), {}, {
        value: point.value,
        payload: point.payload,
        viewBox,
        /*
         * Line is not passing parentViewBox to the LabelList so the labels can escape - looks like a bug, should we pass parentViewBox?
         * Or should this just be the root chart viewBox?
         */
        parentViewBox: void 0,
        fill: void 0
      });
    });
  }, [points]);
  return /* @__PURE__ */ React.createElement(CartesianLabelListContextProvider, {
    value: showLabels ? labelListEntries : void 0
  }, children);
}
function StaticCurve(_ref3) {
  var {
    clipPathId,
    pathRef,
    points,
    strokeDasharray,
    props
  } = _ref3;
  var {
    type,
    layout,
    connectNulls,
    needClip,
    shape
  } = props, others = _objectWithoutProperties$6(props, _excluded2$3);
  var curveProps = _objectSpread$2(_objectSpread$2({}, svgPropertiesAndEvents(others)), {}, {
    fill: "none",
    className: "recharts-line-curve",
    clipPath: needClip ? "url(#clipPath-".concat(clipPathId, ")") : void 0,
    points,
    type,
    layout,
    connectNulls,
    strokeDasharray: strokeDasharray !== null && strokeDasharray !== void 0 ? strokeDasharray : props.strokeDasharray
  });
  return /* @__PURE__ */ React.createElement(React.Fragment, null, (points === null || points === void 0 ? void 0 : points.length) > 1 && /* @__PURE__ */ React.createElement(Shape, _extends$7({
    shapeType: "curve",
    option: shape
  }, curveProps, {
    pathRef
  })), /* @__PURE__ */ React.createElement(LineDotsWrapper, {
    points,
    clipPathId,
    props
  }));
}
function getTotalLength(mainCurve) {
  try {
    return mainCurve && mainCurve.getTotalLength && mainCurve.getTotalLength() || 0;
  } catch (_unused) {
    return 0;
  }
}
function CurveWithAnimation(_ref4) {
  var {
    clipPathId,
    props,
    pathRef,
    previousPointsRef,
    longestAnimatedLengthRef
  } = _ref4;
  var {
    points,
    strokeDasharray,
    isAnimationActive,
    animationBegin,
    animationDuration,
    animationEasing,
    animateNewValues,
    width,
    height,
    onAnimationEnd,
    onAnimationStart
  } = props;
  var prevPoints = previousPointsRef.current;
  var animationId = useAnimationId(props, "recharts-line-");
  var [isAnimating, setIsAnimating] = useState(false);
  var showLabels = !isAnimating;
  var handleAnimationEnd = useCallback(() => {
    if (typeof onAnimationEnd === "function") {
      onAnimationEnd();
    }
    setIsAnimating(false);
  }, [onAnimationEnd]);
  var handleAnimationStart = useCallback(() => {
    if (typeof onAnimationStart === "function") {
      onAnimationStart();
    }
    setIsAnimating(true);
  }, [onAnimationStart]);
  var totalLength = getTotalLength(pathRef.current);
  var startingPoint = longestAnimatedLengthRef.current;
  return /* @__PURE__ */ React.createElement(LineLabelListProvider, {
    points,
    showLabels
  }, props.children, /* @__PURE__ */ React.createElement(JavascriptAnimate, {
    animationId,
    begin: animationBegin,
    duration: animationDuration,
    isActive: isAnimationActive,
    easing: animationEasing,
    onAnimationEnd: handleAnimationEnd,
    onAnimationStart: handleAnimationStart,
    key: animationId
  }, (t) => {
    var lengthInterpolated = interpolate(startingPoint, totalLength + startingPoint, t);
    var curLength = Math.min(lengthInterpolated, totalLength);
    var currentStrokeDasharray;
    if (isAnimationActive) {
      if (strokeDasharray) {
        var lines = "".concat(strokeDasharray).split(/[,\s]+/gim).map((num) => parseFloat(num));
        currentStrokeDasharray = getStrokeDasharray(curLength, totalLength, lines);
      } else {
        currentStrokeDasharray = generateSimpleStrokeDasharray(totalLength, curLength);
      }
    } else {
      currentStrokeDasharray = strokeDasharray == null ? void 0 : String(strokeDasharray);
    }
    if (prevPoints) {
      var prevPointsDiffFactor = prevPoints.length / points.length;
      var stepData = t === 1 ? points : points.map((entry2, index) => {
        var prevPointIndex = Math.floor(index * prevPointsDiffFactor);
        if (prevPoints[prevPointIndex]) {
          var prev = prevPoints[prevPointIndex];
          return _objectSpread$2(_objectSpread$2({}, entry2), {}, {
            x: interpolate(prev.x, entry2.x, t),
            y: interpolate(prev.y, entry2.y, t)
          });
        }
        if (animateNewValues) {
          return _objectSpread$2(_objectSpread$2({}, entry2), {}, {
            x: interpolate(width * 2, entry2.x, t),
            y: interpolate(height / 2, entry2.y, t)
          });
        }
        return _objectSpread$2(_objectSpread$2({}, entry2), {}, {
          x: entry2.x,
          y: entry2.y
        });
      });
      previousPointsRef.current = stepData;
      return /* @__PURE__ */ React.createElement(StaticCurve, {
        props,
        points: stepData,
        clipPathId,
        pathRef,
        strokeDasharray: currentStrokeDasharray
      });
    }
    if (t > 0 && totalLength > 0) {
      previousPointsRef.current = points;
      longestAnimatedLengthRef.current = curLength;
    }
    return /* @__PURE__ */ React.createElement(StaticCurve, {
      props,
      points,
      clipPathId,
      pathRef,
      strokeDasharray: currentStrokeDasharray
    });
  }), /* @__PURE__ */ React.createElement(LabelListFromLabelProp, {
    label: props.label
  }));
}
function RenderCurve(_ref5) {
  var {
    clipPathId,
    props
  } = _ref5;
  var previousPointsRef = useRef(null);
  var longestAnimatedLengthRef = useRef(0);
  var pathRef = useRef(null);
  return /* @__PURE__ */ React.createElement(CurveWithAnimation, {
    props,
    clipPathId,
    previousPointsRef,
    longestAnimatedLengthRef,
    pathRef
  });
}
var errorBarDataPointFormatter = (dataPoint, dataKey) => {
  var _dataPoint$x, _dataPoint$y;
  return {
    x: (_dataPoint$x = dataPoint.x) !== null && _dataPoint$x !== void 0 ? _dataPoint$x : void 0,
    y: (_dataPoint$y = dataPoint.y) !== null && _dataPoint$y !== void 0 ? _dataPoint$y : void 0,
    value: dataPoint.value,
    // @ts-expect-error getValueByDataKey does not validate the output type
    errorVal: getValueByDataKey(dataPoint.payload, dataKey)
  };
};
class LineWithState extends Component {
  render() {
    var {
      hide,
      dot,
      points,
      className,
      xAxisId,
      yAxisId,
      top,
      left,
      width,
      height,
      id,
      needClip,
      zIndex
    } = this.props;
    if (hide) {
      return null;
    }
    var layerClass = clsx("recharts-line", className);
    var clipPathId = id;
    var {
      r: r2,
      strokeWidth
    } = getRadiusAndStrokeWidthFromDot(dot);
    var clipDot = isClipDot(dot);
    var dotSize = r2 * 2 + strokeWidth;
    return /* @__PURE__ */ React.createElement(ZIndexLayer, {
      zIndex
    }, /* @__PURE__ */ React.createElement(Layer, {
      className: layerClass
    }, needClip && /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement(GraphicalItemClipPath, {
      clipPathId,
      xAxisId,
      yAxisId
    }), !clipDot && /* @__PURE__ */ React.createElement("clipPath", {
      id: "clipPath-dots-".concat(clipPathId)
    }, /* @__PURE__ */ React.createElement("rect", {
      x: left - dotSize / 2,
      y: top - dotSize / 2,
      width: width + dotSize,
      height: height + dotSize
    }))), /* @__PURE__ */ React.createElement(SetErrorBarContext, {
      xAxisId,
      yAxisId,
      data: points,
      dataPointFormatter: errorBarDataPointFormatter,
      errorBarOffset: 0
    }, /* @__PURE__ */ React.createElement(RenderCurve, {
      props: this.props,
      clipPathId
    }))), /* @__PURE__ */ React.createElement(ActivePoints, {
      activeDot: this.props.activeDot,
      points,
      mainColor: this.props.stroke,
      itemDataKey: this.props.dataKey
    }));
  }
}
var defaultLineProps = {
  activeDot: true,
  animateNewValues: true,
  animationBegin: 0,
  animationDuration: 1500,
  animationEasing: "ease",
  connectNulls: false,
  dot: true,
  fill: "#fff",
  hide: false,
  isAnimationActive: !Global.isSsr,
  label: false,
  legendType: "line",
  stroke: "#3182bd",
  strokeWidth: 1,
  xAxisId: 0,
  yAxisId: 0,
  zIndex: DefaultZIndexes.line
};
function LineImpl(props) {
  var _resolveDefaultProps = resolveDefaultProps(props, defaultLineProps), {
    activeDot,
    animateNewValues,
    animationBegin,
    animationDuration,
    animationEasing,
    connectNulls,
    dot,
    hide,
    isAnimationActive,
    label,
    legendType,
    xAxisId,
    yAxisId,
    id
  } = _resolveDefaultProps, everythingElse = _objectWithoutProperties$6(_resolveDefaultProps, _excluded3$2);
  var {
    needClip
  } = useNeedsClip(xAxisId, yAxisId);
  var plotArea = usePlotArea();
  var layout = useChartLayout();
  var isPanorama = useIsPanorama();
  var points = useAppSelector((state2) => selectLinePoints(state2, xAxisId, yAxisId, isPanorama, id));
  if (layout !== "horizontal" && layout !== "vertical" || points == null || plotArea == null) {
    return null;
  }
  var {
    height,
    width,
    x: left,
    y: top
  } = plotArea;
  return /* @__PURE__ */ React.createElement(LineWithState, _extends$7({}, everythingElse, {
    id,
    connectNulls,
    dot,
    activeDot,
    animateNewValues,
    animationBegin,
    animationDuration,
    animationEasing,
    isAnimationActive,
    hide,
    label,
    legendType,
    xAxisId,
    yAxisId,
    points,
    layout,
    height,
    width,
    left,
    top,
    needClip
  }));
}
function computeLinePoints(_ref6) {
  var {
    layout,
    xAxis,
    yAxis,
    xAxisTicks,
    yAxisTicks,
    dataKey,
    bandSize,
    displayedData
  } = _ref6;
  return displayedData.map((entry2, index) => {
    var value = getValueByDataKey(entry2, dataKey);
    if (layout === "horizontal") {
      var _x = getCateCoordinateOfLine({
        axis: xAxis,
        ticks: xAxisTicks,
        bandSize,
        entry: entry2,
        index
      });
      var _y = isNullish(value) ? null : yAxis.scale(value);
      return {
        x: _x,
        y: _y,
        value,
        payload: entry2
      };
    }
    var x = isNullish(value) ? null : xAxis.scale(value);
    var y = getCateCoordinateOfLine({
      axis: yAxis,
      ticks: yAxisTicks,
      bandSize,
      entry: entry2,
      index
    });
    if (x == null || y == null) {
      return null;
    }
    return {
      x,
      y,
      value,
      payload: entry2
    };
  }).filter(Boolean);
}
function LineFn(outsideProps) {
  var props = resolveDefaultProps(outsideProps, defaultLineProps);
  var isPanorama = useIsPanorama();
  return /* @__PURE__ */ React.createElement(RegisterGraphicalItemId, {
    id: props.id,
    type: "line"
  }, (id) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SetLegendPayload, {
    legendPayload: computeLegendPayloadFromAreaData$1(props)
  }), /* @__PURE__ */ React.createElement(SetTooltipEntrySettings, {
    fn: getTooltipEntrySettings$1,
    args: props
  }), /* @__PURE__ */ React.createElement(SetCartesianGraphicalItem, {
    type: "line",
    id,
    data: props.data,
    xAxisId: props.xAxisId,
    yAxisId: props.yAxisId,
    zAxisId: 0,
    dataKey: props.dataKey,
    hide: props.hide,
    isPanorama
  }), /* @__PURE__ */ React.createElement(LineImpl, _extends$7({}, props, {
    id
  }))));
}
var Line = /* @__PURE__ */ React.memo(LineFn);
Line.displayName = "Line";
var selectXAxisWithScale = (state2, xAxisId, _yAxisId, isPanorama) => selectAxisWithScale(state2, "xAxis", xAxisId, isPanorama);
var selectXAxisTicks = (state2, xAxisId, _yAxisId, isPanorama) => selectTicksOfGraphicalItem(state2, "xAxis", xAxisId, isPanorama);
var selectYAxisWithScale = (state2, _xAxisId, yAxisId, isPanorama) => selectAxisWithScale(state2, "yAxis", yAxisId, isPanorama);
var selectYAxisTicks = (state2, _xAxisId, yAxisId, isPanorama) => selectTicksOfGraphicalItem(state2, "yAxis", yAxisId, isPanorama);
var selectBandSize = createSelector([selectChartLayout, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks) => {
  if (isCategoricalAxis(layout, "xAxis")) {
    return getBandSizeOfAxis(xAxis, xAxisTicks, false);
  }
  return getBandSizeOfAxis(yAxis, yAxisTicks, false);
});
var pickAreaId = (_state, _xAxisId, _yAxisId, _isPanorama, id) => id;
var selectSynchronisedAreaSettings = createSelector([selectUnfilteredCartesianItems, pickAreaId], (graphicalItems, id) => graphicalItems.filter((item) => item.type === "area").find((item) => item.id === id));
var selectGraphicalItemStackedData = (state2, xAxisId, yAxisId, isPanorama, id) => {
  var _stackGroups$stackId;
  var areaSettings = selectSynchronisedAreaSettings(state2, xAxisId, yAxisId, isPanorama, id);
  if (areaSettings == null) {
    return void 0;
  }
  var layout = selectChartLayout(state2);
  var isXAxisCategorical = isCategoricalAxis(layout, "xAxis");
  var stackGroups;
  if (isXAxisCategorical) {
    stackGroups = selectStackGroups(state2, "yAxis", yAxisId, isPanorama);
  } else {
    stackGroups = selectStackGroups(state2, "xAxis", xAxisId, isPanorama);
  }
  if (stackGroups == null) {
    return void 0;
  }
  var {
    stackId
  } = areaSettings;
  var stackSeriesIdentifier = getStackSeriesIdentifier(areaSettings);
  if (stackId == null || stackSeriesIdentifier == null) {
    return void 0;
  }
  var groups = (_stackGroups$stackId = stackGroups[stackId]) === null || _stackGroups$stackId === void 0 ? void 0 : _stackGroups$stackId.stackedData;
  return groups === null || groups === void 0 ? void 0 : groups.find((v) => v.key === stackSeriesIdentifier);
};
var selectArea = createSelector([selectChartLayout, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks, selectGraphicalItemStackedData, selectChartDataWithIndexesIfNotInPanorama, selectBandSize, selectSynchronisedAreaSettings, selectChartBaseValue], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks, stackedData, _ref2, bandSize, areaSettings, chartBaseValue) => {
  var {
    chartData,
    dataStartIndex,
    dataEndIndex
  } = _ref2;
  if (areaSettings == null || layout !== "horizontal" && layout !== "vertical" || xAxis == null || yAxis == null || xAxisTicks == null || yAxisTicks == null || xAxisTicks.length === 0 || yAxisTicks.length === 0 || bandSize == null) {
    return void 0;
  }
  var {
    data: data2
  } = areaSettings;
  var displayedData;
  if (data2 && data2.length > 0) {
    displayedData = data2;
  } else {
    displayedData = chartData === null || chartData === void 0 ? void 0 : chartData.slice(dataStartIndex, dataEndIndex + 1);
  }
  if (displayedData == null) {
    return void 0;
  }
  return computeArea({
    layout,
    xAxis,
    yAxis,
    xAxisTicks,
    yAxisTicks,
    dataStartIndex,
    areaSettings,
    stackedData,
    displayedData,
    chartBaseValue,
    bandSize
  });
});
var _excluded$5 = ["id"], _excluded2$2 = ["activeDot", "animationBegin", "animationDuration", "animationEasing", "connectNulls", "dot", "fill", "fillOpacity", "hide", "isAnimationActive", "legendType", "stroke", "xAxisId", "yAxisId"];
function _extends$6() {
  return _extends$6 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$6.apply(null, arguments);
}
function _objectWithoutProperties$5(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$5(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$5(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function ownKeys$1(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread$1(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys$1(Object(t), true).forEach(function(r3) {
      _defineProperty$1(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty$1(e, r2, t) {
  return (r2 = _toPropertyKey$1(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey$1(t) {
  var i = _toPrimitive$1(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive$1(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function getLegendItemColor(stroke, fill) {
  return stroke && stroke !== "none" ? stroke : fill;
}
var computeLegendPayloadFromAreaData = (props) => {
  var {
    dataKey,
    name,
    stroke,
    fill,
    legendType,
    hide
  } = props;
  return [{
    inactive: hide,
    dataKey,
    type: legendType,
    color: getLegendItemColor(stroke, fill),
    value: getTooltipNameProp(name, dataKey),
    payload: props
  }];
};
function getTooltipEntrySettings(props) {
  var {
    dataKey,
    data: data2,
    stroke,
    strokeWidth,
    fill,
    name,
    hide,
    unit
  } = props;
  return {
    dataDefinedOnItem: data2,
    positions: void 0,
    settings: {
      stroke,
      strokeWidth,
      fill,
      dataKey,
      nameKey: void 0,
      name: getTooltipNameProp(name, dataKey),
      hide,
      type: props.tooltipType,
      color: getLegendItemColor(stroke, fill),
      unit
    }
  };
}
function AreaDotsWrapper(_ref2) {
  var {
    clipPathId,
    points,
    props
  } = _ref2;
  var {
    needClip,
    dot,
    dataKey
  } = props;
  var areaProps = svgPropertiesNoEvents(props);
  return /* @__PURE__ */ React.createElement(Dots, {
    points,
    dot,
    className: "recharts-area-dots",
    dotClassName: "recharts-area-dot",
    dataKey,
    baseProps: areaProps,
    needClip,
    clipPathId
  });
}
function AreaLabelListProvider(_ref2) {
  var {
    showLabels,
    children,
    points
  } = _ref2;
  var labelListEntries = points.map((point) => {
    var _point$x, _point$y;
    var viewBox = {
      x: (_point$x = point.x) !== null && _point$x !== void 0 ? _point$x : 0,
      y: (_point$y = point.y) !== null && _point$y !== void 0 ? _point$y : 0,
      width: 0,
      lowerWidth: 0,
      upperWidth: 0,
      height: 0
    };
    return _objectSpread$1(_objectSpread$1({}, viewBox), {}, {
      value: point.value,
      payload: point.payload,
      parentViewBox: void 0,
      viewBox,
      fill: void 0
    });
  });
  return /* @__PURE__ */ React.createElement(CartesianLabelListContextProvider, {
    value: showLabels ? labelListEntries : void 0
  }, children);
}
function StaticArea(_ref3) {
  var {
    points,
    baseLine,
    needClip,
    clipPathId,
    props
  } = _ref3;
  var {
    layout,
    type,
    stroke,
    connectNulls,
    isRange
  } = props;
  var {
    id
  } = props, propsWithoutId = _objectWithoutProperties$5(props, _excluded$5);
  var allOtherProps = svgPropertiesNoEvents(propsWithoutId);
  var propsWithEvents = svgPropertiesAndEvents(propsWithoutId);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, (points === null || points === void 0 ? void 0 : points.length) > 1 && /* @__PURE__ */ React.createElement(Layer, {
    clipPath: needClip ? "url(#clipPath-".concat(clipPathId, ")") : void 0
  }, /* @__PURE__ */ React.createElement(Curve, _extends$6({}, propsWithEvents, {
    id,
    points,
    connectNulls,
    type,
    baseLine,
    layout,
    stroke: "none",
    className: "recharts-area-area"
  })), stroke !== "none" && /* @__PURE__ */ React.createElement(Curve, _extends$6({}, allOtherProps, {
    className: "recharts-area-curve",
    layout,
    type,
    connectNulls,
    fill: "none",
    points
  })), stroke !== "none" && isRange && /* @__PURE__ */ React.createElement(Curve, _extends$6({}, allOtherProps, {
    className: "recharts-area-curve",
    layout,
    type,
    connectNulls,
    fill: "none",
    points: baseLine
  }))), /* @__PURE__ */ React.createElement(AreaDotsWrapper, {
    points,
    props: propsWithoutId,
    clipPathId
  }));
}
function VerticalRect(_ref4) {
  var {
    alpha: alpha2,
    baseLine,
    points,
    strokeWidth
  } = _ref4;
  var startY = points[0].y;
  var endY = points[points.length - 1].y;
  if (!isWellBehavedNumber(startY) || !isWellBehavedNumber(endY)) {
    return null;
  }
  var height = alpha2 * Math.abs(startY - endY);
  var maxX = Math.max(...points.map((entry2) => entry2.x || 0));
  if (isNumber(baseLine)) {
    maxX = Math.max(baseLine, maxX);
  } else if (baseLine && Array.isArray(baseLine) && baseLine.length) {
    maxX = Math.max(...baseLine.map((entry2) => entry2.x || 0), maxX);
  }
  if (isNumber(maxX)) {
    return /* @__PURE__ */ React.createElement("rect", {
      x: 0,
      y: startY < endY ? startY : startY - height,
      width: maxX + (strokeWidth ? parseInt("".concat(strokeWidth), 10) : 1),
      height: Math.floor(height)
    });
  }
  return null;
}
function HorizontalRect(_ref5) {
  var {
    alpha: alpha2,
    baseLine,
    points,
    strokeWidth
  } = _ref5;
  var startX = points[0].x;
  var endX = points[points.length - 1].x;
  if (!isWellBehavedNumber(startX) || !isWellBehavedNumber(endX)) {
    return null;
  }
  var width = alpha2 * Math.abs(startX - endX);
  var maxY = Math.max(...points.map((entry2) => entry2.y || 0));
  if (isNumber(baseLine)) {
    maxY = Math.max(baseLine, maxY);
  } else if (baseLine && Array.isArray(baseLine) && baseLine.length) {
    maxY = Math.max(...baseLine.map((entry2) => entry2.y || 0), maxY);
  }
  if (isNumber(maxY)) {
    return /* @__PURE__ */ React.createElement("rect", {
      x: startX < endX ? startX : startX - width,
      y: 0,
      width,
      height: Math.floor(maxY + (strokeWidth ? parseInt("".concat(strokeWidth), 10) : 1))
    });
  }
  return null;
}
function ClipRect(_ref6) {
  var {
    alpha: alpha2,
    layout,
    points,
    baseLine,
    strokeWidth
  } = _ref6;
  if (layout === "vertical") {
    return /* @__PURE__ */ React.createElement(VerticalRect, {
      alpha: alpha2,
      points,
      baseLine,
      strokeWidth
    });
  }
  return /* @__PURE__ */ React.createElement(HorizontalRect, {
    alpha: alpha2,
    points,
    baseLine,
    strokeWidth
  });
}
function AreaWithAnimation(_ref7) {
  var {
    needClip,
    clipPathId,
    props,
    previousPointsRef,
    previousBaselineRef
  } = _ref7;
  var {
    points,
    baseLine,
    isAnimationActive,
    animationBegin,
    animationDuration,
    animationEasing,
    onAnimationStart,
    onAnimationEnd
  } = props;
  var animationId = useAnimationId(props, "recharts-area-");
  var [isAnimating, setIsAnimating] = useState(false);
  var showLabels = !isAnimating;
  var handleAnimationEnd = useCallback(() => {
    if (typeof onAnimationEnd === "function") {
      onAnimationEnd();
    }
    setIsAnimating(false);
  }, [onAnimationEnd]);
  var handleAnimationStart = useCallback(() => {
    if (typeof onAnimationStart === "function") {
      onAnimationStart();
    }
    setIsAnimating(true);
  }, [onAnimationStart]);
  var prevPoints = previousPointsRef.current;
  var prevBaseLine = previousBaselineRef.current;
  return /* @__PURE__ */ React.createElement(AreaLabelListProvider, {
    showLabels,
    points
  }, props.children, /* @__PURE__ */ React.createElement(JavascriptAnimate, {
    animationId,
    begin: animationBegin,
    duration: animationDuration,
    isActive: isAnimationActive,
    easing: animationEasing,
    onAnimationEnd: handleAnimationEnd,
    onAnimationStart: handleAnimationStart,
    key: animationId
  }, (t) => {
    if (prevPoints) {
      var prevPointsDiffFactor = prevPoints.length / points.length;
      var stepPoints = (
        /*
         * Here it is important that at the very end of the animation, on the last frame,
         * we render the original points without any interpolation.
         * This is needed because the code above is checking for reference equality to decide if the animation should run
         * and if we create a new array instance (even if the numbers were the same)
         * then we would break animations.
         */
        t === 1 ? points : points.map((entry2, index) => {
          var prevPointIndex = Math.floor(index * prevPointsDiffFactor);
          if (prevPoints[prevPointIndex]) {
            var prev = prevPoints[prevPointIndex];
            return _objectSpread$1(_objectSpread$1({}, entry2), {}, {
              x: interpolate(prev.x, entry2.x, t),
              y: interpolate(prev.y, entry2.y, t)
            });
          }
          return entry2;
        })
      );
      var stepBaseLine;
      if (isNumber(baseLine)) {
        stepBaseLine = interpolate(prevBaseLine, baseLine, t);
      } else if (isNullish(baseLine) || isNan(baseLine)) {
        stepBaseLine = interpolate(prevBaseLine, 0, t);
      } else {
        stepBaseLine = baseLine.map((entry2, index) => {
          var prevPointIndex = Math.floor(index * prevPointsDiffFactor);
          if (Array.isArray(prevBaseLine) && prevBaseLine[prevPointIndex]) {
            var prev = prevBaseLine[prevPointIndex];
            return _objectSpread$1(_objectSpread$1({}, entry2), {}, {
              x: interpolate(prev.x, entry2.x, t),
              y: interpolate(prev.y, entry2.y, t)
            });
          }
          return entry2;
        });
      }
      if (t > 0) {
        previousPointsRef.current = stepPoints;
        previousBaselineRef.current = stepBaseLine;
      }
      return /* @__PURE__ */ React.createElement(StaticArea, {
        points: stepPoints,
        baseLine: stepBaseLine,
        needClip,
        clipPathId,
        props
      });
    }
    if (t > 0) {
      previousPointsRef.current = points;
      previousBaselineRef.current = baseLine;
    }
    return /* @__PURE__ */ React.createElement(Layer, null, isAnimationActive && /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement("clipPath", {
      id: "animationClipPath-".concat(clipPathId)
    }, /* @__PURE__ */ React.createElement(ClipRect, {
      alpha: t,
      points,
      baseLine,
      layout: props.layout,
      strokeWidth: props.strokeWidth
    }))), /* @__PURE__ */ React.createElement(Layer, {
      clipPath: "url(#animationClipPath-".concat(clipPathId, ")")
    }, /* @__PURE__ */ React.createElement(StaticArea, {
      points,
      baseLine,
      needClip,
      clipPathId,
      props
    })));
  }), /* @__PURE__ */ React.createElement(LabelListFromLabelProp, {
    label: props.label
  }));
}
function RenderArea(_ref8) {
  var {
    needClip,
    clipPathId,
    props
  } = _ref8;
  var previousPointsRef = useRef(null);
  var previousBaselineRef = useRef();
  return /* @__PURE__ */ React.createElement(AreaWithAnimation, {
    needClip,
    clipPathId,
    props,
    previousPointsRef,
    previousBaselineRef
  });
}
class AreaWithState extends PureComponent {
  render() {
    var {
      hide,
      dot,
      points,
      className,
      top,
      left,
      needClip,
      xAxisId,
      yAxisId,
      width,
      height,
      id,
      baseLine,
      zIndex
    } = this.props;
    if (hide) {
      return null;
    }
    var layerClass = clsx("recharts-area", className);
    var clipPathId = id;
    var {
      r: r2,
      strokeWidth
    } = getRadiusAndStrokeWidthFromDot(dot);
    var clipDot = isClipDot(dot);
    var dotSize = r2 * 2 + strokeWidth;
    return /* @__PURE__ */ React.createElement(ZIndexLayer, {
      zIndex
    }, /* @__PURE__ */ React.createElement(Layer, {
      className: layerClass
    }, needClip && /* @__PURE__ */ React.createElement("defs", null, /* @__PURE__ */ React.createElement(GraphicalItemClipPath, {
      clipPathId,
      xAxisId,
      yAxisId
    }), !clipDot && /* @__PURE__ */ React.createElement("clipPath", {
      id: "clipPath-dots-".concat(clipPathId)
    }, /* @__PURE__ */ React.createElement("rect", {
      x: left - dotSize / 2,
      y: top - dotSize / 2,
      width: width + dotSize,
      height: height + dotSize
    }))), /* @__PURE__ */ React.createElement(RenderArea, {
      needClip,
      clipPathId,
      props: this.props
    })), /* @__PURE__ */ React.createElement(ActivePoints, {
      points,
      mainColor: getLegendItemColor(this.props.stroke, this.props.fill),
      itemDataKey: this.props.dataKey,
      activeDot: this.props.activeDot
    }), this.props.isRange && Array.isArray(baseLine) && /* @__PURE__ */ React.createElement(ActivePoints, {
      points: baseLine,
      mainColor: getLegendItemColor(this.props.stroke, this.props.fill),
      itemDataKey: this.props.dataKey,
      activeDot: this.props.activeDot
    }));
  }
}
var defaultAreaProps = {
  activeDot: true,
  animationBegin: 0,
  animationDuration: 1500,
  animationEasing: "ease",
  connectNulls: false,
  dot: false,
  fill: "#3182bd",
  fillOpacity: 0.6,
  hide: false,
  isAnimationActive: !Global.isSsr,
  legendType: "line",
  stroke: "#3182bd",
  xAxisId: 0,
  yAxisId: 0,
  zIndex: DefaultZIndexes.area
};
function AreaImpl(props) {
  var _useAppSelector;
  var _resolveDefaultProps = resolveDefaultProps(props, defaultAreaProps), {
    activeDot,
    animationBegin,
    animationDuration,
    animationEasing,
    connectNulls,
    dot,
    fill,
    fillOpacity,
    hide,
    isAnimationActive,
    legendType,
    stroke,
    xAxisId,
    yAxisId
  } = _resolveDefaultProps, everythingElse = _objectWithoutProperties$5(_resolveDefaultProps, _excluded2$2);
  var layout = useChartLayout();
  var chartName = useChartName();
  var {
    needClip
  } = useNeedsClip(xAxisId, yAxisId);
  var isPanorama = useIsPanorama();
  var {
    points,
    isRange,
    baseLine
  } = (_useAppSelector = useAppSelector((state2) => selectArea(state2, xAxisId, yAxisId, isPanorama, props.id))) !== null && _useAppSelector !== void 0 ? _useAppSelector : {};
  var plotArea = usePlotArea();
  if (layout !== "horizontal" && layout !== "vertical" || plotArea == null) {
    return null;
  }
  if (chartName !== "AreaChart" && chartName !== "ComposedChart") {
    return null;
  }
  var {
    height,
    width,
    x: left,
    y: top
  } = plotArea;
  if (!points || !points.length) {
    return null;
  }
  return /* @__PURE__ */ React.createElement(AreaWithState, _extends$6({}, everythingElse, {
    activeDot,
    animationBegin,
    animationDuration,
    animationEasing,
    baseLine,
    connectNulls,
    dot,
    fill,
    fillOpacity,
    height,
    hide,
    layout,
    isAnimationActive,
    isRange,
    legendType,
    needClip,
    points,
    stroke,
    width,
    left,
    top,
    xAxisId,
    yAxisId
  }));
}
var getBaseValue = (layout, chartBaseValue, itemBaseValue, xAxis, yAxis) => {
  var baseValue = itemBaseValue !== null && itemBaseValue !== void 0 ? itemBaseValue : chartBaseValue;
  if (isNumber(baseValue)) {
    return baseValue;
  }
  var numericAxis = layout === "horizontal" ? yAxis : xAxis;
  var domain = numericAxis.scale.domain();
  if (numericAxis.type === "number") {
    var domainMax = Math.max(domain[0], domain[1]);
    var domainMin = Math.min(domain[0], domain[1]);
    if (baseValue === "dataMin") {
      return domainMin;
    }
    if (baseValue === "dataMax") {
      return domainMax;
    }
    return domainMax < 0 ? domainMax : Math.max(Math.min(domain[0], domain[1]), 0);
  }
  if (baseValue === "dataMin") {
    return domain[0];
  }
  if (baseValue === "dataMax") {
    return domain[1];
  }
  return domain[0];
};
function computeArea(_ref9) {
  var {
    areaSettings: {
      connectNulls,
      baseValue: itemBaseValue,
      dataKey
    },
    stackedData,
    layout,
    chartBaseValue,
    xAxis,
    yAxis,
    displayedData,
    dataStartIndex,
    xAxisTicks,
    yAxisTicks,
    bandSize
  } = _ref9;
  var hasStack = stackedData && stackedData.length;
  var baseValue = getBaseValue(layout, chartBaseValue, itemBaseValue, xAxis, yAxis);
  var isHorizontalLayout = layout === "horizontal";
  var isRange = false;
  var points = displayedData.map((entry2, index) => {
    var value;
    if (hasStack) {
      value = stackedData[dataStartIndex + index];
    } else {
      value = getValueByDataKey(entry2, dataKey);
      if (!Array.isArray(value)) {
        value = [baseValue, value];
      } else {
        isRange = true;
      }
    }
    var isBreakPoint = value[1] == null || hasStack && !connectNulls && getValueByDataKey(entry2, dataKey) == null;
    if (isHorizontalLayout) {
      return {
        x: getCateCoordinateOfLine({
          axis: xAxis,
          ticks: xAxisTicks,
          bandSize,
          entry: entry2,
          index
        }),
        y: isBreakPoint ? null : yAxis.scale(value[1]),
        value,
        payload: entry2
      };
    }
    return {
      x: isBreakPoint ? null : xAxis.scale(value[1]),
      y: getCateCoordinateOfLine({
        axis: yAxis,
        ticks: yAxisTicks,
        bandSize,
        entry: entry2,
        index
      }),
      value,
      payload: entry2
    };
  });
  var baseLine;
  if (hasStack || isRange) {
    baseLine = points.map((entry2) => {
      var x = Array.isArray(entry2.value) ? entry2.value[0] : null;
      if (isHorizontalLayout) {
        return {
          x: entry2.x,
          y: x != null && entry2.y != null ? yAxis.scale(x) : null,
          payload: entry2.payload
        };
      }
      return {
        x: x != null ? xAxis.scale(x) : null,
        y: entry2.y,
        payload: entry2.payload
      };
    });
  } else {
    baseLine = isHorizontalLayout ? yAxis.scale(baseValue) : xAxis.scale(baseValue);
  }
  return {
    points,
    baseLine,
    isRange
  };
}
function AreaFn(outsideProps) {
  var props = resolveDefaultProps(outsideProps, defaultAreaProps);
  var isPanorama = useIsPanorama();
  return /* @__PURE__ */ React.createElement(RegisterGraphicalItemId, {
    id: props.id,
    type: "area"
  }, (id) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SetLegendPayload, {
    legendPayload: computeLegendPayloadFromAreaData(props)
  }), /* @__PURE__ */ React.createElement(SetTooltipEntrySettings, {
    fn: getTooltipEntrySettings,
    args: props
  }), /* @__PURE__ */ React.createElement(SetCartesianGraphicalItem, {
    type: "area",
    id,
    data: props.data,
    dataKey: props.dataKey,
    xAxisId: props.xAxisId,
    yAxisId: props.yAxisId,
    zAxisId: 0,
    stackId: getNormalizedStackId(props.stackId),
    hide: props.hide,
    barSize: void 0,
    baseValue: props.baseValue,
    isPanorama,
    connectNulls: props.connectNulls
  }), /* @__PURE__ */ React.createElement(AreaImpl, _extends$6({}, props, {
    id
  }))));
}
var Area = /* @__PURE__ */ React.memo(AreaFn);
Area.displayName = "Area";
var _excluded$4 = ["dangerouslySetInnerHTML", "ticks"], _excluded2$1 = ["id"], _excluded3$1 = ["domain"], _excluded4$1 = ["domain"];
function _extends$5() {
  return _extends$5 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$5.apply(null, arguments);
}
function _objectWithoutProperties$4(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$4(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$4(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function SetXAxisSettings(settings) {
  var dispatch = useAppDispatch();
  useLayoutEffect(() => {
    dispatch(addXAxis(settings));
    return () => {
      dispatch(removeXAxis(settings));
    };
  }, [settings, dispatch]);
  return null;
}
var XAxisImpl = (props) => {
  var {
    xAxisId,
    className
  } = props;
  var viewBox = useAppSelector(selectAxisViewBox);
  var isPanorama = useIsPanorama();
  var axisType = "xAxis";
  var scale = useAppSelector((state2) => selectAxisScale(state2, axisType, xAxisId, isPanorama));
  var cartesianTickItems = useAppSelector((state2) => selectTicksOfAxis(state2, axisType, xAxisId, isPanorama));
  var axisSize = useAppSelector((state2) => selectXAxisSize(state2, xAxisId));
  var position = useAppSelector((state2) => selectXAxisPosition(state2, xAxisId));
  var synchronizedSettings = useAppSelector((state2) => selectXAxisSettingsNoDefaults(state2, xAxisId));
  if (axisSize == null || position == null || synchronizedSettings == null) {
    return null;
  }
  var {
    dangerouslySetInnerHTML,
    ticks
  } = props, allOtherProps = _objectWithoutProperties$4(props, _excluded$4);
  var {
    id
  } = synchronizedSettings, restSynchronizedSettings = _objectWithoutProperties$4(synchronizedSettings, _excluded2$1);
  return /* @__PURE__ */ React.createElement(CartesianAxis, _extends$5({}, allOtherProps, restSynchronizedSettings, {
    scale,
    x: position.x,
    y: position.y,
    width: axisSize.width,
    height: axisSize.height,
    className: clsx("recharts-".concat(axisType, " ").concat(axisType), className),
    viewBox,
    ticks: cartesianTickItems,
    axisType
  }));
};
var xAxisDefaultProps = {
  allowDataOverflow: implicitXAxis.allowDataOverflow,
  allowDecimals: implicitXAxis.allowDecimals,
  allowDuplicatedCategory: implicitXAxis.allowDuplicatedCategory,
  height: implicitXAxis.height,
  hide: false,
  mirror: implicitXAxis.mirror,
  orientation: implicitXAxis.orientation,
  padding: implicitXAxis.padding,
  reversed: implicitXAxis.reversed,
  scale: implicitXAxis.scale,
  tickCount: implicitXAxis.tickCount,
  type: implicitXAxis.type,
  xAxisId: 0
};
var XAxisSettingsDispatcher = (outsideProps) => {
  var _props$interval, _props$includeHidden, _props$angle, _props$minTickGap, _props$tick;
  var props = resolveDefaultProps(outsideProps, xAxisDefaultProps);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SetXAxisSettings, {
    interval: (_props$interval = props.interval) !== null && _props$interval !== void 0 ? _props$interval : "preserveEnd",
    id: props.xAxisId,
    scale: props.scale,
    type: props.type,
    padding: props.padding,
    allowDataOverflow: props.allowDataOverflow,
    domain: props.domain,
    dataKey: props.dataKey,
    allowDuplicatedCategory: props.allowDuplicatedCategory,
    allowDecimals: props.allowDecimals,
    tickCount: props.tickCount,
    includeHidden: (_props$includeHidden = props.includeHidden) !== null && _props$includeHidden !== void 0 ? _props$includeHidden : false,
    reversed: props.reversed,
    ticks: props.ticks,
    height: props.height,
    orientation: props.orientation,
    mirror: props.mirror,
    hide: props.hide,
    unit: props.unit,
    name: props.name,
    angle: (_props$angle = props.angle) !== null && _props$angle !== void 0 ? _props$angle : 0,
    minTickGap: (_props$minTickGap = props.minTickGap) !== null && _props$minTickGap !== void 0 ? _props$minTickGap : 5,
    tick: (_props$tick = props.tick) !== null && _props$tick !== void 0 ? _props$tick : true,
    tickFormatter: props.tickFormatter
  }), /* @__PURE__ */ React.createElement(XAxisImpl, props));
};
var XAxisMemoComparator = (prevProps, nextProps) => {
  var {
    domain: prevDomain
  } = prevProps, prevRest = _objectWithoutProperties$4(prevProps, _excluded3$1);
  var {
    domain: nextDomain
  } = nextProps, nextRest = _objectWithoutProperties$4(nextProps, _excluded4$1);
  if (!shallowEqual(prevRest, nextRest)) {
    return false;
  }
  if (Array.isArray(prevDomain) && prevDomain.length === 2 && Array.isArray(nextDomain) && nextDomain.length === 2) {
    return prevDomain[0] === nextDomain[0] && prevDomain[1] === nextDomain[1];
  }
  return shallowEqual({
    domain: prevDomain
  }, {
    domain: nextDomain
  });
};
var XAxis = /* @__PURE__ */ React.memo(XAxisSettingsDispatcher, XAxisMemoComparator);
XAxis.displayName = "XAxis";
var _excluded$3 = ["dangerouslySetInnerHTML", "ticks"], _excluded2 = ["id"], _excluded3 = ["domain"], _excluded4 = ["domain"];
function _extends$4() {
  return _extends$4 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$4.apply(null, arguments);
}
function _objectWithoutProperties$3(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$3(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$3(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function SetYAxisSettings(settings) {
  var dispatch = useAppDispatch();
  useLayoutEffect(() => {
    dispatch(addYAxis(settings));
    return () => {
      dispatch(removeYAxis(settings));
    };
  }, [settings, dispatch]);
  return null;
}
var YAxisImpl = (props) => {
  var {
    yAxisId,
    className,
    width,
    label
  } = props;
  var cartesianAxisRef = useRef(null);
  var labelRef = useRef(null);
  var viewBox = useAppSelector(selectAxisViewBox);
  var isPanorama = useIsPanorama();
  var dispatch = useAppDispatch();
  var axisType = "yAxis";
  var scale = useAppSelector((state2) => selectAxisScale(state2, axisType, yAxisId, isPanorama));
  var axisSize = useAppSelector((state2) => selectYAxisSize(state2, yAxisId));
  var position = useAppSelector((state2) => selectYAxisPosition(state2, yAxisId));
  var cartesianTickItems = useAppSelector((state2) => selectTicksOfAxis(state2, axisType, yAxisId, isPanorama));
  var synchronizedSettings = useAppSelector((state2) => selectYAxisSettingsNoDefaults(state2, yAxisId));
  useLayoutEffect(() => {
    if (width !== "auto" || !axisSize || isLabelContentAFunction(label) || /* @__PURE__ */ isValidElement(label) || synchronizedSettings == null) {
      return;
    }
    var axisComponent = cartesianAxisRef.current;
    if (!axisComponent) {
      return;
    }
    var updatedYAxisWidth = axisComponent.getCalculatedWidth();
    if (Math.round(axisSize.width) !== Math.round(updatedYAxisWidth)) {
      dispatch(updateYAxisWidth({
        id: yAxisId,
        width: updatedYAxisWidth
      }));
    }
  }, [
    // The dependency on cartesianAxisRef.current is not needed because useLayoutEffect will run after every render.
    // The ref will be populated by then.
    // To re-run this effect when ticks change, we can depend on the ticks array from the store.
    cartesianTickItems,
    axisSize,
    dispatch,
    label,
    yAxisId,
    width,
    synchronizedSettings
  ]);
  if (axisSize == null || position == null || synchronizedSettings == null) {
    return null;
  }
  var {
    dangerouslySetInnerHTML,
    ticks
  } = props, allOtherProps = _objectWithoutProperties$3(props, _excluded$3);
  var {
    id
  } = synchronizedSettings, restSynchronizedSettings = _objectWithoutProperties$3(synchronizedSettings, _excluded2);
  return /* @__PURE__ */ React.createElement(CartesianAxis, _extends$4({}, allOtherProps, restSynchronizedSettings, {
    ref: cartesianAxisRef,
    labelRef,
    scale,
    x: position.x,
    y: position.y,
    tickTextProps: width === "auto" ? {
      width: void 0
    } : {
      width
    },
    width: axisSize.width,
    height: axisSize.height,
    className: clsx("recharts-".concat(axisType, " ").concat(axisType), className),
    viewBox,
    ticks: cartesianTickItems,
    axisType
  }));
};
var yAxisDefaultProps = {
  allowDataOverflow: implicitYAxis.allowDataOverflow,
  allowDecimals: implicitYAxis.allowDecimals,
  allowDuplicatedCategory: implicitYAxis.allowDuplicatedCategory,
  hide: false,
  mirror: implicitYAxis.mirror,
  orientation: implicitYAxis.orientation,
  padding: implicitYAxis.padding,
  reversed: implicitYAxis.reversed,
  scale: implicitYAxis.scale,
  tickCount: implicitYAxis.tickCount,
  type: implicitYAxis.type,
  width: implicitYAxis.width,
  yAxisId: 0
};
var YAxisSettingsDispatcher = (outsideProps) => {
  var _props$interval, _props$includeHidden, _props$angle, _props$minTickGap, _props$tick;
  var props = resolveDefaultProps(outsideProps, yAxisDefaultProps);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(SetYAxisSettings, {
    interval: (_props$interval = props.interval) !== null && _props$interval !== void 0 ? _props$interval : "preserveEnd",
    id: props.yAxisId,
    scale: props.scale,
    type: props.type,
    domain: props.domain,
    allowDataOverflow: props.allowDataOverflow,
    dataKey: props.dataKey,
    allowDuplicatedCategory: props.allowDuplicatedCategory,
    allowDecimals: props.allowDecimals,
    tickCount: props.tickCount,
    padding: props.padding,
    includeHidden: (_props$includeHidden = props.includeHidden) !== null && _props$includeHidden !== void 0 ? _props$includeHidden : false,
    reversed: props.reversed,
    ticks: props.ticks,
    width: props.width,
    orientation: props.orientation,
    mirror: props.mirror,
    hide: props.hide,
    unit: props.unit,
    name: props.name,
    angle: (_props$angle = props.angle) !== null && _props$angle !== void 0 ? _props$angle : 0,
    minTickGap: (_props$minTickGap = props.minTickGap) !== null && _props$minTickGap !== void 0 ? _props$minTickGap : 5,
    tick: (_props$tick = props.tick) !== null && _props$tick !== void 0 ? _props$tick : true,
    tickFormatter: props.tickFormatter
  }), /* @__PURE__ */ React.createElement(YAxisImpl, props));
};
var YAxisMemoComparator = (prevProps, nextProps) => {
  var {
    domain: prevDomain
  } = prevProps, prevRest = _objectWithoutProperties$3(prevProps, _excluded3);
  var {
    domain: nextDomain
  } = nextProps, nextRest = _objectWithoutProperties$3(nextProps, _excluded4);
  if (!shallowEqual(prevRest, nextRest)) {
    return false;
  }
  if (Array.isArray(prevDomain) && prevDomain.length === 2 && Array.isArray(nextDomain) && nextDomain.length === 2) {
    return prevDomain[0] === nextDomain[0] && prevDomain[1] === nextDomain[1];
  }
  return shallowEqual({
    domain: prevDomain
  }, {
    domain: nextDomain
  });
};
var YAxis = /* @__PURE__ */ React.memo(YAxisSettingsDispatcher, YAxisMemoComparator);
YAxis.displayName = "YAxis";
var pickChartPointer = (_state, chartPointer) => chartPointer;
var selectActivePropsFromChartPointer = createSelector([pickChartPointer, selectChartLayout, selectPolarViewBox, selectTooltipAxisType, selectTooltipAxisRangeWithReverse, selectTooltipAxisTicks, selectOrderedTooltipTicks, selectChartOffsetInternal], combineActiveProps);
var getChartPointer = (event) => {
  var rect = event.currentTarget.getBoundingClientRect();
  var scaleX = rect.width / event.currentTarget.offsetWidth;
  var scaleY = rect.height / event.currentTarget.offsetHeight;
  return {
    /*
     * Here it's important to use:
     * - event.clientX and event.clientY to get the mouse position relative to the viewport, including scroll.
     * - pageX and pageY are not used because they are relative to the whole document, and ignore scroll.
     * - rect.left and rect.top are used to get the position of the chart relative to the viewport.
     * - offsetX and offsetY are not used because they are relative to the offset parent
     *  which may or may not be the same as the clientX and clientY, depending on the position of the chart in the DOM
     *  and surrounding element styles. CSS position: relative, absolute, fixed, will change the offset parent.
     * - scaleX and scaleY are necessary for when the chart element is scaled using CSS `transform: scale(N)`.
     */
    chartX: Math.round((event.clientX - rect.left) / scaleX),
    chartY: Math.round((event.clientY - rect.top) / scaleY)
  };
};
var mouseClickAction = createAction("mouseClick");
var mouseClickMiddleware = createListenerMiddleware();
mouseClickMiddleware.startListening({
  actionCreator: mouseClickAction,
  effect: (action2, listenerApi) => {
    var mousePointer = action2.payload;
    var activeProps = selectActivePropsFromChartPointer(listenerApi.getState(), getChartPointer(mousePointer));
    if ((activeProps === null || activeProps === void 0 ? void 0 : activeProps.activeIndex) != null) {
      listenerApi.dispatch(setMouseClickAxisIndex({
        activeIndex: activeProps.activeIndex,
        activeDataKey: void 0,
        activeCoordinate: activeProps.activeCoordinate
      }));
    }
  }
});
var mouseMoveAction = createAction("mouseMove");
var mouseMoveMiddleware = createListenerMiddleware();
mouseMoveMiddleware.startListening({
  actionCreator: mouseMoveAction,
  effect: (action2, listenerApi) => {
    var mousePointer = action2.payload;
    var state2 = listenerApi.getState();
    var tooltipEventType = selectTooltipEventType$1(state2, state2.tooltip.settings.shared);
    var activeProps = selectActivePropsFromChartPointer(state2, getChartPointer(mousePointer));
    if (tooltipEventType === "axis") {
      if ((activeProps === null || activeProps === void 0 ? void 0 : activeProps.activeIndex) != null) {
        listenerApi.dispatch(setMouseOverAxisIndex({
          activeIndex: activeProps.activeIndex,
          activeDataKey: void 0,
          activeCoordinate: activeProps.activeCoordinate
        }));
      } else {
        listenerApi.dispatch(mouseLeaveChart());
      }
    }
  }
});
var initialState = {
  accessibilityLayer: true,
  barCategoryGap: "10%",
  barGap: 4,
  barSize: void 0,
  className: void 0,
  maxBarSize: void 0,
  stackOffset: "none",
  syncId: void 0,
  syncMethod: "index",
  baseValue: void 0
};
var rootPropsSlice = createSlice({
  name: "rootProps",
  initialState,
  reducers: {
    updateOptions: (state2, action2) => {
      var _action$payload$barGa;
      state2.accessibilityLayer = action2.payload.accessibilityLayer;
      state2.barCategoryGap = action2.payload.barCategoryGap;
      state2.barGap = (_action$payload$barGa = action2.payload.barGap) !== null && _action$payload$barGa !== void 0 ? _action$payload$barGa : initialState.barGap;
      state2.barSize = action2.payload.barSize;
      state2.maxBarSize = action2.payload.maxBarSize;
      state2.stackOffset = action2.payload.stackOffset;
      state2.syncId = action2.payload.syncId;
      state2.syncMethod = action2.payload.syncMethod;
      state2.className = action2.payload.className;
      state2.baseValue = action2.payload.baseValue;
    }
  }
});
var rootPropsReducer = rootPropsSlice.reducer;
var {
  updateOptions
} = rootPropsSlice.actions;
var polarOptionsSlice = createSlice({
  name: "polarOptions",
  initialState: null,
  reducers: {
    updatePolarOptions: (_state, action2) => {
      return action2.payload;
    }
  }
});
var {
  updatePolarOptions
} = polarOptionsSlice.actions;
var polarOptionsReducer = polarOptionsSlice.reducer;
var keyDownAction = createAction("keyDown");
var focusAction = createAction("focus");
var keyboardEventsMiddleware = createListenerMiddleware();
keyboardEventsMiddleware.startListening({
  actionCreator: keyDownAction,
  effect: (action2, listenerApi) => {
    var state2 = listenerApi.getState();
    var accessibilityLayerIsActive = state2.rootProps.accessibilityLayer !== false;
    if (!accessibilityLayerIsActive) {
      return;
    }
    var {
      keyboardInteraction
    } = state2.tooltip;
    var key = action2.payload;
    if (key !== "ArrowRight" && key !== "ArrowLeft" && key !== "Enter") {
      return;
    }
    var currentIndex = Number(combineActiveTooltipIndex(keyboardInteraction, selectTooltipDisplayedData(state2)));
    var tooltipTicks = selectTooltipAxisTicks(state2);
    if (key === "Enter") {
      var _coordinate = selectCoordinateForDefaultIndex(state2, "axis", "hover", String(keyboardInteraction.index));
      listenerApi.dispatch(setKeyboardInteraction({
        active: !keyboardInteraction.active,
        activeIndex: keyboardInteraction.index,
        activeDataKey: keyboardInteraction.dataKey,
        activeCoordinate: _coordinate
      }));
      return;
    }
    var direction = selectChartDirection(state2);
    var directionMultiplier = direction === "left-to-right" ? 1 : -1;
    var movement = key === "ArrowRight" ? 1 : -1;
    var nextIndex = currentIndex + movement * directionMultiplier;
    if (tooltipTicks == null || nextIndex >= tooltipTicks.length || nextIndex < 0) {
      return;
    }
    var coordinate = selectCoordinateForDefaultIndex(state2, "axis", "hover", String(nextIndex));
    listenerApi.dispatch(setKeyboardInteraction({
      active: true,
      activeIndex: nextIndex.toString(),
      activeDataKey: void 0,
      activeCoordinate: coordinate
    }));
  }
});
keyboardEventsMiddleware.startListening({
  actionCreator: focusAction,
  effect: (_action, listenerApi) => {
    var state2 = listenerApi.getState();
    var accessibilityLayerIsActive = state2.rootProps.accessibilityLayer !== false;
    if (!accessibilityLayerIsActive) {
      return;
    }
    var {
      keyboardInteraction
    } = state2.tooltip;
    if (keyboardInteraction.active) {
      return;
    }
    if (keyboardInteraction.index == null) {
      var nextIndex = "0";
      var coordinate = selectCoordinateForDefaultIndex(state2, "axis", "hover", String(nextIndex));
      listenerApi.dispatch(setKeyboardInteraction({
        activeDataKey: void 0,
        active: true,
        activeIndex: nextIndex,
        activeCoordinate: coordinate
      }));
    }
  }
});
var externalEventAction = createAction("externalEvent");
var externalEventsMiddleware = createListenerMiddleware();
externalEventsMiddleware.startListening({
  actionCreator: externalEventAction,
  effect: (action2, listenerApi) => {
    if (action2.payload.handler == null) {
      return;
    }
    var state2 = listenerApi.getState();
    var nextState = {
      activeCoordinate: selectActiveTooltipCoordinate(state2),
      activeDataKey: selectActiveTooltipDataKey(state2),
      activeIndex: selectActiveTooltipIndex(state2),
      activeLabel: selectActiveLabel$1(state2),
      activeTooltipIndex: selectActiveTooltipIndex(state2),
      isTooltipActive: selectIsTooltipActive$1(state2)
    };
    action2.payload.handler(nextState, action2.payload.reactEvent);
  }
});
var selectAllTooltipPayloadConfiguration = createSelector([selectTooltipState], (tooltipState) => tooltipState.tooltipItemPayloads);
var selectTooltipCoordinate = createSelector([selectAllTooltipPayloadConfiguration, selectTooltipPayloadSearcher, (_state, tooltipIndex, _dataKey) => tooltipIndex, (_state, _tooltipIndex, dataKey) => dataKey], (allTooltipConfigurations, tooltipPayloadSearcher, tooltipIndex, dataKey) => {
  var mostRelevantTooltipConfiguration = allTooltipConfigurations.find((tooltipConfiguration) => {
    return tooltipConfiguration.settings.dataKey === dataKey;
  });
  if (mostRelevantTooltipConfiguration == null) {
    return void 0;
  }
  var {
    positions
  } = mostRelevantTooltipConfiguration;
  if (positions == null) {
    return void 0;
  }
  var maybePosition = tooltipPayloadSearcher(positions, tooltipIndex);
  return maybePosition;
});
var touchEventAction = createAction("touchMove");
var touchEventMiddleware = createListenerMiddleware();
touchEventMiddleware.startListening({
  actionCreator: touchEventAction,
  effect: (action2, listenerApi) => {
    var touchEvent = action2.payload;
    if (touchEvent.touches == null || touchEvent.touches.length === 0) {
      return;
    }
    var state2 = listenerApi.getState();
    var tooltipEventType = selectTooltipEventType$1(state2, state2.tooltip.settings.shared);
    if (tooltipEventType === "axis") {
      var activeProps = selectActivePropsFromChartPointer(state2, getChartPointer({
        clientX: touchEvent.touches[0].clientX,
        clientY: touchEvent.touches[0].clientY,
        currentTarget: touchEvent.currentTarget
      }));
      if ((activeProps === null || activeProps === void 0 ? void 0 : activeProps.activeIndex) != null) {
        listenerApi.dispatch(setMouseOverAxisIndex({
          activeIndex: activeProps.activeIndex,
          activeDataKey: void 0,
          activeCoordinate: activeProps.activeCoordinate
        }));
      }
    } else if (tooltipEventType === "item") {
      var _target$getAttribute;
      var touch = touchEvent.touches[0];
      if (document.elementFromPoint == null) {
        return;
      }
      var target = document.elementFromPoint(touch.clientX, touch.clientY);
      if (!target || !target.getAttribute) {
        return;
      }
      var itemIndex = target.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME);
      var dataKey = (_target$getAttribute = target.getAttribute(DATA_ITEM_DATAKEY_ATTRIBUTE_NAME)) !== null && _target$getAttribute !== void 0 ? _target$getAttribute : void 0;
      var coordinate = selectTooltipCoordinate(listenerApi.getState(), itemIndex, dataKey);
      listenerApi.dispatch(setActiveMouseOverItemIndex({
        activeDataKey: dataKey,
        activeIndex: itemIndex,
        activeCoordinate: coordinate
      }));
    }
  }
});
var rootReducer = combineReducers({
  brush: brushReducer,
  cartesianAxis: cartesianAxisReducer,
  chartData: chartDataReducer,
  errorBars: errorBarReducer,
  graphicalItems: graphicalItemsReducer,
  layout: chartLayoutReducer,
  legend: legendReducer,
  options: optionsReducer,
  polarAxis: polarAxisReducer,
  polarOptions: polarOptionsReducer,
  referenceElements: referenceElementsReducer,
  rootProps: rootPropsReducer,
  tooltip: tooltipReducer,
  zIndex: zIndexReducer
});
var createRechartsStore = function createRechartsStore2(preloadedState) {
  return configureStore({
    reducer: rootReducer,
    // redux-toolkit v1 types are unhappy with the preloadedState type. Remove the `as any` when bumping to v2
    preloadedState,
    // @ts-expect-error redux-toolkit v1 types are unhappy with the middleware array. Remove this comment when bumping to v2
    middleware: (getDefaultMiddleware) => getDefaultMiddleware({
      serializableCheck: false
    }).concat([mouseClickMiddleware.middleware, mouseMoveMiddleware.middleware, keyboardEventsMiddleware.middleware, externalEventsMiddleware.middleware, touchEventMiddleware.middleware]),
    /*
     * I can't find out how to satisfy typescript here.
     * We return `EnhancerArray<[StoreEnhancer<{}, {}>, StoreEnhancer]>` from this function,
     * but the types say we should return `EnhancerArray<StoreEnhancer<{}, {}>`.
     * Looks like it's badly inferred generics, but it won't allow me to provide the correct type manually either.
     * So let's just ignore the error for now.
     */
    // @ts-expect-error mismatched generics
    enhancers: (getDefaultEnhancers) => {
      var enhancers = getDefaultEnhancers;
      if (typeof getDefaultEnhancers === "function") {
        enhancers = getDefaultEnhancers();
      }
      return enhancers.concat(autoBatchEnhancer({
        type: "raf"
      }));
    },
    devTools: Global.devToolsEnabled
  });
};
function RechartsStoreProvider(_ref2) {
  var {
    preloadedState,
    children,
    reduxStoreName
  } = _ref2;
  var isPanorama = useIsPanorama();
  var storeRef = useRef(null);
  if (isPanorama) {
    return children;
  }
  if (storeRef.current == null) {
    storeRef.current = createRechartsStore(preloadedState);
  }
  var nonNullContext = RechartsReduxContext;
  return /* @__PURE__ */ React.createElement(Provider, {
    context: nonNullContext,
    store: storeRef.current
  }, children);
}
function ReportMainChartProps(_ref2) {
  var {
    layout,
    margin
  } = _ref2;
  var dispatch = useAppDispatch();
  var isPanorama = useIsPanorama();
  useEffect(() => {
    if (!isPanorama) {
      dispatch(setLayout(layout));
      dispatch(setMargin(margin));
    }
  }, [dispatch, isPanorama, layout, margin]);
  return null;
}
function ReportChartProps(props) {
  var dispatch = useAppDispatch();
  useEffect(() => {
    dispatch(updateOptions(props));
  }, [dispatch, props]);
  return null;
}
function ZIndexSvgPortal(_ref2) {
  var {
    zIndex,
    isPanorama
  } = _ref2;
  var prefix = isPanorama ? "recharts-zindex-panorama-" : "recharts-zindex-";
  var portalId = useUniqueId("".concat(prefix).concat(zIndex));
  var dispatch = useAppDispatch();
  useLayoutEffect(() => {
    dispatch(registerZIndexPortalId({
      zIndex,
      elementId: portalId,
      isPanorama
    }));
    return () => {
      dispatch(unregisterZIndexPortalId({
        zIndex,
        isPanorama
      }));
    };
  }, [dispatch, zIndex, portalId, isPanorama]);
  return /* @__PURE__ */ React.createElement("g", {
    id: portalId
  });
}
function AllZIndexPortals(_ref2) {
  var {
    children,
    isPanorama
  } = _ref2;
  var allRegisteredZIndexes = useAppSelector(selectAllRegisteredZIndexes);
  if (!allRegisteredZIndexes || allRegisteredZIndexes.length === 0) {
    return children;
  }
  var allNegativeZIndexes = allRegisteredZIndexes.filter((zIndex) => zIndex < 0);
  var allPositiveZIndexes = allRegisteredZIndexes.filter((zIndex) => zIndex > 0);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, allNegativeZIndexes.map((zIndex) => /* @__PURE__ */ React.createElement(ZIndexSvgPortal, {
    key: zIndex,
    zIndex,
    isPanorama
  })), children, allPositiveZIndexes.map((zIndex) => /* @__PURE__ */ React.createElement(ZIndexSvgPortal, {
    key: zIndex,
    zIndex,
    isPanorama
  })));
}
var _excluded$2 = ["children"];
function _objectWithoutProperties$2(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$2(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$2(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
function _extends$3() {
  return _extends$3 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$3.apply(null, arguments);
}
var FULL_WIDTH_AND_HEIGHT = {
  width: "100%",
  height: "100%",
  /*
   * display: block is necessary here because the default for an SVG is display: inline,
   * which in some browsers (Chrome) adds a little bit of extra space above and below the SVG
   * to make space for the descender of letters like "g" and "y". This throws off the height calculation
   * and causes the container to grow indefinitely on each render with responsive=true.
   * Display: block removes that extra space.
   *
   * Interestingly, Firefox does not have this problem, but it doesn't hurt to add the style anyway.
   */
  display: "block"
};
var MainChartSurface = /* @__PURE__ */ forwardRef((props, ref) => {
  var width = useChartWidth();
  var height = useChartHeight();
  var hasAccessibilityLayer = useAccessibilityLayer();
  if (!isPositiveNumber(width) || !isPositiveNumber(height)) {
    return null;
  }
  var {
    children,
    otherAttributes,
    title,
    desc: desc2
  } = props;
  var tabIndex, role;
  if (otherAttributes != null) {
    if (typeof otherAttributes.tabIndex === "number") {
      tabIndex = otherAttributes.tabIndex;
    } else {
      tabIndex = hasAccessibilityLayer ? 0 : void 0;
    }
    if (typeof otherAttributes.role === "string") {
      role = otherAttributes.role;
    } else {
      role = hasAccessibilityLayer ? "application" : void 0;
    }
  }
  return /* @__PURE__ */ React.createElement(Surface, _extends$3({}, otherAttributes, {
    title,
    desc: desc2,
    role,
    tabIndex,
    width,
    height,
    style: FULL_WIDTH_AND_HEIGHT,
    ref
  }), children);
});
var BrushPanoramaSurface = (_ref2) => {
  var {
    children
  } = _ref2;
  var brushDimensions = useAppSelector(selectBrushDimensions);
  if (!brushDimensions) {
    return null;
  }
  var {
    width,
    height,
    y,
    x
  } = brushDimensions;
  return /* @__PURE__ */ React.createElement(Surface, {
    width,
    height,
    x,
    y
  }, children);
};
var RootSurface = /* @__PURE__ */ forwardRef((_ref2, ref) => {
  var {
    children
  } = _ref2, rest = _objectWithoutProperties$2(_ref2, _excluded$2);
  var isPanorama = useIsPanorama();
  if (isPanorama) {
    return /* @__PURE__ */ React.createElement(BrushPanoramaSurface, null, /* @__PURE__ */ React.createElement(AllZIndexPortals, {
      isPanorama: true
    }, children));
  }
  return /* @__PURE__ */ React.createElement(MainChartSurface, _extends$3({
    ref
  }, rest), /* @__PURE__ */ React.createElement(AllZIndexPortals, {
    isPanorama: false
  }, children));
});
function useReportScale() {
  var dispatch = useAppDispatch();
  var [ref, setRef] = useState(null);
  var scale = useAppSelector(selectContainerScale);
  useEffect(() => {
    if (ref == null) {
      return;
    }
    var rect = ref.getBoundingClientRect();
    var newScale = rect.width / ref.offsetWidth;
    if (isWellBehavedNumber(newScale) && newScale !== scale) {
      dispatch(setScale(newScale));
    }
  }, [ref, dispatch, scale]);
  return setRef;
}
function ownKeys(e, r2) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r2 && (o = o.filter(function(r3) {
      return Object.getOwnPropertyDescriptor(e, r3).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r2 = 1; r2 < arguments.length; r2++) {
    var t = null != arguments[r2] ? arguments[r2] : {};
    r2 % 2 ? ownKeys(Object(t), true).forEach(function(r3) {
      _defineProperty(e, r3, t[r3]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function(r3) {
      Object.defineProperty(e, r3, Object.getOwnPropertyDescriptor(t, r3));
    });
  }
  return e;
}
function _defineProperty(e, r2, t) {
  return (r2 = _toPropertyKey(r2)) in e ? Object.defineProperty(e, r2, { value: t, enumerable: true, configurable: true, writable: true }) : e[r2] = t, e;
}
function _toPropertyKey(t) {
  var i = _toPrimitive(t, "string");
  return "symbol" == typeof i ? i : i + "";
}
function _toPrimitive(t, r2) {
  if ("object" != typeof t || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r2);
    if ("object" != typeof i) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r2 ? String : Number)(t);
}
function _extends$2() {
  return _extends$2 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$2.apply(null, arguments);
}
var EventSynchronizer = () => {
  useSynchronisedEventsFromOtherCharts();
  return null;
};
function getNumberOrZero(value) {
  if (typeof value === "number") {
    return value;
  }
  if (typeof value === "string") {
    var parsed = parseFloat(value);
    if (!Number.isNaN(parsed)) {
      return parsed;
    }
  }
  return 0;
}
var ResponsiveDiv = /* @__PURE__ */ forwardRef((props, ref) => {
  var _props$style, _props$style2;
  var observerRef = useRef(null);
  var [sizes, setSizes] = useState({
    containerWidth: getNumberOrZero((_props$style = props.style) === null || _props$style === void 0 ? void 0 : _props$style.width),
    containerHeight: getNumberOrZero((_props$style2 = props.style) === null || _props$style2 === void 0 ? void 0 : _props$style2.height)
  });
  var setContainerSize = useCallback((newWidth, newHeight) => {
    setSizes((prevState) => {
      var roundedWidth = Math.round(newWidth);
      var roundedHeight = Math.round(newHeight);
      if (prevState.containerWidth === roundedWidth && prevState.containerHeight === roundedHeight) {
        return prevState;
      }
      return {
        containerWidth: roundedWidth,
        containerHeight: roundedHeight
      };
    });
  }, []);
  var innerRef = useCallback((node) => {
    if (typeof ref === "function") {
      ref(node);
    }
    if (node != null && typeof ResizeObserver !== "undefined") {
      var {
        width: containerWidth,
        height: containerHeight
      } = node.getBoundingClientRect();
      setContainerSize(containerWidth, containerHeight);
      var callback = (entries) => {
        var {
          width,
          height
        } = entries[0].contentRect;
        setContainerSize(width, height);
      };
      var observer = new ResizeObserver(callback);
      observer.observe(node);
      observerRef.current = observer;
    }
  }, [ref, setContainerSize]);
  useEffect(() => {
    return () => {
      var observer = observerRef.current;
      if (observer != null) {
        observer.disconnect();
      }
    };
  }, [setContainerSize]);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReportChartSize, {
    width: sizes.containerWidth,
    height: sizes.containerHeight
  }), /* @__PURE__ */ React.createElement("div", _extends$2({
    ref: innerRef
  }, props)));
});
var ReadSizeOnceDiv = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    width,
    height
  } = props;
  var [sizes, setSizes] = useState({
    containerWidth: getNumberOrZero(width),
    containerHeight: getNumberOrZero(height)
  });
  var setContainerSize = useCallback((newWidth, newHeight) => {
    setSizes((prevState) => {
      var roundedWidth = Math.round(newWidth);
      var roundedHeight = Math.round(newHeight);
      if (prevState.containerWidth === roundedWidth && prevState.containerHeight === roundedHeight) {
        return prevState;
      }
      return {
        containerWidth: roundedWidth,
        containerHeight: roundedHeight
      };
    });
  }, []);
  var innerRef = useCallback((node) => {
    if (typeof ref === "function") {
      ref(node);
    }
    if (node != null) {
      var {
        width: containerWidth,
        height: containerHeight
      } = node.getBoundingClientRect();
      setContainerSize(containerWidth, containerHeight);
    }
  }, [ref, setContainerSize]);
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReportChartSize, {
    width: sizes.containerWidth,
    height: sizes.containerHeight
  }), /* @__PURE__ */ React.createElement("div", _extends$2({
    ref: innerRef
  }, props)));
});
var StaticDiv = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    width,
    height
  } = props;
  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReportChartSize, {
    width,
    height
  }), /* @__PURE__ */ React.createElement("div", _extends$2({
    ref
  }, props)));
});
var NonResponsiveDiv = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    width,
    height
  } = props;
  if (isPercent(width) || isPercent(height)) {
    return /* @__PURE__ */ React.createElement(ReadSizeOnceDiv, _extends$2({}, props, {
      ref
    }));
  }
  return /* @__PURE__ */ React.createElement(StaticDiv, _extends$2({}, props, {
    ref
  }));
});
function getWrapperDivComponent(responsive) {
  return responsive === true ? ResponsiveDiv : NonResponsiveDiv;
}
var RechartsWrapper = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    children,
    className,
    height: heightFromProps,
    onClick,
    onContextMenu,
    onDoubleClick,
    onMouseDown,
    onMouseEnter,
    onMouseLeave,
    onMouseMove,
    onMouseUp,
    onTouchEnd,
    onTouchMove,
    onTouchStart,
    style,
    width: widthFromProps,
    responsive,
    dispatchTouchEvents = true
  } = props;
  var containerRef = useRef(null);
  var dispatch = useAppDispatch();
  var [tooltipPortal, setTooltipPortal] = useState(null);
  var [legendPortal, setLegendPortal] = useState(null);
  var setScaleRef = useReportScale();
  var responsiveContainerCalculations = useResponsiveContainerContext();
  var width = (responsiveContainerCalculations === null || responsiveContainerCalculations === void 0 ? void 0 : responsiveContainerCalculations.width) > 0 ? responsiveContainerCalculations.width : widthFromProps;
  var height = (responsiveContainerCalculations === null || responsiveContainerCalculations === void 0 ? void 0 : responsiveContainerCalculations.height) > 0 ? responsiveContainerCalculations.height : heightFromProps;
  var innerRef = useCallback((node) => {
    setScaleRef(node);
    if (typeof ref === "function") {
      ref(node);
    }
    setTooltipPortal(node);
    setLegendPortal(node);
    if (node != null) {
      containerRef.current = node;
    }
  }, [setScaleRef, ref, setTooltipPortal, setLegendPortal]);
  var myOnClick = useCallback((e) => {
    dispatch(mouseClickAction(e));
    dispatch(externalEventAction({
      handler: onClick,
      reactEvent: e
    }));
  }, [dispatch, onClick]);
  var myOnMouseEnter = useCallback((e) => {
    dispatch(mouseMoveAction(e));
    dispatch(externalEventAction({
      handler: onMouseEnter,
      reactEvent: e
    }));
  }, [dispatch, onMouseEnter]);
  var myOnMouseLeave = useCallback((e) => {
    dispatch(mouseLeaveChart());
    dispatch(externalEventAction({
      handler: onMouseLeave,
      reactEvent: e
    }));
  }, [dispatch, onMouseLeave]);
  var myOnMouseMove = useCallback((e) => {
    dispatch(mouseMoveAction(e));
    dispatch(externalEventAction({
      handler: onMouseMove,
      reactEvent: e
    }));
  }, [dispatch, onMouseMove]);
  var onFocus = useCallback(() => {
    dispatch(focusAction());
  }, [dispatch]);
  var onKeyDown = useCallback((e) => {
    dispatch(keyDownAction(e.key));
  }, [dispatch]);
  var myOnContextMenu = useCallback((e) => {
    dispatch(externalEventAction({
      handler: onContextMenu,
      reactEvent: e
    }));
  }, [dispatch, onContextMenu]);
  var myOnDoubleClick = useCallback((e) => {
    dispatch(externalEventAction({
      handler: onDoubleClick,
      reactEvent: e
    }));
  }, [dispatch, onDoubleClick]);
  var myOnMouseDown = useCallback((e) => {
    dispatch(externalEventAction({
      handler: onMouseDown,
      reactEvent: e
    }));
  }, [dispatch, onMouseDown]);
  var myOnMouseUp = useCallback((e) => {
    dispatch(externalEventAction({
      handler: onMouseUp,
      reactEvent: e
    }));
  }, [dispatch, onMouseUp]);
  var myOnTouchStart = useCallback((e) => {
    dispatch(externalEventAction({
      handler: onTouchStart,
      reactEvent: e
    }));
  }, [dispatch, onTouchStart]);
  var myOnTouchMove = useCallback((e) => {
    if (dispatchTouchEvents) {
      dispatch(touchEventAction(e));
    }
    dispatch(externalEventAction({
      handler: onTouchMove,
      reactEvent: e
    }));
  }, [dispatch, dispatchTouchEvents, onTouchMove]);
  var myOnTouchEnd = useCallback((e) => {
    dispatch(externalEventAction({
      handler: onTouchEnd,
      reactEvent: e
    }));
  }, [dispatch, onTouchEnd]);
  var WrapperDiv = getWrapperDivComponent(responsive);
  return /* @__PURE__ */ React.createElement(TooltipPortalContext.Provider, {
    value: tooltipPortal
  }, /* @__PURE__ */ React.createElement(LegendPortalContext.Provider, {
    value: legendPortal
  }, /* @__PURE__ */ React.createElement(WrapperDiv, {
    width: width !== null && width !== void 0 ? width : style === null || style === void 0 ? void 0 : style.width,
    height: height !== null && height !== void 0 ? height : style === null || style === void 0 ? void 0 : style.height,
    className: clsx("recharts-wrapper", className),
    style: _objectSpread({
      position: "relative",
      cursor: "default",
      width,
      height
    }, style),
    onClick: myOnClick,
    onContextMenu: myOnContextMenu,
    onDoubleClick: myOnDoubleClick,
    onFocus,
    onKeyDown,
    onMouseDown: myOnMouseDown,
    onMouseEnter: myOnMouseEnter,
    onMouseLeave: myOnMouseLeave,
    onMouseMove: myOnMouseMove,
    onMouseUp: myOnMouseUp,
    onTouchEnd: myOnTouchEnd,
    onTouchMove: myOnTouchMove,
    onTouchStart: myOnTouchStart,
    ref: innerRef
  }, /* @__PURE__ */ React.createElement(EventSynchronizer, null), children)));
});
var _excluded$1 = ["width", "height", "responsive", "children", "className", "style", "compact", "title", "desc"];
function _objectWithoutProperties$1(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose$1(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose$1(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var CategoricalChart = /* @__PURE__ */ forwardRef((props, ref) => {
  var {
    width,
    height,
    responsive,
    children,
    className,
    style,
    compact,
    title,
    desc: desc2
  } = props, others = _objectWithoutProperties$1(props, _excluded$1);
  var attrs = svgPropertiesNoEvents(others);
  if (compact) {
    return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ReportChartSize, {
      width,
      height
    }), /* @__PURE__ */ React.createElement(RootSurface, {
      otherAttributes: attrs,
      title,
      desc: desc2
    }, children));
  }
  return /* @__PURE__ */ React.createElement(RechartsWrapper, {
    className,
    style,
    width,
    height,
    responsive: responsive !== null && responsive !== void 0 ? responsive : false,
    onClick: props.onClick,
    onMouseLeave: props.onMouseLeave,
    onMouseEnter: props.onMouseEnter,
    onMouseMove: props.onMouseMove,
    onMouseDown: props.onMouseDown,
    onMouseUp: props.onMouseUp,
    onContextMenu: props.onContextMenu,
    onDoubleClick: props.onDoubleClick,
    onTouchStart: props.onTouchStart,
    onTouchMove: props.onTouchMove,
    onTouchEnd: props.onTouchEnd
  }, /* @__PURE__ */ React.createElement(RootSurface, {
    otherAttributes: attrs,
    title,
    desc: desc2,
    ref
  }, /* @__PURE__ */ React.createElement(ClipPathProvider, null, children)));
});
function _extends$1() {
  return _extends$1 = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends$1.apply(null, arguments);
}
var defaultMargin$1 = {
  top: 5,
  right: 5,
  bottom: 5,
  left: 5
};
var defaultProps$2 = {
  accessibilityLayer: true,
  layout: "horizontal",
  stackOffset: "none",
  barCategoryGap: "10%",
  barGap: 4,
  margin: defaultMargin$1,
  reverseStackOrder: false,
  syncMethod: "index",
  responsive: false
};
var CartesianChart = /* @__PURE__ */ forwardRef(function CartesianChart2(props, ref) {
  var _categoricalChartProp;
  var rootChartProps = resolveDefaultProps(props.categoricalChartProps, defaultProps$2);
  var {
    chartName,
    defaultTooltipEventType,
    validateTooltipEventTypes,
    tooltipPayloadSearcher,
    categoricalChartProps
  } = props;
  var options = {
    chartName,
    defaultTooltipEventType,
    validateTooltipEventTypes,
    tooltipPayloadSearcher,
    eventEmitter: void 0
  };
  return /* @__PURE__ */ React.createElement(RechartsStoreProvider, {
    preloadedState: {
      options
    },
    reduxStoreName: (_categoricalChartProp = categoricalChartProps.id) !== null && _categoricalChartProp !== void 0 ? _categoricalChartProp : chartName
  }, /* @__PURE__ */ React.createElement(ChartDataContextProvider, {
    chartData: categoricalChartProps.data
  }), /* @__PURE__ */ React.createElement(ReportMainChartProps, {
    layout: rootChartProps.layout,
    margin: rootChartProps.margin
  }), /* @__PURE__ */ React.createElement(ReportChartProps, {
    baseValue: rootChartProps.baseValue,
    accessibilityLayer: rootChartProps.accessibilityLayer,
    barCategoryGap: rootChartProps.barCategoryGap,
    maxBarSize: rootChartProps.maxBarSize,
    stackOffset: rootChartProps.stackOffset,
    barGap: rootChartProps.barGap,
    barSize: rootChartProps.barSize,
    syncId: rootChartProps.syncId,
    syncMethod: rootChartProps.syncMethod,
    className: rootChartProps.className
  }), /* @__PURE__ */ React.createElement(CategoricalChart, _extends$1({}, rootChartProps, {
    ref
  })));
});
function ReportPolarOptions(props) {
  var dispatch = useAppDispatch();
  useEffect(() => {
    dispatch(updatePolarOptions(props));
  }, [dispatch, props]);
  return null;
}
var _excluded = ["layout"];
function _extends() {
  return _extends = Object.assign ? Object.assign.bind() : function(n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r2 in t) ({}).hasOwnProperty.call(t, r2) && (n[r2] = t[r2]);
    }
    return n;
  }, _extends.apply(null, arguments);
}
function _objectWithoutProperties(e, t) {
  if (null == e) return {};
  var o, r2, i = _objectWithoutPropertiesLoose(e, t);
  if (Object.getOwnPropertySymbols) {
    var n = Object.getOwnPropertySymbols(e);
    for (r2 = 0; r2 < n.length; r2++) o = n[r2], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);
  }
  return i;
}
function _objectWithoutPropertiesLoose(r2, e) {
  if (null == r2) return {};
  var t = {};
  for (var n in r2) if ({}.hasOwnProperty.call(r2, n)) {
    if (-1 !== e.indexOf(n)) continue;
    t[n] = r2[n];
  }
  return t;
}
var defaultMargin = {
  top: 5,
  right: 5,
  bottom: 5,
  left: 5
};
var defaultProps$1 = {
  accessibilityLayer: true,
  stackOffset: "none",
  barCategoryGap: "10%",
  barGap: 4,
  margin: defaultMargin,
  reverseStackOrder: false,
  syncMethod: "index",
  layout: "radial",
  responsive: false
};
var PolarChart = /* @__PURE__ */ forwardRef(function PolarChart2(props, ref) {
  var _polarChartProps$id;
  var polarChartProps = resolveDefaultProps(props.categoricalChartProps, defaultProps$1);
  var {
    layout
  } = polarChartProps, otherCategoricalProps = _objectWithoutProperties(polarChartProps, _excluded);
  var {
    chartName,
    defaultTooltipEventType,
    validateTooltipEventTypes,
    tooltipPayloadSearcher
  } = props;
  var options = {
    chartName,
    defaultTooltipEventType,
    validateTooltipEventTypes,
    tooltipPayloadSearcher,
    eventEmitter: void 0
  };
  return /* @__PURE__ */ React.createElement(RechartsStoreProvider, {
    preloadedState: {
      options
    },
    reduxStoreName: (_polarChartProps$id = polarChartProps.id) !== null && _polarChartProps$id !== void 0 ? _polarChartProps$id : chartName
  }, /* @__PURE__ */ React.createElement(ChartDataContextProvider, {
    chartData: polarChartProps.data
  }), /* @__PURE__ */ React.createElement(ReportMainChartProps, {
    layout,
    margin: polarChartProps.margin
  }), /* @__PURE__ */ React.createElement(ReportChartProps, {
    baseValue: void 0,
    accessibilityLayer: polarChartProps.accessibilityLayer,
    barCategoryGap: polarChartProps.barCategoryGap,
    maxBarSize: polarChartProps.maxBarSize,
    stackOffset: polarChartProps.stackOffset,
    barGap: polarChartProps.barGap,
    barSize: polarChartProps.barSize,
    syncId: polarChartProps.syncId,
    syncMethod: polarChartProps.syncMethod,
    className: polarChartProps.className
  }), /* @__PURE__ */ React.createElement(ReportPolarOptions, {
    cx: polarChartProps.cx,
    cy: polarChartProps.cy,
    startAngle: polarChartProps.startAngle,
    endAngle: polarChartProps.endAngle,
    innerRadius: polarChartProps.innerRadius,
    outerRadius: polarChartProps.outerRadius
  }), /* @__PURE__ */ React.createElement(CategoricalChart, _extends({}, otherCategoricalProps, {
    ref
  })));
});
var allowedTooltipTypes$2 = ["item"];
var defaultProps = {
  layout: "centric",
  startAngle: 0,
  endAngle: 360,
  cx: "50%",
  cy: "50%",
  innerRadius: 0,
  outerRadius: "80%"
};
var PieChart = /* @__PURE__ */ forwardRef((props, ref) => {
  var propsWithDefaults = resolveDefaultProps(props, defaultProps);
  return /* @__PURE__ */ React.createElement(PolarChart, {
    chartName: "PieChart",
    defaultTooltipEventType: "item",
    validateTooltipEventTypes: allowedTooltipTypes$2,
    tooltipPayloadSearcher: arrayTooltipSearcher,
    categoricalChartProps: propsWithDefaults,
    ref
  });
});
var allowedTooltipTypes$1 = ["axis"];
var AreaChart = /* @__PURE__ */ forwardRef((props, ref) => {
  return /* @__PURE__ */ React.createElement(CartesianChart, {
    chartName: "AreaChart",
    defaultTooltipEventType: "axis",
    validateTooltipEventTypes: allowedTooltipTypes$1,
    tooltipPayloadSearcher: arrayTooltipSearcher,
    categoricalChartProps: props,
    ref
  });
});
var allowedTooltipTypes = ["axis"];
var ComposedChart = /* @__PURE__ */ forwardRef((props, ref) => {
  return /* @__PURE__ */ React.createElement(CartesianChart, {
    chartName: "ComposedChart",
    defaultTooltipEventType: "axis",
    validateTooltipEventTypes: allowedTooltipTypes,
    tooltipPayloadSearcher: arrayTooltipSearcher,
    categoricalChartProps: props,
    ref
  });
});
const loader$f = async () => {
  var _a, _b, _c;
  const incomeSum = await db.select({
    value: sql`sum(${transaction.valor})`
  }).from(transaction).where(eq(transaction.tipo, TipoTransacao.INCOME));
  const expenseSum = await db.select({
    value: sql`sum(${transaction.valor})`
  }).from(transaction).where(eq(transaction.tipo, TipoTransacao.EXPENSE));
  const vehiclesCount = await db.select({
    count: sql`count(*)`
  }).from(vehicle);
  const recentTransactions = await db.select().from(transaction).orderBy(desc(transaction.createdAt)).limit(10);
  return data({
    stats: {
      totalIncome: Number(((_a = incomeSum[0]) == null ? void 0 : _a.value) || 0),
      totalExpense: Number(((_b = expenseSum[0]) == null ? void 0 : _b.value) || 0),
      vehicleCount: Number(((_c = vehiclesCount[0]) == null ? void 0 : _c.count) || 0)
    },
    recentTransactions
  });
};
const admin_reports__index = UNSAFE_withComponentProps(function ReportsPage() {
  const {
    stats,
    recentTransactions
  } = useLoaderData();
  const {
    currentContext
  } = useApp();
  const [activeTab, setActiveTab] = useState("gerencial");
  const [searchTerm, setSearchTerm] = useState("");
  const COLORS = ["#0088FE", "#00C49F", "#FFBB28", "#FF8042", "#8884d8"];
  const formatCurrency = (value) => value.toLocaleString("pt-BR", {
    style: "currency",
    currency: "BRL"
  });
  const formatPercentage = (value) => value.toFixed(2) + "%";
  const profit = stats.totalIncome - stats.totalExpense;
  const profitMargin = stats.totalIncome > 0 ? profit / stats.totalIncome * 100 : 0;
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Relat√≥rios & An√°lises",
      subtitle: "Vis√£o estrat√©gica e operacional de alta performance",
      icon: ChartNoAxesColumnIncreasing,
      rightElement: /* @__PURE__ */ jsxs(Button, {
        variant: "outline",
        className: "h-14 px-6 rounded-xl font-bold gap-2",
        children: [/* @__PURE__ */ jsx(Download, {
          size: 18
        }), " EXPORTAR DADOS"]
      })
    }), /* @__PURE__ */ jsxs(Tabs, {
      value: activeTab,
      onValueChange: (v) => setActiveTab(v),
      className: "w-full",
      children: [/* @__PURE__ */ jsxs(TabsList, {
        className: "bg-muted/40 p-1.5 rounded-2xl border border-border/50 h-14 w-full md:w-fit gap-2",
        children: [/* @__PURE__ */ jsx(TabsTrigger, {
          value: "gerencial",
          className: "rounded-xl px-8 h-11 font-black text-xs",
          children: "GERENCIAL"
        }), /* @__PURE__ */ jsx(TabsTrigger, {
          value: "operacional",
          className: "rounded-xl px-8 h-11 font-black text-xs",
          children: "OPERACIONAL"
        }), /* @__PURE__ */ jsx(TabsTrigger, {
          value: "financeiro",
          className: "rounded-xl px-8 h-11 font-black text-xs",
          children: "FINANCEIRO"
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "mt-8",
        children: [/* @__PURE__ */ jsxs(TabsContent, {
          value: "gerencial",
          className: "space-y-8 animate-in fade-in duration-500",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-4 gap-6",
            children: [/* @__PURE__ */ jsx(DashboardCard, {
              title: "Receita Bruta",
              value: formatCurrency(stats.totalIncome),
              icon: DollarSign$1,
              variant: "emerald"
            }), /* @__PURE__ */ jsx(DashboardCard, {
              title: "Performance",
              value: formatCurrency(profit),
              icon: Activity,
              variant: profit >= 0 ? "blue" : "rose",
              subtitle: `Margem: ${formatPercentage(profitMargin)}`
            }), /* @__PURE__ */ jsx(DashboardCard, {
              title: "Frota Total",
              value: stats.vehicleCount,
              icon: Bus,
              variant: "amber"
            }), /* @__PURE__ */ jsx(DashboardCard, {
              title: "Ocupa√ß√£o M√©dia",
              value: "76%",
              icon: TrendingUp,
              variant: "indigo"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 xl:grid-cols-2 gap-8",
            children: [/* @__PURE__ */ jsxs(Card, {
              className: "border-none shadow-2xl rounded-[2.5rem] bg-card/50 backdrop-blur-sm p-8",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-xl font-black mb-6",
                children: "Fluxo Financeiro (Mensal)"
              }), /* @__PURE__ */ jsx("div", {
                className: "h-[300px]",
                children: /* @__PURE__ */ jsx(ResponsiveContainer, {
                  width: "100%",
                  height: "100%",
                  children: /* @__PURE__ */ jsxs(AreaChart, {
                    data: [{
                      n: "Sem 1",
                      v: 100
                    }, {
                      n: "Sem 2",
                      v: 250
                    }, {
                      n: "Sem 3",
                      v: 400
                    }, {
                      n: "Sem 4",
                      v: 380
                    }],
                    children: [/* @__PURE__ */ jsx(CartesianGrid, {
                      strokeDasharray: "3 3",
                      vertical: false
                    }), /* @__PURE__ */ jsx(XAxis, {
                      dataKey: "n",
                      axisLine: false,
                      tickLine: false
                    }), /* @__PURE__ */ jsx(YAxis, {
                      axisLine: false,
                      tickLine: false
                    }), /* @__PURE__ */ jsx(Tooltip, {}), /* @__PURE__ */ jsx(Area, {
                      type: "monotone",
                      dataKey: "v",
                      stroke: "hsl(var(--primary))",
                      fillOpacity: 0.1,
                      fill: "hsl(var(--primary))"
                    })]
                  })
                })
              })]
            }), /* @__PURE__ */ jsxs(Card, {
              className: "border-none shadow-2xl rounded-[2.5rem] bg-card/50 backdrop-blur-sm p-8",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-xl font-black mb-6",
                children: "Status da Frota"
              }), /* @__PURE__ */ jsx("div", {
                className: "h-[300px]",
                children: /* @__PURE__ */ jsx(ResponsiveContainer, {
                  width: "100%",
                  height: "100%",
                  children: /* @__PURE__ */ jsxs(PieChart, {
                    children: [/* @__PURE__ */ jsx(Pie, {
                      data: [{
                        n: "Ativo",
                        v: 70
                      }, {
                        n: "Manu",
                        v: 20
                      }, {
                        n: "Resv",
                        v: 10
                      }],
                      dataKey: "v",
                      nameKey: "n",
                      cx: "50%",
                      cy: "50%",
                      innerRadius: 60,
                      outerRadius: 80,
                      paddingAngle: 5,
                      children: COLORS.map((c, i) => /* @__PURE__ */ jsx(Cell, {
                        fill: c
                      }, i))
                    }), /* @__PURE__ */ jsx(Tooltip, {}), /* @__PURE__ */ jsx(Legend, {})]
                  })
                })
              })]
            })]
          })]
        }), /* @__PURE__ */ jsx(TabsContent, {
          value: "financeiro",
          className: "space-y-8 animate-in fade-in duration-500",
          children: /* @__PURE__ */ jsxs(Card, {
            className: "border-none shadow-2xl rounded-[2.5rem] bg-card/50 backdrop-blur-sm overflow-hidden",
            children: [/* @__PURE__ */ jsx("div", {
              className: "p-8 border-b border-border/40 font-black text-xl uppercase tracking-tighter",
              children: "Demonstrativo de Resultados (DRE)"
            }), /* @__PURE__ */ jsxs("div", {
              className: "p-8 space-y-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex justify-between items-center p-6 bg-emerald-500/5 rounded-2xl border border-emerald-500/10",
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-black uppercase text-sm",
                  children: "Receita Bruta"
                }), /* @__PURE__ */ jsx("span", {
                  className: "font-black text-xl text-emerald-600",
                  children: formatCurrency(stats.totalIncome)
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex justify-between items-center p-6 bg-rose-500/5 rounded-2xl border border-rose-500/10",
                children: [/* @__PURE__ */ jsx("span", {
                  className: "font-black uppercase text-sm",
                  children: "Despesas Operacionais"
                }), /* @__PURE__ */ jsxs("span", {
                  className: "font-black text-xl text-rose-600",
                  children: ["(", formatCurrency(stats.totalExpense), ")"]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "p-8 bg-primary rounded-[2rem] text-primary-foreground flex justify-between items-center",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "space-y-1",
                  children: [/* @__PURE__ */ jsx("p", {
                    className: "text-xs uppercase font-bold opacity-60",
                    children: "Lucro L√≠quido"
                  }), /* @__PURE__ */ jsx("h3", {
                    className: "text-3xl font-black tracking-tighter",
                    children: "Performance de Fluxo"
                  })]
                }), /* @__PURE__ */ jsx("span", {
                  className: "text-4xl font-black",
                  children: formatCurrency(profit)
                })]
              })]
            })]
          })
        })]
      })]
    })]
  }, "reports-main");
});
const route70 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_reports__index,
  loader: loader$f
}, Symbol.toStringTag, { value: "Module" }));
const Switch = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  SwitchPrimitives.Root,
  {
    className: cn$1(
      "peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",
      className
    ),
    ...props,
    ref,
    children: /* @__PURE__ */ jsx(
      SwitchPrimitives.Thumb,
      {
        className: cn$1(
          "pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"
        )
      }
    )
  }
));
Switch.displayName = SwitchPrimitives.Root.displayName;
function UserForm({ intent, defaultValues = {} }) {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const isSubmitting = navigation.state !== "idle";
  const isEdit = intent === "edit";
  const initialRoles = defaultValues.role ? defaultValues.role.split(",") : ["user"];
  const [selectedRoles, setSelectedRoles] = React__default.useState(initialRoles);
  const toggleRole = (role) => {
    setSelectedRoles(
      (prev) => prev.includes(role) ? prev.filter((r2) => r2 !== role) : [...prev, role]
    );
  };
  return /* @__PURE__ */ jsxs(Form, { method: "post", className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [
    /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Identidade", icon: User, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Nome Completo" }),
          /* @__PURE__ */ jsx(Input, { name: "name", defaultValue: defaultValues.name, required: true, placeholder: "Ex: Alexandre de Moraes", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Username (Identificador)" }),
            /* @__PURE__ */ jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ jsx(
                Input,
                {
                  name: "username",
                  defaultValue: defaultValues.username,
                  required: true,
                  readOnly: isEdit,
                  placeholder: "ex: alexandre.m",
                  className: cn$1("h-14 rounded-xl bg-muted/40 lowercase", isEdit && "opacity-60 cursor-not-allowed"),
                  id: "username-input"
                },
                defaultValues.username
              ),
              !isEdit && /* @__PURE__ */ jsx(
                "button",
                {
                  type: "button",
                  onClick: () => {
                    const nameInput = document.querySelector('input[name="name"]');
                    const usernameInput = document.getElementById("username-input");
                    if (nameInput && nameInput.value) {
                      const suggestion = nameInput.value.toLowerCase().split(" ")[0] + "." + Math.floor(Math.random() * 1e3);
                      usernameInput.value = suggestion;
                    }
                  },
                  className: "absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-black uppercase tracking-widest text-primary hover:text-primary/80 transition-colors",
                  children: "SUGERIR"
                }
              )
            ] })
          ] }),
          isEdit ? /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Status da Conta" }),
            /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-4 h-14 px-4 bg-muted/40 rounded-xl border border-input", children: [
              /* @__PURE__ */ jsx(Switch, { name: "isActive", defaultChecked: defaultValues.isActive }),
              /* @__PURE__ */ jsx("span", { className: "text-sm font-bold", children: defaultValues.isActive ? "ATIVO" : "INATIVO" })
            ] })
          ] }) : /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Email Corporativo" }),
            /* @__PURE__ */ jsx(Input, { type: "email", name: "email", defaultValue: defaultValues.email, required: true, placeholder: "email@sgtl.com.br", className: "h-14 rounded-xl bg-muted/40" })
          ] })
        ] }),
        isEdit && /* @__PURE__ */ jsxs(Fragment, { children: [
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
            /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Email" }),
              /* @__PURE__ */ jsx(Input, { type: "email", name: "email", defaultValue: defaultValues.email, className: "h-14 rounded-xl bg-muted/40" })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
              /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Telefone" }),
              /* @__PURE__ */ jsx(Input, { name: "phone", defaultValue: defaultValues.phone, placeholder: "(00) 00000-0000", className: "h-14 rounded-xl bg-muted/40" })
            ] })
          ] }),
          /* @__PURE__ */ jsx(FormSection, { title: "Seguran√ßa da Conta", icon: Lock, children: /* @__PURE__ */ jsxs("div", { className: "p-4 border border-dashed border-border rounded-xl space-y-4", children: [
            /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
              /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Nova Senha (Opcional)" }),
                /* @__PURE__ */ jsx(Input, { type: "password", name: "newPassword", placeholder: "Deixe em branco para manter", className: "h-14 rounded-xl bg-muted/40" })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
                /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Confirmar Senha" }),
                /* @__PURE__ */ jsx(Input, { type: "password", name: "confirmPassword", placeholder: "Repita a nova senha", className: "h-14 rounded-xl bg-muted/40" })
              ] })
            ] }),
            /* @__PURE__ */ jsx("p", { className: "text-[10px] text-muted-foreground font-bold uppercase tracking-widest px-1", children: "Preencha apenas se desejar alterar a senha do usu√°rio manualmente." })
          ] }) })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Documento" }),
          /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
            /* @__PURE__ */ jsxs(
              "select",
              {
                name: "documento_tipo",
                defaultValue: defaultValues.documento_tipo || "CPF",
                className: "w-24 h-14 px-2 bg-muted/40 border-none rounded-xl font-bold bg-transparent outline-none focus:ring-2 focus:ring-primary/20",
                children: [
                  /* @__PURE__ */ jsx("option", { value: "CPF", children: "CPF" }),
                  /* @__PURE__ */ jsx("option", { value: "RG", children: "RG" }),
                  /* @__PURE__ */ jsx("option", { value: "CNPJ", children: "CNPJ" }),
                  /* @__PURE__ */ jsx("option", { value: "PASSAPORTE", children: "PASSP" })
                ]
              }
            ),
            /* @__PURE__ */ jsx(Input, { name: "documento", defaultValue: defaultValues.documento || defaultValues.cpf, className: "h-14 rounded-xl bg-muted/40", placeholder: "N√∫mero do documento" })
          ] })
        ] })
      ] }) }),
      !isEdit && /* @__PURE__ */ jsx(FormSection, { title: "Seguran√ßa", icon: Lock, children: /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
        /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Senha Inicial" }),
        /* @__PURE__ */ jsx(Input, { type: "password", name: "password", required: true, placeholder: "M√≠nimo 8 caracteres", className: "h-14 rounded-xl bg-muted/40" }),
        /* @__PURE__ */ jsx("p", { className: "text-[10px] text-muted-foreground font-bold uppercase tracking-widest mt-2 px-1", children: "O usu√°rio dever√° alterar a senha no primeiro acesso." })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "N√≠veis de Acesso", icon: Shield, children: /* @__PURE__ */ jsx("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-3", children: [
        { id: "admin", label: "ADMINISTRADOR", desc: "Acesso total ao sistema" },
        { id: "operacional", label: "OPERACIONAL", desc: "Gest√£o de viagens e frotas" },
        { id: "financeiro", label: "FINANCEIRO", desc: "Controle de caixa e relat√≥rios" },
        { id: "user", label: "USU√ÅRIO PADR√ÉO", desc: "Acesso b√°sico e consultas" }
      ].map((role) => /* @__PURE__ */ jsxs(
        "button",
        {
          type: "button",
          onClick: () => toggleRole(role.id),
          className: cn$1(
            "p-4 rounded-2xl border-2 transition-all text-left flex flex-col gap-1",
            selectedRoles.includes(role.id) ? "border-primary bg-primary/5 text-primary shadow-lg shadow-primary/5" : "border-border/50 text-muted-foreground hover:border-border"
          ),
          children: [
            /* @__PURE__ */ jsx("span", { className: "font-black text-xs tracking-widest", children: role.label }),
            /* @__PURE__ */ jsx("span", { className: "text-[10px] font-bold opacity-60 uppercase leading-none", children: role.desc }),
            selectedRoles.includes(role.id) && /* @__PURE__ */ jsx("input", { type: "hidden", name: "roles", value: role.id })
          ]
        },
        role.id
      )) }) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Organiza√ß√£o", icon: Building2, children: /* @__PURE__ */ jsxs("div", { className: "p-6 bg-primary/5 border border-primary/10 rounded-3xl space-y-3", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx(Building2, { size: 16, className: "text-primary" }),
          /* @__PURE__ */ jsx("span", { className: "text-[10px] font-black uppercase tracking-widest text-primary", children: "Unidade Principal" })
        ] }),
        /* @__PURE__ */ jsx("p", { className: "text-[11px] font-bold text-muted-foreground leading-relaxed uppercase", children: "J J√ä TURISMO E EXPRESS LTDA" })
      ] }) }),
      isEdit && defaultValues.createdAt && /* @__PURE__ */ jsxs("div", { className: "p-6 bg-amber-500/10 border border-amber-500/20 rounded-3xl space-y-3", children: [
        /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
          /* @__PURE__ */ jsx(Calendar$1, { size: 16, className: "text-amber-600" }),
          /* @__PURE__ */ jsx("span", { className: "text-[10px] font-black uppercase tracking-widest text-amber-700", children: "Metadados" })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-1 text-xs text-amber-800/80 font-medium", children: [
          /* @__PURE__ */ jsxs("p", { children: [
            "Criado em: ",
            new Date(defaultValues.createdAt).toLocaleDateString()
          ] }),
          /* @__PURE__ */ jsxs("p", { children: [
            "ID: ",
            /* @__PURE__ */ jsx("span", { className: "font-mono text-[10px]", children: defaultValues.id })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4", children: [
        /* @__PURE__ */ jsx(Button, { type: "submit", disabled: isSubmitting, className: "h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20", children: isSubmitting ? /* @__PURE__ */ jsx(LoaderCircle, { className: "animate-spin" }) : isEdit ? "SALVAR ALTERA√á√ïES" : "CRIAR OPERADOR" }),
        /* @__PURE__ */ jsx(Button, { type: "button", variant: "ghost", onClick: () => navigate(-1), className: "h-14 rounded-xl font-black uppercase text-[10px] tracking-widest", children: "CANCELAR" })
      ] })
    ] })
  ] });
}
const loader$e = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const apiUrl = process.env.VITE_API_URL || "http://localhost:3001";
  const response = await fetch(`${apiUrl}/api/users/${id}`, {
    headers: {
      Cookie: request.headers.get("Cookie") || ""
    }
  });
  if (!response.ok) {
    throw new Response("Usu√°rio n√£o encontrado", {
      status: 404
    });
  }
  const user2 = await response.json();
  return data({
    user: user2
  });
};
const action$e = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const apiUrl = process.env.VITE_API_URL || "http://localhost:3001";
  const roles = formData.getAll("roles");
  const isActive = formData.get("isActive") === "on";
  const body = {
    name: formData.get("name"),
    username: formData.get("username"),
    email: formData.get("email"),
    phone: formData.get("phone"),
    documento: formData.get("documento"),
    documento_tipo: formData.get("documento_tipo"),
    role: roles.join(","),
    isActive,
    newPassword: formData.get("newPassword")
  };
  const response = await fetch(`${apiUrl}/api/users/${id}`, {
    method: "PUT",
    headers: {
      "Content-Type": "application/json",
      Cookie: request.headers.get("Cookie") || ""
    },
    body: JSON.stringify(body)
  });
  if (!response.ok) {
    const error = await response.json();
    return data({
      error: error.error || "Erro ao atualizar usu√°rio"
    }, {
      status: response.status
    });
  }
  return redirect("/admin/users");
};
const admin_users_$id_edit = UNSAFE_withComponentProps(function EditUserPage() {
  const {
    user: user2
  } = useLoaderData();
  useNavigate();
  const navigation = useNavigation();
  navigation.state !== "idle";
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Editar Operador",
      subtitle: `Atualizando dados de ${user2.name}`,
      backLink: "/admin/users"
    }), /* @__PURE__ */ jsx(UserForm, {
      intent: "edit",
      defaultValues: user2
    })]
  }, "edit-user-main");
});
const route71 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$e,
  default: admin_users_$id_edit,
  loader: loader$e
}, Symbol.toStringTag, { value: "Module" }));
const loader$d = async () => {
  const routesData = await db.select().from(routes$1).orderBy(desc(routes$1.createdAt));
  return data({
    routes: routesData
  });
};
const action$d = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(routes$1).where(eq(routes$1.id, id));
    return data({
      success: true,
      message: "Rota exclu√≠da"
    });
  }
  if (intent === "toggle-status") {
    const currentStatus = formData.get("status") === "true";
    await db.update(routes$1).set({
      ativa: !currentStatus,
      updatedAt: /* @__PURE__ */ new Date()
    }).where(eq(routes$1.id, id));
    return data({
      success: true
    });
  }
  return null;
};
const admin_routes__index = UNSAFE_withComponentProps(function RoutesPage() {
  const {
    routes: initialRoutes
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const [busca, setBusca] = useState("");
  const [filtroTipo, setFiltroTipo] = useState("TODOS");
  const [statusTab, setStatusTab] = useState("TODOS");
  const routes2 = initialRoutes;
  const rotasFiltradas = routes2.filter((rota) => {
    const matchBusca = busca === "" || (rota.name || "").toLowerCase().includes(busca.toLowerCase());
    const matchTipo = filtroTipo === "TODOS" || rota.type === filtroTipo;
    const matchStatus = statusTab === "TODOS" || statusTab === "ATIVA" && rota.active || statusTab === "INATIVA" && !rota.active;
    return matchBusca && matchTipo && matchStatus;
  });
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gerenciamento de Rotas",
      subtitle: "Configura√ß√£o de itiner√°rios e percursos",
      icon: MapPinned,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/routes/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 2.5
          }), " NOVA ROTA"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total de Rotas",
        value: routes2.length,
        icon: Route,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Rotas Ativas",
        value: routes2.filter((r2) => r2.active).length,
        icon: MapPin,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Performance",
        value: "98%",
        icon: Gauge,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Inativas",
        value: routes2.filter((r2) => !r2.active).length,
        icon: TriangleAlert,
        variant: "amber"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      className: "lg:grid-cols-3",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Rota"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Nome da rota...",
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold",
            value: busca,
            onChange: (e) => setBusca(e.target.value)
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Tipo de Trajeto"
        }), /* @__PURE__ */ jsxs(Select, {
          value: filtroTipo,
          onValueChange: setFiltroTipo,
          children: [/* @__PURE__ */ jsx(SelectTrigger, {
            className: "h-14 w-full bg-muted/40 border-input rounded-xl font-bold",
            children: /* @__PURE__ */ jsx(SelectValue, {
              placeholder: "Tipo de Rota"
            })
          }), /* @__PURE__ */ jsxs(SelectContent, {
            className: "rounded-2xl border-none shadow-2xl bg-card/95 backdrop-blur-md",
            children: [/* @__PURE__ */ jsx(SelectItem, {
              value: "TODOS",
              children: "Todos os Tipos"
            }), /* @__PURE__ */ jsx(SelectItem, {
              value: "OUTBOUND",
              children: "Ida (Outbound)"
            }), /* @__PURE__ */ jsx(SelectItem, {
              value: "INBOUND",
              children: "Volta (Inbound)"
            })]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Visibilidade"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: statusTab,
          onValueChange: setStatusTab,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl px-4 font-black text-[10px] tracking-widest",
              children: "TODAS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "ATIVA",
              className: "flex-1 rounded-xl px-4 font-black text-[10px] tracking-widest",
              children: "ATIVAS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "INATIVA",
              className: "flex-1 rounded-xl px-4 font-black text-[10px] tracking-widest",
              children: "INATIVAS"
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 overflow-hidden rounded-[2.5rem] bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Identifica√ß√£o"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Tipo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-center",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 text-right h-14 text-table-head",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: rotasFiltradas.map((rota) => /* @__PURE__ */ jsxs(TableRow, {
            className: "group hover:bg-muted/20 border-border/30 transition-colors h-24",
            children: [/* @__PURE__ */ jsx(TableCell, {
              className: "pl-8",
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-4",
                children: [/* @__PURE__ */ jsx("div", {
                  className: cn$1("w-12 h-14 rounded-2xl flex items-center justify-center text-white shrink-0 shadow-lg", rota.active ? "bg-primary/20 text-primary" : "bg-muted text-muted-foreground"),
                  children: /* @__PURE__ */ jsx(Route, {
                    size: 20,
                    strokeWidth: 2.5
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  children: [/* @__PURE__ */ jsx("p", {
                    className: "font-semibold text-foreground text-base leading-none mb-1 group-hover:text-primary transition-colors",
                    children: rota.name || "Rota sem nome"
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-xs font-bold text-muted-foreground uppercase tracking-widest",
                    children: ["ID: ", rota.id.substring(0, 8)]
                  })]
                })]
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              children: /* @__PURE__ */ jsx(Badge$1, {
                variant: "outline",
                className: cn$1("rounded-xl font-semibold text-[12px] px-3 py-1 uppercase tracking-tighter shadow-sm", rota.type === "OUTBOUND" ? "bg-blue-500/10 text-blue-600" : "bg-orange-500/10 text-orange-600"),
                children: rota.type
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "text-center",
              children: /* @__PURE__ */ jsx(Badge$1, {
                className: cn$1("rounded-full font-semibold text-[12px] uppercase px-3 py-1 shadow-lg", rota.active ? "bg-emerald-500 text-white shadow-emerald-500/20" : "bg-muted-foreground/20 text-muted-foreground shadow-none"),
                children: rota.active ? "Ativa" : "Inativa"
              })
            }), /* @__PURE__ */ jsx(TableCell, {
              className: "pr-8 text-right",
              children: /* @__PURE__ */ jsxs("div", {
                className: "flex items-center justify-end gap-2",
                children: [/* @__PURE__ */ jsx(Button, {
                  asChild: true,
                  variant: "ghost",
                  size: "icon",
                  className: "rounded-xl hover:bg-muted/80 h-9 w-9",
                  children: /* @__PURE__ */ jsx(Link, {
                    to: `/admin/routes/${rota.id}`,
                    children: /* @__PURE__ */ jsx(SquarePen, {
                      size: 16
                    })
                  })
                }), /* @__PURE__ */ jsx(Button, {
                  variant: "ghost",
                  size: "icon",
                  onClick: () => fetcher.submit({
                    intent: "toggle-status",
                    id: rota.id,
                    status: rota.active
                  }, {
                    method: "post"
                  }),
                  className: "rounded-xl hover:bg-muted/80 h-9 w-9",
                  children: rota.active ? /* @__PURE__ */ jsx(ToggleRight, {
                    size: 18
                  }) : /* @__PURE__ */ jsx(ToggleLeft, {
                    size: 18
                  })
                }), /* @__PURE__ */ jsx(Button, {
                  variant: "ghost",
                  size: "icon",
                  onClick: () => fetcher.submit({
                    intent: "delete",
                    id: rota.id
                  }, {
                    method: "post"
                  }),
                  className: "rounded-xl h-9 w-9 text-destructive",
                  children: /* @__PURE__ */ jsx(Trash2, {
                    size: 16
                  })
                })]
              })
            })]
          }, rota.id))
        })]
      })
    })]
  }, "routes-main");
});
const route72 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$d,
  default: admin_routes__index,
  loader: loader$d
}, Symbol.toStringTag, { value: "Module" }));
const Progress = React.forwardRef(({ className, value, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn$1(
      "relative h-2 w-full overflow-hidden rounded-full bg-primary/20",
      className
    ),
    ...props,
    children: /* @__PURE__ */ jsx(
      "div",
      {
        className: "h-full w-full flex-1 bg-primary transition-all duration-300",
        style: { transform: `translateX(-${100 - (value || 0)}%)` }
      }
    )
  }
));
Progress.displayName = "Progress";
const VehicleActions = ({ veiculo, onUpdate }) => {
  const navigate = useNavigate();
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
  const [isDeleting, setIsDeleting] = useState(false);
  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      const response = await fetch(`/admin/fleet?intent=delete&id=${veiculo.id}`, {
        method: "POST"
      });
      if (!response.ok) {
        throw new Error("Failed to delete vehicle");
      }
      if (onUpdate) {
        onUpdate();
      }
    } catch (error) {
      console.error("Erro ao excluir ve√≠culo:", error);
      alert("Erro ao excluir ve√≠culo. Por favor, tente novamente.");
    } finally {
      setIsDeleting(false);
      setShowDeleteConfirm(false);
    }
  };
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs(DropdownMenu, { children: [
      /* @__PURE__ */ jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsxs(Button, { variant: "ghost", className: "h-10 w-10 p-0 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors", children: [
        /* @__PURE__ */ jsx("span", { className: "sr-only", children: "Abrir menu" }),
        /* @__PURE__ */ jsx(Ellipsis, { className: "h-5 w-5", strokeWidth: 2.5 })
      ] }) }),
      /* @__PURE__ */ jsxs(DropdownMenuContent, { align: "end", className: "w-56 p-2 rounded-2xl shadow-2xl border-none bg-card/95 backdrop-blur-md", children: [
        /* @__PURE__ */ jsx(DropdownMenuLabel, { className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2", children: "Opera√ß√µes" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => navigate(`/admin/fleet/${veiculo.id}`),
            className: "rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(Eye, { className: "h-4 w-4" }),
              "Ver Detalhes"
            ]
          }
        ),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => navigate(`/admin/fleet/edit/${veiculo.id}`),
            className: "rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(SquarePen, { className: "h-4 w-4" }),
              "Editar Ve√≠culo"
            ]
          }
        ),
        /* @__PURE__ */ jsx(DropdownMenuSeparator, { className: "bg-border/50 my-2" }),
        /* @__PURE__ */ jsxs(
          DropdownMenuItem,
          {
            onClick: () => setShowDeleteConfirm(true),
            className: "rounded-xl px-3 py-2.5 font-bold text-destructive focus:bg-destructive focus:text-destructive-foreground gap-3",
            children: [
              /* @__PURE__ */ jsx(Trash2, { className: "h-4 w-4" }),
              "Excluir Registro"
            ]
          }
        )
      ] })
    ] }),
    /* @__PURE__ */ jsx(Dialog, { open: showDeleteConfirm, onOpenChange: setShowDeleteConfirm, children: /* @__PURE__ */ jsxs(DialogContent, { className: "rounded-[2rem] border-none shadow-2xl max-w-sm p-8 bg-card/95 backdrop-blur-md", children: [
      /* @__PURE__ */ jsxs(DialogHeader, { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("div", { className: "mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center", children: /* @__PURE__ */ jsx(TriangleAlert, { className: "h-8 w-8 text-destructive", strokeWidth: 2.5 }) }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-center", children: [
          /* @__PURE__ */ jsx(DialogTitle, { className: "text-2xl font-black tracking-tight", children: "Confirmar Exclus√£o" }),
          /* @__PURE__ */ jsxs(DialogDescription, { className: "font-medium text-muted-foreground leading-relaxed", children: [
            "Voc√™ tem certeza que deseja excluir o ve√≠culo ",
            /* @__PURE__ */ jsx("span", { className: "text-foreground font-black tracking-tight", children: veiculo.placa }),
            "?",
            /* @__PURE__ */ jsx("br", {}),
            /* @__PURE__ */ jsx("span", { className: "text-xs uppercase font-black tracking-widest opacity-50", children: "Esta a√ß√£o √© irrevers√≠vel" })
          ] })
        ] })
      ] }),
      /* @__PURE__ */ jsxs(DialogFooter, { className: "mt-8 flex-col sm:flex-col gap-3", children: [
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "destructive",
            onClick: handleDelete,
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-base shadow-lg shadow-destructive/20 active:scale-95 transition-all",
            children: isDeleting ? /* @__PURE__ */ jsxs(Fragment, { children: [
              /* @__PURE__ */ jsx(LoaderCircle, { className: "mr-2 h-5 w-5 animate-spin" }),
              "EXCLUINDO..."
            ] }) : "EXCLUIR DEFINITIVAMENTE"
          }
        ),
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "ghost",
            onClick: () => setShowDeleteConfirm(false),
            disabled: isDeleting,
            className: "w-full h-12 rounded-2xl font-black tracking-tighter text-muted-foreground hover:bg-muted/50 transition-all",
            children: "CANCELAR"
          }
        )
      ] })
    ] }) })
  ] });
};
const loader$c = async () => {
  const vehiclesData = await db.select().from(vehicle).orderBy(desc(vehicle.createdAt));
  return data({
    vehicles: vehiclesData
  });
};
const action$c = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(vehicle).where(eq(vehicle.id, id));
    return data({
      success: true,
      message: "Ve√≠culo exclu√≠do"
    });
  }
  return null;
};
const StatusBadge$1 = ({
  status
}) => {
  const configs = {
    [VeiculoStatus.ACTIVE]: {
      label: VeiculoStatusLabel[VeiculoStatus.ACTIVE],
      icon: CircleCheckBig,
      className: "bg-emerald-500/10 text-emerald-600 border-emerald-500/20"
    },
    [VeiculoStatus.MAINTENANCE]: {
      label: VeiculoStatusLabel[VeiculoStatus.MAINTENANCE],
      icon: Wrench,
      className: "bg-amber-500/10 text-amber-600 border-amber-500/20"
    },
    [VeiculoStatus.IN_TRANSIT]: {
      label: VeiculoStatusLabel[VeiculoStatus.IN_TRANSIT],
      icon: TrendingUp,
      className: "bg-blue-500/10 text-blue-600 border-blue-500/20"
    }
  };
  const config2 = configs[status] || configs[VeiculoStatus.ACTIVE];
  const Icon2 = config2.icon || Bus;
  return /* @__PURE__ */ jsxs(Badge$1, {
    variant: "outline",
    className: cn$1("gap-1.5 font-bold px-2 py-0.5 rounded-xl", config2.className),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 12,
      strokeWidth: 2.5
    }), config2.label]
  });
};
const admin_fleet__index = UNSAFE_withComponentProps(function FleetPage() {
  const {
    vehicles: initialVehicles
  } = useLoaderData();
  const {
    currentContext
  } = useApp();
  useDateFormatter();
  const [filtroStatus, setFiltroStatus] = useState("TODOS");
  const [filtroTipo, setFiltroTipo] = useState("TODOS");
  const [busca, setBusca] = useState("");
  const navigate = useNavigate();
  const vehicles = initialVehicles;
  const veiculosFiltrados = vehicles.filter((v) => {
    const matchStatus = filtroStatus === "TODOS" || v.status === filtroStatus;
    const matchTipo = filtroTipo === "TODOS" || v.tipo === filtroTipo;
    const matchBusca = busca === "" || (v.placa || "").toLowerCase().includes(busca.toLowerCase()) || (v.modelo || "").toLowerCase().includes(busca.toLowerCase());
    return matchStatus && matchTipo && matchBusca;
  });
  const totalVeiculos = vehicles.length;
  const veiculosAtivos = vehicles.filter((v) => v.status === VeiculoStatus.ACTIVE).length;
  const veiculosEmViagem = vehicles.filter((v) => v.status === VeiculoStatus.IN_TRANSIT).length;
  const veiculosManutencao = vehicles.filter((v) => v.status === VeiculoStatus.MAINTENANCE).length;
  const calcularProgressoManutencao = (kmAtual, proximaRevisao) => {
    if (!proximaRevisao) return 0;
    const proximoManutencao = proximaRevisao - (kmAtual || 0);
    const progresso = 100 - proximoManutencao / 1e4 * 100;
    return Math.min(Math.max(progresso, 0), 100);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Frota",
      subtitle: "Controle operacional e manuten√ß√£o preventiva",
      icon: Bus,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/fleet/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 3
          }), "NOVA VE√çCULO"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total de Ve√≠culos",
        value: totalVeiculos,
        icon: Bus,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Frotas Ativas",
        value: veiculosAtivos,
        icon: CircleCheckBig,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Em Opera√ß√£o",
        value: veiculosEmViagem,
        icon: TrendingUp,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Manuten√ß√£o",
        value: veiculosManutencao,
        icon: Wrench,
        variant: "amber"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      gridClassName: "lg:grid-cols-3",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Ve√≠culo"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Placa ou modelo...",
            value: busca,
            onChange: (e) => setBusca(e.target.value),
            className: "pl-11 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Status Operacional"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: filtroStatus,
          onValueChange: setFiltroStatus,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: VeiculoStatus.ACTIVE,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "ATIVOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: VeiculoStatus.IN_TRANSIT,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "VIAGEM"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: VeiculoStatus.MAINTENANCE,
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest text-amber-600",
              children: "MANUT."
            })]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Categoria"
        }), /* @__PURE__ */ jsx(Tabs, {
          value: filtroTipo,
          onValueChange: setFiltroTipo,
          className: "w-full",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "TODOS",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "TODOS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "ONIBUS",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "√îNIBUS"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "CAMINHAO",
              className: "flex-1 rounded-xl font-black text-[10px] tracking-widest",
              children: "CAMINH√ïES"
            })]
          })
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "border-none shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Ve√≠culo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-center",
              children: "Tipo"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "KMs & Revis√£o"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head text-right",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: veiculosFiltrados.length === 0 ? /* @__PURE__ */ jsx(TableRow, {
            children: /* @__PURE__ */ jsxs(TableCell, {
              colSpan: 6,
              className: "h-64 text-center",
              children: [/* @__PURE__ */ jsx(Inbox, {
                className: "w-12 h-14 mx-auto text-muted-foreground/30"
              }), /* @__PURE__ */ jsx("p", {
                className: "font-bold text-sm text-muted-foreground",
                children: "Nenhum ve√≠culo encontrado"
              })]
            })
          }) : veiculosFiltrados.map((veiculo) => {
            const kmAt = Number(veiculo.km_atual || 0);
            const kmRev = Number(veiculo.proxima_revisao_km || 0);
            const progressoManutencao = calcularProgressoManutencao(kmAt, kmRev);
            const proximoManutencao = kmRev - kmAt;
            const alertaManutencao = proximoManutencao <= 5e3;
            return /* @__PURE__ */ jsxs(TableRow, {
              className: "group hover:bg-muted/20 border-border/30 transition-colors",
              children: [/* @__PURE__ */ jsx(TableCell, {
                className: "pl-8 py-5",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-4",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: cn$1("w-12 h-14 rounded-xl flex items-center justify-center text-white shadow-lg transition-transform group-hover:scale-110", veiculo.tipo === "ONIBUS" ? "bg-gradient-to-br from-blue-500 to-purple-600" : "bg-gradient-to-br from-orange-500 to-red-600 shadow-orange-500/20"),
                    children: veiculo.tipo === "ONIBUS" ? /* @__PURE__ */ jsx(Bus, {
                      size: 22
                    }) : /* @__PURE__ */ jsx(Truck, {
                      size: 22
                    })
                  }), /* @__PURE__ */ jsxs("div", {
                    className: "flex flex-col",
                    children: [/* @__PURE__ */ jsx("span", {
                      className: "font-semibold text-sm tracking-tight text-foreground",
                      children: veiculo.placa
                    }), /* @__PURE__ */ jsx("span", {
                      className: "text-[11px] font-bold text-muted-foreground/80",
                      children: veiculo.modelo
                    })]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                className: "text-center font-bold text-xs uppercase tracking-widest",
                children: veiculo.tipo
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsx(StatusBadge$1, {
                  status: veiculo.status
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex flex-col gap-2 w-48",
                  children: [/* @__PURE__ */ jsxs("div", {
                    className: "flex justify-between items-end",
                    children: [/* @__PURE__ */ jsxs("span", {
                      className: "text-sm font-semibold tracking-tight",
                      children: [kmAt.toLocaleString(), " KM"]
                    }), /* @__PURE__ */ jsxs("span", {
                      className: cn$1("text-xs font-semibold", alertaManutencao ? "text-orange-500" : "text-muted-foreground"),
                      children: [kmRev.toLocaleString(), " KM"]
                    })]
                  }), /* @__PURE__ */ jsx(Progress, {
                    value: progressoManutencao,
                    className: cn$1("h-1.5", alertaManutencao ? "bg-orange-500/10 [&>div]:bg-orange-500" : "bg-emerald-500/10 [&>div]:bg-emerald-500")
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                className: "text-right pr-8",
                children: /* @__PURE__ */ jsx(VehicleActions, {
                  veiculo,
                  onUpdate: () => navigate(".", {
                    replace: true
                  })
                })
              })]
            }, veiculo.id);
          })
        })]
      })
    })]
  }, "fleet-main");
});
const route73 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$c,
  default: admin_fleet__index,
  loader: loader$c
}, Symbol.toStringTag, { value: "Module" }));
const loader$b = async () => {
  const tripsData = await db.query.trips.findMany({
    with: {
      route: true
    },
    orderBy: [desc(trips.departure_date)]
  });
  return data({
    trips: tripsData,
    tags: []
  });
};
const action$b = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  if (intent === "delete") {
    await db.delete(trips).where(eq(trips.id, id));
    return data({
      success: true
    });
  }
  return null;
};
const StatusBadge = ({
  status
}) => {
  const configs = {
    [TripStatus.SCHEDULED]: {
      color: "yellow",
      icon: Clock,
      label: TripStatusLabel[TripStatus.SCHEDULED],
      class: "bg-amber-500/15 text-amber-700"
    },
    [TripStatus.BOARDING]: {
      color: "blue",
      icon: Loader,
      label: TripStatusLabel[TripStatus.BOARDING],
      class: "bg-blue-500/15 text-blue-700"
    },
    [TripStatus.IN_TRANSIT]: {
      color: "blue",
      icon: Loader,
      label: TripStatusLabel[TripStatus.IN_TRANSIT],
      class: "bg-indigo-500/15 text-indigo-700"
    },
    [TripStatus.COMPLETED]: {
      color: "slate",
      icon: CircleCheckBig,
      label: TripStatusLabel[TripStatus.COMPLETED],
      class: "bg-slate-500/15 text-slate-700"
    }
  };
  const config2 = configs[status] || configs[TripStatus.SCHEDULED];
  const Icon2 = config2.icon;
  return /* @__PURE__ */ jsxs(Badge$1, {
    variant: "outline",
    className: cn$1("flex items-center gap-1 font-bold px-2 py-0.5 rounded-full", config2.class),
    children: [/* @__PURE__ */ jsx(Icon2, {
      size: 12,
      className: status === TripStatus.BOARDING || status === TripStatus.IN_TRANSIT ? "animate-spin" : ""
    }), config2.label]
  });
};
const admin_trips__index = UNSAFE_withComponentProps(function TripsPage() {
  const {
    trips: initialTrips
  } = useLoaderData();
  const fetcher = useFetcher();
  const [filtroStatus, setFiltroStatus] = useState([]);
  const [busca, setBusca] = useState("");
  const [isStatusDropdownOpen, setIsStatusDropdownOpen] = useState(false);
  const [tripToDelete, setTripToDelete] = useState(null);
  const [isPassengerModalOpen, setIsPassengerModalOpen] = useState(false);
  const [selectedTripForPassengers, setSelectedTripForPassengers] = useState(null);
  const {
    formatDate
  } = useDateFormatter();
  const navigate = useNavigate();
  const trips2 = initialTrips;
  const filteredTrips = trips2.filter((v) => {
    var _a;
    const matchStatus = filtroStatus.length === 0 || filtroStatus.includes(v.status);
    const matchBusca = busca === "" || (((_a = v.route) == null ? void 0 : _a.name) || "").toLowerCase().includes(busca.toLowerCase());
    return matchStatus && matchBusca;
  });
  const statusOptions = [{
    value: TripStatus.SCHEDULED,
    label: TripStatusLabel[TripStatus.SCHEDULED]
  }, {
    value: TripStatus.BOARDING,
    label: TripStatusLabel[TripStatus.BOARDING]
  }, {
    value: TripStatus.IN_TRANSIT,
    label: TripStatusLabel[TripStatus.IN_TRANSIT]
  }, {
    value: TripStatus.COMPLETED,
    label: TripStatusLabel[TripStatus.COMPLETED]
  }];
  const toggleStatus = (status) => {
    setFiltroStatus((prev) => prev.includes(status) ? prev.filter((s) => s !== status) : [...prev, status]);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Quadro de Viagens",
      subtitle: "Monitoramento operacional de itiner√°rios ativos",
      icon: Bus,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-6 rounded-xl font-semibold gap-2 shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/trips/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            strokeWidth: 2.5
          }), " NOVA VIAGEM"]
        })
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Total Viagens",
        value: trips2.length,
        icon: Bus,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Agendadas",
        value: trips2.filter((v) => v.status === TripStatus.SCHEDULED).length,
        icon: Calendar$1,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Em Curso",
        value: trips2.filter((v) => v.status === TripStatus.IN_TRANSIT).length,
        icon: Loader,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Ocupa√ß√£o",
        value: "82%",
        icon: TrendingUp,
        variant: "amber"
      })]
    }), /* @__PURE__ */ jsxs(ListFilterSection, {
      className: "lg:grid-cols-3",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Buscar Rota"
        }), /* @__PURE__ */ jsxs("div", {
          className: "relative group flex-1",
          children: [/* @__PURE__ */ jsx(Search, {
            className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",
            size: 18
          }), /* @__PURE__ */ jsx(Input, {
            placeholder: "Nome da rota...",
            value: busca,
            onChange: (e) => setBusca(e.target.value),
            className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold"
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1.5 flex flex-col",
        children: [/* @__PURE__ */ jsx("label", {
          className: "text-label-caps ml-1",
          children: "Status Operacional"
        }), /* @__PURE__ */ jsxs(Popover, {
          open: isStatusDropdownOpen,
          onOpenChange: setIsStatusDropdownOpen,
          children: [/* @__PURE__ */ jsx(PopoverTrigger, {
            asChild: true,
            children: /* @__PURE__ */ jsxs(Button, {
              variant: "outline",
              className: "h-14 w-full bg-muted/40 border-input rounded-xl font-bold justify-between",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-2",
                children: [/* @__PURE__ */ jsx(Funnel, {
                  size: 16,
                  strokeWidth: 2.5
                }), /* @__PURE__ */ jsx("span", {
                  children: filtroStatus.length === 0 ? "Todos Status" : `${filtroStatus.length} selecionado(s)`
                })]
              }), /* @__PURE__ */ jsx(ChevronDown, {
                size: 16
              })]
            })
          }), /* @__PURE__ */ jsx(PopoverContent, {
            className: "w-[220px] p-2 rounded-xl shadow-2xl border-none",
            children: statusOptions.map((opt) => /* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2 p-2 hover:bg-muted rounded-lg cursor-pointer",
              onClick: () => toggleStatus(opt.value),
              children: [/* @__PURE__ */ jsx("div", {
                className: cn$1("w-4 h-4 rounded border-2", filtroStatus.includes(opt.value) ? "bg-primary" : "border-muted-foreground"),
                children: filtroStatus.includes(opt.value) && /* @__PURE__ */ jsx(Check, {
                  size: 12,
                  className: "text-white"
                })
              }), /* @__PURE__ */ jsx("span", {
                className: "text-xs font-bold",
                children: opt.label
              })]
            }, opt.value))
          })]
        })]
      })]
    }), /* @__PURE__ */ jsx(Card, {
      className: "shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",
      children: /* @__PURE__ */ jsxs(Table, {
        children: [/* @__PURE__ */ jsx(TableHeader, {
          className: "bg-muted/30",
          children: /* @__PURE__ */ jsxs(TableRow, {
            className: "hover:bg-transparent border-border/50",
            children: [/* @__PURE__ */ jsx(TableHead, {
              className: "pl-8 h-14 text-table-head",
              children: "Viagem / Rota"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Partida"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Ocupa√ß√£o"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "h-14 text-table-head",
              children: "Status"
            }), /* @__PURE__ */ jsx(TableHead, {
              className: "pr-8 text-right h-14 text-table-head",
              children: "A√ß√µes"
            })]
          })
        }), /* @__PURE__ */ jsx(TableBody, {
          children: filteredTrips.map((viagem) => {
            var _a, _b;
            return /* @__PURE__ */ jsxs(TableRow, {
              className: "group hover:bg-muted/20 border-border/30 transition-colors h-20",
              children: [/* @__PURE__ */ jsx(TableCell, {
                className: "pl-8",
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex flex-col",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "font-semibold text-sm tracking-tight",
                    children: ((_a = viagem.route) == null ? void 0 : _a.name) || "Rota Independente"
                  }), /* @__PURE__ */ jsxs("span", {
                    className: "text-[10px] font-bold text-muted-foreground uppercase",
                    children: ["ID: ", viagem.id.substring(0, 8)]
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-2 text-xs font-bold",
                  children: [/* @__PURE__ */ jsx(Calendar$1, {
                    size: 14,
                    className: "text-primary"
                  }), formatDate(viagem.departure_date), " - ", (_b = viagem.departure_time) == null ? void 0 : _b.substring(0, 5)]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-2",
                  children: [/* @__PURE__ */ jsx(Users, {
                    size: 14,
                    className: "text-muted-foreground"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "text-xs font-bold",
                    children: "---"
                  })]
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                children: /* @__PURE__ */ jsx(StatusBadge, {
                  status: viagem.status
                })
              }), /* @__PURE__ */ jsx(TableCell, {
                className: "pr-8 text-right",
                children: /* @__PURE__ */ jsxs(DropdownMenu, {
                  children: [/* @__PURE__ */ jsx(DropdownMenuTrigger, {
                    asChild: true,
                    children: /* @__PURE__ */ jsx(Button, {
                      variant: "ghost",
                      size: "icon",
                      className: "rounded-xl hover:bg-primary/10 transition-colors",
                      children: /* @__PURE__ */ jsx(Ellipsis, {
                        size: 18
                      })
                    })
                  }), /* @__PURE__ */ jsxs(DropdownMenuContent, {
                    align: "end",
                    className: "w-56 p-2 rounded-xl shadow-2xl border-none",
                    children: [/* @__PURE__ */ jsx(DropdownMenuItem, {
                      onClick: () => navigate(`/admin/trips/${viagem.id}`),
                      className: "rounded-xl h-11 font-bold",
                      children: "Editar Escala"
                    }), /* @__PURE__ */ jsx(DropdownMenuItem, {
                      onClick: () => setTripToDelete(viagem.id),
                      className: "rounded-xl h-11 font-bold text-destructive",
                      children: "Cancelar Viagem"
                    })]
                  })]
                })
              })]
            }, viagem.id);
          })
        })]
      })
    }), /* @__PURE__ */ jsx(AlertDialog, {
      open: !!tripToDelete,
      onOpenChange: (open) => !open && setTripToDelete(null),
      children: /* @__PURE__ */ jsxs(AlertDialogContent, {
        className: "rounded-3xl border-none shadow-2xl",
        children: [/* @__PURE__ */ jsxs(AlertDialogHeader, {
          children: [/* @__PURE__ */ jsx(AlertDialogTitle, {
            children: "Confirmar Cancelamento"
          }), /* @__PURE__ */ jsx(AlertDialogDescription, {
            children: "Esta a√ß√£o remover√° a escala permanentemente."
          })]
        }), /* @__PURE__ */ jsxs(AlertDialogFooter, {
          children: [/* @__PURE__ */ jsx(AlertDialogCancel, {
            className: "rounded-xl border-none font-bold",
            children: "Voltar"
          }), /* @__PURE__ */ jsx(AlertDialogAction, {
            onClick: () => tripToDelete && fetcher.submit({
              intent: "delete",
              id: tripToDelete
            }, {
              method: "post"
            }),
            className: "rounded-xl bg-destructive font-bold",
            children: "CANCELAR VIAGEM"
          })]
        })]
      })
    })]
  }, "trips-main");
});
const route74 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$b,
  default: admin_trips__index,
  loader: loader$b
}, Symbol.toStringTag, { value: "Module" }));
const loader$a = async ({
  request
}) => {
  const apiUrl = process.env.VITE_API_URL || "http://localhost:3001";
  const response = await fetch(`${apiUrl}/api/users`, {
    headers: {
      Cookie: request.headers.get("Cookie") || ""
    }
  });
  if (!response.ok) {
    throw new Response("Falha ao carregar usu√°rios", {
      status: response.status
    });
  }
  const users = await response.json();
  return data({
    users
  });
};
const action$a = async ({
  request
}) => {
  const formData = await request.formData();
  const intent = formData.get("intent");
  const id = formData.get("id");
  const apiUrl = process.env.VITE_API_URL || "http://localhost:3001";
  if (intent === "delete") {
    const response = await fetch(`${apiUrl}/api/users/${id}`, {
      method: "DELETE",
      headers: {
        Cookie: request.headers.get("Cookie") || ""
      }
    });
    if (!response.ok) {
      return data({
        success: false,
        message: "Erro ao excluir usu√°rio"
      }, {
        status: response.status
      });
    }
    return data({
      success: true,
      message: "Usu√°rio exclu√≠do"
    });
  }
  return null;
};
const RoleBadge = ({
  role
}) => {
  const config2 = {
    [UserRole.ADMIN]: {
      label: "ADMINISTRADOR",
      color: "purple"
    },
    [UserRole.FINANCEIRO]: {
      label: "FINANCEIRO",
      color: "green"
    },
    [UserRole.OPERACIONAL]: {
      label: "OPERACIONAL",
      color: "orange"
    },
    [UserRole.USER]: {
      label: "USU√ÅRIO",
      color: "blue"
    }
  };
  const {
    label,
    color
  } = config2[role] || config2[UserRole.USER];
  return /* @__PURE__ */ jsxs("span", {
    className: cn$1("inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-lg text-[9px] font-black tracking-widest border-none", color === "purple" ? "bg-purple-100 text-purple-700" : color === "green" ? "bg-emerald-100 text-emerald-700" : color === "orange" ? "bg-amber-100 text-amber-700" : "bg-blue-100 text-blue-700"),
    children: [/* @__PURE__ */ jsx(Shield, {
      size: 10,
      strokeWidth: 3
    }), label]
  });
};
const admin_users__index = UNSAFE_withComponentProps(function UsersPage() {
  const {
    users: initialUsers
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const [busca, setBusca] = useState("");
  const [resetPasswordUser, setResetPasswordUser] = useState(null);
  const [newPassword, setNewPassword] = useState("");
  const users = initialUsers;
  const usersFiltrados = users.filter((user2) => (user2.name || "").toLowerCase().includes(busca.toLowerCase()) || (user2.email || "").toLowerCase().includes(busca.toLowerCase()));
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in duration-500 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Gest√£o de Usu√°rios",
      subtitle: "Seguran√ßa e controle de permiss√µes",
      icon: User,
      rightElement: /* @__PURE__ */ jsx(Button, {
        asChild: true,
        className: "h-14 px-8 rounded-xl font-black uppercase text-[12px] shadow-lg shadow-primary/20",
        children: /* @__PURE__ */ jsxs(Link, {
          to: "/admin/users/new",
          children: [/* @__PURE__ */ jsx(Plus, {
            size: 20,
            className: "mr-2",
            strokeWidth: 3
          }), " NOVO USU√ÅRIO"]
        })
      })
    }), /* @__PURE__ */ jsx(ListFilterSection, {
      children: /* @__PURE__ */ jsxs("div", {
        className: "relative flex-1 group",
        children: [/* @__PURE__ */ jsx(Search, {
          size: 18,
          className: "absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary"
        }), /* @__PURE__ */ jsx(Input, {
          placeholder: "Buscar por nome ou email...",
          value: busca,
          onChange: (e) => setBusca(e.target.value),
          className: "pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold"
        })]
      })
    }), /* @__PURE__ */ jsx("div", {
      className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",
      children: usersFiltrados.length === 0 ? /* @__PURE__ */ jsxs("div", {
        className: "col-span-full py-20 text-center opacity-40",
        children: [/* @__PURE__ */ jsx(User, {
          size: 48,
          className: "mx-auto mb-4"
        }), /* @__PURE__ */ jsx("p", {
          className: "font-bold",
          children: "Nenhum usu√°rio encontrado"
        })]
      }) : usersFiltrados.map((user2) => {
        var _a;
        return /* @__PURE__ */ jsxs(Card, {
          className: "shadow-sm p-6 hover:shadow-xl transition-all border-border/40 rounded-3xl group",
          children: [/* @__PURE__ */ jsx("div", {
            className: "flex justify-between items-start mb-6",
            children: /* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-4",
              children: [/* @__PURE__ */ jsx("div", {
                className: "w-14 h-14 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-xl",
                children: ((_a = user2.name) == null ? void 0 : _a.charAt(0)) || "?"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsx("h3", {
                  className: "text-lg font-black tracking-tighter leading-none",
                  children: user2.name
                }), /* @__PURE__ */ jsx(RoleBadge, {
                  role: user2.role
                })]
              })]
            })
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-3 mb-8 text-sm text-muted-foreground font-medium",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsx(Mail, {
                size: 16
              }), " ", /* @__PURE__ */ jsx("span", {
                className: "truncate",
                children: user2.email
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsx(Calendar$1, {
                size: 16
              }), " ", /* @__PURE__ */ jsxs("span", {
                children: ["Membro desde ", new Date(user2.createdAt).toLocaleDateString()]
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex gap-2 pt-4 border-t border-border/50",
            children: [/* @__PURE__ */ jsx(Button, {
              asChild: true,
              variant: "ghost",
              className: "flex-1 h-11 bg-muted/20 hover:bg-primary/10 hover:text-primary rounded-xl font-bold transition-all",
              children: /* @__PURE__ */ jsxs(Link, {
                to: `/admin/users/${user2.id}/edit`,
                children: [/* @__PURE__ */ jsx(SquarePen, {
                  size: 16,
                  className: "mr-2"
                }), " EDITAR"]
              })
            }), /* @__PURE__ */ jsx(Button, {
              onClick: () => setResetPasswordUser(user2),
              variant: "ghost",
              className: "w-11 h-11 p-0 bg-amber-500/10 hover:bg-amber-500/20 text-amber-600 rounded-xl transition-all",
              children: /* @__PURE__ */ jsx(Key, {
                size: 16
              })
            }), /* @__PURE__ */ jsx(Button, {
              onClick: () => fetcher.submit({
                intent: "delete",
                id: user2.id
              }, {
                method: "post"
              }),
              variant: "ghost",
              className: "w-11 h-11 p-0 bg-rose-500/10 hover:bg-rose-500/20 text-rose-600 rounded-xl transition-all",
              children: /* @__PURE__ */ jsx(Trash2, {
                size: 16
              })
            })]
          })]
        }, user2.id);
      })
    })]
  });
});
const route75 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$a,
  default: admin_users__index,
  loader: loader$a
}, Symbol.toStringTag, { value: "Module" }));
const MapaAssentos = ({ veiculo, seats = [], onSave }) => {
  const [showUpperDeck, setShowUpperDeck] = useState(false);
  const [hasSeatPlan, setHasSeatPlan] = useState(true);
  const [driverPosition, setDriverPosition] = useState("Left");
  const [activeTab, setActiveTab] = useState("LOWER");
  const [deckDims, setDeckDims] = useState({
    LOWER: { rows: 8, cols: 5 },
    UPPER: { rows: 8, cols: 5 }
  });
  const seatRows = deckDims[activeTab].rows;
  const seatColumns = deckDims[activeTab].cols;
  const setSeatRows = (val) => {
    setDeckDims((prev) => ({ ...prev, [activeTab]: { ...prev[activeTab], rows: val } }));
  };
  const setSeatColumns = (val) => {
    setDeckDims((prev) => ({ ...prev, [activeTab]: { ...prev[activeTab], cols: val } }));
  };
  const [lowerDeckSeats, setLowerDeckSeats] = useState([]);
  const [upperDeckSeats, setUpperDeckSeats] = useState([]);
  const [editMode, setEditMode] = useState("NUMBER");
  const [selectedType, setSelectedType] = useState(TipoAssento.CONVENCIONAL);
  const [seatTypes, setSeatTypes] = useState({});
  const [seatStatuses, setSeatStatuses] = useState({});
  const SEAT_COLORS = {
    [TipoAssento.CONVENCIONAL]: "bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600",
    [TipoAssento.EXECUTIVO]: "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700",
    [TipoAssento.SEMI_LEITO]: "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700",
    [TipoAssento.LEITO]: "bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-700",
    [TipoAssento.CAMA]: "bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-700",
    [TipoAssento.CAMA_MASTER]: "bg-rose-50 dark:bg-rose-900/20 border-rose-200 dark:border-rose-700",
    [TipoAssento.BLOQUEADO]: "bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700"
  };
  useEffect(() => {
    loadSavedSeats();
  }, [seats]);
  const loadSavedSeats = () => {
    if (!seats || seats.length === 0) return;
    try {
      let maxRowL = 0;
      let maxColL = 0;
      let maxRowU = 0;
      let maxColU = 0;
      const types = {};
      seats.forEach((seat2) => {
        if (seat2.posicao_x < 0 || seat2.posicao_y < 0) return;
        if (!seat2.disabled && !seat2.numero.startsWith("DISABLED_")) {
          if (seat2.andar === 1) {
            if (seat2.posicao_y > maxRowL) maxRowL = seat2.posicao_y;
            if (seat2.posicao_x > maxColL) maxColL = seat2.posicao_x;
          } else {
            if (seat2.posicao_y > maxRowU) maxRowU = seat2.posicao_y;
            if (seat2.posicao_x > maxColU) maxColU = seat2.posicao_x;
          }
        }
        if (seat2.numero && !seat2.numero.startsWith("DISABLED_")) {
          types[seat2.numero] = seat2.tipo;
        }
      });
      setSeatTypes(types);
      setDeckDims({
        LOWER: { rows: maxRowL + 1, cols: maxColL + 1 },
        UPPER: { rows: maxRowU + 1, cols: maxColU + 1 }
      });
      const hasUpper = seats.some((s) => s.andar === 2);
      setShowUpperDeck(hasUpper);
      const lower = Array(maxRowL + 1).fill(null).map(() => Array(maxColL + 1).fill(""));
      const upper = hasUpper ? Array(maxRowU + 1).fill(null).map(() => Array(maxColU + 1).fill("")) : [];
      seats.forEach((seat2) => {
        const grid = seat2.andar === 1 ? lower : upper;
        const mRow = seat2.andar === 1 ? maxRowL : maxRowU;
        const mCol = seat2.andar === 1 ? maxColL : maxColU;
        if (grid && grid.length > 0 && seat2.posicao_y >= 0 && seat2.posicao_y <= mRow && seat2.posicao_x >= 0 && seat2.posicao_x <= mCol && grid[seat2.posicao_y]) {
          if (seat2.disabled || seat2.numero && seat2.numero.startsWith("DISABLED_")) {
            grid[seat2.posicao_y][seat2.posicao_x] = "";
          } else {
            grid[seat2.posicao_y][seat2.posicao_x] = seat2.numero || "";
          }
        }
      });
      const statuses = {};
      seats.forEach((seat2) => {
        if (seat2.numero) {
          statuses[seat2.numero] = seat2.status;
        }
      });
      setSeatStatuses(statuses);
      const detectCorridors = (grid) => {
        if (!grid || grid.length === 0) return;
        const numCols = grid[0].length;
        for (let c = 0; c < numCols; c++) {
          let isColumnEmpty = true;
          for (let r2 = 0; r2 < grid.length; r2++) {
            if (grid[r2][c] !== "" && grid[r2][c] !== "Driver") {
              isColumnEmpty = false;
              break;
            }
          }
          if (isColumnEmpty) {
            for (let r2 = 0; r2 < grid.length; r2++) {
              grid[r2][c] = "Blank";
            }
          }
        }
      };
      detectCorridors(lower);
      if (hasUpper) detectCorridors(upper);
      setLowerDeckSeats(lower);
      setUpperDeckSeats(upper);
    } catch (error) {
      console.error("Error loading saved seats:", error);
    }
  };
  const generateBusSeats = (isUpperDeck = false) => {
    const seats2 = [];
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    for (let row = 0; row < seatRows; row++) {
      const rowSeats = [];
      const rowLetter = letters[row];
      for (let col = 0; col < seatColumns; col++) {
        if (col === Math.floor(seatColumns / 2)) {
          rowSeats.push("Blank");
        } else {
          const seatNumber = col < Math.floor(seatColumns / 2) ? col + 1 : col;
          const prefix = isUpperDeck ? "S" : "T";
          rowSeats.push(`${prefix}${rowLetter}${seatNumber}`);
        }
      }
      seats2.push(rowSeats);
    }
    if (isUpperDeck) {
      setUpperDeckSeats(seats2);
    } else {
      setLowerDeckSeats(seats2);
    }
  };
  const addNewRow = (isUpperDeck = false) => {
    const currentSeats = isUpperDeck ? upperDeckSeats : lowerDeckSeats;
    const setSeats = isUpperDeck ? setUpperDeckSeats : setLowerDeckSeats;
    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    const rowLetter = letters[currentSeats.length];
    const newRow = [];
    for (let col = 0; col < seatColumns; col++) {
      if (col === Math.floor(seatColumns / 2)) {
        newRow.push("Blank");
      } else {
        const seatNumber = col < Math.floor(seatColumns / 2) ? col + 1 : col;
        const prefix = isUpperDeck ? "S" : "T";
        newRow.push(`${prefix}${rowLetter}${seatNumber}`);
      }
    }
    setSeats([...currentSeats, newRow]);
  };
  const deleteRow = (rowIndex, isUpperDeck = false) => {
    const currentSeats = isUpperDeck ? upperDeckSeats : lowerDeckSeats;
    const setSeats = isUpperDeck ? setUpperDeckSeats : setLowerDeckSeats;
    const newSeats = currentSeats.filter((_, index) => index !== rowIndex);
    setSeats(newSeats);
  };
  const updateSeatName = (rowIndex, colIndex, newName, isUpperDeck = false) => {
    const currentSeats = isUpperDeck ? upperDeckSeats : lowerDeckSeats;
    const setSeats = isUpperDeck ? setUpperDeckSeats : setLowerDeckSeats;
    const newSeats = currentSeats.map((row, rIdx) => {
      if (rIdx === rowIndex) {
        return row.map((seat2, cIdx) => cIdx === colIndex ? newName : seat2);
      }
      return row;
    });
    setSeats(newSeats);
  };
  const handleSeatClick = (seatNumber) => {
    if (editMode === "TYPE" && seatNumber !== "Blank") {
      setSeatTypes((prev) => ({
        ...prev,
        [seatNumber]: selectedType
      }));
    }
  };
  const getSeatType = (seatNumber) => seatTypes[seatNumber] || TipoAssento.CONVENCIONAL;
  const handleSave = () => {
    const allSeats = [];
    const processDeck = (seats2, deck) => {
      seats2.forEach((row, rowIndex) => {
        row.forEach((seat2, colIndex) => {
          if (seat2 === "Blank" || seat2 === "Driver") {
            return;
          }
          const isEmpty = seat2.trim() === "";
          const tipo = seatTypes[seat2] || TipoAssento.CONVENCIONAL;
          const isCommerciallyBlocked = tipo === TipoAssento.BLOQUEADO;
          const isStructurallyDisabled = isEmpty;
          allSeats.push({
            numero: isEmpty ? `DISABLED_D${deck}_R${rowIndex}_C${colIndex}` : seat2.trim(),
            andar: deck,
            posicao_x: colIndex,
            posicao_y: rowIndex,
            tipo,
            status: isCommerciallyBlocked || isStructurallyDisabled ? AssentoStatus.BLOQUEADO : seatStatuses[seat2.trim()] || AssentoStatus.LIVRE,
            disabled: isStructurallyDisabled
          });
        });
      });
    };
    processDeck(lowerDeckSeats, 1);
    if (veiculo.is_double_deck) {
      processDeck(upperDeckSeats, 2);
    }
    if (onSave) {
      onSave(allSeats);
    } else {
      console.log("Assentos salvos:", allSeats);
      alert("Configura√ß√£o salva com sucesso! (Verifique o console)");
    }
  };
  const renderSeatGrid = (seats2, isUpperDeck = false, deckName) => {
    if (seats2.length === 0) {
      return /* @__PURE__ */ jsx("div", { className: "text-center py-8 text-slate-500 dark:text-slate-400", children: /* @__PURE__ */ jsxs("p", { children: [
        'Clique em "Gerar Assentos" para criar o layout do ',
        deckName
      ] }) });
    }
    return /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("div", { className: "overflow-x-auto pb-4 pr-16", children: /* @__PURE__ */ jsxs("div", { className: "space-y-3 min-w-max flex flex-col items-center", children: [
        /* @__PURE__ */ jsx("div", { className: "mb-4", children: /* @__PURE__ */ jsx("div", { className: "inline-block px-6 py-2 bg-slate-200 dark:bg-slate-700 rounded-lg", children: /* @__PURE__ */ jsxs("p", { className: "font-bold text-slate-800 dark:text-white flex items-center gap-2", children: [
          /* @__PURE__ */ jsx(Bus, { size: 20 }),
          "Frente do √înibus"
        ] }) }) }),
        seats2.map((row, rowIndex) => /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsx("div", { className: "w-[42px] flex-shrink-0 opacity-0 pointer-events-none", "aria-hidden": "true" }),
          row.map((seat2, colIndex) => {
            const isEmpty = seat2.trim() === "";
            const isBlank = seat2 === "Blank";
            if (isBlank) {
              return /* @__PURE__ */ jsx("div", { className: "w-14 h-14 flex items-center justify-center", children: /* @__PURE__ */ jsx("div", { className: "w-full h-full flex items-center justify-center bg-slate-50/50 dark:bg-slate-800/30 border-x-2 border-dashed border-slate-200 dark:border-slate-700 rounded-sm", children: /* @__PURE__ */ jsx("span", { className: "text-[9px] text-slate-300 dark:text-slate-600 font-bold tracking-widest rotate-90 select-none whitespace-nowrap", children: "CORREDOR" }) }) }, colIndex);
            } else if (isEmpty && editMode !== "NUMBER") {
              return /* @__PURE__ */ jsx("div", { className: "w-14 h-14 flex items-center justify-center", children: /* @__PURE__ */ jsx("div", { className: "w-full h-full flex items-center justify-center bg-slate-100 dark:bg-slate-700 border-2 border-slate-300 dark:border-slate-600 rounded-lg opacity-50", children: /* @__PURE__ */ jsx(X, { size: 20, className: "text-slate-400 dark:text-slate-500" }) }) }, colIndex);
            } else {
              return /* @__PURE__ */ jsxs(
                "div",
                {
                  className: "relative group cursor-pointer",
                  onClick: () => handleSeatClick(seat2),
                  children: [
                    /* @__PURE__ */ jsx("div", { className: `w-14 h-14 rounded-lg transition-all duration-200 border-2 shadow-sm flex items-center justify-center ${SEAT_COLORS[getSeatType(seat2)]} ${editMode === "TYPE" ? "hover:ring-2 hover:ring-offset-2 ring-blue-500" : ""}`, children: editMode === "NUMBER" ? /* @__PURE__ */ jsx(
                      "input",
                      {
                        type: "text",
                        value: seat2,
                        onChange: (e) => updateSeatName(rowIndex, colIndex, e.target.value, isUpperDeck),
                        className: "w-full h-full bg-transparent text-center text-sm font-bold text-slate-700 dark:text-slate-200 focus:outline-none",
                        placeholder: "..."
                      }
                    ) : /* @__PURE__ */ jsx("span", { className: "text-sm font-bold text-slate-700 dark:text-slate-200 select-none", children: seat2 }) }),
                    /* @__PURE__ */ jsx("div", { className: "absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white text-[12px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10", children: isEmpty || seatStatuses[seat2] === "BLOQUEADO" ? "BLOQUEADO" : getSeatType(seat2).replace("_", " ") })
                  ]
                },
                colIndex
              );
            }
          }),
          /* @__PURE__ */ jsx("div", { className: "flex gap-2 flex-shrink-0 ml-4 opacity-50 hover:opacity-100 transition-opacity w-[42px] justify-center", children: /* @__PURE__ */ jsx(
            "button",
            {
              onClick: () => deleteRow(rowIndex, isUpperDeck),
              className: "p-2 bg-slate-100 hover:bg-red-100 text-slate-400 hover:text-red-600 rounded-lg transition-colors border border-slate-200 hover:border-red-200",
              title: "Deletar linha",
              children: /* @__PURE__ */ jsx(X, { size: 16 })
            }
          ) })
        ] }, rowIndex))
      ] }) }),
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: () => addNewRow(isUpperDeck),
          className: "w-full px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 hover:border-blue-500 dark:hover:border-blue-400 text-slate-500 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 rounded-xl font-medium transition-all flex items-center justify-center gap-2 group",
          children: [
            /* @__PURE__ */ jsx("div", { className: "bg-slate-100 dark:bg-slate-700 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30 p-1 rounded-full transition-colors", children: /* @__PURE__ */ jsx(Plus, { size: 16 }) }),
            "Adicionar Nova Linha"
          ]
        }
      )
    ] });
  };
  return /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsx("h2", { className: "text-xl font-bold text-slate-800 dark:text-white mb-1", children: "Configura√ß√£o de Assentos" }),
      /* @__PURE__ */ jsx("p", { className: "text-sm text-slate-500 dark:text-slate-400", children: "Configure o layout dos assentos do √¥nibus." })
    ] }),
    /* @__PURE__ */ jsxs("div", { children: [
      /* @__PURE__ */ jsxs("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: [
        "Tipo de Plano ",
        /* @__PURE__ */ jsx("span", { className: "text-red-500", children: "*" })
      ] }),
      /* @__PURE__ */ jsxs(
        "select",
        {
          className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500",
          value: hasSeatPlan ? "Com Plano de Assentos" : "Sem Plano de Assentos",
          onChange: (e) => setHasSeatPlan(e.target.value === "Com Plano de Assentos"),
          children: [
            /* @__PURE__ */ jsx("option", { value: "Com Plano de Assentos", children: "Com Plano de Assentos" }),
            /* @__PURE__ */ jsx("option", { value: "Sem Plano de Assentos", children: "Sem Plano de Assentos" })
          ]
        }
      ),
      /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400 mt-1", children: "Selecione o tipo de plano - Padr√£o: Sem Plano de Assentos" })
    ] }),
    hasSeatPlan ? /* @__PURE__ */ jsxs(Fragment, { children: [
      /* @__PURE__ */ jsx("div", { className: "border-b border-slate-200 dark:border-slate-700 mb-6", children: /* @__PURE__ */ jsxs("nav", { className: "-mb-px flex space-x-8", "aria-label": "Tabs", children: [
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setActiveTab("LOWER"),
            className: `
                                    group inline-flex items-center py-4 px-1 border-b-2 font-bold text-lg transition-all duration-200
                                    ${activeTab === "LOWER" ? "border-blue-500 text-blue-600 dark:text-blue-400" : "border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}
                                `,
            children: [
              /* @__PURE__ */ jsx("span", { className: `flex items-center justify-center w-6 h-6 rounded-full mr-3 text-xs ${activeTab === "LOWER" ? "bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400" : "bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-700"}`, children: "1" }),
              "Andar T√©rreo"
            ]
          }
        ),
        veiculo.is_double_deck && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => setActiveTab("UPPER"),
            className: `
                                        group inline-flex items-center py-4 px-1 border-b-2 font-bold text-lg transition-all duration-200
                                        ${activeTab === "UPPER" ? "border-purple-500 text-purple-600 dark:text-purple-400" : "border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}
                                    `,
            children: [
              /* @__PURE__ */ jsx("span", { className: `flex items-center justify-center w-6 h-6 rounded-full mr-3 text-xs ${activeTab === "UPPER" ? "bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-blue-400" : "bg-slate-100 text-slate-500 dark:bg-slate-800 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-700"}`, children: "2" }),
              "Andar Superior"
            ]
          }
        )
      ] }) }),
      /* @__PURE__ */ jsxs("div", { className: "mt-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm p-6 mb-6", children: [
          /* @__PURE__ */ jsxs("h4", { className: "font-bold text-slate-700 dark:text-slate-200 mb-4", children: [
            "Par√¢metros de Gera√ß√£o (",
            activeTab === "LOWER" ? "T√©rreo" : "Superior",
            ")"
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: "Posi√ß√£o do Motorista" }),
              /* @__PURE__ */ jsxs(
                "select",
                {
                  value: driverPosition,
                  onChange: (e) => setDriverPosition(e.target.value),
                  className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500",
                  children: [
                    /* @__PURE__ */ jsx("option", { value: "Left", children: "Esquerda" }),
                    /* @__PURE__ */ jsx("option", { value: "Right", children: "Direita" })
                  ]
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: "Linhas de Assentos" }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  type: "number",
                  value: seatRows,
                  onChange: (e) => setSeatRows(parseInt(e.target.value) || 0),
                  min: "1",
                  max: "20",
                  className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsx("label", { className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2", children: "Colunas de Assentos" }),
              /* @__PURE__ */ jsx(
                "input",
                {
                  type: "number",
                  value: seatColumns,
                  onChange: (e) => setSeatColumns(parseInt(e.target.value) || 0),
                  min: "3",
                  max: "7",
                  step: "2",
                  className: "w-full p-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500"
                }
              ),
              /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400 mt-1", children: "Use n√∫meros √≠mpares (3, 5, 7) para corredor central" })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm mb-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-slate-100 dark:border-slate-700 pb-4 mb-4", children: [
            /* @__PURE__ */ jsxs("div", { children: [
              /* @__PURE__ */ jsxs("h3", { className: "font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2", children: [
                /* @__PURE__ */ jsx(MousePointer2, { size: 18, className: "text-blue-500" }),
                "Ferramentas de Edi√ß√£o"
              ] }),
              /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-500 dark:text-slate-400 mt-1", children: "Escolha uma ferramenta para interagir com o mapa" })
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "flex bg-slate-100 dark:bg-slate-900 p-1 rounded-lg", children: [
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: () => setEditMode("NUMBER"),
                  className: `px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${editMode === "NUMBER" ? "bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 shadow-sm" : "text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,
                  children: [
                    /* @__PURE__ */ jsx(Type, { size: 16 }),
                    "Numera√ß√£o"
                  ]
                }
              ),
              /* @__PURE__ */ jsxs(
                "button",
                {
                  onClick: () => setEditMode("TYPE"),
                  className: `px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${editMode === "TYPE" ? "bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 shadow-sm" : "text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,
                  children: [
                    /* @__PURE__ */ jsx(PaintBucket, { size: 16 }),
                    "Tipos"
                  ]
                }
              )
            ] })
          ] }),
          editMode === "TYPE" && /* @__PURE__ */ jsxs("div", { className: "animate-in fade-in slide-in-from-top-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-100 dark:border-slate-700/50", children: [
            /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-slate-700 dark:text-slate-300 mb-3", children: "Selecione um tipo de assento para aplicar:" }),
            /* @__PURE__ */ jsx("div", { className: "flex flex-wrap gap-2", children: Object.values(TipoAssento).map((tipo) => /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: () => setSelectedType(tipo),
                className: `px-3 py-2 rounded-lg border text-sm font-medium transition-all flex items-center gap-2 ${selectedType === tipo ? "ring-2 ring-blue-500 ring-offset-2 " + SEAT_COLORS[tipo] : "hover:bg-white dark:hover:bg-slate-800 border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300"}`,
                children: [
                  /* @__PURE__ */ jsx("div", { className: `w-3 h-3 rounded-full border border-slate-300 ${SEAT_COLORS[tipo].split(" ")[0]}` }),
                  tipo.replace("_", " ")
                ]
              },
              tipo
            )) })
          ] })
        ] }),
        activeTab === "LOWER" && /* @__PURE__ */ jsxs("div", { className: "animate-in fade-in slide-in-from-left-2 duration-300", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mb-6", children: [
            /* @__PURE__ */ jsx("h4", { className: "text-lg font-bold text-slate-800 dark:text-white", children: "Mapa do Andar T√©rreo" }),
            /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: () => generateBusSeats(false),
                className: "px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-lg font-semibold transition-all shadow-sm hover:shadow-md flex items-center gap-2",
                children: [
                  /* @__PURE__ */ jsx(Plus, { size: 18 }),
                  "Gerar Assentos T√©rreo"
                ]
              }
            )
          ] }),
          renderSeatGrid(lowerDeckSeats, false, "andar t√©rreo")
        ] }),
        activeTab === "UPPER" && veiculo.is_double_deck && /* @__PURE__ */ jsxs("div", { className: "animate-in fade-in slide-in-from-right-2 duration-300", children: [
          /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mb-6", children: [
            /* @__PURE__ */ jsx("h4", { className: "text-lg font-bold text-slate-800 dark:text-white", children: "Mapa do Andar Superior" }),
            /* @__PURE__ */ jsxs(
              "button",
              {
                onClick: () => generateBusSeats(true),
                className: "px-6 py-2.5 bg-purple-600 hover:bg-purple-500 text-white rounded-lg font-semibold transition-all shadow-sm hover:shadow-md flex items-center gap-2",
                children: [
                  /* @__PURE__ */ jsx(Plus, { size: 18 }),
                  "Gerar Assentos Superior"
                ]
              }
            )
          ] }),
          renderSeatGrid(upperDeckSeats, true, "andar superior")
        ] })
      ] })
    ] }) : /* @__PURE__ */ jsxs("div", { className: "bg-slate-50 dark:bg-slate-900 rounded-lg p-8 text-center border border-slate-200 dark:border-slate-700 border-dashed", children: [
      /* @__PURE__ */ jsx("p", { className: "text-slate-500 dark:text-slate-400 mb-2", children: "Este ve√≠culo opera sem lugares marcados." }),
      /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-400 dark:text-slate-500", children: "A capacidade total ser√° usada para controle de lota√ß√£o." })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700", children: [
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: () => {
            if (confirm("Tem certeza que deseja limpar todos os assentos?")) {
              setLowerDeckSeats([]);
              setUpperDeckSeats([]);
            }
          },
          className: "px-6 py-2 bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg font-semibold transition-colors flex items-center gap-2",
          children: [
            /* @__PURE__ */ jsx(X, { size: 18 }),
            "Limpar Tudo"
          ]
        }
      ),
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: handleSave,
          className: "px-6 py-2 bg-green-600 hover:bg-green-500 text-white rounded-lg font-semibold transition-colors flex items-center gap-2 shadow-sm",
          children: [
            /* @__PURE__ */ jsx(Save, { size: 18 }),
            "Salvar Configura√ß√£o"
          ]
        }
      )
    ] })
  ] });
};
const loader$9 = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const vehicle$1 = await db.query.vehicle.findFirst({
    where: eq(vehicle.id, id),
    with: {
      seats: true,
      maintenances: {
        orderBy: desc(maintenance.scheduledDate)
      },
      trips: {
        orderBy: desc(trips.departure_date),
        limit: 10,
        with: {
          route: true
        }
      }
    }
  });
  if (!vehicle$1) throw new Response("Ve√≠culo n√£o encontrado", {
    status: 404
  });
  return data({
    vehicle: vehicle$1
  });
};
const admin_vehicles_$id = UNSAFE_withComponentProps(function VehicleDetailPage() {
  var _a;
  const {
    vehicle: vehicle2
  } = useLoaderData();
  const [activeTab, setActiveTab] = useState("info");
  const isOnibus = vehicle2.tipo === "ONIBUS";
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: vehicle2.placa,
      subtitle: `${vehicle2.modelo} ${vehicle2.is_double_deck ? "‚Ä¢ DOUBLE DECK" : ""}`,
      backLink: "/admin/fleet",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex gap-3",
        children: [/* @__PURE__ */ jsx(Button, {
          variant: "outline",
          asChild: true,
          className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px] border-border/50",
          children: /* @__PURE__ */ jsxs(Link, {
            to: `/admin/fleet/edit/${vehicle2.id}`,
            children: [/* @__PURE__ */ jsx(SquarePen, {
              size: 18,
              className: "mr-2"
            }), " Editar Ficha"]
          })
        }), /* @__PURE__ */ jsx(Button, {
          className: "h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20",
          children: "BAIXAR RELAT√ìRIO T√âCNICO"
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "KM Atual",
        value: ((_a = vehicle2.km_atual) == null ? void 0 : _a.toLocaleString()) || "0",
        icon: Gauge,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Status",
        value: vehicle2.status,
        icon: Clock,
        variant: vehicle2.status === VeiculoStatus.ACTIVE ? "emerald" : "indigo"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Capacidade",
        value: `${vehicle2.capacity || 0} Lugares`,
        icon: Users,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Pr√≥xima Revis√£o",
        value: `${(vehicle2.km_atual || 0) + 1e4} km`,
        icon: Wrench,
        variant: "amber"
      })]
    }), /* @__PURE__ */ jsx(Tabs, {
      defaultValue: "info",
      className: "w-full",
      children: /* @__PURE__ */ jsxs(Card, {
        className: "rounded-[40px] border-none shadow-2xl bg-card/40 backdrop-blur-sm overflow-hidden",
        children: [/* @__PURE__ */ jsx("div", {
          className: "px-8 pt-8",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-2xl h-14 flex w-fit border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "info",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Informa√ß√µes"
            }), isOnibus && /* @__PURE__ */ jsx(TabsTrigger, {
              value: "mapa",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Mapa Assentos"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "manutencao",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Manuten√ß√£o"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "historico",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Hist√≥rico"
            })]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "p-8",
          children: [/* @__PURE__ */ jsx(TabsContent, {
            value: "info",
            className: "mt-0 space-y-10 animate-in fade-in duration-500",
            children: /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-12",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxs("h3", {
                  className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground flex items-center gap-2",
                  children: [/* @__PURE__ */ jsx(FileText$1, {
                    size: 16,
                    className: "text-primary"
                  }), " Ficha T√©cnica"]
                }), /* @__PURE__ */ jsx("div", {
                  className: "space-y-4",
                  children: [
                    {
                      label: "Chassi",
                      value: vehicle2.chassi
                    },
                    {
                      label: "Renavam",
                      value: vehicle2.renavam
                    },
                    {
                      label: "Ano Modelo",
                      value: vehicle2.ano
                    },
                    {
                      label: "Fabricante",
                      value: "MERCEDES-BENZ"
                    }
                    // Mock
                  ].map((item) => /* @__PURE__ */ jsxs("div", {
                    className: "flex justify-between border-b border-border/30 pb-3",
                    children: [/* @__PURE__ */ jsx("span", {
                      className: "text-xs font-bold text-muted-foreground uppercase",
                      children: item.label
                    }), /* @__PURE__ */ jsx("span", {
                      className: "text-sm font-black",
                      children: item.value || "---"
                    })]
                  }, item.label))
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxs("h3", {
                  className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground flex items-center gap-2",
                  children: [/* @__PURE__ */ jsx(CircleCheckBig, {
                    size: 16,
                    className: "text-primary"
                  }), " Equipamentos"]
                }), /* @__PURE__ */ jsx("div", {
                  className: "grid grid-cols-2 gap-3",
                  children: ["Ar Condicionado", "Wi-Fi", "USB", "Toilet", "Monitor TV"].map((f) => /* @__PURE__ */ jsxs("div", {
                    className: "p-4 rounded-2xl bg-muted/20 border border-border/30 text-[11px] font-bold uppercase flex items-center gap-3",
                    children: [/* @__PURE__ */ jsx("div", {
                      className: "w-1.5 h-1.5 rounded-full bg-emerald-500"
                    }), f]
                  }, f))
                })]
              })]
            })
          }), isOnibus && /* @__PURE__ */ jsx(TabsContent, {
            value: "mapa",
            className: "mt-0 animate-in fade-in duration-500",
            children: /* @__PURE__ */ jsx(MapaAssentos, {
              veiculo: vehicle2,
              seats: vehicle2.seats,
              onSave: () => {
              }
            })
          }), /* @__PURE__ */ jsx(TabsContent, {
            value: "manutencao",
            className: "mt-0 animate-in fade-in duration-500",
            children: /* @__PURE__ */ jsxs(Table, {
              children: [/* @__PURE__ */ jsx(TableHeader, {
                className: "bg-muted/30",
                children: /* @__PURE__ */ jsxs(TableRow, {
                  className: "h-14 border-border/50",
                  children: [/* @__PURE__ */ jsx(TableHead, {
                    className: "px-6 text-[10px] font-black uppercase",
                    children: "Data"
                  }), /* @__PURE__ */ jsx(TableHead, {
                    className: "text-[10px] font-black uppercase",
                    children: "Servi√ßo"
                  }), /* @__PURE__ */ jsx(TableHead, {
                    className: "text-[10px] font-black uppercase",
                    children: "KM"
                  }), /* @__PURE__ */ jsx(TableHead, {
                    className: "text-right px-6 text-[10px] font-black uppercase",
                    children: "Status"
                  })]
                })
              }), /* @__PURE__ */ jsx(TableBody, {
                children: vehicle2.maintenances.map((m) => {
                  var _a2;
                  return /* @__PURE__ */ jsxs(TableRow, {
                    className: "h-16 border-border/30 hover:bg-muted/10 transition-colors",
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-6 text-sm font-bold",
                      children: m.scheduledDate
                    }), /* @__PURE__ */ jsxs("td", {
                      className: "text-sm font-black uppercase",
                      children: [m.type, " ", /* @__PURE__ */ jsx("span", {
                        className: "text-[10px] font-medium text-muted-foreground block",
                        children: m.description
                      })]
                    }), /* @__PURE__ */ jsxs("td", {
                      className: "text-sm font-bold",
                      children: [(_a2 = m.km_veiculo) == null ? void 0 : _a2.toLocaleString(), " km"]
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-6 text-right",
                      children: /* @__PURE__ */ jsx(Badge$1, {
                        variant: "outline",
                        className: "rounded-lg",
                        children: m.status
                      })
                    })]
                  }, m.id);
                })
              })]
            })
          }), /* @__PURE__ */ jsx(TabsContent, {
            value: "historico",
            className: "mt-0 animate-in fade-in duration-500",
            children: /* @__PURE__ */ jsxs(Table, {
              children: [/* @__PURE__ */ jsx(TableHeader, {
                className: "bg-muted/30",
                children: /* @__PURE__ */ jsxs(TableRow, {
                  className: "h-14 border-border/50",
                  children: [/* @__PURE__ */ jsx(TableHead, {
                    className: "px-6 text-[10px] font-black uppercase",
                    children: "Data"
                  }), /* @__PURE__ */ jsx(TableHead, {
                    className: "text-[10px] font-black uppercase",
                    children: "Rota"
                  }), /* @__PURE__ */ jsx(TableHead, {
                    className: "text-right px-6 text-[10px] font-black uppercase",
                    children: "Ocupa√ß√£o"
                  })]
                })
              }), /* @__PURE__ */ jsx(TableBody, {
                children: vehicle2.trips.map((t) => {
                  var _a2;
                  return /* @__PURE__ */ jsxs(TableRow, {
                    className: "h-16 border-border/30 hover:bg-muted/10 transition-colors",
                    children: [/* @__PURE__ */ jsx("td", {
                      className: "px-6 text-sm font-bold",
                      children: t.departure_date
                    }), /* @__PURE__ */ jsx("td", {
                      className: "text-sm font-black uppercase",
                      children: (_a2 = t.route) == null ? void 0 : _a2.name
                    }), /* @__PURE__ */ jsx("td", {
                      className: "px-6 text-right text-xs font-bold",
                      children: "100%"
                    })]
                  }, t.id);
                })
              })]
            })
          })]
        })]
      })
    })]
  });
});
const route76 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_vehicles_$id,
  loader: loader$9
}, Symbol.toStringTag, { value: "Module" }));
const action$9 = async ({
  request
}) => {
  const formData = await request.formData();
  const organization_id = "org_placeholder";
  const featuresRaw = formData.get("features_json");
  const features = featuresRaw ? JSON.parse(featuresRaw) : [];
  const payload = {
    organization_id,
    placa: formData.get("placa").toUpperCase(),
    modelo: formData.get("modelo"),
    tipo: formData.get("tipo"),
    status: formData.get("status") || VeiculoStatus.ACTIVE,
    ano: parseInt(formData.get("ano")),
    km_atual: parseInt(formData.get("km_atual")),
    proxima_revisao_km: parseInt(formData.get("proxima_revisao_km")),
    ultima_revisao: formData.get("ultima_revisao") ? new Date(formData.get("ultima_revisao")) : null,
    is_double_deck: formData.get("is_double_deck") === "on",
    capacidade_passageiros: formData.get("tipo") === "ONIBUS" ? parseInt(formData.get("capacidade_passageiros")) : null,
    capacidade_carga: formData.get("tipo") === "CAMINHAO" ? parseFloat(formData.get("capacidade_carga")) : null,
    observacoes: formData.get("observacoes") || null,
    features,
    imagem: formData.get("imagem") || null
  };
  const [newVehicle] = await db.insert(vehicle).values(payload).returning();
  return redirect(`/admin/fleet`);
};
const admin_vehicles_new = UNSAFE_withComponentProps(function NewVehiclePage() {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const isSubmitting = navigation.state !== "idle";
  const [tipo, setTipo] = useState("ONIBUS");
  const [features, setFeatures] = useState([{
    category: "Mec√¢nica",
    label: "Motor Volvo",
    value: ""
  }, {
    category: "Comodidades",
    label: "Ar Condicionado",
    value: ""
  }]);
  const addFeature = () => setFeatures([...features, {
    category: "",
    label: "",
    value: ""
  }]);
  const removeFeature = (idx) => setFeatures(features.filter((_, i) => i !== idx));
  const updateFeature = (idx, field, val) => {
    const newFeatures = [...features];
    newFeatures[idx][field] = val;
    setFeatures(newFeatures);
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Novo Ve√≠culo",
      subtitle: "Integre uma nova unidade √† frota operacional",
      backLink: "/admin/fleet"
    }), /* @__PURE__ */ jsxs(Form, {
      method: "post",
      className: "grid grid-cols-1 lg:grid-cols-3 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-2 space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Especifica√ß√µes T√©cnicas",
          icon: Bus,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-2 gap-4",
              children: [/* @__PURE__ */ jsxs("button", {
                type: "button",
                onClick: () => setTipo("ONIBUS"),
                className: cn$1("h-16 rounded-2xl border-2 transition-all font-black text-xs tracking-widest uppercase flex items-center justify-center gap-3", tipo === "ONIBUS" ? "border-primary bg-primary/5 text-primary shadow-lg shadow-primary/10" : "border-border/50 text-muted-foreground"),
                children: [/* @__PURE__ */ jsx(Bus, {
                  size: 18
                }), " √îNIBUS"]
              }), /* @__PURE__ */ jsxs("button", {
                type: "button",
                onClick: () => setTipo("CAMINHAO"),
                className: cn$1("h-16 rounded-2xl border-2 transition-all font-black text-xs tracking-widest uppercase flex items-center justify-center gap-3", tipo === "CAMINHAO" ? "border-primary bg-primary/5 text-primary shadow-lg shadow-primary/10" : "border-border/50 text-muted-foreground"),
                children: [/* @__PURE__ */ jsx(Truck, {
                  size: 18
                }), " CAMINH√ÉO"]
              }), /* @__PURE__ */ jsx("input", {
                type: "hidden",
                name: "tipo",
                value: tipo
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-2",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-label-caps ml-1",
                  children: "Placa *"
                }), /* @__PURE__ */ jsx(Input, {
                  name: "placa",
                  required: true,
                  placeholder: "ABC-1234",
                  maxLength: 8,
                  className: "h-14 rounded-xl bg-muted/40 uppercase font-bold"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-2",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-label-caps ml-1",
                  children: "Modelo *"
                }), /* @__PURE__ */ jsx(Input, {
                  name: "modelo",
                  required: true,
                  placeholder: "Ex: Marcopolo Paradiso",
                  className: "h-14 rounded-xl bg-muted/40"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-6",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-2",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-label-caps ml-1",
                  children: "Ano *"
                }), /* @__PURE__ */ jsx(Input, {
                  type: "number",
                  name: "ano",
                  required: true,
                  placeholder: "2023",
                  className: "h-14 rounded-xl bg-muted/40"
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-2",
                children: [/* @__PURE__ */ jsx("label", {
                  className: "text-label-caps ml-1",
                  children: tipo === "ONIBUS" ? "Capacidade (Pax)" : "Capacidade (Ton)"
                }), /* @__PURE__ */ jsx(Input, {
                  type: "number",
                  name: tipo === "ONIBUS" ? "capacidade_passageiros" : "capacidade_carga",
                  required: true,
                  placeholder: "0",
                  className: "h-14 rounded-xl bg-muted/40"
                })]
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Sa√∫de do Ve√≠culo",
          icon: Wrench,
          children: /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-label-caps ml-1",
                children: "KM Atual *"
              }), /* @__PURE__ */ jsx(Input, {
                type: "number",
                name: "km_atual",
                required: true,
                placeholder: "0",
                className: "h-14 rounded-xl bg-muted/40"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-label-caps ml-1",
                children: "Pr√≥xima Revis√£o (KM) *"
              }), /* @__PURE__ */ jsx(Input, {
                type: "number",
                name: "proxima_revisao_km",
                required: true,
                placeholder: "0",
                className: "h-14 rounded-xl bg-muted/40"
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Caracter√≠sticas",
          icon: FileText$1,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-4",
            children: [features.map((f, i) => /* @__PURE__ */ jsxs("div", {
              className: "flex gap-3",
              children: [/* @__PURE__ */ jsx(Input, {
                placeholder: "Categoria",
                value: f.category,
                onChange: (e) => updateFeature(i, "category", e.target.value),
                className: "h-12 bg-muted/20"
              }), /* @__PURE__ */ jsx(Input, {
                placeholder: "Caracter√≠sticas",
                value: f.label,
                onChange: (e) => updateFeature(i, "label", e.target.value),
                className: "h-12 bg-muted/20 flex-1"
              }), /* @__PURE__ */ jsx(Button, {
                type: "button",
                variant: "ghost",
                size: "icon",
                onClick: () => removeFeature(i),
                className: "text-destructive",
                children: /* @__PURE__ */ jsx(Trash2, {
                  size: 18
                })
              })]
            }, i)), /* @__PURE__ */ jsxs(Button, {
              type: "button",
              variant: "outline",
              onClick: addFeature,
              className: "w-full h-12 border-dashed rounded-xl gap-2 font-bold text-xs uppercase tracking-widest",
              children: [/* @__PURE__ */ jsx(Plus, {
                size: 14
              }), " ADICIONAR CARACTER√çSTICA"]
            }), /* @__PURE__ */ jsx("input", {
              type: "hidden",
              name: "features_json",
              value: JSON.stringify(features)
            })]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Status Inicial",
          children: /* @__PURE__ */ jsxs("select", {
            name: "status",
            className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none",
            children: [/* @__PURE__ */ jsx("option", {
              value: VeiculoStatus.ACTIVE,
              children: "ATIVO"
            }), /* @__PURE__ */ jsx("option", {
              value: VeiculoStatus.MAINTENANCE,
              children: "MANUTEN√á√ÉO"
            }), /* @__PURE__ */ jsx("option", {
              value: VeiculoStatus.IN_TRANSIT,
              children: "EM TR√ÇNSITO"
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Notas",
          children: /* @__PURE__ */ jsx("textarea", {
            name: "observacoes",
            rows: 6,
            className: "w-full p-4 bg-muted/40 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-primary/20 outline-none resize-none",
            placeholder: "Detalhes t√©cnicos adicionais..."
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex flex-col gap-4",
          children: [/* @__PURE__ */ jsx(Button, {
            type: "submit",
            disabled: isSubmitting,
            className: "h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20",
            children: isSubmitting ? /* @__PURE__ */ jsx(LoaderCircle, {
              className: "animate-spin"
            }) : "CONFIRMAR INCLUS√ÉO"
          }), /* @__PURE__ */ jsx(Button, {
            type: "button",
            variant: "ghost",
            onClick: () => navigate(-1),
            className: "h-14 rounded-xl font-black uppercase text-[10px] tracking-widest",
            children: "CANCELAR"
          })]
        })]
      })]
    })]
  }, "new-vehicle-main");
});
const route77 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$9,
  default: admin_vehicles_new
}, Symbol.toStringTag, { value: "Module" }));
const loader$8 = async () => {
  const [clients$1, vehicles, drivers, routes2] = await Promise.all([db.select().from(clients), db.select().from(vehicle).where(eq(vehicle.status, "ACTIVE")), db.select().from(driver).where(eq(driver.status, "AVAILABLE")), db.select().from(routes$1).where(eq(routes$1.active, true))]);
  return data({
    clients: clients$1,
    vehicles,
    drivers,
    routes: routes2
  });
};
const action$8 = async ({
  request
}) => {
  const formData = await request.formData();
  const organization_id = "org_placeholder";
  const payload = {
    organization_id,
    client_id: formData.get("client_id"),
    vehicle_id: formData.get("vehicle_id") || null,
    driver_id: formData.get("driver_id") || null,
    origin: formData.get("origin"),
    destination: formData.get("destination"),
    start_date: new Date(formData.get("start_date")),
    end_date: new Date(formData.get("end_date")),
    type: formData.get("type") || "PONTUAL",
    route_id: formData.get("route_id") || null,
    total_value: formData.get("total_value"),
    notes: formData.get("notes")
  };
  await db.insert(charter).values(payload);
  return redirect("/admin/charter");
};
const admin_charter_new = UNSAFE_withComponentProps(function NewCharterPage() {
  const {
    clients: clients2,
    vehicles,
    drivers,
    routes: routes2
  } = useLoaderData();
  useNavigate();
  const navigation = useNavigation();
  navigation.state !== "idle";
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Novo Fretamento",
      subtitle: "Registre uma nova solicita√ß√£o de aluguel de frota corporativa",
      backLink: "/admin/charter"
    }), /* @__PURE__ */ jsx(CharterForm, {
      intent: "create",
      clients: clients2,
      vehicles,
      drivers,
      routes: routes2
    })]
  }, "new-charter-main");
});
const route78 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$8,
  default: admin_charter_new,
  loader: loader$8
}, Symbol.toStringTag, { value: "Module" }));
const loader$7 = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const client = await db.query.clients.findFirst({
    where: eq(clients.id, id),
    with: {
      reservations: {
        orderBy: desc(reservation.createdAt),
        with: {
          trip: {
            with: {
              route: true
            }
          }
        }
      },
      interactions: {
        orderBy: desc(client_interaction.date_time)
      },
      notes: {
        orderBy: desc(client_note.createdAt)
      }
    }
  });
  if (!client) throw new Response("Cliente n√£o encontrado", {
    status: 404
  });
  return data({
    client
  });
};
const action$7 = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  if (!id) return null;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "add-interaction") {
    const type = formData.get("type");
    const description = formData.get("description");
    await db.insert(client_interaction).values({
      client_id: id,
      type,
      description,
      user_responsible: "Admin"
      // Mock
    });
    return data({
      success: true
    });
  }
  if (intent === "add-note") {
    const title = formData.get("title");
    const content = formData.get("content");
    const isImportant = formData.get("important") === "true";
    await db.insert(client_note).values({
      client_id: id,
      title,
      content,
      is_important: isImportant,
      created_by: "Admin"
      // Mock
    });
    return data({
      success: true
    });
  }
  return null;
};
const admin_clients_$id = UNSAFE_withComponentProps(function ClientDetailPage() {
  const {
    client
  } = useLoaderData();
  const fetcher = useFetcher();
  useNavigate();
  const [showInteractionInput, setShowInteractionInput] = useState(false);
  const [showNoteInput, setShowNoteInput] = useState(false);
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: client.nome,
      subtitle: `Cliente desde ${new Date(client.data_cadastro).getFullYear()} ‚Ä¢ ID #${client.id.substring(0, 8)}`,
      backLink: "/admin/clients",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex gap-3",
        children: [/* @__PURE__ */ jsx(Button, {
          variant: "outline",
          asChild: true,
          className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px] border-border/50",
          children: /* @__PURE__ */ jsxs(Link, {
            to: `/admin/clients/edit/${client.id}`,
            children: [/* @__PURE__ */ jsx(SquarePen, {
              size: 18,
              className: "mr-2"
            }), " Editar Cadastro"]
          })
        }), /* @__PURE__ */ jsx(Button, {
          onClick: () => setShowInteractionInput(true),
          className: "h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20",
          children: "REGISTRAR CONTATO"
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Viagens Realizadas",
        value: client.reservations.length,
        icon: TrendingUp,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Saldo Cr√©ditos",
        value: `R$ ${Number(client.saldo_creditos).toFixed(2)}`,
        icon: CreditCard,
        variant: "indigo"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Total Gasto",
        value: `R$ ${Number(client.valor_total_gasto).toFixed(2)}`,
        icon: DollarSign$1,
        variant: "emerald"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Segmento",
        value: client.segmento || "NOVO",
        icon: Award,
        variant: "blue"
      })]
    }), /* @__PURE__ */ jsx(Tabs, {
      defaultValue: "info",
      className: "w-full",
      children: /* @__PURE__ */ jsxs(Card, {
        className: "rounded-[40px] border-none shadow-2xl bg-card/40 backdrop-blur-sm overflow-hidden",
        children: [/* @__PURE__ */ jsx("div", {
          className: "px-8 pt-8",
          children: /* @__PURE__ */ jsxs(TabsList, {
            className: "bg-muted/40 p-1.5 rounded-2xl h-14 flex w-fit border border-border/50",
            children: [/* @__PURE__ */ jsx(TabsTrigger, {
              value: "info",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Perfil"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "history",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Hist√≥rico"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "interactions",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Intera√ß√µes"
            }), /* @__PURE__ */ jsx(TabsTrigger, {
              value: "notes",
              className: "px-8 rounded-xl font-bold uppercase text-[10px] tracking-widest data-[state=active]:bg-background",
              children: "Notas"
            })]
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "p-8",
          children: [/* @__PURE__ */ jsx(TabsContent, {
            value: "info",
            className: "mt-0 space-y-10 animate-in fade-in duration-500",
            children: /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-12",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxs("h3", {
                  className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground flex items-center gap-2",
                  children: [/* @__PURE__ */ jsx(User, {
                    size: 16,
                    className: "text-primary"
                  }), " Dados Pessoais"]
                }), /* @__PURE__ */ jsx("div", {
                  className: "space-y-4",
                  children: [{
                    label: "E-mail",
                    value: client.email
                  }, {
                    label: "Telefone",
                    value: client.telefone
                  }, {
                    label: "Documento",
                    value: `${client.documento_tipo}: ${client.documento}`
                  }, {
                    label: "Data Nascimento",
                    value: client.data_nascimento
                  }].map((item) => /* @__PURE__ */ jsxs("div", {
                    className: "flex justify-between border-b border-border/30 pb-3",
                    children: [/* @__PURE__ */ jsx("span", {
                      className: "text-xs font-bold text-muted-foreground uppercase",
                      children: item.label
                    }), /* @__PURE__ */ jsx("span", {
                      className: "text-sm font-black",
                      children: item.value || "---"
                    })]
                  }, item.label))
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-6",
                children: [/* @__PURE__ */ jsxs("h3", {
                  className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground flex items-center gap-2",
                  children: [/* @__PURE__ */ jsx(MapPin, {
                    size: 16,
                    className: "text-primary"
                  }), " Localiza√ß√£o"]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "p-6 rounded-3xl bg-muted/20 border border-border/30 space-y-2",
                  children: [/* @__PURE__ */ jsx("p", {
                    className: "text-sm font-bold",
                    children: client.endereco || "N√£o Informado"
                  }), /* @__PURE__ */ jsxs("p", {
                    className: "text-xs font-bold text-muted-foreground uppercase",
                    children: [client.cidade, " - ", client.estado]
                  })]
                })]
              })]
            })
          }), /* @__PURE__ */ jsx(TabsContent, {
            value: "history",
            className: "mt-0 animate-in fade-in duration-500 space-y-4",
            children: client.reservations.map((res) => {
              var _a, _b, _c, _d;
              return /* @__PURE__ */ jsxs("div", {
                className: "p-6 rounded-3xl border border-border/30 bg-muted/10 flex items-center justify-between",
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex items-center gap-4",
                  children: [/* @__PURE__ */ jsx("div", {
                    className: "w-12 h-12 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black",
                    children: res.seat_number
                  }), /* @__PURE__ */ jsxs("div", {
                    children: [/* @__PURE__ */ jsx("p", {
                      className: "font-bold",
                      children: ((_b = (_a = res.trip) == null ? void 0 : _a.route) == null ? void 0 : _b.name) || "Viagem Operacional"
                    }), /* @__PURE__ */ jsxs("p", {
                      className: "text-[10px] font-black uppercase text-muted-foreground",
                      children: [(_c = res.trip) == null ? void 0 : _c.departure_date, " ‚Ä¢ ", (_d = res.trip) == null ? void 0 : _d.departure_time]
                    })]
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "text-right",
                  children: [/* @__PURE__ */ jsxs("p", {
                    className: "font-black text-lg",
                    children: ["R$ ", Number(res.total_price).toFixed(2)]
                  }), /* @__PURE__ */ jsx(Badge$1, {
                    variant: "outline",
                    className: "rounded-lg text-[9px] uppercase font-black",
                    children: res.status
                  })]
                })]
              }, res.id);
            })
          }), /* @__PURE__ */ jsxs(TabsContent, {
            value: "interactions",
            className: "mt-0 animate-in fade-in duration-500 space-y-6",
            children: [showInteractionInput && /* @__PURE__ */ jsx(Card, {
              className: "p-6 border-primary/20 bg-primary/5 rounded-3xl space-y-4",
              children: /* @__PURE__ */ jsxs(fetcher.Form, {
                method: "post",
                onSubmit: () => setShowInteractionInput(false),
                children: [/* @__PURE__ */ jsx("input", {
                  type: "hidden",
                  name: "intent",
                  value: "add-interaction"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "grid grid-cols-2 gap-4",
                  children: [/* @__PURE__ */ jsxs("select", {
                    name: "type",
                    className: "h-12 px-4 rounded-xl bg-background border-border font-bold text-xs uppercase",
                    children: [/* @__PURE__ */ jsx("option", {
                      value: "WHATSAPP",
                      children: "WhatsApp"
                    }), /* @__PURE__ */ jsx("option", {
                      value: "PHONE",
                      children: "Telefone"
                    }), /* @__PURE__ */ jsx("option", {
                      value: "EMAIL",
                      children: "E-mail"
                    })]
                  }), /* @__PURE__ */ jsx("input", {
                    name: "description",
                    placeholder: "Resumo do contato...",
                    className: "h-12 px-4 rounded-xl bg-background border-border font-bold text-xs outline-none",
                    required: true
                  })]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-end gap-2 mt-4",
                  children: [/* @__PURE__ */ jsx(Button, {
                    type: "button",
                    variant: "ghost",
                    onClick: () => setShowInteractionInput(false),
                    children: "Cancelar"
                  }), /* @__PURE__ */ jsx(Button, {
                    type: "submit",
                    children: "Gravar Intera√ß√£o"
                  })]
                })]
              })
            }), /* @__PURE__ */ jsx("div", {
              className: "space-y-4",
              children: client.interactions.map((i) => /* @__PURE__ */ jsxs("div", {
                className: "relative pl-8 border-l-2 border-border/50 pb-6 last:pb-0",
                children: [/* @__PURE__ */ jsx("div", {
                  className: "absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-primary border-4 border-background"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "space-y-1",
                  children: [/* @__PURE__ */ jsx("p", {
                    className: "text-xs font-black uppercase text-primary tracking-widest",
                    children: i.type
                  }), /* @__PURE__ */ jsx("p", {
                    className: "text-sm font-medium",
                    children: i.description
                  }), /* @__PURE__ */ jsx("p", {
                    className: "text-[10px] font-bold text-muted-foreground uppercase",
                    children: new Date(i.date_time).toLocaleString()
                  })]
                })]
              }, i.id))
            })]
          }), /* @__PURE__ */ jsxs(TabsContent, {
            value: "notes",
            className: "mt-0 animate-in fade-in duration-500 space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex justify-between items-center",
              children: [/* @__PURE__ */ jsx("h3", {
                className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground",
                children: "Notas Estrat√©gicas"
              }), /* @__PURE__ */ jsxs(Button, {
                onClick: () => setShowNoteInput(true),
                variant: "outline",
                className: "h-10 rounded-xl px-4 font-bold text-[10px] uppercase tracking-widest",
                children: [/* @__PURE__ */ jsx(Plus, {
                  size: 14,
                  className: "mr-2"
                }), " Adicionar Nota"]
              })]
            }), showNoteInput && /* @__PURE__ */ jsx(Card, {
              className: "p-6 border-amber-200 bg-amber-50/10 rounded-3xl",
              children: /* @__PURE__ */ jsxs(fetcher.Form, {
                method: "post",
                className: "space-y-4",
                onSubmit: () => setShowNoteInput(false),
                children: [/* @__PURE__ */ jsx("input", {
                  type: "hidden",
                  name: "intent",
                  value: "add-note"
                }), /* @__PURE__ */ jsx("input", {
                  name: "title",
                  placeholder: "T√≠tulo da nota...",
                  className: "w-full h-12 px-4 rounded-xl bg-background border-border font-bold text-xs outline-none",
                  required: true
                }), /* @__PURE__ */ jsx("textarea", {
                  name: "content",
                  placeholder: "Conte√∫do...",
                  className: "w-full p-4 rounded-xl bg-background border-border font-bold text-xs outline-none min-h-[100px]",
                  required: true
                }), /* @__PURE__ */ jsxs("label", {
                  className: "flex items-center gap-2 text-[10px] font-black uppercase tracking-widest cursor-pointer",
                  children: [/* @__PURE__ */ jsx("input", {
                    type: "checkbox",
                    name: "important",
                    value: "true",
                    className: "rounded"
                  }), " Marcar como Importante"]
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex justify-end gap-2 pt-4",
                  children: [/* @__PURE__ */ jsx(Button, {
                    type: "button",
                    variant: "ghost",
                    onClick: () => setShowNoteInput(false),
                    children: "Cancelar"
                  }), /* @__PURE__ */ jsx(Button, {
                    type: "submit",
                    children: "Salvar Nota"
                  })]
                })]
              })
            }), /* @__PURE__ */ jsx("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-6",
              children: client.notes.map((n) => /* @__PURE__ */ jsxs(Card, {
                className: cn$1("p-6 rounded-[2rem] border-none shadow-xl", n.is_important ? "bg-amber-500/10" : "bg-muted/10"),
                children: [/* @__PURE__ */ jsxs("div", {
                  className: "flex justify-between items-start mb-4",
                  children: [/* @__PURE__ */ jsx("h4", {
                    className: "font-black uppercase text-[12px] tracking-tight",
                    children: n.title
                  }), n.is_important && /* @__PURE__ */ jsx(Star, {
                    size: 14,
                    className: "text-amber-500 fill-amber-500"
                  })]
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-sm font-medium opacity-80 mb-6 leading-relaxed",
                  children: ['"', n.content, '"']
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex items-center justify-between pt-4 border-t border-border/20",
                  children: [/* @__PURE__ */ jsx("span", {
                    className: "text-[9px] font-black uppercase opacity-60",
                    children: "Admin"
                  }), /* @__PURE__ */ jsx("span", {
                    className: "text-[9px] font-black uppercase opacity-60",
                    children: new Date(n.createdAt).toLocaleDateString()
                  })]
                })]
              }, n.id))
            })]
          })]
        })]
      })
    })]
  });
});
const route79 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$7,
  default: admin_clients_$id,
  loader: loader$7
}, Symbol.toStringTag, { value: "Module" }));
function ClientForm({ intent, defaultValues = {}, states }) {
  const navigate = useNavigate();
  const navigation = useNavigation();
  const isSubmitting = navigation.state !== "idle";
  const isEdit = intent === "edit";
  const [tipoCliente, setTipoCliente] = useState(defaultValues.tipo_cliente || TipoCliente.PESSOA_FISICA);
  const [cep, setCep] = useState(defaultValues.endereco ? "" : "");
  const [isSearchingCep, setIsSearchingCep] = useState(false);
  const [addressData, setAddressData] = useState({
    street: defaultValues.endereco || "",
    city: defaultValues.cidade || "",
    state: defaultValues.estado || ""
  });
  const handleCepChange = async (e) => {
    const value = e.target.value.replace(/\D/g, "");
    setCep(value);
    if (value.length === 8) {
      setIsSearchingCep(true);
      try {
        const res = await fetch(`https://viacep.com.br/ws/${value}/json/`);
        const data2 = await res.json();
        if (!data2.erro) {
          setAddressData({
            street: data2.logradouro || "",
            city: data2.localidade || "",
            state: data2.uf || ""
          });
        }
      } catch (err) {
        console.error("CEP error", err);
      } finally {
        setIsSearchingCep(false);
      }
    }
  };
  return /* @__PURE__ */ jsxs(Form, { method: "post", className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [
    /* @__PURE__ */ jsxs("div", { className: "lg:col-span-2 space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Tipo de Perfil", icon: Building2, children: /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-2 gap-4", children: [
        /* @__PURE__ */ jsxs(
          "button",
          {
            type: "button",
            onClick: () => setTipoCliente(TipoCliente.PESSOA_FISICA),
            className: cn$1(
              "h-16 rounded-2xl border-2 transition-all font-black text-xs tracking-widest uppercase flex items-center justify-center gap-3",
              tipoCliente === TipoCliente.PESSOA_FISICA ? "border-primary bg-primary/5 text-primary shadow-lg shadow-primary/10" : "border-border/50 text-muted-foreground"
            ),
            children: [
              /* @__PURE__ */ jsx(User, { size: 18 }),
              " PESSOA F√çSICA"
            ]
          }
        ),
        /* @__PURE__ */ jsxs(
          "button",
          {
            type: "button",
            onClick: () => setTipoCliente(TipoCliente.PESSOA_JURIDICA),
            className: cn$1(
              "h-16 rounded-2xl border-2 transition-all font-black text-xs tracking-widest uppercase flex items-center justify-center gap-3",
              tipoCliente === TipoCliente.PESSOA_JURIDICA ? "border-primary bg-primary/5 text-primary shadow-lg shadow-primary/10" : "border-border/50 text-muted-foreground"
            ),
            children: [
              /* @__PURE__ */ jsx(Building2, { size: 18 }),
              " PESSOA JUR√çDICA"
            ]
          }
        ),
        /* @__PURE__ */ jsx("input", { type: "hidden", name: "tipo_cliente", value: tipoCliente })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Identifica√ß√£o", icon: User, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
          /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: tipoCliente === TipoCliente.PESSOA_FISICA ? "Nome Completo" : "Nome do Representante" }),
          /* @__PURE__ */ jsx(Input, { name: "nome", defaultValue: defaultValues.nome, required: true, placeholder: "Ex: Jo√£o da Silva", className: "h-14 rounded-xl bg-muted/40" })
        ] }),
        tipoCliente === TipoCliente.PESSOA_JURIDICA && /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6 animate-in slide-in-from-top-4 duration-500", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Raz√£o Social" }),
            /* @__PURE__ */ jsx(Input, { name: "razao_social", defaultValue: defaultValues.razao_social, required: true, className: "h-14 rounded-xl bg-muted/40" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "CNPJ" }),
            /* @__PURE__ */ jsx(Input, { name: "cnpj", defaultValue: defaultValues.cnpj, required: true, placeholder: "00.000.000/0000-00", className: "h-14 rounded-xl bg-muted/40" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "E-mail" }),
            /* @__PURE__ */ jsx(Input, { type: "email", name: "email", defaultValue: defaultValues.email, required: true, placeholder: "email@exemplo.com", className: "h-14 rounded-xl bg-muted/40" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Telefone" }),
            /* @__PURE__ */ jsx(Input, { name: "telefone", defaultValue: defaultValues.telefone, required: true, placeholder: "(00) 00000-0000", className: "h-14 rounded-xl bg-muted/40" })
          ] })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Localiza√ß√£o", icon: MapPin, children: /* @__PURE__ */ jsxs("div", { className: "space-y-6", children: [
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "CEP" }),
            /* @__PURE__ */ jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ jsx(Input, { value: cep, onChange: handleCepChange, placeholder: "00000-000", className: "h-14 rounded-xl bg-muted/40" }),
              isSearchingCep && /* @__PURE__ */ jsx(LoaderCircle, { className: "absolute right-4 top-1/2 -translate-y-1/2 animate-spin text-primary", size: 18 })
            ] })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "md:col-span-2 space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Endere√ßo" }),
            /* @__PURE__ */ jsx(Input, { name: "endereco", defaultValue: addressData.street, required: true, placeholder: "Rua, n√∫mero, complemento", className: "h-14 rounded-xl bg-muted/40" })
          ] })
        ] }),
        /* @__PURE__ */ jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-6", children: [
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Cidade" }),
            /* @__PURE__ */ jsx(Input, { name: "cidade", defaultValue: addressData.city, required: true, className: "h-14 rounded-xl bg-muted/40" })
          ] }),
          /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
            /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Estado (UF)" }),
            /* @__PURE__ */ jsx(
              Input,
              {
                name: "estado",
                defaultValue: addressData.state,
                required: true,
                maxLength: 2,
                className: "h-14 rounded-xl bg-muted/40 uppercase font-black",
                onChange: (e) => setAddressData({ ...addressData, state: e.target.value })
              }
            )
          ] })
        ] })
      ] }) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "space-y-8", children: [
      /* @__PURE__ */ jsx(FormSection, { title: "Documenta√ß√£o", icon: FileText$1, children: /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Tipo de Documento" }),
        /* @__PURE__ */ jsxs("select", { name: "documento_tipo", defaultValue: defaultValues.documento_tipo, className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
          /* @__PURE__ */ jsx("option", { value: TipoDocumento.CPF, children: "CPF" }),
          /* @__PURE__ */ jsx("option", { value: TipoDocumento.RG, children: "RG" }),
          /* @__PURE__ */ jsx("option", { value: TipoDocumento.CNPJ, children: "CNPJ" }),
          /* @__PURE__ */ jsx("option", { value: TipoDocumento.PASSAPORTE, children: "PASSAPORTE" })
        ] }),
        /* @__PURE__ */ jsx(Input, { name: "documento", defaultValue: defaultValues.documento, required: true, placeholder: "N√∫mero do documento", className: "h-14 rounded-xl bg-muted/40" })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Classifica√ß√£o", icon: Briefcase, children: /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
        /* @__PURE__ */ jsx("label", { className: "text-label-caps ml-1", children: "Segmento" }),
        /* @__PURE__ */ jsxs("select", { name: "segmento", defaultValue: defaultValues.segmento || "NOVO", className: "w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none", children: [
          /* @__PURE__ */ jsx("option", { value: "NOVO", children: "NOVO CLIENTE" }),
          /* @__PURE__ */ jsx("option", { value: "REGULAR", children: "CLIENTE REGULAR" }),
          /* @__PURE__ */ jsx("option", { value: "VIP", children: "CLIENTE VIP" }),
          /* @__PURE__ */ jsx("option", { value: "INATIVO", children: "INATIVO" })
        ] })
      ] }) }),
      /* @__PURE__ */ jsx(FormSection, { title: "Notas", icon: FileText$1, children: /* @__PURE__ */ jsx(
        "textarea",
        {
          name: "observacoes",
          defaultValue: defaultValues.observacoes,
          rows: 4,
          className: "w-full p-4 bg-muted/40 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-primary/20 outline-none resize-none",
          placeholder: "Observa√ß√µes adicionais..."
        }
      ) }),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-col gap-4", children: [
        /* @__PURE__ */ jsx(Button, { type: "submit", disabled: isSubmitting, className: "h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20", children: isSubmitting ? /* @__PURE__ */ jsx(LoaderCircle, { className: "animate-spin" }) : isEdit ? "SALVAR ALTERA√á√ïES" : "CADASTRAR CLIENTE" }),
        /* @__PURE__ */ jsx(Button, { type: "button", variant: "ghost", onClick: () => navigate(-1), className: "h-14 rounded-xl font-black uppercase text-[10px] tracking-widest", children: "CANCELAR" })
      ] })
    ] })
  ] });
}
const loader$6 = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const client = await db.query.clients.findFirst({
    where: eq(clients.id, id)
  });
  if (!client) throw new Response("Cliente n√£o encontrado", {
    status: 404
  });
  return data({
    client
  });
};
const action$6 = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const payload = {
    nome: formData.get("nome"),
    email: formData.get("email"),
    telefone: formData.get("telefone"),
    tipo_cliente: formData.get("tipo_cliente"),
    documento_tipo: formData.get("documento_tipo"),
    documento: formData.get("documento"),
    razao_social: formData.get("razao_social") || null,
    nome_fantasia: formData.get("nome_fantasia") || null,
    cnpj: formData.get("cnpj") || null,
    data_nascimento: formData.get("data_nascimento") ? formData.get("data_nascimento") : null,
    nacionalidade: formData.get("nacionalidade") || "Brasileira",
    endereco: formData.get("endereco"),
    cidade: formData.get("cidade"),
    estado: formData.get("estado"),
    pais: formData.get("pais") || "Brasil",
    segmento: formData.get("segmento") || "NOVO",
    observacoes: formData.get("observacoes"),
    updatedAt: /* @__PURE__ */ new Date()
  };
  await db.update(clients).set(payload).where(eq(clients.id, id));
  return redirect("/admin/clients");
};
const admin_clients_$id_edit = UNSAFE_withComponentProps(function EditClientPage() {
  const {
    client
  } = useLoaderData();
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Editar Cliente",
      subtitle: `Alterando perfil de ${client.nome}`,
      backLink: "/admin/clients"
    }), /* @__PURE__ */ jsx(ClientForm, {
      intent: "edit",
      defaultValues: client
    })]
  }, "edit-client-main");
});
const route80 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$6,
  default: admin_clients_$id_edit,
  loader: loader$6
}, Symbol.toStringTag, { value: "Module" }));
const loader$5 = async () => {
  const states = await db.select().from(state).orderBy(state.name);
  return data({
    states
  });
};
const action$5 = async ({
  request
}) => {
  const formData = await request.formData();
  const organization_id = "org_placeholder";
  const payload = {
    organization_id,
    nome: formData.get("nome"),
    email: formData.get("email"),
    telefone: formData.get("telefone"),
    tipo_cliente: formData.get("tipo_cliente"),
    documento_tipo: formData.get("documento_tipo"),
    documento: formData.get("documento"),
    razao_social: formData.get("razao_social") || null,
    nome_fantasia: formData.get("nome_fantasia") || null,
    cnpj: formData.get("cnpj") || null,
    data_nascimento: formData.get("data_nascimento") ? formData.get("data_nascimento") : null,
    nacionalidade: formData.get("nacionalidade") || "Brasileira",
    endereco: formData.get("endereco"),
    cidade: formData.get("cidade"),
    estado: formData.get("estado"),
    pais: formData.get("pais") || "Brasil",
    segmento: formData.get("segmento") || "NOVO",
    observacoes: formData.get("observacoes")
  };
  await db.insert(clients).values(payload);
  return redirect("/admin/clients");
};
const admin_clients_new = UNSAFE_withComponentProps(function NewClientPage() {
  const {
    states
  } = useLoaderData();
  useNavigate();
  const navigation = useNavigation();
  useFetcher();
  navigation.state !== "idle";
  return /* @__PURE__ */ jsx("div", {
    children: /* @__PURE__ */ jsx(ClientForm, {
      intent: "create",
      states
    })
  });
});
const route81 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$5,
  default: admin_clients_new,
  loader: loader$5
}, Symbol.toStringTag, { value: "Module" }));
const action$4 = async ({
  request
}) => {
  const formData = await request.formData();
  const nome = formData.get("nome");
  const cnh = formData.get("cnh");
  const categoria_cnh = formData.get("categoria_cnh");
  const validade_cnh = formData.get("validade_cnh");
  const status = formData.get("status");
  if (!nome || !cnh || !validade_cnh) {
    return data({
      error: "Campos obrigat√≥rios ausentes"
    }, {
      status: 400
    });
  }
  try {
    await db.insert(driver).values({
      nome,
      cnh,
      categoria_cnh,
      validade_cnh,
      status: status || DriverStatus.AVAILABLE,
      data_contratacao: (/* @__PURE__ */ new Date()).toISOString().split("T")[0],
      organization_id: "org_default"
      // Mock or get from session
    });
    return redirect("/admin/drivers");
  } catch (e) {
    return data({
      error: "Erro ao salvar motorista no banco"
    }, {
      status: 500
    });
  }
};
const admin_drivers_new = UNSAFE_withComponentProps(function NewDriverPage() {
  const actionData = useActionData();
  const navigation = useNavigation();
  const navigate = useNavigate();
  const isSubmitting = navigation.state === "submitting";
  const [validadeCnh, setValidadeCnh] = useState("");
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Novo Motorista",
      subtitle: "Cadastre um novo motorista no sistema de frota",
      backLink: "/admin/drivers",
      rightElement: /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsx(Button, {
          variant: "ghost",
          onClick: () => navigate("/admin/drivers"),
          className: "h-14 rounded-xl px-6 font-black uppercase text-[12px]",
          children: "Cancelar"
        }), /* @__PURE__ */ jsxs(Button, {
          type: "submit",
          form: "driver-form",
          disabled: isSubmitting,
          className: "h-14 rounded-xl px-8 bg-primary font-black uppercase text-[12px] shadow-lg shadow-primary/20",
          children: [isSubmitting ? /* @__PURE__ */ jsx(Loader, {
            className: "w-4 h-4 animate-spin mr-2"
          }) : /* @__PURE__ */ jsx(Save, {
            className: "w-4 h-4 mr-2"
          }), "Salvar Motorista"]
        })]
      })
    }), (actionData == null ? void 0 : actionData.error) && /* @__PURE__ */ jsxs(Alert, {
      variant: "destructive",
      className: "rounded-3xl border-destructive/20 bg-destructive/5 backdrop-blur-sm",
      children: [/* @__PURE__ */ jsx(CircleAlert, {
        className: "h-4 w-4"
      }), /* @__PURE__ */ jsx(AlertTitle, {
        className: "font-black uppercase text-[12px]",
        children: "Erro no Cadastro"
      }), /* @__PURE__ */ jsx(AlertDescription, {
        className: "text-xs font-medium",
        children: actionData.error
      })]
    }), /* @__PURE__ */ jsxs(Form, {
      id: "driver-form",
      method: "post",
      className: "grid grid-cols-1 lg:grid-cols-3 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-2 space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Dados Pessoais",
          icon: User,
          children: /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "md:col-span-2 space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "Nome Completo *"
              }), /* @__PURE__ */ jsx("input", {
                name: "nome",
                type: "text",
                required: true,
                placeholder: "Ex: Carlos Alberto SILVA",
                className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-medium outline-none"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "Status Operacional"
              }), /* @__PURE__ */ jsxs("select", {
                name: "status",
                className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-black uppercase text-[12px] appearance-none",
                children: [/* @__PURE__ */ jsx("option", {
                  value: DriverStatus.AVAILABLE,
                  children: "Dispon√≠vel"
                }), /* @__PURE__ */ jsx("option", {
                  value: DriverStatus.IN_TRANSIT,
                  children: "Em Viagem"
                }), /* @__PURE__ */ jsx("option", {
                  value: DriverStatus.ON_LEAVE,
                  children: "F√©rias"
                })]
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "CNH - Carteira Nacional de Habilita√ß√£o",
          icon: FileText$1,
          children: /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-3 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "N√∫mero da CNH *"
              }), /* @__PURE__ */ jsx("input", {
                name: "cnh",
                type: "text",
                required: true,
                maxLength: 11,
                className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-medium outline-none"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "Categoria *"
              }), /* @__PURE__ */ jsxs("select", {
                name: "categoria_cnh",
                className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-black uppercase text-[12px] appearance-none",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "D",
                  children: "D - √înibus e Van"
                }), /* @__PURE__ */ jsx("option", {
                  value: "E",
                  children: "E - Articulados"
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase tracking-widest text-muted-foreground ml-1",
                children: "Validade *"
              }), /* @__PURE__ */ jsx("input", {
                type: "hidden",
                name: "validade_cnh",
                value: validadeCnh
              }), /* @__PURE__ */ jsx(DatePicker, {
                value: validadeCnh,
                onChange: setValidadeCnh
              })]
            })]
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "space-y-8",
        children: /* @__PURE__ */ jsx(FormSection, {
          title: "Contato",
          icon: Phone,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-4",
            children: [/* @__PURE__ */ jsx("input", {
              name: "telefone",
              type: "tel",
              placeholder: "Telefone",
              className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-medium outline-none"
            }), /* @__PURE__ */ jsx("input", {
              name: "email",
              type: "email",
              placeholder: "E-mail",
              className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-medium outline-none"
            })]
          })
        })
      })]
    })]
  }, "novo-motorista-main");
});
const route82 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$4,
  default: admin_drivers_new
}, Symbol.toStringTag, { value: "Module" }));
const loader$4 = async () => {
  const [trips$1, vehicles] = await Promise.all([db.select().from(trips).where(eq(trips.status, "SCHEDULED")), db.select().from(vehicle).where(eq(vehicle.status, "ACTIVE"))]);
  return data({
    trips: trips$1,
    vehicles
  });
};
const action$3 = async ({
  request
}) => {
  const formData = await request.formData();
  const organization_id = "org_placeholder";
  const payload = {
    organization_id,
    code: `ENC${Math.floor(1e5 + Math.random() * 9e5)}`,
    type: formData.get("type"),
    status: "AWAITING",
    origin: formData.get("origin"),
    destination: formData.get("destination"),
    sender_name: formData.get("sender_name"),
    recipient_name: formData.get("recipient_name"),
    recipient_phone: formData.get("recipient_phone"),
    weight_kg: formData.get("weight_kg"),
    volume_m3: formData.get("volume_m3"),
    declared_value: formData.get("declared_value"),
    delivery_estimate: formData.get("delivery_estimate") ? new Date(formData.get("delivery_estimate")) : null,
    trip_id: formData.get("trip_id") || null,
    vehicle_id: formData.get("vehicle_id") || null,
    history: []
  };
  await db.insert(parcel).values(payload);
  return redirect("/admin/parcels");
};
const admin_parcels_new = UNSAFE_withComponentProps(function NewParcelPage() {
  const {
    trips: trips2,
    vehicles
  } = useLoaderData();
  useNavigate();
  const navigation = useNavigation();
  navigation.state !== "idle";
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Nova Encomenda",
      subtitle: "Registre uma nova carga no sistema log√≠stico",
      backLink: "/admin/parcels"
    }), /* @__PURE__ */ jsx(ParcelForm, {
      intent: "create",
      trips: trips2,
      vehicles
    })]
  }, "new-parcel-main");
});
const route83 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$3,
  default: admin_parcels_new,
  loader: loader$4
}, Symbol.toStringTag, { value: "Module" }));
const loader$3 = async ({
  params
}) => {
  const {
    id
  } = params;
  let initialRota = criarRotaVazia();
  if (id) {
    const rota = await db.query.routes.findFirst({
      where: eq(routes$1.id, id)
    });
    if (!rota) throw new Response("Rota n√£o encontrada", {
      status: 404
    });
    initialRota = {
      ...rota,
      pontos: typeof rota.stops === "string" ? JSON.parse(rota.stops) : rota.stops
    };
  }
  return data({
    initialRota,
    isEdicao: !!id
  });
};
const action$2 = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "save-route") {
    const payload = JSON.parse(formData.get("payload"));
    try {
      if (id) {
        await db.update(routes$1).set({
          name: payload.name,
          origin_city: payload.origin_city,
          origin_state: payload.origin_state,
          destination_city: payload.destination_city,
          destination_state: payload.destination_state,
          distance_km: payload.distance_km,
          duration_minutes: payload.duration_minutes,
          stops: JSON.stringify(payload.stops),
          active: payload.active,
          type: payload.type,
          organization_id: "org_default",
          updatedAt: /* @__PURE__ */ new Date()
        }).where(eq(routes$1.id, id));
      } else {
        await db.insert(routes$1).values({
          name: payload.name,
          origin_city: payload.origin_city,
          origin_state: payload.origin_state,
          destination_city: payload.destination_city,
          destination_state: payload.destination_state,
          distance_km: payload.distance_km,
          duration_minutes: payload.duration_minutes,
          stops: JSON.stringify(payload.stops),
          active: payload.active,
          type: payload.type,
          organization_id: "org_default"
        });
      }
      return redirect("/admin/routes");
    } catch (e) {
      console.error(e);
      return data({
        error: "Erro ao salvar rota"
      }, {
        status: 500
      });
    }
  }
  return null;
};
const admin_routes_new = UNSAFE_withComponentProps(function NewRoutePage() {
  const {
    initialRota,
    isEdicao
  } = useLoaderData();
  const actionData = useActionData();
  return /* @__PURE__ */ jsx(RouteForm, {
    initialRota,
    isEdicao,
    error: actionData == null ? void 0 : actionData.error
  });
});
const route84 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$2,
  default: admin_routes_new,
  loader: loader$3
}, Symbol.toStringTag, { value: "Module" }));
const GeminiInsights = ({ context, dataSummary }) => {
  const [insight, setInsight] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const generateInsight = async () => {
    setLoading(true);
    setError(null);
    try {
      const ai = new GoogleGenAI({ apiKey: "your_gemini_api_key_here" });
      const promptContext = context === EmpresaContexto.TURISMO ? "Voc√™ √© um especialista em gest√£o de transporte tur√≠stico. Analise os dados abaixo e sugira a√ß√µes para aumentar receita e ocupa√ß√£o." : "Voc√™ √© um especialista em log√≠stica de cargas expressas. Analise os dados e sugira otimiza√ß√µes de rota e frota.";
      const response = await ai.models.generateContent({
        model: "gemini-2.5-flash",
        contents: `${promptContext}

Dados Atuais: ${dataSummary}`,
        config: {
          temperature: 0.7,
          maxOutputTokens: 200
        }
      });
      setInsight(response.text || "Sem insights gerados.");
    } catch (err) {
      console.error(err);
      setError("Falha ao conectar com Gemini AI.");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950/40 dark:to-purple-950/40 p-6 rounded-xl border border-indigo-100 dark:border-indigo-900 relative overflow-hidden", children: [
    /* @__PURE__ */ jsx("div", { className: "absolute top-0 right-0 p-4 opacity-10", children: /* @__PURE__ */ jsx(Sparkles, { size: 100, className: "text-indigo-900 dark:text-white" }) }),
    /* @__PURE__ */ jsxs("div", { className: "relative z-10", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between mb-4", children: [
        /* @__PURE__ */ jsxs("h3", { className: "text-lg font-bold text-indigo-900 dark:text-indigo-200 flex items-center gap-2", children: [
          /* @__PURE__ */ jsx(Sparkles, { className: "text-indigo-500 dark:text-indigo-400", size: 20 }),
          "IA Insights Operacionais"
        ] }),
        /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: generateInsight,
            disabled: loading,
            className: "flex items-center gap-2 px-3 py-1.5 text-xs font-medium bg-white dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 rounded-lg border border-indigo-200 dark:border-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-800 disabled:opacity-50 transition-colors",
            children: [
              /* @__PURE__ */ jsx(RefreshCw, { size: 14, className: loading ? "animate-spin" : "" }),
              loading ? "Analisando..." : "Gerar An√°lise"
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsx("div", { className: "bg-white/60 dark:bg-black/20 backdrop-blur-sm rounded-lg p-4 border border-white/50 dark:border-white/10 min-h-[100px]", children: error ? /* @__PURE__ */ jsxs("div", { className: "text-red-500 dark:text-red-400 flex items-center gap-2 text-sm", children: [
        /* @__PURE__ */ jsx(CircleAlert, { size: 16 }),
        " ",
        error
      ] }) : insight ? /* @__PURE__ */ jsx("p", { className: "text-slate-700 dark:text-slate-200 text-sm leading-relaxed animate-in fade-in duration-500", children: insight }) : /* @__PURE__ */ jsx("p", { className: "text-slate-400 dark:text-slate-400 text-sm italic text-center py-4", children: 'Clique em "Gerar An√°lise" para processar os KPIs atuais com Gemini 2.5 Flash.' }) })
    ] })
  ] });
};
const loader$2 = async () => {
  const [userRes] = await db.select({
    value: count()
  }).from(user);
  const [vehicleRes] = await db.select({
    value: count()
  }).from(vehicle);
  const [transactionRes] = await db.select({
    value: count()
  }).from(transaction);
  return data({
    counts: {
      users: userRes.value,
      vehicles: vehicleRes.value,
      transactions: transactionRes.value
    }
  });
};
const DATA_TURISMO = [{
  name: "Seg",
  receita: 4200,
  ocupacao: 68
}, {
  name: "Ter",
  receita: 3800,
  ocupacao: 62
}, {
  name: "Qua",
  receita: 5500,
  ocupacao: 78
}, {
  name: "Qui",
  receita: 4900,
  ocupacao: 72
}, {
  name: "Sex",
  receita: 8800,
  ocupacao: 96
}, {
  name: "Sab",
  receita: 9800,
  ocupacao: 99
}, {
  name: "Dom",
  receita: 7500,
  ocupacao: 88
}];
const DATA_EXPRESS = [{
  name: "Seg",
  volume: 1450,
  eficiencia: 96
}, {
  name: "Ter",
  volume: 1320,
  eficiencia: 98
}, {
  name: "Qua",
  volume: 1600,
  eficiencia: 95
}, {
  name: "Qui",
  volume: 1400,
  eficiencia: 99
}, {
  name: "Sex",
  volume: 1900,
  eficiencia: 92
}, {
  name: "Sab",
  volume: 900,
  eficiencia: 99
}, {
  name: "Dom",
  volume: 400,
  eficiencia: 100
}];
const RECENT_ACTIVITY = [{
  id: 1,
  type: "success",
  title: "Viagem Conclu√≠da",
  desc: "Rota SP -> RJ finalizada com sucesso",
  time: "10 min atr√°s",
  icon: Bus
}, {
  id: 2,
  type: "warning",
  title: "Alerta de Manuten√ß√£o",
  desc: "Ve√≠culo 104 precisa de revis√£o",
  time: "32 min atr√°s",
  icon: CircleAlert
}, {
  id: 3,
  type: "info",
  title: "Nova Reserva",
  desc: "Grupo de 15 passageiros confirmado",
  time: "1h atr√°s",
  icon: Users
}, {
  id: 4,
  type: "success",
  title: "Entrega Realizada",
  desc: "Pacote #9921 entregue no prazo",
  time: "2h atr√°s",
  icon: Package
}];
const StatCard = ({
  title,
  value,
  trend,
  trendValue,
  icon: Icon2,
  color,
  isPositive
}) => {
  const colorClasses = {
    emerald: "bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400",
    blue: "bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400",
    purple: "bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400",
    orange: "bg-orange-50 text-orange-600 dark:bg-orange-900/20 dark:text-orange-400"
  };
  return /* @__PURE__ */ jsx(Card, {
    className: "hover:shadow-lg transition-all duration-300 bg-card/60 backdrop-blur-sm shadow-sm group overflow-hidden",
    children: /* @__PURE__ */ jsxs(CardContent, {
      className: "p-6",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex justify-between items-start mb-4",
        children: [/* @__PURE__ */ jsx("div", {
          className: cn$1("p-3 rounded-2xl group-hover:scale-110 group-hover:rotate-3 transition-all duration-300 shadow-sm", colorClasses[color]),
          children: /* @__PURE__ */ jsx(Icon2, {
            size: 22
          })
        }), /* @__PURE__ */ jsxs(Badge$1, {
          variant: isPositive ? "default" : "destructive",
          className: cn$1("flex items-center gap-1 font-bold px-2 py-0.5 rounded-full border-none", isPositive ? "bg-emerald-500/15 text-emerald-700 dark:text-emerald-400" : "bg-destructive/15 text-destructive"),
          children: [isPositive ? /* @__PURE__ */ jsx(ArrowUpRight, {
            size: 12
          }) : /* @__PURE__ */ jsx(ArrowDownRight, {
            size: 12
          }), trendValue]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-1",
        children: [/* @__PURE__ */ jsx("p", {
          className: "text-muted-foreground text-xs font-semibold uppercase tracking-wider",
          children: title
        }), /* @__PURE__ */ jsx("div", {
          className: "flex items-baseline gap-2",
          children: /* @__PURE__ */ jsx("h3", {
            className: "text-2xl font-bold tracking-tight",
            children: value
          })
        }), /* @__PURE__ */ jsx("p", {
          className: "text-[12px] text-muted-foreground/80 font-medium",
          children: trend
        })]
      })]
    })
  });
};
const QuickAction = ({
  icon: Icon2,
  label,
  onClick,
  color
}) => {
  const colorClasses = {
    blue: "bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400",
    purple: "bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400",
    orange: "bg-orange-50 text-orange-600 dark:bg-orange-900/20 dark:text-orange-400",
    emerald: "bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400"
  };
  return /* @__PURE__ */ jsxs(Button, {
    variant: "outline",
    onClick,
    className: "flex flex-col items-center justify-center h-auto p-4 bg-card hover:bg-accent border-border shadow-sm group w-full gap-3",
    children: [/* @__PURE__ */ jsx("div", {
      className: cn$1("p-3 rounded-full group-hover:scale-110 transition-transform", colorClasses[color]),
      children: /* @__PURE__ */ jsx(Icon2, {
        size: 24
      })
    }), /* @__PURE__ */ jsx("span", {
      className: "text-sm font-medium",
      children: label
    })]
  });
};
const admin_dashboard = UNSAFE_withComponentProps(function DashboardPage() {
  const {
    counts
  } = useLoaderData();
  const {
    currentContext,
    user: user2
  } = useApp();
  const {
    formatDate
  } = useDateFormatter();
  const navigate = useNavigate();
  const isTurismo = currentContext === EmpresaContexto.TURISMO;
  const summaryData = isTurismo ? "Receita semanal: R$ 41k. Taxa m√©dia ocupa√ß√£o: 78%. Sexta e S√°bado com ocupa√ß√£o > 95%. 2 Ve√≠culos em manuten√ß√£o." : "Entregas semanais: 910. Taxa de pontualidade: 98.2%. Pico de carga na Sexta-feira. 1 Rota com atrasos recorrentes.";
  return /* @__PURE__ */ jsxs("div", {
    className: "space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsxs("div", {
      className: "flex flex-col md:flex-row justify-between items-start md:items-center gap-6",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "flex items-center gap-5",
        children: [/* @__PURE__ */ jsx(Avatar, {
          className: "h-16 w-16 border-4 border-background shadow-lg ring-1 ring-primary/10 transition-transform hover:scale-105",
          children: /* @__PURE__ */ jsx(AvatarFallback, {
            className: "bg-primary/5 text-primary text-2xl font-black",
            children: user2.name.substring(0, 2).toUpperCase()
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "space-y-1",
          children: [/* @__PURE__ */ jsxs("h1", {
            className: "text-4xl font-extrabold tracking-tight",
            children: ["Ol√°, ", /* @__PURE__ */ jsx("span", {
              className: "bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",
              children: user2.name.split(" ")[0]
            }), " üëã"]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex items-center gap-3",
            children: [/* @__PURE__ */ jsx(Badge$1, {
              variant: "secondary",
              className: "bg-muted/50 text-muted-foreground border-none font-medium text-[12px] uppercase tracking-widest",
              children: "Admin Panel"
            }), /* @__PURE__ */ jsx(Separator, {
              orientation: "vertical",
              className: "h-3 shadow-none"
            }), /* @__PURE__ */ jsxs("p", {
              className: "text-muted-foreground font-medium flex items-center gap-2 text-sm italic",
              children: [/* @__PURE__ */ jsx(Clock, {
                size: 14,
                className: "text-primary/70"
              }), formatDate(/* @__PURE__ */ new Date(), "PPPP")]
            })]
          })]
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "flex items-center gap-3",
        children: /* @__PURE__ */ jsxs(Badge$1, {
          variant: "outline",
          className: cn$1("h-14 px-5 flex items-center gap-3 text-sm font-bold bg-card/40 backdrop-blur-md shadow-sm border-primary/10 rounded-xl", isTurismo ? "text-blue-600 border-blue-100" : "text-orange-600 border-orange-100"),
          children: [/* @__PURE__ */ jsx("div", {
            className: cn$1("w-2.5 h-2.5 rounded-full animate-pulse", isTurismo ? "bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]" : "bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]")
          }), isTurismo ? "Opera√ß√£o Tur√≠stica" : "Log√≠stica Express"]
        })
      })]
    }), /* @__PURE__ */ jsx(Separator, {
      className: "bg-gradient-to-r from-transparent via-border to-transparent shadow-none"
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(StatCard, {
        title: "Receita Total",
        value: isTurismo ? "R$ 145.200" : "R$ 89.400",
        trend: "vs. m√™s anterior",
        trendValue: "+12.5%",
        isPositive: true,
        icon: Wallet,
        color: "emerald"
      }), /* @__PURE__ */ jsx(StatCard, {
        title: isTurismo ? "Passageiros" : "Entregas",
        value: String(counts.users),
        trend: "vs. m√™s anterior",
        trendValue: "+5.2%",
        isPositive: true,
        icon: isTurismo ? Users : Package,
        color: "blue"
      }), /* @__PURE__ */ jsx(StatCard, {
        title: isTurismo ? "Taxa de Ocupa√ß√£o" : "Pontualidade",
        value: isTurismo ? "78%" : "98.2%",
        trend: "vs. meta mensal",
        trendValue: isTurismo ? "+2.0%" : "-0.5%",
        isPositive: isTurismo,
        icon: Activity,
        color: "purple"
      }), /* @__PURE__ */ jsx(StatCard, {
        title: "Frota Ativa",
        value: `${counts.vehicles}/${counts.vehicles}`,
        trend: "Dados reais via Drizzle",
        trendValue: "Live",
        isPositive: true,
        icon: Bus,
        color: "orange"
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 xl:grid-cols-3 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "xl:col-span-2 space-y-8",
        children: [/* @__PURE__ */ jsxs(Card, {
          className: "shadow-sm",
          children: [/* @__PURE__ */ jsxs(CardHeader, {
            className: "flex flex-row items-center justify-between pb-6",
            children: [/* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx(CardTitle, {
                children: isTurismo ? "Desempenho Semanal" : "Volume de Opera√ß√µes"
              }), /* @__PURE__ */ jsx(CardDescription, {
                children: isTurismo ? "Receita vs Ocupa√ß√£o" : "Entregas vs Efici√™ncia"
              })]
            }), /* @__PURE__ */ jsxs(Select, {
              defaultValue: "week",
              children: [/* @__PURE__ */ jsx(SelectTrigger, {
                className: "w-[180px]",
                children: /* @__PURE__ */ jsx(SelectValue, {
                  placeholder: "Selecione o per√≠odo"
                })
              }), /* @__PURE__ */ jsxs(SelectContent, {
                children: [/* @__PURE__ */ jsx(SelectItem, {
                  value: "week",
                  children: "Esta Semana"
                }), /* @__PURE__ */ jsx(SelectItem, {
                  value: "month",
                  children: "M√™s Atual"
                }), /* @__PURE__ */ jsx(SelectItem, {
                  value: "30days",
                  children: "√öltimos 30 dias"
                })]
              })]
            })]
          }), /* @__PURE__ */ jsx(CardContent, {
            children: /* @__PURE__ */ jsx("div", {
              className: "h-80 w-full",
              children: /* @__PURE__ */ jsx(ResponsiveContainer, {
                width: "100%",
                height: "100%",
                children: isTurismo ? /* @__PURE__ */ jsxs(AreaChart, {
                  data: DATA_TURISMO,
                  children: [/* @__PURE__ */ jsxs("defs", {
                    children: [/* @__PURE__ */ jsxs("linearGradient", {
                      id: "colorReceita",
                      x1: "0",
                      y1: "0",
                      x2: "0",
                      y2: "1",
                      children: [/* @__PURE__ */ jsx("stop", {
                        offset: "5%",
                        stopColor: "hsl(var(--primary))",
                        stopOpacity: 0.3
                      }), /* @__PURE__ */ jsx("stop", {
                        offset: "95%",
                        stopColor: "hsl(var(--primary))",
                        stopOpacity: 0
                      })]
                    }), /* @__PURE__ */ jsxs("linearGradient", {
                      id: "colorOcupacao",
                      x1: "0",
                      y1: "0",
                      x2: "0",
                      y2: "1",
                      children: [/* @__PURE__ */ jsx("stop", {
                        offset: "5%",
                        stopColor: "#8b5cf6",
                        stopOpacity: 0.3
                      }), /* @__PURE__ */ jsx("stop", {
                        offset: "95%",
                        stopColor: "#8b5cf6",
                        stopOpacity: 0
                      })]
                    })]
                  }), /* @__PURE__ */ jsx(CartesianGrid, {
                    strokeDasharray: "3 3",
                    stroke: "hsl(var(--muted))",
                    vertical: false
                  }), /* @__PURE__ */ jsx(XAxis, {
                    dataKey: "name",
                    axisLine: false,
                    tickLine: false,
                    tick: {
                      fill: "hsl(var(--muted-foreground))",
                      fontSize: 12
                    },
                    dy: 10
                  }), /* @__PURE__ */ jsx(YAxis, {
                    yAxisId: "left",
                    axisLine: false,
                    tickLine: false,
                    tick: {
                      fill: "hsl(var(--muted-foreground))",
                      fontSize: 12
                    }
                  }), /* @__PURE__ */ jsx(YAxis, {
                    yAxisId: "right",
                    orientation: "right",
                    axisLine: false,
                    tickLine: false,
                    tick: {
                      fill: "hsl(var(--muted-foreground))",
                      fontSize: 12
                    }
                  }), /* @__PURE__ */ jsx(Tooltip, {
                    contentStyle: {
                      backgroundColor: "hsl(var(--card))",
                      borderRadius: "var(--radius)",
                      border: "1px solid hsl(var(--border))",
                      boxShadow: "0 10px 15px -3px rgba(0, 0, 0, 0.1)"
                    },
                    itemStyle: {
                      fontSize: "12px",
                      fontWeight: 600
                    }
                  }), /* @__PURE__ */ jsx(Area, {
                    type: "monotone",
                    yAxisId: "left",
                    dataKey: "receita",
                    stroke: "hsl(var(--primary))",
                    strokeWidth: 3,
                    fillOpacity: 1,
                    fill: "url(#colorReceita)",
                    name: "Receita (R$)"
                  }), /* @__PURE__ */ jsx(Area, {
                    type: "monotone",
                    yAxisId: "right",
                    dataKey: "ocupacao",
                    stroke: "#8b5cf6",
                    strokeWidth: 3,
                    fillOpacity: 1,
                    fill: "url(#colorOcupacao)",
                    name: "Ocupa√ß√£o (%)"
                  })]
                }) : /* @__PURE__ */ jsxs(ComposedChart, {
                  data: DATA_EXPRESS,
                  children: [/* @__PURE__ */ jsx(CartesianGrid, {
                    strokeDasharray: "3 3",
                    stroke: "hsl(var(--border))",
                    vertical: false
                  }), /* @__PURE__ */ jsx(XAxis, {
                    dataKey: "name",
                    axisLine: false,
                    tickLine: false,
                    tick: {
                      fill: "hsl(var(--muted-foreground))",
                      fontSize: 12
                    },
                    dy: 10
                  }), /* @__PURE__ */ jsx(YAxis, {
                    yAxisId: "left",
                    axisLine: false,
                    tickLine: false,
                    tick: {
                      fill: "hsl(var(--muted-foreground))",
                      fontSize: 12
                    }
                  }), /* @__PURE__ */ jsx(YAxis, {
                    yAxisId: "right",
                    orientation: "right",
                    axisLine: false,
                    tickLine: false,
                    tick: {
                      fill: "hsl(var(--muted-foreground))",
                      fontSize: 12
                    },
                    domain: [0, 100]
                  }), /* @__PURE__ */ jsx(Tooltip, {
                    contentStyle: {
                      backgroundColor: "hsl(var(--card))",
                      borderRadius: "var(--radius)",
                      border: "1px solid hsl(var(--border))"
                    }
                  }), /* @__PURE__ */ jsx(Bar, {
                    yAxisId: "left",
                    dataKey: "volume",
                    fill: "#f97316",
                    radius: [6, 6, 0, 0],
                    barSize: 40,
                    name: "Volume"
                  }), /* @__PURE__ */ jsx(Line, {
                    type: "monotone",
                    yAxisId: "right",
                    dataKey: "eficiencia",
                    stroke: "#10b981",
                    strokeWidth: 3,
                    dot: {
                      r: 4,
                      fill: "#10b981",
                      strokeWidth: 2,
                      stroke: "#fff"
                    },
                    name: "Efici√™ncia (%)"
                  })]
                })
              })
            })
          })]
        }), /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-lg font-bold mb-4",
            children: "A√ß√µes R√°pidas"
          }), /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-2 md:grid-cols-4 gap-4",
            children: [/* @__PURE__ */ jsx(QuickAction, {
              icon: Plus,
              label: "Nova Viagem",
              color: "blue",
              onClick: () => navigate("/admin/trips/new")
            }), /* @__PURE__ */ jsx(QuickAction, {
              icon: Users,
              label: "Cadastrar Cliente",
              color: "purple",
              onClick: () => navigate("/admin/clients/new")
            }), /* @__PURE__ */ jsx(QuickAction, {
              icon: Truck,
              label: "Nova Manuten√ß√£o",
              color: "orange",
              onClick: () => navigate("/admin/maintenance/new")
            }), /* @__PURE__ */ jsx(QuickAction, {
              icon: Wallet,
              label: "Lan√ßar Despesa",
              color: "emerald",
              onClick: () => navigate("/admin/finance/transactions/new")
            })]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "space-y-8",
        children: [/* @__PURE__ */ jsx(GeminiInsights, {
          context: currentContext,
          dataSummary: summaryData
        }), /* @__PURE__ */ jsxs(Card, {
          className: "shadow-sm",
          children: [/* @__PURE__ */ jsxs(CardHeader, {
            className: "flex flex-row items-center justify-between pb-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex items-center gap-2",
              children: [/* @__PURE__ */ jsx(Activity, {
                size: 20,
                className: "text-primary"
              }), /* @__PURE__ */ jsx(CardTitle, {
                className: "text-lg",
                children: "Atividade Recente"
              })]
            }), /* @__PURE__ */ jsx(Button, {
              variant: "link",
              onClick: () => navigate("/admin/activities"),
              className: "h-auto p-0 text-xs font-medium",
              children: "Ver tudo"
            })]
          }), /* @__PURE__ */ jsx(CardContent, {
            children: /* @__PURE__ */ jsx("div", {
              className: "space-y-6",
              children: RECENT_ACTIVITY.map((item, index) => /* @__PURE__ */ jsxs("div", {
                className: "flex gap-4 relative",
                children: [index !== RECENT_ACTIVITY.length - 1 && /* @__PURE__ */ jsx("div", {
                  className: "absolute left-[19px] top-10 bottom-[-24px] w-px bg-border"
                }), /* @__PURE__ */ jsx("div", {
                  className: cn$1("w-10 h-10 rounded-full flex items-center justify-center shrink-0 z-10", item.type === "success" ? "bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400" : item.type === "warning" ? "bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400" : "bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"),
                  children: /* @__PURE__ */ jsx(item.icon, {
                    size: 18
                  })
                }), /* @__PURE__ */ jsxs("div", {
                  className: "flex-1 min-w-0",
                  children: [/* @__PURE__ */ jsx("h4", {
                    className: "text-sm font-semibold truncate",
                    children: item.title
                  }), /* @__PURE__ */ jsx("p", {
                    className: "text-xs text-muted-foreground mt-0.5 line-clamp-1",
                    children: item.desc
                  }), /* @__PURE__ */ jsxs("span", {
                    className: "text-[12px] font-medium text-muted-foreground mt-1 flex items-center gap-1",
                    children: [/* @__PURE__ */ jsx(Clock, {
                      size: 10
                    }), " ", item.time]
                  })]
                })]
              }, item.id))
            })
          })]
        })]
      })]
    })]
  }, "dashboard-main");
});
const route85 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_dashboard,
  loader: loader$2
}, Symbol.toStringTag, { value: "Module" }));
const loader$1 = async ({
  params
}) => {
  const {
    id
  } = params;
  if (!id) throw new Response("ID n√£o fornecido", {
    status: 400
  });
  const trip = await db.query.trips.findFirst({
    where: eq(trips.id, id),
    with: {
      route: true,
      vehicle: true,
      driver: true,
      reservations: {
        with: {
          client: true
        }
      }
    }
  });
  if (!trip) throw new Response("Viagem n√£o encontrada", {
    status: 404
  });
  const revenue = trip.reservations.reduce((sum, res) => sum + Number(res.total_price), 0);
  return data({
    trip,
    revenue
  });
};
const admin_trips_$id = UNSAFE_withComponentProps(function TripDetailPage() {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o;
  const {
    trip,
    revenue
  } = useLoaderData();
  useNavigate();
  const occupation = trip.reservations.length / (((_a = trip.vehicle) == null ? void 0 : _a.capacity) || 40) * 100;
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: ((_b = trip.route) == null ? void 0 : _b.name) || "Detalhes da Escala",
      subtitle: "Gest√£o operacional e financeira da viagem",
      backLink: "/admin/trips",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex gap-3",
        children: [/* @__PURE__ */ jsxs(Button, {
          variant: "outline",
          onClick: () => window.print(),
          className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px] border-border/50",
          children: [/* @__PURE__ */ jsx(Printer, {
            size: 18,
            className: "mr-2"
          }), " Manifesto"]
        }), /* @__PURE__ */ jsx(Button, {
          asChild: true,
          className: "h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20",
          children: /* @__PURE__ */ jsx(Link, {
            to: `/admin/trips/edit/${trip.id}`,
            children: "EDITAR ESCALA"
          })
        })]
      })
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 md:grid-cols-4 gap-6",
      children: [/* @__PURE__ */ jsx(DashboardCard, {
        title: "Ocupa√ß√£o",
        value: `${occupation.toFixed(1)}%`,
        icon: ChartPie,
        variant: "primary"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Passageiros",
        value: trip.reservations.length,
        icon: Users,
        variant: "blue"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Vaga(s) Dispon√≠vel",
        value: (((_c = trip.vehicle) == null ? void 0 : _c.capacity) || 40) - trip.reservations.length,
        icon: Bus,
        variant: "amber"
      }), /* @__PURE__ */ jsx(DashboardCard, {
        title: "Receita Prevista",
        value: `R$ ${revenue.toFixed(2)}`,
        icon: DollarSign,
        variant: "emerald"
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-12 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-8 space-y-8",
        children: [/* @__PURE__ */ jsxs(Card, {
          className: "rounded-[32px] border-none shadow-xl overflow-hidden bg-card/50 backdrop-blur-sm",
          children: [/* @__PURE__ */ jsxs("div", {
            className: "p-8 border-b border-border/50 flex items-center justify-between",
            children: [/* @__PURE__ */ jsxs("h3", {
              className: "font-black uppercase text-[14px] tracking-widest flex items-center gap-2",
              children: [/* @__PURE__ */ jsx(Users, {
                size: 18,
                className: "text-primary"
              }), " Manifesto de Passageiros"]
            }), /* @__PURE__ */ jsx(Button, {
              variant: "ghost",
              className: "rounded-xl h-10 font-bold text-[11px] uppercase",
              asChild: true,
              children: /* @__PURE__ */ jsxs(Link, {
                to: "/admin/reservations/new",
                children: [/* @__PURE__ */ jsx(UserPlus, {
                  size: 16,
                  className: "mr-2"
                }), " Vender Ticket"]
              })
            })]
          }), /* @__PURE__ */ jsx("div", {
            className: "overflow-x-auto",
            children: /* @__PURE__ */ jsxs("table", {
              className: "w-full",
              children: [/* @__PURE__ */ jsx("thead", {
                className: "bg-muted/30",
                children: /* @__PURE__ */ jsxs("tr", {
                  children: [/* @__PURE__ */ jsx("th", {
                    className: "px-8 py-4 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                    children: "Assento"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-8 py-4 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                    children: "Passageiro"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-8 py-4 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                    children: "Status"
                  }), /* @__PURE__ */ jsx("th", {
                    className: "px-8 py-4 text-right text-[10px] font-black uppercase tracking-widest text-muted-foreground",
                    children: "Ticket"
                  })]
                })
              }), /* @__PURE__ */ jsxs("tbody", {
                className: "divide-y divide-border/30",
                children: [trip.reservations.map((res) => /* @__PURE__ */ jsxs("tr", {
                  className: "hover:bg-muted/10 transition-colors",
                  children: [/* @__PURE__ */ jsx("td", {
                    className: "px-8 py-6",
                    children: /* @__PURE__ */ jsx(Badge$1, {
                      variant: "outline",
                      className: "h-8 w-8 rounded-lg flex items-center justify-center font-black p-0 border-primary/20 bg-primary/5 text-primary",
                      children: res.seat_number
                    })
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-8 py-6 font-bold",
                    children: res.passenger_name
                  }), /* @__PURE__ */ jsx("td", {
                    className: "px-8 py-6",
                    children: /* @__PURE__ */ jsx(Badge$1, {
                      className: "bg-emerald-500/10 text-emerald-500 border-none rounded-lg text-[10px] font-black uppercase",
                      children: res.status
                    })
                  }), /* @__PURE__ */ jsxs("td", {
                    className: "px-8 py-6 text-right font-mono text-[10px] font-bold text-muted-foreground",
                    children: ["#", res.ticket_code || res.id.substring(0, 8)]
                  })]
                }, res.id)), trip.reservations.length === 0 && /* @__PURE__ */ jsx("tr", {
                  children: /* @__PURE__ */ jsx("td", {
                    colSpan: 4,
                    className: "px-8 py-20 text-center text-muted-foreground italic",
                    children: "Nenhum passageiro embarcado nesta escala."
                  })
                })]
              })]
            })
          })]
        }), /* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[32px] border-none shadow-xl bg-card/50 backdrop-blur-sm space-y-6",
          children: [/* @__PURE__ */ jsxs("h3", {
            className: "font-black uppercase text-[14px] tracking-widest flex items-center gap-2",
            children: [/* @__PURE__ */ jsx(Map$1, {
              size: 18,
              className: "text-primary"
            }), " Itiner√°rio de Paradas"]
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-8 relative pl-6 before:absolute before:left-[27px] before:top-4 before:bottom-4 before:w-0.5 before:bg-muted/50 before:border-dashed",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "flex gap-4 relative",
              children: [/* @__PURE__ */ jsx("div", {
                className: "w-2 h-2 rounded-full bg-emerald-500 shrink-0 mt-2 z-10"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsxs("p", {
                  className: "font-bold text-sm",
                  children: [(_d = trip.route) == null ? void 0 : _d.origin_city, " - ", (_e = trip.route) == null ? void 0 : _e.origin_state]
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-[11px] text-muted-foreground font-black uppercase",
                  children: ["Sa√≠da: ", trip.departure_time]
                })]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "flex gap-4 relative",
              children: [/* @__PURE__ */ jsx("div", {
                className: "w-2 h-2 rounded-full bg-destructive shrink-0 mt-2 z-10"
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-1",
                children: [/* @__PURE__ */ jsxs("p", {
                  className: "font-bold text-sm",
                  children: [(_f = trip.route) == null ? void 0 : _f.destination_city, " - ", (_g = trip.route) == null ? void 0 : _g.destination_state]
                }), /* @__PURE__ */ jsxs("p", {
                  className: "text-[11px] text-muted-foreground font-black uppercase",
                  children: ["Chegada Prevista: ", trip.arrival_time]
                })]
              })]
            })]
          })]
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-4 space-y-8",
        children: [/* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[32px] border-none shadow-xl bg-gradient-to-br from-slate-800 to-slate-900 text-white space-y-6 relative overflow-hidden",
          children: [/* @__PURE__ */ jsx(Bus, {
            className: "absolute -right-8 -bottom-8 w-40 h-40 opacity-10 rotate-12"
          }), /* @__PURE__ */ jsx("h3", {
            className: "text-[11px] font-black uppercase tracking-widest opacity-60",
            children: "Recurso Atribu√≠do"
          }), /* @__PURE__ */ jsxs("div", {
            className: "space-y-1",
            children: [/* @__PURE__ */ jsx("p", {
              className: "text-3xl font-black uppercase tracking-tighter",
              children: ((_h = trip.vehicle) == null ? void 0 : _h.placa) || "Sem Placa"
            }), /* @__PURE__ */ jsx("p", {
              className: "text-sm font-bold opacity-80",
              children: ((_i = trip.vehicle) == null ? void 0 : _i.modelo) || "Ve√≠culo N√£o Alocado"
            })]
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex gap-2 pt-4 border-t border-white/10",
            children: [/* @__PURE__ */ jsx(Badge$1, {
              className: "bg-white/10 text-white rounded-lg font-bold text-[10px] uppercase border-none",
              children: ((_j = trip.vehicle) == null ? void 0 : _j.tipo) || "EXECUTIVO"
            }), /* @__PURE__ */ jsxs(Badge$1, {
              className: "bg-white/10 text-white rounded-lg font-bold text-[10px] uppercase border-none",
              children: [((_k = trip.vehicle) == null ? void 0 : _k.capacidade) || 40, " Lugares"]
            })]
          })]
        }), /* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[32px] border-none shadow-xl bg-card/50 backdrop-blur-sm space-y-6",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground",
            children: "Tripula√ß√£o"
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex items-center gap-4",
            children: [/* @__PURE__ */ jsx("div", {
              className: "w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-xl",
              children: ((_m = (_l = trip.driver) == null ? void 0 : _l.nome) == null ? void 0 : _m.charAt(0)) || "M"
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("p", {
                className: "font-bold",
                children: ((_n = trip.driver) == null ? void 0 : _n.nome) || "N√£o Atribu√≠do"
              }), /* @__PURE__ */ jsxs("p", {
                className: "text-[10px] font-black uppercase text-muted-foreground tracking-widest",
                children: ["Cat. ", ((_o = trip.driver) == null ? void 0 : _o.categoria_cnh) || "---"]
              })]
            })]
          }), /* @__PURE__ */ jsx(Button, {
            asChild: true,
            variant: "outline",
            className: "w-full h-14 rounded-xl font-bold uppercase text-[11px] tracking-widest border-border/50",
            children: /* @__PURE__ */ jsx(Link, {
              to: `/admin/drivers/${trip.driver_id}`,
              children: "DETALHES DO MOTORISTA"
            })
          })]
        }), /* @__PURE__ */ jsxs(Card, {
          className: "p-8 rounded-[32px] border-none shadow-xl bg-card/50 backdrop-blur-sm space-y-4",
          children: [/* @__PURE__ */ jsx("h3", {
            className: "text-[12px] font-black uppercase tracking-widest text-muted-foreground",
            children: "Notas Internas"
          }), /* @__PURE__ */ jsx("p", {
            className: "text-sm italic text-muted-foreground leading-relaxed",
            children: trip.notes || "Nenhuma observa√ß√£o operacional registrada para esta escala."
          })]
        })]
      })]
    })]
  });
});
const route86 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: admin_trips_$id,
  loader: loader$1
}, Symbol.toStringTag, { value: "Module" }));
const VisualizadorRota = ({
  rota,
  compact = false
}) => {
  if (!rota) {
    return /* @__PURE__ */ jsx("div", { className: "bg-slate-100 dark:bg-slate-900 rounded-lg p-8 text-center text-slate-500 dark:text-slate-400", children: "Rota n√£o dispon√≠vel" });
  }
  const duracaoHoras = rota.duracao_estimada_minutos ? Math.floor(rota.duracao_estimada_minutos / 60) : 0;
  const duracaoMinutos = rota.duracao_estimada_minutos ? rota.duracao_estimada_minutos % 60 : 0;
  if (compact) {
    if (!rota.pontos || rota.pontos.length < 2) {
      return /* @__PURE__ */ jsx("span", { className: "text-red-500 text-sm", children: "Rota inv√°lida (sem pontos)" });
    }
    const origem = rota.pontos[0];
    const destino = rota.pontos[rota.pontos.length - 1];
    const numParadas = rota.pontos.length - 2;
    return /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3 text-sm", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx("div", { className: "w-2 h-2 rounded-full bg-green-500" }),
        /* @__PURE__ */ jsx("span", { className: "font-medium text-slate-700 dark:text-slate-300", children: origem.nome })
      ] }),
      /* @__PURE__ */ jsx(ArrowRight, { size: 16, className: "text-slate-400" }),
      numParadas > 0 && /* @__PURE__ */ jsxs(Fragment, { children: [
        /* @__PURE__ */ jsxs("span", { className: "text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full", children: [
          numParadas,
          " parada",
          numParadas > 1 ? "s" : ""
        ] }),
        /* @__PURE__ */ jsx(ArrowRight, { size: 16, className: "text-slate-400" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx("div", { className: "w-2 h-2 rounded-full bg-red-500" }),
        /* @__PURE__ */ jsx("span", { className: "font-medium text-slate-700 dark:text-slate-300", children: destino.nome })
      ] }),
      rota.duracao_estimada_minutos && rota.duracao_estimada_minutos > 0 && /* @__PURE__ */ jsxs("div", { className: "ml-auto flex items-center gap-1 text-slate-500 dark:text-slate-400", children: [
        /* @__PURE__ */ jsx(Clock, { size: 14 }),
        /* @__PURE__ */ jsxs("span", { children: [
          duracaoHoras,
          "h ",
          duracaoMinutos,
          "min"
        ] })
      ] })
    ] });
  }
  return /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Navigation, { size: 20, className: "text-blue-600" }),
        /* @__PURE__ */ jsx("h4", { className: "font-semibold text-slate-800 dark:text-slate-200", children: rota.nome || "Rota" })
      ] }),
      /* @__PURE__ */ jsx("span", { className: `px-3 py-1 rounded-full text-xs font-semibold ${rota.tipo_rota === "IDA" ? "bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400" : "bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"}`, children: rota.tipo_rota })
    ] }),
    (rota.duracao_estimada_minutos || rota.distancia_total_km) && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-6 text-sm text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-900/50 rounded-lg p-3", children: [
      rota.duracao_estimada_minutos && rota.duracao_estimada_minutos > 0 && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Clock, { size: 16 }),
        /* @__PURE__ */ jsxs("span", { children: [
          duracaoHoras,
          "h ",
          duracaoMinutos,
          "min"
        ] })
      ] }),
      rota.distancia_total_km && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(Navigation, { size: 16 }),
        /* @__PURE__ */ jsxs("span", { children: [
          rota.distancia_total_km,
          " km"
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "relative pl-4 space-y-8", children: [
      /* @__PURE__ */ jsx("div", { className: "absolute left-[22px] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700" }),
      Array.isArray(rota.pontos) && rota.pontos.map((ponto, index) => {
        var _a;
        if (!ponto) return null;
        const isOrigem = ponto.tipo === "ORIGEM";
        const isDestino = ponto.tipo === "DESTINO";
        const showBadge = !((_a = ponto.nome) == null ? void 0 : _a.toLowerCase().includes(ponto.tipo.toLowerCase()));
        return /* @__PURE__ */ jsxs("div", { className: "relative flex gap-4", children: [
          /* @__PURE__ */ jsx("div", { className: `relative z-10 flex items-center justify-center w-4 h-4 rounded-full border-2 bg-white dark:bg-slate-800 mt-1.5 ${isOrigem ? "border-green-500" : isDestino ? "border-red-500" : "border-blue-500"}`, children: /* @__PURE__ */ jsx("div", { className: `w-2 h-2 rounded-full ${isOrigem ? "bg-green-500" : isDestino ? "bg-red-500" : "bg-blue-500"}` }) }),
          /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex flex-col sm:flex-row sm:items-start justify-between gap-2", children: [
              /* @__PURE__ */ jsxs("div", { children: [
                /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 flex-wrap", children: [
                  /* @__PURE__ */ jsx("span", { className: "text-base font-bold text-slate-800 dark:text-slate-200", children: ponto.nome }),
                  showBadge && /* @__PURE__ */ jsx("span", { className: `px-2 py-0.5 rounded text-[12px] font-bold uppercase tracking-wider ${isOrigem ? "bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400" : isDestino ? "bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400" : "bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`, children: isOrigem ? "Origem" : isDestino ? "Destino" : "Parada" })
                ] }),
                ponto.observacoes && /* @__PURE__ */ jsx("p", { className: "text-sm text-slate-500 dark:text-slate-400 mt-1", children: ponto.observacoes })
              ] }),
              /* @__PURE__ */ jsx("div", { className: "flex flex-col items-end gap-1 text-sm whitespace-nowrap", children: (() => {
                const pontosCalculados = calcularTemposRelativos(rota.pontos);
                const pontoCalculado = pontosCalculados[index];
                if (ponto.horario_chegada || ponto.horario_partida) {
                  if (ponto.horario_chegada && !ponto.horario_chegada.includes("T")) ;
                }
                return /* @__PURE__ */ jsxs("div", { className: "flex flex-col items-end text-xs text-slate-500 gap-1", children: [
                  isOrigem && /* @__PURE__ */ jsx("span", { className: "text-green-600 font-medium", children: "In√≠cio da viagem" }),
                  !isOrigem && pontoCalculado.tempo_acumulado_minutos !== void 0 && /* @__PURE__ */ jsxs("span", { className: "flex items-center gap-1", title: "Tempo ap√≥s o in√≠cio", children: [
                    /* @__PURE__ */ jsx(Clock, { size: 12, className: "text-slate-400" }),
                    "Chegada: +",
                    Math.floor(pontoCalculado.tempo_acumulado_minutos / 60),
                    "h ",
                    pontoCalculado.tempo_acumulado_minutos % 60,
                    "min"
                  ] }),
                  ponto.duracao_parada_minutos ? /* @__PURE__ */ jsxs("span", { className: "text-orange-600 font-medium", children: [
                    "Parada: ",
                    ponto.duracao_parada_minutos,
                    " min"
                  ] }) : null
                ] });
              })() })
            ] }),
            ponto.tipo === "PARADA_INTERMEDIARIA" && (ponto.permite_embarque || ponto.permite_desembarque) && /* @__PURE__ */ jsxs("div", { className: "flex gap-2 mt-2", children: [
              ponto.permite_embarque && /* @__PURE__ */ jsx("span", { className: "text-[12px] font-medium px-1.5 py-0.5 rounded border border-green-200 text-green-700 bg-green-50 dark:border-green-800 dark:bg-green-900/20 dark:text-green-400", children: "Embarque" }),
              ponto.permite_desembarque && /* @__PURE__ */ jsx("span", { className: "text-[12px] font-medium px-1.5 py-0.5 rounded border border-red-200 text-red-700 bg-red-50 dark:border-red-800 dark:bg-red-900/20 dark:text-red-400", children: "Desembarque" })
            ] })
          ] })
        ] }, ponto.id || index);
      })
    ] })
  ] });
};
const SeletorRota = ({
  rotas,
  tipoFiltro,
  rotaSelecionada,
  onChange
}) => {
  var _a, _b;
  const [busca, setBusca] = useState("");
  const rotasFiltradas = useMemo(() => {
    return rotas.filter((rota) => {
      var _a2, _b2, _c, _d, _e;
      const tipo = rota.tipo_rota;
      const filtro = tipoFiltro;
      const matchesIda = (filtro === RouteType.OUTBOUND || filtro === "IDA") && (tipo === RouteType.OUTBOUND || tipo === "IDA");
      const matchesVolta = (filtro === RouteType.INBOUND || filtro === "VOLTA") && (tipo === RouteType.INBOUND || tipo === "VOLTA");
      if (!matchesIda && !matchesVolta) return false;
      if (!rota.ativa) return false;
      if (busca.trim()) {
        const termoBusca = busca.toLowerCase();
        const origem = ((_b2 = (_a2 = rota.pontos[0]) == null ? void 0 : _a2.nome) == null ? void 0 : _b2.toLowerCase()) || "";
        const destino = ((_d = (_c = rota.pontos[rota.pontos.length - 1]) == null ? void 0 : _c.nome) == null ? void 0 : _d.toLowerCase()) || "";
        const nomeRota = ((_e = rota.nome) == null ? void 0 : _e.toLowerCase()) || "";
        return origem.includes(termoBusca) || destino.includes(termoBusca) || nomeRota.includes(termoBusca);
      }
      return true;
    });
  }, [rotas, tipoFiltro, busca]);
  const handleSelecionar = (rota) => {
    if ((rotaSelecionada == null ? void 0 : rotaSelecionada.id) === rota.id) {
      onChange(null);
    } else {
      onChange(rota);
    }
  };
  const limparSelecao = () => {
    onChange(null);
  };
  return /* @__PURE__ */ jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ jsx(Search, { size: 18, className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" }),
      /* @__PURE__ */ jsx(
        "input",
        {
          type: "text",
          value: busca,
          onChange: (e) => setBusca(e.target.value),
          placeholder: "Buscar por origem, destino ou nome...",
          className: "w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"
        }
      )
    ] }),
    /* @__PURE__ */ jsx("div", { className: "border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden", children: rotasFiltradas.length === 0 ? /* @__PURE__ */ jsxs("div", { className: "p-8 text-center", children: [
      /* @__PURE__ */ jsx(MapPin, { size: 48, className: "mx-auto text-slate-300 dark:text-slate-600 mb-3" }),
      /* @__PURE__ */ jsx("p", { className: "text-slate-500 dark:text-slate-400 text-sm", children: busca ? "Nenhuma rota encontrada" : `Nenhuma rota de ${tipoFiltro} dispon√≠vel` }),
      /* @__PURE__ */ jsx("p", { className: "text-xs text-slate-400 dark:text-slate-500 mt-2", children: 'Cadastre rotas em "Rotas" no menu lateral' })
    ] }) : /* @__PURE__ */ jsx("div", { className: "divide-y divide-slate-200 dark:divide-slate-700 max-h-80 overflow-y-auto", children: rotasFiltradas.map((rota) => {
      const estaSelecionada = (rotaSelecionada == null ? void 0 : rotaSelecionada.id) === rota.id;
      const origem = rota.pontos[0];
      const destino = rota.pontos[rota.pontos.length - 1];
      const numParadas = rota.pontos.length - 2;
      return /* @__PURE__ */ jsx(
        "div",
        {
          onClick: () => handleSelecionar(rota),
          className: `p-4 cursor-pointer transition-colors ${estaSelecionada ? "bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-600" : "hover:bg-slate-50 dark:hover:bg-slate-800"}`,
          children: /* @__PURE__ */ jsxs("div", { className: "flex items-start justify-between gap-3", children: [
            /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ jsx("h4", { className: `font-semibold mb-1 truncate ${estaSelecionada ? "text-blue-700 dark:text-blue-400" : "text-slate-700 dark:text-slate-300"}`, children: rota.nome || `${origem == null ? void 0 : origem.nome} ‚Üí ${destino == null ? void 0 : destino.nome}` }),
              /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 mb-2", children: [
                /* @__PURE__ */ jsx(MapPin, { size: 12 }),
                /* @__PURE__ */ jsxs("span", { className: "truncate", children: [
                  origem == null ? void 0 : origem.nome,
                  " ‚Üí ",
                  destino == null ? void 0 : destino.nome
                ] })
              ] }),
              /* @__PURE__ */ jsxs("div", { className: "flex flex-wrap gap-2 text-xs", children: [
                numParadas > 0 && /* @__PURE__ */ jsxs("span", { className: "px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded", children: [
                  numParadas,
                  " parada",
                  numParadas > 1 ? "s" : ""
                ] }),
                rota.duracao_estimada_minutos && /* @__PURE__ */ jsxs("span", { className: "px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded flex items-center gap-1", children: [
                  /* @__PURE__ */ jsx(Clock, { size: 10 }),
                  Math.floor(rota.duracao_estimada_minutos / 60),
                  "h",
                  rota.duracao_estimada_minutos % 60,
                  "min"
                ] }),
                rota.distancia_total_km && /* @__PURE__ */ jsxs("span", { className: "px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 rounded", children: [
                  rota.distancia_total_km,
                  " km"
                ] })
              ] })
            ] }),
            /* @__PURE__ */ jsx("div", { className: `w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-1 ${estaSelecionada ? "border-blue-600 bg-blue-600" : "border-slate-300 dark:border-slate-600"}`, children: estaSelecionada && /* @__PURE__ */ jsx("div", { className: "w-2 h-2 rounded-full bg-white" }) })
          ] })
        },
        rota.id
      );
    }) }) }),
    rotaSelecionada && /* @__PURE__ */ jsx("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("p", { className: "text-sm font-medium text-blue-800 dark:text-blue-300", children: "Rota selecionada" }),
        /* @__PURE__ */ jsx("p", { className: "text-xs text-blue-600 dark:text-blue-400", children: rotaSelecionada.nome || `${(_a = rotaSelecionada.pontos[0]) == null ? void 0 : _a.nome} ‚Üí ${(_b = rotaSelecionada.pontos[rotaSelecionada.pontos.length - 1]) == null ? void 0 : _b.nome}` })
      ] }),
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: limparSelecao,
          className: "px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors flex items-center gap-1",
          children: [
            /* @__PURE__ */ jsx(X, { size: 14 }),
            "Limpar"
          ]
        }
      )
    ] }) }),
    rotaSelecionada && /* @__PURE__ */ jsxs("div", { className: "border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden", children: [
      /* @__PURE__ */ jsx("div", { className: "bg-slate-50 dark:bg-slate-900 px-4 py-2 border-b border-slate-200 dark:border-slate-700", children: /* @__PURE__ */ jsx("h4", { className: "text-sm font-semibold text-slate-700 dark:text-slate-300", children: "Preview da Rota" }) }),
      /* @__PURE__ */ jsx("div", { className: "p-4", children: /* @__PURE__ */ jsx(VisualizadorRota, { rota: rotaSelecionada, compact: false }) })
    ] })
  ] });
};
const SeletorMotoristaMultiplo = ({
  motoristas,
  selecionados,
  onChange,
  maxHeight = "400px"
}) => {
  const [busca, setBusca] = useState("");
  const motoristasFiltrados = useMemo(() => {
    if (!busca.trim()) return motoristas;
    const termoBusca = busca.toLowerCase();
    return motoristas.filter(
      (m) => {
        var _a, _b;
        return m.nome.toLowerCase().includes(termoBusca) || ((_a = m.cnh) == null ? void 0 : _a.toLowerCase().includes(termoBusca)) || ((_b = m.categoria_cnh) == null ? void 0 : _b.toLowerCase().includes(termoBusca));
      }
    );
  }, [motoristas, busca]);
  const handleToggle = (id) => {
    if (selecionados.includes(id)) {
      onChange(selecionados.filter((selectedId) => selectedId !== id));
    } else {
      onChange([...selecionados, id]);
    }
  };
  const handleToggleTodos = () => {
    if (selecionados.length === motoristas.length) {
      onChange([]);
    } else {
      onChange(motoristas.map((m) => m.id));
    }
  };
  const limparSelecao = () => onChange([]);
  const todosSelecionados = selecionados.length === motoristas.length && motoristas.length > 0;
  const algunsSelecionados = selecionados.length > 0 && !todosSelecionados;
  return /* @__PURE__ */ jsxs("div", { className: "space-y-3", children: [
    /* @__PURE__ */ jsxs("div", { className: "relative", children: [
      /* @__PURE__ */ jsx(Search, { size: 18, className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" }),
      /* @__PURE__ */ jsx(
        "input",
        {
          type: "text",
          value: busca,
          onChange: (e) => setBusca(e.target.value),
          placeholder: "Buscar motorista...",
          className: "w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"
        }
      )
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between text-sm", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3", children: [
        /* @__PURE__ */ jsxs("label", { className: "flex items-center gap-2 cursor-pointer", children: [
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "checkbox",
              checked: todosSelecionados,
              ref: (input) => {
                if (input) input.indeterminate = algunsSelecionados;
              },
              onChange: handleToggleTodos,
              className: "w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
            }
          ),
          /* @__PURE__ */ jsx("span", { className: "font-medium text-slate-700 dark:text-slate-300", children: "Selecionar todos" })
        ] }),
        selecionados.length > 0 && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: limparSelecao,
            className: "text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 flex items-center gap-1",
            children: [
              /* @__PURE__ */ jsx(X, { size: 14 }),
              "Limpar"
            ]
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("span", { className: "text-slate-500 dark:text-slate-400", children: [
        selecionados.length,
        " de ",
        motoristas.length
      ] })
    ] }),
    /* @__PURE__ */ jsx("div", { className: "border border-slate-200 dark:border-slate-700 rounded-lg overflow-y-auto", style: { maxHeight }, children: motoristasFiltrados.length === 0 ? /* @__PURE__ */ jsxs("div", { className: "p-8 text-center", children: [
      /* @__PURE__ */ jsx(Users, { size: 48, className: "mx-auto text-slate-300 dark:text-slate-600 mb-3" }),
      /* @__PURE__ */ jsx("p", { className: "text-slate-500 dark:text-slate-400 text-sm", children: busca ? "Nenhum motorista encontrado" : "Nenhum motorista dispon√≠vel" })
    ] }) : /* @__PURE__ */ jsx("div", { className: "divide-y divide-slate-200 dark:divide-slate-700", children: motoristasFiltrados.map((motorista) => {
      const estaSelecionado = selecionados.includes(motorista.id);
      return /* @__PURE__ */ jsxs(
        "label",
        {
          className: `flex items-center gap-3 p-3 cursor-pointer transition-colors ${estaSelecionado ? "bg-blue-50 dark:bg-blue-900/20" : "hover:bg-slate-50 dark:hover:bg-slate-800"}`,
          children: [
            /* @__PURE__ */ jsxs("div", { className: "relative", children: [
              /* @__PURE__ */ jsx(
                "input",
                {
                  type: "checkbox",
                  checked: estaSelecionado,
                  onChange: () => handleToggle(motorista.id),
                  className: "w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"
                }
              ),
              estaSelecionado && /* @__PURE__ */ jsx(
                Check,
                {
                  size: 12,
                  className: "absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white pointer-events-none"
                }
              )
            ] }),
            /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
              /* @__PURE__ */ jsx("p", { className: `text-sm font-medium truncate ${estaSelecionado ? "text-blue-700 dark:text-blue-400" : "text-slate-700 dark:text-slate-300"}`, children: motorista.nome }),
              (motorista.categoria_cnh || motorista.status) && /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2 mt-0.5", children: [
                motorista.categoria_cnh && /* @__PURE__ */ jsxs("span", { className: "text-xs text-slate-500 dark:text-slate-400", children: [
                  "CNH: ",
                  motorista.categoria_cnh
                ] }),
                motorista.status && /* @__PURE__ */ jsx("span", { className: `text-xs px-1.5 py-0.5 rounded ${motorista.status === "DISPONIVEL" ? "bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400" : "bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}`, children: motorista.status })
              ] })
            ] })
          ]
        },
        motorista.id
      );
    }) }) }),
    selecionados.length > 0 && /* @__PURE__ */ jsxs("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3", children: [
      /* @__PURE__ */ jsxs("p", { className: "text-sm text-blue-800 dark:text-blue-300", children: [
        /* @__PURE__ */ jsx("strong", { children: selecionados.length }),
        " motorista",
        selecionados.length > 1 ? "s" : "",
        " selecionado",
        selecionados.length > 1 ? "s" : ""
      ] }),
      /* @__PURE__ */ jsx("div", { className: "mt-2 flex flex-wrap gap-1", children: selecionados.slice(0, 3).map((id) => {
        const motorista = motoristas.find((m) => m.id === id);
        return motorista ? /* @__PURE__ */ jsx("span", { className: "inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 rounded text-xs", children: motorista.nome }, id) : null;
      }) })
    ] })
  ] });
};
const tripsService = {
  getAll: async (filters) => {
    const params = new URLSearchParams();
    if ((filters == null ? void 0 : filters.status) && filters.status !== "TODOS") params.append("status", filters.status);
    if (filters == null ? void 0 : filters.search) params.append("search", filters.search);
    return api.get(`/api/trips?${params.toString()}`);
  },
  getById: async (id) => {
    return api.get(`/api/trips/${id}`);
  },
  getSeats: async (tripId) => {
    return api.get(`/api/trips/${tripId}/seats`);
  },
  create: async (viagem) => {
    return api.post("/api/trips", viagem);
  },
  update: async (id, viagem) => {
    return api.put(`/api/trips/${id}`, viagem);
  },
  delete: async (id) => {
    return api.delete(`/api/trips/${id}`);
  },
  // Tags Management
  getTags: async () => {
    return api.get("/api/trips/tags");
  },
  createTag: async (tag) => {
    return api.post("/api/trips/tags", tag);
  },
  updateTag: async (id, tag) => {
    return api.put(`/api/trips/tags/${id}`, tag);
  },
  deleteTag: async (id) => {
    return api.delete(`/api/trips/tags/${id}`);
  }
};
const SeletorTags = ({ selectedTags, onChange }) => {
  const [availableTags, setAvailableTags] = useState([]);
  const [loading, setLoading] = useState(false);
  const [isOpen, setIsOpen] = useState(false);
  const [inputValue, setInputValue] = useState("");
  const dropdownRef = useRef(null);
  useEffect(() => {
    loadTags();
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsOpen(false);
      }
    };
    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);
  const loadTags = async () => {
    try {
      setLoading(true);
      const data2 = await tripsService.getTags();
      setAvailableTags(data2);
    } catch (error) {
      console.error("Error loading tags:", error);
    } finally {
      setLoading(false);
    }
  };
  const toggleTag = (tagName) => {
    if (selectedTags.includes(tagName)) {
      onChange(selectedTags.filter((t) => t !== tagName));
    } else {
      onChange([...selectedTags, tagName]);
    }
  };
  const handleKeyDown = async (e) => {
    if (e.key === "Enter" && inputValue.trim()) {
      e.preventDefault();
      const newTagName = inputValue.trim();
      if (selectedTags.includes(newTagName)) {
        setInputValue("");
        return;
      }
      const existing = availableTags.find((t) => t.nome.toLowerCase() === newTagName.toLowerCase());
      if (existing) {
        toggleTag(existing.nome);
      } else {
        try {
          const newTag = await tripsService.createTag({ nome: newTagName });
          setAvailableTags((prev) => [...prev, newTag]);
          toggleTag(newTag.nome);
        } catch (error) {
          console.error("Error creating tag:", error);
          toggleTag(newTagName);
        }
      }
      setInputValue("");
    }
  };
  const removeTag = (tagName) => {
    onChange(selectedTags.filter((t) => t !== tagName));
  };
  return /* @__PURE__ */ jsxs("div", { className: "relative", ref: dropdownRef, children: [
    /* @__PURE__ */ jsxs(
      "div",
      {
        className: "min-h-[42px] p-1.5 flex flex-wrap gap-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 rounded-lg cursor-text focus-within:ring-2 focus-within:ring-blue-500 transition-all",
        onClick: () => setIsOpen(true),
        children: [
          selectedTags.map((tag) => /* @__PURE__ */ jsxs(
            "span",
            {
              className: "inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm font-medium rounded-md animate-in zoom-in-95",
              children: [
                tag,
                /* @__PURE__ */ jsx(
                  "button",
                  {
                    onClick: (e) => {
                      e.stopPropagation();
                      removeTag(tag);
                    },
                    className: "hover:text-blue-900 dark:hover:text-blue-100 p-0.5 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800/50 transition-colors",
                    children: /* @__PURE__ */ jsx(X, { size: 12 })
                  }
                )
              ]
            },
            tag
          )),
          /* @__PURE__ */ jsx(
            "input",
            {
              type: "text",
              value: inputValue,
              onChange: (e) => setInputValue(e.target.value),
              onKeyDown: handleKeyDown,
              onFocus: () => setIsOpen(true),
              placeholder: selectedTags.length === 0 ? "Adicionar tags..." : "",
              className: "flex-1 bg-transparent border-none outline-none text-sm min-w-[120px] dark:text-white"
            }
          ),
          /* @__PURE__ */ jsx("div", { className: "flex items-center pr-1 text-slate-400", children: loading ? /* @__PURE__ */ jsx(Loader, { size: 16, className: "animate-spin" }) : /* @__PURE__ */ jsx(ChevronDown, { size: 16, className: `transition-transform duration-200 ${isOpen ? "rotate-180" : ""}` }) })
        ]
      }
    ),
    isOpen && /* @__PURE__ */ jsx("div", { className: "absolute z-50 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100", children: /* @__PURE__ */ jsxs("div", { className: "p-2 space-y-1", children: [
      loading && availableTags.length === 0 ? /* @__PURE__ */ jsx("div", { className: "p-4 text-center text-sm text-slate-500", children: "Carregando tags..." }) : /* @__PURE__ */ jsxs(Fragment, { children: [
        availableTags.filter((t) => t.nome.toLowerCase().includes(inputValue.toLowerCase())).map((tag) => /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => toggleTag(tag.nome),
            className: `w-full flex items-center justify-between px-3 py-2 text-sm rounded-md transition-colors ${selectedTags.includes(tag.nome) ? "bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400" : "text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,
            children: [
              /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
                /* @__PURE__ */ jsx(Tag, { size: 14, className: selectedTags.includes(tag.nome) ? "text-blue-500" : "text-slate-400" }),
                tag.nome
              ] }),
              selectedTags.includes(tag.nome) && /* @__PURE__ */ jsx(Check, { size: 14 })
            ]
          },
          tag.id
        )),
        inputValue && !availableTags.find((t) => t.nome.toLowerCase() === inputValue.toLowerCase()) && /* @__PURE__ */ jsxs(
          "button",
          {
            onClick: () => handleKeyDown({ key: "Enter", preventDefault: () => {
            }, target: { value: inputValue } }),
            className: "w-full flex items-center gap-2 px-3 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded-md transition-colors font-medium border-t border-slate-100 dark:border-slate-700 mt-1 pt-2",
            children: [
              /* @__PURE__ */ jsx(Plus, { size: 14 }),
              'Criar tag "',
              inputValue,
              '"'
            ]
          }
        )
      ] }),
      !loading && availableTags.length === 0 && !inputValue && /* @__PURE__ */ jsx("div", { className: "p-4 text-center text-sm text-slate-500", children: "Nenhuma tag cadastrada. Digite para criar." })
    ] }) })
  ] });
};
const loader = async ({
  params
}) => {
  const {
    id
  } = params;
  const [rotas, veiculosData, motoristas] = await Promise.all([db.select().from(routes$1), db.select().from(vehicle), db.select().from(driver)]);
  const veiculos = await Promise.all(veiculosData.map(async (v) => {
    const seats = await db.select().from(seat).where(eq(seat.vehicleId, v.id));
    return {
      ...v,
      mapa_assentos: seats
    };
  }));
  let initialViagem = null;
  if (id) {
    initialViagem = await db.query.trips.findFirst({
      where: eq(trips.id, id)
    });
    if (!initialViagem) throw new Response("Viagem n√£o encontrada", {
      status: 404
    });
  }
  return data({
    rotas,
    veiculos,
    motoristas,
    initialViagem,
    isEdicao: !!id
  });
};
const action$1 = async ({
  request,
  params
}) => {
  const {
    id
  } = params;
  const formData = await request.formData();
  const intent = formData.get("intent");
  if (intent === "save-trip") {
    const payload = JSON.parse(formData.get("payload"));
    try {
      await db.transaction(async (tx) => {
        let tripId = id;
        if (id) {
          await tx.update(trips).set({
            ...payload,
            updatedAt: /* @__PURE__ */ new Date()
          }).where(eq(trips.id, id));
        } else {
          const [newTrip] = await tx.insert(trips).values({
            ...payload,
            organization_id: "org_default",
            status: TripStatus.SCHEDULED
          }).returning();
          tripId = newTrip.id;
        }
      });
      return redirect("/admin/trips");
    } catch (e) {
      console.error(e);
      return data({
        error: "Erro ao salvar viagem operacional"
      }, {
        status: 500
      });
    }
  }
  return null;
};
const admin_trips_new = UNSAFE_withComponentProps(function NewTripPage() {
  const {
    rotas,
    veiculos,
    motoristas,
    initialViagem,
    isEdicao
  } = useLoaderData();
  const actionData = useActionData();
  const navigation = useNavigation();
  const navigate = useNavigate();
  const fetcher = useFetcher();
  const [titulo, setTitulo] = useState((initialViagem == null ? void 0 : initialViagem.title) || "");
  const [rotaIda, setRotaIda] = useState(rotas.find((r2) => r2.id === (initialViagem == null ? void 0 : initialViagem.route_id)) || null);
  const [veiculoId, setVeiculoId] = useState((initialViagem == null ? void 0 : initialViagem.vehicle_id) || "");
  const [motoristaIds, setMotoristaIds] = useState((initialViagem == null ? void 0 : initialViagem.driver_id) ? [initialViagem.driver_id] : []);
  const [dataPartida, setDataPartida] = useState((initialViagem == null ? void 0 : initialViagem.departure_date) || "");
  const [horaPartida, setHoraPartida] = useState((initialViagem == null ? void 0 : initialViagem.departure_time) || "");
  const [dataChegada, setDataChegada] = useState((initialViagem == null ? void 0 : initialViagem.arrival_date) || "");
  const [horaChegada, setHoraChegada] = useState((initialViagem == null ? void 0 : initialViagem.arrival_time) || "");
  const [precos, setPrecos] = useState((initialViagem == null ? void 0 : initialViagem.prices) || {});
  const [tags, setTags] = useState((initialViagem == null ? void 0 : initialViagem.tags) || []);
  const isSaving = navigation.state === "submitting" || fetcher.state === "submitting";
  const veiculoSelecionado = veiculos.find((v) => v.id === veiculoId);
  const tiposAssento = useMemo(() => {
    if (!(veiculoSelecionado == null ? void 0 : veiculoSelecionado.mapa_assentos)) return [];
    return Array.from(new Set(veiculoSelecionado.mapa_assentos.map((a) => a.tipo)));
  }, [veiculoSelecionado]);
  const handleSalvar = () => {
    const payload = {
      title: titulo,
      route_id: rotaIda == null ? void 0 : rotaIda.id,
      vehicle_id: veiculoId,
      driver_id: motoristaIds[0],
      departure_date: dataPartida,
      departure_time: horaPartida,
      arrival_date: dataChegada,
      arrival_time: horaChegada,
      price_conventional: precos["CONVENCIONAL"],
      price_executive: precos["EXECUTIVO"],
      price_semi_sleeper: precos["SEMI_LEITO"],
      price_sleeper: precos["LEITO"],
      price_bed: precos["CAMA"],
      price_master_bed: precos["CAMA_MASTER"],
      tags,
      seats_available: (veiculoSelecionado == null ? void 0 : veiculoSelecionado.capacity) || 40
    };
    fetcher.submit({
      intent: "save-trip",
      payload: JSON.stringify(payload)
    }, {
      method: "post"
    });
  };
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: isEdicao ? "Editar Escala" : "Nova Viagem",
      subtitle: "Planejamento e aloca√ß√£o de recursos operacionais",
      backLink: "/admin/trips",
      rightElement: /* @__PURE__ */ jsxs("div", {
        className: "flex gap-4",
        children: [/* @__PURE__ */ jsx(Button, {
          variant: "ghost",
          onClick: () => navigate("/admin/trips"),
          className: "h-14 rounded-xl px-6 font-bold uppercase text-[12px]",
          children: "Cancelar"
        }), /* @__PURE__ */ jsxs(Button, {
          onClick: handleSalvar,
          disabled: isSaving,
          className: "h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20",
          children: [isSaving ? /* @__PURE__ */ jsx(Loader, {
            className: "w-4 h-4 animate-spin mr-2"
          }) : /* @__PURE__ */ jsx(Save, {
            className: "w-4 h-4 mr-2"
          }), isEdicao ? "Confirmar Escala" : "Criar Viagem"]
        })]
      })
    }), (actionData == null ? void 0 : actionData.error) && /* @__PURE__ */ jsxs(Alert, {
      variant: "destructive",
      className: "rounded-3xl border-destructive/20 bg-destructive/5",
      children: [/* @__PURE__ */ jsx(CircleAlert, {
        className: "h-4 w-4"
      }), /* @__PURE__ */ jsx(AlertTitle, {
        className: "font-bold uppercase text-[12px]",
        children: "Erro Operacional"
      }), /* @__PURE__ */ jsx(AlertDescription, {
        className: "text-xs font-medium",
        children: actionData.error
      })]
    }), /* @__PURE__ */ jsxs("div", {
      className: "grid grid-cols-1 lg:grid-cols-3 gap-8",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-2 space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Identifica√ß√£o",
          icon: Bus,
          children: /* @__PURE__ */ jsxs("div", {
            className: "grid grid-cols-1 md:grid-cols-2 gap-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1",
                children: "T√≠tulo da Viagem"
              }), /* @__PURE__ */ jsx("input", {
                value: titulo,
                onChange: (e) => setTitulo(e.target.value),
                placeholder: "Ex: S√£o Paulo x Rio Express",
                className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-bold text-[12px] uppercase outline-none"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1",
                children: "Tags"
              }), /* @__PURE__ */ jsx(SeletorTags, {
                selectedTags: tags,
                onChange: setTags
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Trajeto e Cronograma",
          icon: Route,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-8",
            children: [/* @__PURE__ */ jsx(SeletorRota, {
              rotas,
              tipoFiltro: "IDA",
              rotaSelecionada: rotaIda,
              onChange: setRotaIda
            }), /* @__PURE__ */ jsxs("div", {
              className: "grid grid-cols-1 md:grid-cols-2 gap-8 pt-4 border-t",
              children: [/* @__PURE__ */ jsxs("div", {
                className: "space-y-4",
                children: [/* @__PURE__ */ jsx("h4", {
                  className: "text-[11px] font-bold uppercase tracking-widest text-primary",
                  children: "Partida"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "grid grid-cols-2 gap-4",
                  children: [/* @__PURE__ */ jsx(DatePicker, {
                    value: dataPartida,
                    onChange: setDataPartida
                  }), /* @__PURE__ */ jsx(TimePicker, {
                    value: horaPartida,
                    onChange: setHoraPartida
                  })]
                })]
              }), /* @__PURE__ */ jsxs("div", {
                className: "space-y-4",
                children: [/* @__PURE__ */ jsx("h4", {
                  className: "text-[11px] font-bold uppercase tracking-widest text-destructive",
                  children: "Chegada Prevista"
                }), /* @__PURE__ */ jsxs("div", {
                  className: "grid grid-cols-2 gap-4",
                  children: [/* @__PURE__ */ jsx(DatePicker, {
                    value: dataChegada,
                    onChange: setDataChegada
                  }), /* @__PURE__ */ jsx(TimePicker, {
                    value: horaChegada,
                    onChange: setHoraChegada
                  })]
                })]
              })]
            })]
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "lg:col-span-1 space-y-8",
        children: [/* @__PURE__ */ jsx(FormSection, {
          title: "Recursos",
          icon: Users,
          children: /* @__PURE__ */ jsxs("div", {
            className: "space-y-6",
            children: [/* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1",
                children: "Ve√≠culo"
              }), /* @__PURE__ */ jsxs("select", {
                value: veiculoId,
                onChange: (e) => setVeiculoId(e.target.value),
                className: "w-full h-14 px-4 rounded-xl bg-muted/40 border-none font-bold text-[11px] uppercase outline-none appearance-none",
                children: [/* @__PURE__ */ jsx("option", {
                  value: "",
                  children: "N√£o Atribu√≠do"
                }), veiculos.map((v) => /* @__PURE__ */ jsxs("option", {
                  value: v.id,
                  children: [v.placa, " - ", v.modelo]
                }, v.id))]
              })]
            }), /* @__PURE__ */ jsxs("div", {
              className: "space-y-2",
              children: [/* @__PURE__ */ jsx("label", {
                className: "text-[12px] font-semibold uppercase text-muted-foreground ml-1",
                children: "Motorista"
              }), /* @__PURE__ */ jsx(SeletorMotoristaMultiplo, {
                motoristas,
                selecionados: motoristaIds,
                onChange: setMotoristaIds
              })]
            })]
          })
        }), /* @__PURE__ */ jsx(FormSection, {
          title: "Tarif√°rio",
          icon: DollarSign$1,
          children: /* @__PURE__ */ jsx("div", {
            className: "space-y-4",
            children: tiposAssento.map((tipo) => /* @__PURE__ */ jsxs("div", {
              className: "flex items-center justify-between p-4 rounded-xl bg-muted/30",
              children: [/* @__PURE__ */ jsx("span", {
                className: "text-[10px] font-bold uppercase",
                children: tipo.replace("_", " ")
              }), /* @__PURE__ */ jsxs("div", {
                className: "flex items-center gap-2",
                children: [/* @__PURE__ */ jsx("span", {
                  className: "text-[10px] font-bold text-muted-foreground",
                  children: "R$"
                }), /* @__PURE__ */ jsx("input", {
                  type: "number",
                  value: precos[tipo] || "",
                  onChange: (e) => setPrecos((prev) => ({
                    ...prev,
                    [tipo]: parseFloat(e.target.value)
                  })),
                  className: "w-20 bg-transparent text-right font-bold text-sm outline-none"
                })]
              })]
            }, tipo))
          })
        })]
      })]
    })]
  });
});
const route87 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action: action$1,
  default: admin_trips_new,
  loader
}, Symbol.toStringTag, { value: "Module" }));
const action = async ({
  request
}) => {
  const formData = await request.formData();
  const name = formData.get("name");
  const username = formData.get("username");
  const email = formData.get("email");
  const password = formData.get("password");
  const roles = formData.getAll("roles");
  const hashedPassword = await bcrypt.hash(password, 10);
  const result = await pool.query(`INSERT INTO "user" (id, name, email, username, role, "createdAt", "updatedAt")
         VALUES (gen_random_uuid(), $1, $2, $3, $4, NOW(), NOW())
         RETURNING id`, [name, email, username, roles.join(",") || "user"]);
  const userId = result.rows[0].id;
  await pool.query(`INSERT INTO account (id, "userId", "accountId", "providerId", password, "createdAt", "updatedAt")
         VALUES (gen_random_uuid(), $1, $2, 'credential', $3, NOW(), NOW())`, [userId, username, hashedPassword]);
  return redirect("/admin/users");
};
const admin_users_new = UNSAFE_withComponentProps(function NewUserPage() {
  useNavigate();
  const navigation = useNavigation();
  navigation.state !== "idle";
  const [selectedRoles, setSelectedRoles] = useState(["user"]);
  return /* @__PURE__ */ jsxs("div", {
    className: "p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",
    children: [/* @__PURE__ */ jsx(PageHeader, {
      title: "Novo Operador",
      subtitle: "Cadastre um novo usu√°rio e defina as permiss√µes de acesso",
      backLink: "/admin/users"
    }), /* @__PURE__ */ jsx(UserForm, {
      intent: "create"
    })]
  }, "new-user-main");
});
const route88 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action,
  default: admin_users_new
}, Symbol.toStringTag, { value: "Module" }));
const Login = () => {
  const navigate = useNavigate();
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState("");
  const handleLogin = async (e) => {
    e.preventDefault();
    setIsLoading(true);
    setError("");
    await authClient.signIn.email({
      email,
      password
    }, {
      onSuccess: () => {
        navigate("/admin/dashboard");
      },
      onError: (ctx) => {
        setError(ctx.error.message);
        setIsLoading(false);
      }
    });
  };
  return /* @__PURE__ */ jsx("div", {
    className: "min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-4",
    children: /* @__PURE__ */ jsxs("div", {
      className: "max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "p-8",
        children: [/* @__PURE__ */ jsx("div", {
          className: "flex justify-center mb-8",
          children: /* @__PURE__ */ jsx("div", {
            className: "w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-600/20",
            children: /* @__PURE__ */ jsx(Bus, {
              size: 32
            })
          })
        }), /* @__PURE__ */ jsx("h2", {
          className: "text-2xl font-bold text-center text-slate-800 dark:text-white mb-2",
          children: "Bem-vindo de volta"
        }), /* @__PURE__ */ jsx("p", {
          className: "text-center text-slate-500 dark:text-slate-400 mb-8",
          children: "Acesse sua conta para continuar"
        }), /* @__PURE__ */ jsxs("form", {
          onSubmit: handleLogin,
          className: "space-y-4",
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",
              children: "Identifica√ß√£o de Acesso"
            }), /* @__PURE__ */ jsxs("div", {
              className: "relative",
              children: [/* @__PURE__ */ jsx(User, {
                className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                size: 18
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: email,
                onChange: (e) => setEmail(e.target.value),
                className: "w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-semibold",
                placeholder: "Username, Email, CPF ou Telefone",
                required: true
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              className: "block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",
              children: "Senha"
            }), /* @__PURE__ */ jsxs("div", {
              className: "relative",
              children: [/* @__PURE__ */ jsx(Lock, {
                className: "absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",
                size: 18
              }), /* @__PURE__ */ jsx("input", {
                type: "password",
                value: password,
                onChange: (e) => setPassword(e.target.value),
                className: "w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white",
                placeholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
                required: true
              })]
            })]
          }), error && /* @__PURE__ */ jsx("div", {
            className: "p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",
            children: error
          }), /* @__PURE__ */ jsx("button", {
            type: "submit",
            disabled: isLoading,
            className: "w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-xl shadow-lg shadow-blue-600/20 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",
            children: isLoading ? /* @__PURE__ */ jsx(LoaderCircle, {
              className: "animate-spin",
              size: 20
            }) : "Entrar"
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex justify-between text-sm",
            children: [/* @__PURE__ */ jsx("a", {
              href: "/esqueci-username",
              className: "text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",
              children: "Esqueceu seu username?"
            }), /* @__PURE__ */ jsx("a", {
              href: "/esqueci-senha",
              className: "text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",
              children: "Esqueceu sua senha?"
            })]
          })]
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "bg-slate-50 dark:bg-slate-900/50 p-4 text-center border-t border-slate-100 dark:border-slate-700",
        children: /* @__PURE__ */ jsx("p", {
          className: "text-xs text-slate-500",
          children: "SGTL v2.1 - Sistema de Gest√£o de Turismo e Log√≠stica"
        })
      })]
    })
  });
};
const login = UNSAFE_withComponentProps(Login);
const route89 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  Login,
  default: login
}, Symbol.toStringTag, { value: "Module" }));
const serverManifest = { "entry": { "module": "/assets/entry.client-CxwFs8mh.js", "imports": ["/assets/forgot-password-Cd1Knve9.js", "/assets/index-r0Cach5g.js", "/assets/chunk-JZWAC4HX-DumfKpwM.js"], "css": [] }, "routes": { "root": { "id": "root", "parentId": void 0, "path": "", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/root-BHJj_Nf9.js", "imports": ["/assets/forgot-password-Cd1Knve9.js", "/assets/index-r0Cach5g.js", "/assets/chunk-JZWAC4HX-DumfKpwM.js"], "css": ["/assets/root-CfR6rKvc.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.finance.transactions": { "id": "routes/api.finance.transactions", "parentId": "root", "path": "api/finance/transactions", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.finance.transactions-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.finance.transactions.$id": { "id": "routes/api.finance.transactions.$id", "parentId": "routes/api.finance.transactions", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.finance.transactions._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.admin.organizations": { "id": "routes/api.admin.organizations", "parentId": "root", "path": "api/admin/organizations", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.admin.organizations-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.admin.organizations.$id": { "id": "routes/api.admin.organizations.$id", "parentId": "routes/api.admin.organizations", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.admin.organizations._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.client.dashboard": { "id": "routes/api.client.dashboard", "parentId": "root", "path": "api/client/dashboard", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.client.dashboard-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.client.checkout": { "id": "routes/api.client.checkout", "parentId": "root", "path": "api/client/checkout", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.client.checkout-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.fleet.vehicles": { "id": "routes/api.fleet.vehicles", "parentId": "root", "path": "api/fleet/vehicles", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.fleet.vehicles-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.fleet.vehicles.$id": { "id": "routes/api.fleet.vehicles.$id", "parentId": "routes/api.fleet.vehicles", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.fleet.vehicles._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.fleet.vehicles.$id.seats": { "id": "routes/api.fleet.vehicles.$id.seats", "parentId": "routes/api.fleet.vehicles.$id", "path": "seats", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.fleet.vehicles._id.seats-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.organization.$": { "id": "routes/api.organization.$", "parentId": "root", "path": "api/organization/*", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.organization._-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.auth.recovery": { "id": "routes/api.auth.recovery", "parentId": "root", "path": "api/auth/recovery", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.auth.recovery-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.auth.username": { "id": "routes/api.auth.username", "parentId": "root", "path": "api/auth/username", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.auth.username-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.fleet.drivers": { "id": "routes/api.fleet.drivers", "parentId": "root", "path": "api/fleet/drivers", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.fleet.drivers-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.fleet.drivers.$id": { "id": "routes/api.fleet.drivers.$id", "parentId": "routes/api.fleet.drivers", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.fleet.drivers._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.reservations": { "id": "routes/api.reservations", "parentId": "root", "path": "api/reservations", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.reservations-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.reservations.$id": { "id": "routes/api.reservations.$id", "parentId": "routes/api.reservations", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.reservations._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.locations.$": { "id": "routes/api.locations.$", "parentId": "root", "path": "api/locations/*", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.locations._-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.maintenance": { "id": "routes/api.maintenance", "parentId": "root", "path": "api/maintenance", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.maintenance-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.maintenance.$id": { "id": "routes/api.maintenance.$id", "parentId": "routes/api.maintenance", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.maintenance._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/forgot-password": { "id": "routes/forgot-password", "parentId": "root", "path": "forgot-password", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/forgot-password-Cd1Knve9.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/forgot-username": { "id": "routes/forgot-username", "parentId": "root", "path": "forgot-username", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/forgot-username-CQzIWjyJ.js", "imports": ["/assets/forgot-password-Cd1Knve9.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.webhooks.$": { "id": "routes/api.webhooks.$", "parentId": "root", "path": "api/webhooks/*", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.webhooks._-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/reset-password": { "id": "routes/reset-password", "parentId": "root", "path": "reset-password", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/reset-password-P0kMDf4s.js", "imports": ["/assets/forgot-password-Cd1Knve9.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.charters": { "id": "routes/api.charters", "parentId": "root", "path": "api/charters", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.charters-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.charters.$id": { "id": "routes/api.charters.$id", "parentId": "routes/api.charters", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.charters._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.public.$": { "id": "routes/api.public.$", "parentId": "root", "path": "api/public/*", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.public._-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.clients": { "id": "routes/api.clients", "parentId": "root", "path": "api/clients", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.clients-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.clients.$id": { "id": "routes/api.clients.$id", "parentId": "routes/api.clients", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.clients._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.clients.$id.interactions": { "id": "routes/api.clients.$id.interactions", "parentId": "routes/api.clients.$id", "path": "interactions", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.clients._id.interactions-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.clients.$id.notes": { "id": "routes/api.clients.$id.notes", "parentId": "routes/api.clients.$id", "path": "notes", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.clients._id.notes-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.parcels": { "id": "routes/api.parcels", "parentId": "root", "path": "api/parcels", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.parcels-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.parcels.$id": { "id": "routes/api.parcels.$id", "parentId": "routes/api.parcels", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.parcels._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.profile": { "id": "routes/api.profile", "parentId": "root", "path": "api/profile", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.profile-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.profile.change-password": { "id": "routes/api.profile.change-password", "parentId": "routes/api.profile", "path": "change-password", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.profile.change-password-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.profile.avatar": { "id": "routes/api.profile.avatar", "parentId": "routes/api.profile", "path": "avatar", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.profile.avatar-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.auth.$": { "id": "routes/api.auth.$", "parentId": "root", "path": "api/auth/*", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.auth._-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.routes": { "id": "routes/api.routes", "parentId": "root", "path": "api/routes", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.routes-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.routes.$id": { "id": "routes/api.routes.$id", "parentId": "routes/api.routes", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.routes._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.trips": { "id": "routes/api.trips", "parentId": "root", "path": "api/trips", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.trips-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.trips.tags": { "id": "routes/api.trips.tags", "parentId": "routes/api.trips", "path": "tags", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.trips.tags-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.trips.tags.$id": { "id": "routes/api.trips.tags.$id", "parentId": "routes/api.trips.tags", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.trips.tags._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.trips.$id": { "id": "routes/api.trips.$id", "parentId": "routes/api.trips", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.trips._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.users": { "id": "routes/api.users", "parentId": "root", "path": "api/users", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.users-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.users.$id": { "id": "routes/api.users.$id", "parentId": "routes/api.users", "path": ":id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.users._id-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/api.users.$id.reset-password": { "id": "routes/api.users.$id.reset-password", "parentId": "routes/api.users.$id", "path": "reset-password", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/api.users._id.reset-password-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/_index": { "id": "routes/_index", "parentId": "root", "path": void 0, "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/_index-l0sNRNKZ.js", "imports": [], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/signup": { "id": "routes/signup", "parentId": "root", "path": "signup", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/signup-NMTyVbkA.js", "imports": ["/assets/forgot-password-Cd1Knve9.js", "/assets/reset-password-P0kMDf4s.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin": { "id": "routes/admin", "parentId": "root", "path": "admin", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin-BqUb0HKu.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/AppContext-CqFrqiNi.js", "/assets/types-DFYgxmzW.js", "/assets/utils-CDN07tui.js", "/assets/bus-D0L2JeBO.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/ticket-DleTbqHz.js", "/assets/users-BFoA2Uj7.js", "/assets/map-pin-BU3OPG7D.js", "/assets/truck-DjqGUVW-.js", "/assets/package-CA3PlPAx.js", "/assets/wrench-sIQVKmUa.js", "/assets/credit-card-CZ_EN1c_.js", "/assets/trending-up-BKzFUhqw.js", "/assets/file-text-BwHme3NP.js", "/assets/building-2-gEJPO4Fu.js", "/assets/chevron-right-DQu5sotq.js", "/assets/reset-password-P0kMDf4s.js", "/assets/select-PWih0cLE.js", "/assets/avatar-NOAFfuWM.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/button-D5icbzZz.js", "/assets/separator-CWBAEyCK.js", "/assets/search-CnuVL9vz.js", "/assets/chevron-down-Dfyi3Exh.js", "/assets/user-BQEge37k.js", "/assets/moon-BYP2SUiN.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/index-r0Cach5g.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CNk52wy-.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-COQIOskD.js", "/assets/check-DPa0jV58.js", "/assets/index-BHI_vTdI.js", "/assets/index-Cu73DSvi.js", "/assets/index-BTyV9z74.js", "/assets/index-CGIZjBuz.js", "/assets/circle-Inv2uPuq.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.auxiliary-data._index": { "id": "routes/admin.auxiliary-data._index", "parentId": "routes/admin", "path": "auxiliary-data", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.auxiliary-data._index-D4ylYFYx.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/utils-CDN07tui.js", "/assets/input-emgR2opu.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/plus-D5F9e-Lx.js", "/assets/building-LiWpeRJl.js", "/assets/map-pin-BU3OPG7D.js", "/assets/search-CnuVL9vz.js", "/assets/x-CitWcJvG.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.maintenance.$id.edit": { "id": "routes/admin.maintenance.$id.edit", "parentId": "routes/admin", "path": "maintenance/:id/edit", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.maintenance._id.edit-Bhg6EkSE.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/MaintenanceForm-DJFY12bS.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/types-DFYgxmzW.js", "/assets/wrench-sIQVKmUa.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/calendar-B2-DO3Xm.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.organizations._index": { "id": "routes/admin.organizations._index", "parentId": "routes/admin", "path": "organizations", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.organizations._index-ZR-ywz7l.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/users-BFoA2Uj7.js", "/assets/search-CnuVL9vz.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/trash-2-BO5CKzGP.js", "/assets/AppContext-CqFrqiNi.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/utils-CDN07tui.js", "/assets/building-2-gEJPO4Fu.js", "/assets/chevron-right-DQu5sotq.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/types-DFYgxmzW.js", "/assets/reset-password-P0kMDf4s.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.reservations._index": { "id": "routes/admin.reservations._index", "parentId": "routes/admin", "path": "reservations", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.reservations._index-DuYZI3Jn.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/select-PWih0cLE.js", "/assets/popover-BPpg6i3_.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/card-Cg68uFrF.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/ticket-DleTbqHz.js", "/assets/plus-D5F9e-Lx.js", "/assets/inbox-DZlonFmr.js", "/assets/clock-BRAlDuTD.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/gauge-ysNVctcQ.js", "/assets/search-CnuVL9vz.js", "/assets/funnel-CYVAQuTw.js", "/assets/chevron-down-Dfyi3Exh.js", "/assets/check-DPa0jV58.js", "/assets/ellipsis-DBh4irOy.js", "/assets/AppContext-CqFrqiNi.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-r0Cach5g.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CNk52wy-.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-COQIOskD.js", "/assets/index-BTyV9z74.js", "/assets/index-CGIZjBuz.js", "/assets/chevron-right-DQu5sotq.js", "/assets/circle-Inv2uPuq.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.maintenance._index": { "id": "routes/admin.maintenance._index", "parentId": "routes/admin", "path": "maintenance", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.maintenance._index-OmN5_UIJ.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/card-Cg68uFrF.js", "/assets/tabs-C5PlI2Of.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/dialog-GXWVtUJA.js", "/assets/ellipsis-DBh4irOy.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/wrench-sIQVKmUa.js", "/assets/plus-D5F9e-Lx.js", "/assets/clock-BRAlDuTD.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/calendar-B2-DO3Xm.js", "/assets/search-CnuVL9vz.js", "/assets/inbox-DZlonFmr.js", "/assets/circle-check-big-I14bXISs.js", "/assets/trending-up-BKzFUhqw.js", "/assets/AppContext-CqFrqiNi.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/chevron-right-DQu5sotq.js", "/assets/check-DPa0jV58.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js", "/assets/x-CitWcJvG.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.activities._index": { "id": "routes/admin.activities._index", "parentId": "routes/admin", "path": "activities", "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.activities._index-Ge0QQV1H.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/card-Cg68uFrF.js", "/assets/input-emgR2opu.js", "/assets/utils-CDN07tui.js", "/assets/activity-qu1E1lA0.js", "/assets/search-CnuVL9vz.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/circle-check-big-I14bXISs.js", "/assets/package-CA3PlPAx.js", "/assets/users-BFoA2Uj7.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/bus-D0L2JeBO.js", "/assets/clock-BRAlDuTD.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.charter.$id.edit": { "id": "routes/admin.charter.$id.edit", "parentId": "routes/admin", "path": "charter/:id/edit", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.charter._id.edit-BdaoeSIo.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/CharterForm-D3Xf02Ex.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/building-2-gEJPO4Fu.js", "/assets/map-pin-BU3OPG7D.js", "/assets/calendar-B2-DO3Xm.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/file-text-BwHme3NP.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.documents._index": { "id": "routes/admin.documents._index", "parentId": "routes/admin", "path": "documents", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.documents._index-Brg2L64_.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/badge-OnEQOSZY.js", "/assets/input-emgR2opu.js", "/assets/utils-CDN07tui.js", "/assets/file-text-BwHme3NP.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/truck-DjqGUVW-.js", "/assets/users-BFoA2Uj7.js", "/assets/building-LiWpeRJl.js", "/assets/search-CnuVL9vz.js", "/assets/download-C1fZsWYz.js", "/assets/trash-2-BO5CKzGP.js", "/assets/AppContext-CqFrqiNi.js", "/assets/types-DFYgxmzW.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.drivers.edit.$id": { "id": "routes/admin.drivers.edit.$id", "parentId": "routes/admin", "path": "drivers/edit/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.drivers.edit._id-CTlVsdej.js", "imports": ["/assets/forgot-password-Cd1Knve9.js", "/assets/input-emgR2opu.js", "/assets/alert-vCj8ckqs.js", "/assets/popover-BPpg6i3_.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/format-Teop82l3.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/chevron-right-DQu5sotq.js", "/assets/card-Cg68uFrF.js", "/assets/index-BHI_vTdI.js", "/assets/index-r0Cach5g.js", "/assets/index-Ds5WWjjE.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-BTyV9z74.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.parcels.$id.edit": { "id": "routes/admin.parcels.$id.edit", "parentId": "routes/admin", "path": "parcels/:id/edit", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.parcels._id.edit-B9PIRV5t.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/ParcelForm-DJ-Hhn4e.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/user-BQEge37k.js", "/assets/map-pin-BU3OPG7D.js", "/assets/package-CA3PlPAx.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/truck-DjqGUVW-.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.reservations.$id": { "id": "routes/admin.reservations.$id", "parentId": "routes/admin", "path": "reservations/:id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.reservations._id-OYHw53G2.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/utils-CDN07tui.js", "/assets/types-DFYgxmzW.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/clock-BRAlDuTD.js", "/assets/printer-DssbX2JM.js", "/assets/bus-D0L2JeBO.js", "/assets/history-D-frBnTS.js", "/assets/credit-card-CZ_EN1c_.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.reservations.new": { "id": "routes/admin.reservations.new", "parentId": "routes/admin", "path": "reservations/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.reservations.new-CYReOzrf.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/search-CnuVL9vz.js", "/assets/check-DPa0jV58.js", "/assets/calendar-B2-DO3Xm.js", "/assets/clock-BRAlDuTD.js", "/assets/map-pin-BU3OPG7D.js", "/assets/bus-D0L2JeBO.js", "/assets/users-BFoA2Uj7.js", "/assets/circle-x-Bi7UYLIw.js", "/assets/circle-check-big-I14bXISs.js", "/assets/loader-CBdNOhxw.js", "/assets/user-BQEge37k.js", "/assets/types-DFYgxmzW.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/moon-BYP2SUiN.js", "/assets/star-jM7IWhSt.js", "/assets/circle-Inv2uPuq.js", "/assets/lock-DeC39RxH.js", "/assets/utils-CDN07tui.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.transactions.$id": { "id": "routes/admin.transactions.$id", "parentId": "routes/admin", "path": "transactions/:id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.transactions._id-DuiRqs19.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/utils-CDN07tui.js", "/assets/types-DFYgxmzW.js", "/assets/printer-DssbX2JM.js", "/assets/arrow-up-right-BWtbCpyw.js", "/assets/building-LiWpeRJl.js", "/assets/file-text-BwHme3NP.js", "/assets/history-D-frBnTS.js", "/assets/trash-2-BO5CKzGP.js", "/assets/createLucideIcon-C45Xejds.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.maintenance.new": { "id": "routes/admin.maintenance.new", "parentId": "routes/admin", "path": "maintenance/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.maintenance.new-CmNohHxu.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/MaintenanceForm-DJFY12bS.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/types-DFYgxmzW.js", "/assets/wrench-sIQVKmUa.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/calendar-B2-DO3Xm.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.routes.$id.edit": { "id": "routes/admin.routes.$id.edit", "parentId": "routes/admin", "path": "routes/:id/edit", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.routes._id.edit-BV5o8HaG.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/RouteForm-DeMEzvm6.js", "/assets/button-D5icbzZz.js", "/assets/utils-CDN07tui.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/api-Bkf04Nmd.js", "/assets/rotaValidation-CGbs3Otn.js", "/assets/input-emgR2opu.js", "/assets/alert-vCj8ckqs.js", "/assets/index-BHI_vTdI.js", "/assets/index-r0Cach5g.js", "/assets/clock-BRAlDuTD.js", "/assets/map-pin-BU3OPG7D.js", "/assets/plus-D5F9e-Lx.js", "/assets/route-BtR-I38-.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/x-CitWcJvG.js", "/assets/loader-CBdNOhxw.js", "/assets/save-QxpYx9ZK.js", "/assets/triangle-alert-ChAdqAq2.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.settings._index": { "id": "routes/admin.settings._index", "parentId": "routes/admin", "path": "settings", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.settings._index-DwG3U0z6.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/AppContext-CqFrqiNi.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/utils-CDN07tui.js", "/assets/input-emgR2opu.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/search-CnuVL9vz.js", "/assets/plus-D5F9e-Lx.js", "/assets/chevron-right-DQu5sotq.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/save-QxpYx9ZK.js", "/assets/trash-2-BO5CKzGP.js", "/assets/types-DFYgxmzW.js", "/assets/reset-password-P0kMDf4s.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.charter._index": { "id": "routes/admin.charter._index", "parentId": "routes/admin", "path": "charter", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.charter._index-CwNSkDY1.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/card-Cg68uFrF.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/badge-OnEQOSZY.js", "/assets/tabs-C5PlI2Of.js", "/assets/table-B8EXJzV4.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/alert-dialog-BsWUNK-P.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/building-2-gEJPO4Fu.js", "/assets/plus-D5F9e-Lx.js", "/assets/file-text-BwHme3NP.js", "/assets/clock-BRAlDuTD.js", "/assets/circle-check-big-I14bXISs.js", "/assets/trending-up-BKzFUhqw.js", "/assets/search-CnuVL9vz.js", "/assets/map-pin-BU3OPG7D.js", "/assets/calendar-B2-DO3Xm.js", "/assets/ellipsis-DBh4irOy.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/AppContext-CqFrqiNi.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/chevron-right-DQu5sotq.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/check-DPa0jV58.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.clients._index": { "id": "routes/admin.clients._index", "parentId": "routes/admin", "path": "clients", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.clients._index-DdYdnC9A.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/api-Bkf04Nmd.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/eye-D6sHawNO.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/avatar-NOAFfuWM.js", "/assets/tabs-C5PlI2Of.js", "/assets/table-B8EXJzV4.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/users-BFoA2Uj7.js", "/assets/user-plus-CLYU4vXU.js", "/assets/star-jM7IWhSt.js", "/assets/trending-up-BKzFUhqw.js", "/assets/award-CISDC_7z.js", "/assets/search-CnuVL9vz.js", "/assets/mail-DgcRa5qp.js", "/assets/phone-hZYhS4mS.js", "/assets/index-CzPzUr9r.js", "/assets/index-Ds5WWjjE.js", "/assets/index-BHI_vTdI.js", "/assets/index-r0Cach5g.js", "/assets/index-Cu73DSvi.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-BTyV9z74.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.drivers._index": { "id": "routes/admin.drivers._index", "parentId": "routes/admin", "path": "drivers", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.drivers._index-CArj6xpL.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/card-Cg68uFrF.js", "/assets/tabs-C5PlI2Of.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/dialog-GXWVtUJA.js", "/assets/ellipsis-DBh4irOy.js", "/assets/eye-D6sHawNO.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/plus-D5F9e-Lx.js", "/assets/user-BQEge37k.js", "/assets/circle-check-big-I14bXISs.js", "/assets/clock-BRAlDuTD.js", "/assets/calendar-B2-DO3Xm.js", "/assets/search-CnuVL9vz.js", "/assets/circle-x-Bi7UYLIw.js", "/assets/AppContext-CqFrqiNi.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/chevron-right-DQu5sotq.js", "/assets/check-DPa0jV58.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js", "/assets/x-CitWcJvG.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.finance._index": { "id": "routes/admin.finance._index", "parentId": "routes/admin", "path": "finance", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.finance._index-DyZUBal6.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/types-DFYgxmzW.js", "/assets/AppContext-CqFrqiNi.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/dialog-GXWVtUJA.js", "/assets/button-D5icbzZz.js", "/assets/ellipsis-DBh4irOy.js", "/assets/square-pen-DbBn1E1l.js", "/assets/circle-check-big-I14bXISs.js", "/assets/clock-BRAlDuTD.js", "/assets/trash-2-BO5CKzGP.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/card-Cg68uFrF.js", "/assets/tabs-C5PlI2Of.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/utils-CDN07tui.js", "/assets/plus-D5F9e-Lx.js", "/assets/trending-up-BKzFUhqw.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/wallet-BvBE24dE.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/arrow-up-right-BWtbCpyw.js", "/assets/file-text-BwHme3NP.js", "/assets/chart-pie-CWj8mufS.js", "/assets/inbox-DZlonFmr.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-Ds5WWjjE.js", "/assets/index-r0Cach5g.js", "/assets/index-CNk52wy-.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-BTyV9z74.js", "/assets/index-CGIZjBuz.js", "/assets/chevron-right-DQu5sotq.js", "/assets/check-DPa0jV58.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js", "/assets/x-CitWcJvG.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.parcels._index": { "id": "routes/admin.parcels._index", "parentId": "routes/admin", "path": "parcels", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.parcels._index-BhpUx2bK.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/card-Cg68uFrF.js", "/assets/button-D5icbzZz.js", "/assets/tabs-C5PlI2Of.js", "/assets/input-emgR2opu.js", "/assets/badge-OnEQOSZY.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/alert-dialog-BsWUNK-P.js", "/assets/utils-CDN07tui.js", "/assets/package-CA3PlPAx.js", "/assets/plus-D5F9e-Lx.js", "/assets/bus-D0L2JeBO.js", "/assets/truck-DjqGUVW-.js", "/assets/trending-up-BKzFUhqw.js", "/assets/search-CnuVL9vz.js", "/assets/ellipsis-DBh4irOy.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/map-pin-BU3OPG7D.js", "/assets/calendar-B2-DO3Xm.js", "/assets/AppContext-CqFrqiNi.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/chevron-right-DQu5sotq.js", "/assets/check-DPa0jV58.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.reports._index": { "id": "routes/admin.reports._index", "parentId": "routes/admin", "path": "reports", "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.reports._index-pYapYAxt.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/AppContext-CqFrqiNi.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/card-Cg68uFrF.js", "/assets/tabs-C5PlI2Of.js", "/assets/button-D5icbzZz.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/download-C1fZsWYz.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/activity-qu1E1lA0.js", "/assets/bus-D0L2JeBO.js", "/assets/trending-up-BKzFUhqw.js", "/assets/AreaChart-CEtSDaQk.js", "/assets/utils-CDN07tui.js", "/assets/index-r0Cach5g.js", "/assets/types-DFYgxmzW.js", "/assets/reset-password-P0kMDf4s.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-BTyV9z74.js", "/assets/index-Cu73DSvi.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.users.$id.edit": { "id": "routes/admin.users.$id.edit", "parentId": "routes/admin", "path": "users/:id/edit", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.users._id.edit-BGJwWAbj.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/UserForm-DQpD5cKx.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/index-Ds5WWjjE.js", "/assets/index-COQIOskD.js", "/assets/index-BDGasEjq.js", "/assets/index-r0Cach5g.js", "/assets/user-BQEge37k.js", "/assets/lock-DeC39RxH.js", "/assets/shield-Ba35X56A.js", "/assets/building-2-gEJPO4Fu.js", "/assets/calendar-B2-DO3Xm.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.routes._index": { "id": "routes/admin.routes._index", "parentId": "routes/admin", "path": "routes", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.routes._index-CiKNKUYj.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/tabs-C5PlI2Of.js", "/assets/select-PWih0cLE.js", "/assets/card-Cg68uFrF.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/plus-D5F9e-Lx.js", "/assets/route-BtR-I38-.js", "/assets/map-pin-BU3OPG7D.js", "/assets/gauge-ysNVctcQ.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/search-CnuVL9vz.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/index-COQIOskD.js", "/assets/chevron-down-Dfyi3Exh.js", "/assets/check-DPa0jV58.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.fleet._index": { "id": "routes/admin.fleet._index", "parentId": "routes/admin", "path": "fleet", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.fleet._index-DB2UG-ii.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/AppContext-CqFrqiNi.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/card-Cg68uFrF.js", "/assets/tabs-C5PlI2Of.js", "/assets/utils-CDN07tui.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/dialog-GXWVtUJA.js", "/assets/ellipsis-DBh4irOy.js", "/assets/eye-D6sHawNO.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trash-2-BO5CKzGP.js", "/assets/triangle-alert-ChAdqAq2.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/bus-D0L2JeBO.js", "/assets/plus-D5F9e-Lx.js", "/assets/circle-check-big-I14bXISs.js", "/assets/trending-up-BKzFUhqw.js", "/assets/wrench-sIQVKmUa.js", "/assets/search-CnuVL9vz.js", "/assets/inbox-DZlonFmr.js", "/assets/truck-DjqGUVW-.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/reset-password-P0kMDf4s.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/chevron-right-DQu5sotq.js", "/assets/check-DPa0jV58.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js", "/assets/x-CitWcJvG.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.trips._index": { "id": "routes/admin.trips._index", "parentId": "routes/admin", "path": "trips", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.trips._index-C8rMOiFj.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/types-DFYgxmzW.js", "/assets/table-B8EXJzV4.js", "/assets/badge-OnEQOSZY.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/dropdown-menu-CNNo2K3q.js", "/assets/popover-BPpg6i3_.js", "/assets/card-Cg68uFrF.js", "/assets/alert-dialog-BsWUNK-P.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/bus-D0L2JeBO.js", "/assets/plus-D5F9e-Lx.js", "/assets/calendar-B2-DO3Xm.js", "/assets/loader-CBdNOhxw.js", "/assets/trending-up-BKzFUhqw.js", "/assets/search-CnuVL9vz.js", "/assets/funnel-CYVAQuTw.js", "/assets/chevron-down-Dfyi3Exh.js", "/assets/check-DPa0jV58.js", "/assets/users-BFoA2Uj7.js", "/assets/ellipsis-DBh4irOy.js", "/assets/circle-check-big-I14bXISs.js", "/assets/clock-BRAlDuTD.js", "/assets/AppContext-CqFrqiNi.js", "/assets/reset-password-P0kMDf4s.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/index-Ds5WWjjE.js", "/assets/index-r0Cach5g.js", "/assets/index-CNk52wy-.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-BTyV9z74.js", "/assets/index-CGIZjBuz.js", "/assets/chevron-right-DQu5sotq.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/circle-Inv2uPuq.js", "/assets/index-BCt1EX5H.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.users._index": { "id": "routes/admin.users._index", "parentId": "routes/admin", "path": "users", "index": true, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.users._index-DlthJvfg.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/types-DFYgxmzW.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/ListFilterSection-C2yv81r0.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/card-Cg68uFrF.js", "/assets/user-BQEge37k.js", "/assets/plus-D5F9e-Lx.js", "/assets/search-CnuVL9vz.js", "/assets/mail-DgcRa5qp.js", "/assets/calendar-B2-DO3Xm.js", "/assets/square-pen-DbBn1E1l.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/trash-2-BO5CKzGP.js", "/assets/shield-Ba35X56A.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.vehicles.$id": { "id": "routes/admin.vehicles.$id", "parentId": "routes/admin", "path": "vehicles/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.vehicles._id-C9XzSsk-.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/tabs-C5PlI2Of.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/table-B8EXJzV4.js", "/assets/types-DFYgxmzW.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/plus-D5F9e-Lx.js", "/assets/x-CitWcJvG.js", "/assets/save-QxpYx9ZK.js", "/assets/bus-D0L2JeBO.js", "/assets/square-pen-DbBn1E1l.js", "/assets/gauge-ysNVctcQ.js", "/assets/clock-BRAlDuTD.js", "/assets/users-BFoA2Uj7.js", "/assets/wrench-sIQVKmUa.js", "/assets/file-text-BwHme3NP.js", "/assets/circle-check-big-I14bXISs.js", "/assets/utils-CDN07tui.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.vehicles.new": { "id": "routes/admin.vehicles.new", "parentId": "routes/admin", "path": "vehicles/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.vehicles.new-CRCAFiH_.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/FormSection-BVV1rFH3.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/utils-CDN07tui.js", "/assets/types-DFYgxmzW.js", "/assets/bus-D0L2JeBO.js", "/assets/truck-DjqGUVW-.js", "/assets/wrench-sIQVKmUa.js", "/assets/file-text-BwHme3NP.js", "/assets/trash-2-BO5CKzGP.js", "/assets/plus-D5F9e-Lx.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/card-Cg68uFrF.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.charter.new": { "id": "routes/admin.charter.new", "parentId": "routes/admin", "path": "charter/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.charter.new-BqNk0voW.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/CharterForm-D3Xf02Ex.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/building-2-gEJPO4Fu.js", "/assets/map-pin-BU3OPG7D.js", "/assets/calendar-B2-DO3Xm.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/file-text-BwHme3NP.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.clients.$id": { "id": "routes/admin.clients.$id", "parentId": "routes/admin", "path": "clients/:id", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.clients._id-DJkseQRp.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/tabs-C5PlI2Of.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/utils-CDN07tui.js", "/assets/square-pen-DbBn1E1l.js", "/assets/trending-up-BKzFUhqw.js", "/assets/credit-card-CZ_EN1c_.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/award-CISDC_7z.js", "/assets/user-BQEge37k.js", "/assets/map-pin-BU3OPG7D.js", "/assets/plus-D5F9e-Lx.js", "/assets/star-jM7IWhSt.js", "/assets/index-Ds5WWjjE.js", "/assets/index-CGIZjBuz.js", "/assets/index-CNk52wy-.js", "/assets/index-CzPzUr9r.js", "/assets/index-r0Cach5g.js", "/assets/index-BTyV9z74.js", "/assets/createLucideIcon-C45Xejds.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.clients.$id.edit": { "id": "routes/admin.clients.$id.edit", "parentId": "routes/admin.clients.$id", "path": "edit", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.clients._id.edit-C_R5ik6s.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/ClientForm-C5ODDm-g.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/types-DFYgxmzW.js", "/assets/building-2-gEJPO4Fu.js", "/assets/user-BQEge37k.js", "/assets/map-pin-BU3OPG7D.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/file-text-BwHme3NP.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.clients.new": { "id": "routes/admin.clients.new", "parentId": "routes/admin", "path": "clients/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.clients.new-DwTBez1j.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/ClientForm-C5ODDm-g.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/types-DFYgxmzW.js", "/assets/building-2-gEJPO4Fu.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/user-BQEge37k.js", "/assets/map-pin-BU3OPG7D.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/file-text-BwHme3NP.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.drivers.new": { "id": "routes/admin.drivers.new", "parentId": "routes/admin", "path": "drivers/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.drivers.new-DcKd5mn7.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/DatePicker-BYHV-MFq.js", "/assets/alert-vCj8ckqs.js", "/assets/button-D5icbzZz.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/FormSection-BVV1rFH3.js", "/assets/types-DFYgxmzW.js", "/assets/loader-CBdNOhxw.js", "/assets/save-QxpYx9ZK.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/user-BQEge37k.js", "/assets/file-text-BwHme3NP.js", "/assets/phone-hZYhS4mS.js", "/assets/input-emgR2opu.js", "/assets/utils-CDN07tui.js", "/assets/popover-BPpg6i3_.js", "/assets/index-Ds5WWjjE.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-r0Cach5g.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-BTyV9z74.js", "/assets/admin.drivers.edit._id-CTlVsdej.js", "/assets/format-Teop82l3.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/chevron-right-DQu5sotq.js", "/assets/card-Cg68uFrF.js", "/assets/calendar-B2-DO3Xm.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/index-BHI_vTdI.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.parcels.new": { "id": "routes/admin.parcels.new", "parentId": "routes/admin", "path": "parcels/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.parcels.new-0Z8YDFBK.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/ParcelForm-DJ-Hhn4e.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/user-BQEge37k.js", "/assets/map-pin-BU3OPG7D.js", "/assets/package-CA3PlPAx.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/truck-DjqGUVW-.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.routes.new": { "id": "routes/admin.routes.new", "parentId": "routes/admin", "path": "routes/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.routes.new-BINIulEs.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/RouteForm-DeMEzvm6.js", "/assets/button-D5icbzZz.js", "/assets/utils-CDN07tui.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/api-Bkf04Nmd.js", "/assets/rotaValidation-CGbs3Otn.js", "/assets/input-emgR2opu.js", "/assets/alert-vCj8ckqs.js", "/assets/index-BHI_vTdI.js", "/assets/index-r0Cach5g.js", "/assets/clock-BRAlDuTD.js", "/assets/map-pin-BU3OPG7D.js", "/assets/plus-D5F9e-Lx.js", "/assets/route-BtR-I38-.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/x-CitWcJvG.js", "/assets/loader-CBdNOhxw.js", "/assets/save-QxpYx9ZK.js", "/assets/triangle-alert-ChAdqAq2.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.dashboard": { "id": "routes/admin.dashboard", "parentId": "routes/admin", "path": "dashboard", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.dashboard-D-jg_po6.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/useDateFormatter-CNVcwzUI.js", "/assets/AppContext-CqFrqiNi.js", "/assets/types-DFYgxmzW.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/card-Cg68uFrF.js", "/assets/button-D5icbzZz.js", "/assets/badge-OnEQOSZY.js", "/assets/avatar-NOAFfuWM.js", "/assets/separator-CWBAEyCK.js", "/assets/select-PWih0cLE.js", "/assets/utils-CDN07tui.js", "/assets/clock-BRAlDuTD.js", "/assets/wallet-BvBE24dE.js", "/assets/users-BFoA2Uj7.js", "/assets/package-CA3PlPAx.js", "/assets/activity-qu1E1lA0.js", "/assets/bus-D0L2JeBO.js", "/assets/AreaChart-CEtSDaQk.js", "/assets/plus-D5F9e-Lx.js", "/assets/truck-DjqGUVW-.js", "/assets/arrow-up-right-BWtbCpyw.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/format-Teop82l3.js", "/assets/reset-password-P0kMDf4s.js", "/assets/index-CzPzUr9r.js", "/assets/index-Ds5WWjjE.js", "/assets/index-BHI_vTdI.js", "/assets/index-r0Cach5g.js", "/assets/index-Cu73DSvi.js", "/assets/index-CNk52wy-.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-BDGasEjq.js", "/assets/index-COQIOskD.js", "/assets/chevron-down-Dfyi3Exh.js", "/assets/check-DPa0jV58.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.trips.$id": { "id": "routes/admin.trips.$id", "parentId": "routes/admin", "path": "trips/:id", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.trips._id-XkQUj3tp.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/card-Cg68uFrF.js", "/assets/badge-OnEQOSZY.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/DashboardCard-CAo4eudV.js", "/assets/printer-DssbX2JM.js", "/assets/chart-pie-CWj8mufS.js", "/assets/users-BFoA2Uj7.js", "/assets/bus-D0L2JeBO.js", "/assets/user-plus-CLYU4vXU.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/utils-CDN07tui.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.trips.new": { "id": "routes/admin.trips.new", "parentId": "routes/admin", "path": "trips/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.trips.new-CNGC2U-E.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/button-D5icbzZz.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/FormSection-BVV1rFH3.js", "/assets/types-DFYgxmzW.js", "/assets/rotaValidation-CGbs3Otn.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/clock-BRAlDuTD.js", "/assets/search-CnuVL9vz.js", "/assets/map-pin-BU3OPG7D.js", "/assets/x-CitWcJvG.js", "/assets/users-BFoA2Uj7.js", "/assets/check-DPa0jV58.js", "/assets/api-Bkf04Nmd.js", "/assets/loader-CBdNOhxw.js", "/assets/chevron-down-Dfyi3Exh.js", "/assets/plus-D5F9e-Lx.js", "/assets/DatePicker-BYHV-MFq.js", "/assets/alert-vCj8ckqs.js", "/assets/save-QxpYx9ZK.js", "/assets/circle-alert-NJ6oZxKs.js", "/assets/bus-D0L2JeBO.js", "/assets/route-BtR-I38-.js", "/assets/dollar-sign-c_abpx4r.js", "/assets/utils-CDN07tui.js", "/assets/card-Cg68uFrF.js", "/assets/input-emgR2opu.js", "/assets/popover-BPpg6i3_.js", "/assets/index-Ds5WWjjE.js", "/assets/Combination-Bzd-zPU3.js", "/assets/index-r0Cach5g.js", "/assets/index-CzPzUr9r.js", "/assets/index-BDGasEjq.js", "/assets/index-BTyV9z74.js", "/assets/admin.drivers.edit._id-CTlVsdej.js", "/assets/format-Teop82l3.js", "/assets/chevron-right-DQu5sotq.js", "/assets/calendar-B2-DO3Xm.js", "/assets/pt-BR-Dxhrr4Mm.js", "/assets/index-BHI_vTdI.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin.users.new": { "id": "routes/admin.users.new", "parentId": "routes/admin", "path": "users/new", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin.users.new-DKqeEsRW.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/PageHeader-BWRrOg2b.js", "/assets/UserForm-DQpD5cKx.js", "/assets/createLucideIcon-C45Xejds.js", "/assets/FormSection-BVV1rFH3.js", "/assets/card-Cg68uFrF.js", "/assets/utils-CDN07tui.js", "/assets/button-D5icbzZz.js", "/assets/input-emgR2opu.js", "/assets/index-Ds5WWjjE.js", "/assets/index-COQIOskD.js", "/assets/index-BDGasEjq.js", "/assets/index-r0Cach5g.js", "/assets/user-BQEge37k.js", "/assets/lock-DeC39RxH.js", "/assets/shield-Ba35X56A.js", "/assets/building-2-gEJPO4Fu.js", "/assets/calendar-B2-DO3Xm.js", "/assets/loader-circle-ic6ikmbW.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/login": { "id": "routes/login", "parentId": "root", "path": "login", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/login-_FFJk1YD.js", "imports": ["/assets/chunk-JZWAC4HX-DumfKpwM.js", "/assets/forgot-password-Cd1Knve9.js", "/assets/reset-password-P0kMDf4s.js", "/assets/bus-D0L2JeBO.js", "/assets/user-BQEge37k.js", "/assets/lock-DeC39RxH.js", "/assets/loader-circle-ic6ikmbW.js", "/assets/createLucideIcon-C45Xejds.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 } }, "url": "/assets/manifest-62c1a67f.js", "version": "62c1a67f", "sri": void 0 };
const assetsBuildDirectory = "build/client";
const basename = "/";
const future = { "unstable_optimizeDeps": false, "unstable_subResourceIntegrity": false, "unstable_trailingSlashAwareDataRequests": false, "v8_middleware": false, "v8_splitRouteModules": false, "v8_viteEnvironmentApi": false };
const ssr = true;
const isSpaMode = false;
const prerender = [];
const routeDiscovery = { "mode": "lazy", "manifestPath": "/__manifest" };
const publicPath = "/";
const entry = { module: entryServer };
const routes = {
  "root": {
    id: "root",
    parentId: void 0,
    path: "",
    index: void 0,
    caseSensitive: void 0,
    module: route0
  },
  "routes/api.finance.transactions": {
    id: "routes/api.finance.transactions",
    parentId: "root",
    path: "api/finance/transactions",
    index: void 0,
    caseSensitive: void 0,
    module: route1
  },
  "routes/api.finance.transactions.$id": {
    id: "routes/api.finance.transactions.$id",
    parentId: "routes/api.finance.transactions",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route2
  },
  "routes/api.admin.organizations": {
    id: "routes/api.admin.organizations",
    parentId: "root",
    path: "api/admin/organizations",
    index: void 0,
    caseSensitive: void 0,
    module: route3
  },
  "routes/api.admin.organizations.$id": {
    id: "routes/api.admin.organizations.$id",
    parentId: "routes/api.admin.organizations",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route4
  },
  "routes/api.client.dashboard": {
    id: "routes/api.client.dashboard",
    parentId: "root",
    path: "api/client/dashboard",
    index: void 0,
    caseSensitive: void 0,
    module: route5
  },
  "routes/api.client.checkout": {
    id: "routes/api.client.checkout",
    parentId: "root",
    path: "api/client/checkout",
    index: void 0,
    caseSensitive: void 0,
    module: route6
  },
  "routes/api.fleet.vehicles": {
    id: "routes/api.fleet.vehicles",
    parentId: "root",
    path: "api/fleet/vehicles",
    index: void 0,
    caseSensitive: void 0,
    module: route7
  },
  "routes/api.fleet.vehicles.$id": {
    id: "routes/api.fleet.vehicles.$id",
    parentId: "routes/api.fleet.vehicles",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route8
  },
  "routes/api.fleet.vehicles.$id.seats": {
    id: "routes/api.fleet.vehicles.$id.seats",
    parentId: "routes/api.fleet.vehicles.$id",
    path: "seats",
    index: void 0,
    caseSensitive: void 0,
    module: route9
  },
  "routes/api.organization.$": {
    id: "routes/api.organization.$",
    parentId: "root",
    path: "api/organization/*",
    index: void 0,
    caseSensitive: void 0,
    module: route10
  },
  "routes/api.auth.recovery": {
    id: "routes/api.auth.recovery",
    parentId: "root",
    path: "api/auth/recovery",
    index: void 0,
    caseSensitive: void 0,
    module: route11
  },
  "routes/api.auth.username": {
    id: "routes/api.auth.username",
    parentId: "root",
    path: "api/auth/username",
    index: void 0,
    caseSensitive: void 0,
    module: route12
  },
  "routes/api.fleet.drivers": {
    id: "routes/api.fleet.drivers",
    parentId: "root",
    path: "api/fleet/drivers",
    index: void 0,
    caseSensitive: void 0,
    module: route13
  },
  "routes/api.fleet.drivers.$id": {
    id: "routes/api.fleet.drivers.$id",
    parentId: "routes/api.fleet.drivers",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route14
  },
  "routes/api.reservations": {
    id: "routes/api.reservations",
    parentId: "root",
    path: "api/reservations",
    index: void 0,
    caseSensitive: void 0,
    module: route15
  },
  "routes/api.reservations.$id": {
    id: "routes/api.reservations.$id",
    parentId: "routes/api.reservations",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route16
  },
  "routes/api.locations.$": {
    id: "routes/api.locations.$",
    parentId: "root",
    path: "api/locations/*",
    index: void 0,
    caseSensitive: void 0,
    module: route17
  },
  "routes/api.maintenance": {
    id: "routes/api.maintenance",
    parentId: "root",
    path: "api/maintenance",
    index: void 0,
    caseSensitive: void 0,
    module: route18
  },
  "routes/api.maintenance.$id": {
    id: "routes/api.maintenance.$id",
    parentId: "routes/api.maintenance",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route19
  },
  "routes/forgot-password": {
    id: "routes/forgot-password",
    parentId: "root",
    path: "forgot-password",
    index: void 0,
    caseSensitive: void 0,
    module: route20
  },
  "routes/forgot-username": {
    id: "routes/forgot-username",
    parentId: "root",
    path: "forgot-username",
    index: void 0,
    caseSensitive: void 0,
    module: route21
  },
  "routes/api.webhooks.$": {
    id: "routes/api.webhooks.$",
    parentId: "root",
    path: "api/webhooks/*",
    index: void 0,
    caseSensitive: void 0,
    module: route22
  },
  "routes/reset-password": {
    id: "routes/reset-password",
    parentId: "root",
    path: "reset-password",
    index: void 0,
    caseSensitive: void 0,
    module: route23
  },
  "routes/api.charters": {
    id: "routes/api.charters",
    parentId: "root",
    path: "api/charters",
    index: void 0,
    caseSensitive: void 0,
    module: route24
  },
  "routes/api.charters.$id": {
    id: "routes/api.charters.$id",
    parentId: "routes/api.charters",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route25
  },
  "routes/api.public.$": {
    id: "routes/api.public.$",
    parentId: "root",
    path: "api/public/*",
    index: void 0,
    caseSensitive: void 0,
    module: route26
  },
  "routes/api.clients": {
    id: "routes/api.clients",
    parentId: "root",
    path: "api/clients",
    index: void 0,
    caseSensitive: void 0,
    module: route27
  },
  "routes/api.clients.$id": {
    id: "routes/api.clients.$id",
    parentId: "routes/api.clients",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route28
  },
  "routes/api.clients.$id.interactions": {
    id: "routes/api.clients.$id.interactions",
    parentId: "routes/api.clients.$id",
    path: "interactions",
    index: void 0,
    caseSensitive: void 0,
    module: route29
  },
  "routes/api.clients.$id.notes": {
    id: "routes/api.clients.$id.notes",
    parentId: "routes/api.clients.$id",
    path: "notes",
    index: void 0,
    caseSensitive: void 0,
    module: route30
  },
  "routes/api.parcels": {
    id: "routes/api.parcels",
    parentId: "root",
    path: "api/parcels",
    index: void 0,
    caseSensitive: void 0,
    module: route31
  },
  "routes/api.parcels.$id": {
    id: "routes/api.parcels.$id",
    parentId: "routes/api.parcels",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route32
  },
  "routes/api.profile": {
    id: "routes/api.profile",
    parentId: "root",
    path: "api/profile",
    index: void 0,
    caseSensitive: void 0,
    module: route33
  },
  "routes/api.profile.change-password": {
    id: "routes/api.profile.change-password",
    parentId: "routes/api.profile",
    path: "change-password",
    index: void 0,
    caseSensitive: void 0,
    module: route34
  },
  "routes/api.profile.avatar": {
    id: "routes/api.profile.avatar",
    parentId: "routes/api.profile",
    path: "avatar",
    index: void 0,
    caseSensitive: void 0,
    module: route35
  },
  "routes/api.auth.$": {
    id: "routes/api.auth.$",
    parentId: "root",
    path: "api/auth/*",
    index: void 0,
    caseSensitive: void 0,
    module: route36
  },
  "routes/api.routes": {
    id: "routes/api.routes",
    parentId: "root",
    path: "api/routes",
    index: void 0,
    caseSensitive: void 0,
    module: route37
  },
  "routes/api.routes.$id": {
    id: "routes/api.routes.$id",
    parentId: "routes/api.routes",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route38
  },
  "routes/api.trips": {
    id: "routes/api.trips",
    parentId: "root",
    path: "api/trips",
    index: void 0,
    caseSensitive: void 0,
    module: route39
  },
  "routes/api.trips.tags": {
    id: "routes/api.trips.tags",
    parentId: "routes/api.trips",
    path: "tags",
    index: void 0,
    caseSensitive: void 0,
    module: route40
  },
  "routes/api.trips.tags.$id": {
    id: "routes/api.trips.tags.$id",
    parentId: "routes/api.trips.tags",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route41
  },
  "routes/api.trips.$id": {
    id: "routes/api.trips.$id",
    parentId: "routes/api.trips",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route42
  },
  "routes/api.users": {
    id: "routes/api.users",
    parentId: "root",
    path: "api/users",
    index: void 0,
    caseSensitive: void 0,
    module: route43
  },
  "routes/api.users.$id": {
    id: "routes/api.users.$id",
    parentId: "routes/api.users",
    path: ":id",
    index: void 0,
    caseSensitive: void 0,
    module: route44
  },
  "routes/api.users.$id.reset-password": {
    id: "routes/api.users.$id.reset-password",
    parentId: "routes/api.users.$id",
    path: "reset-password",
    index: void 0,
    caseSensitive: void 0,
    module: route45
  },
  "routes/_index": {
    id: "routes/_index",
    parentId: "root",
    path: void 0,
    index: true,
    caseSensitive: void 0,
    module: route46
  },
  "routes/signup": {
    id: "routes/signup",
    parentId: "root",
    path: "signup",
    index: void 0,
    caseSensitive: void 0,
    module: route47
  },
  "routes/admin": {
    id: "routes/admin",
    parentId: "root",
    path: "admin",
    index: void 0,
    caseSensitive: void 0,
    module: route48
  },
  "routes/admin.auxiliary-data._index": {
    id: "routes/admin.auxiliary-data._index",
    parentId: "routes/admin",
    path: "auxiliary-data",
    index: true,
    caseSensitive: void 0,
    module: route49
  },
  "routes/admin.maintenance.$id.edit": {
    id: "routes/admin.maintenance.$id.edit",
    parentId: "routes/admin",
    path: "maintenance/:id/edit",
    index: void 0,
    caseSensitive: void 0,
    module: route50
  },
  "routes/admin.organizations._index": {
    id: "routes/admin.organizations._index",
    parentId: "routes/admin",
    path: "organizations",
    index: true,
    caseSensitive: void 0,
    module: route51
  },
  "routes/admin.reservations._index": {
    id: "routes/admin.reservations._index",
    parentId: "routes/admin",
    path: "reservations",
    index: true,
    caseSensitive: void 0,
    module: route52
  },
  "routes/admin.maintenance._index": {
    id: "routes/admin.maintenance._index",
    parentId: "routes/admin",
    path: "maintenance",
    index: true,
    caseSensitive: void 0,
    module: route53
  },
  "routes/admin.activities._index": {
    id: "routes/admin.activities._index",
    parentId: "routes/admin",
    path: "activities",
    index: true,
    caseSensitive: void 0,
    module: route54
  },
  "routes/admin.charter.$id.edit": {
    id: "routes/admin.charter.$id.edit",
    parentId: "routes/admin",
    path: "charter/:id/edit",
    index: void 0,
    caseSensitive: void 0,
    module: route55
  },
  "routes/admin.documents._index": {
    id: "routes/admin.documents._index",
    parentId: "routes/admin",
    path: "documents",
    index: true,
    caseSensitive: void 0,
    module: route56
  },
  "routes/admin.drivers.edit.$id": {
    id: "routes/admin.drivers.edit.$id",
    parentId: "routes/admin",
    path: "drivers/edit/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route57
  },
  "routes/admin.parcels.$id.edit": {
    id: "routes/admin.parcels.$id.edit",
    parentId: "routes/admin",
    path: "parcels/:id/edit",
    index: void 0,
    caseSensitive: void 0,
    module: route58
  },
  "routes/admin.reservations.$id": {
    id: "routes/admin.reservations.$id",
    parentId: "routes/admin",
    path: "reservations/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route59
  },
  "routes/admin.reservations.new": {
    id: "routes/admin.reservations.new",
    parentId: "routes/admin",
    path: "reservations/new",
    index: void 0,
    caseSensitive: void 0,
    module: route60
  },
  "routes/admin.transactions.$id": {
    id: "routes/admin.transactions.$id",
    parentId: "routes/admin",
    path: "transactions/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route61
  },
  "routes/admin.maintenance.new": {
    id: "routes/admin.maintenance.new",
    parentId: "routes/admin",
    path: "maintenance/new",
    index: void 0,
    caseSensitive: void 0,
    module: route62
  },
  "routes/admin.routes.$id.edit": {
    id: "routes/admin.routes.$id.edit",
    parentId: "routes/admin",
    path: "routes/:id/edit",
    index: void 0,
    caseSensitive: void 0,
    module: route63
  },
  "routes/admin.settings._index": {
    id: "routes/admin.settings._index",
    parentId: "routes/admin",
    path: "settings",
    index: true,
    caseSensitive: void 0,
    module: route64
  },
  "routes/admin.charter._index": {
    id: "routes/admin.charter._index",
    parentId: "routes/admin",
    path: "charter",
    index: true,
    caseSensitive: void 0,
    module: route65
  },
  "routes/admin.clients._index": {
    id: "routes/admin.clients._index",
    parentId: "routes/admin",
    path: "clients",
    index: true,
    caseSensitive: void 0,
    module: route66
  },
  "routes/admin.drivers._index": {
    id: "routes/admin.drivers._index",
    parentId: "routes/admin",
    path: "drivers",
    index: true,
    caseSensitive: void 0,
    module: route67
  },
  "routes/admin.finance._index": {
    id: "routes/admin.finance._index",
    parentId: "routes/admin",
    path: "finance",
    index: true,
    caseSensitive: void 0,
    module: route68
  },
  "routes/admin.parcels._index": {
    id: "routes/admin.parcels._index",
    parentId: "routes/admin",
    path: "parcels",
    index: true,
    caseSensitive: void 0,
    module: route69
  },
  "routes/admin.reports._index": {
    id: "routes/admin.reports._index",
    parentId: "routes/admin",
    path: "reports",
    index: true,
    caseSensitive: void 0,
    module: route70
  },
  "routes/admin.users.$id.edit": {
    id: "routes/admin.users.$id.edit",
    parentId: "routes/admin",
    path: "users/:id/edit",
    index: void 0,
    caseSensitive: void 0,
    module: route71
  },
  "routes/admin.routes._index": {
    id: "routes/admin.routes._index",
    parentId: "routes/admin",
    path: "routes",
    index: true,
    caseSensitive: void 0,
    module: route72
  },
  "routes/admin.fleet._index": {
    id: "routes/admin.fleet._index",
    parentId: "routes/admin",
    path: "fleet",
    index: true,
    caseSensitive: void 0,
    module: route73
  },
  "routes/admin.trips._index": {
    id: "routes/admin.trips._index",
    parentId: "routes/admin",
    path: "trips",
    index: true,
    caseSensitive: void 0,
    module: route74
  },
  "routes/admin.users._index": {
    id: "routes/admin.users._index",
    parentId: "routes/admin",
    path: "users",
    index: true,
    caseSensitive: void 0,
    module: route75
  },
  "routes/admin.vehicles.$id": {
    id: "routes/admin.vehicles.$id",
    parentId: "routes/admin",
    path: "vehicles/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route76
  },
  "routes/admin.vehicles.new": {
    id: "routes/admin.vehicles.new",
    parentId: "routes/admin",
    path: "vehicles/new",
    index: void 0,
    caseSensitive: void 0,
    module: route77
  },
  "routes/admin.charter.new": {
    id: "routes/admin.charter.new",
    parentId: "routes/admin",
    path: "charter/new",
    index: void 0,
    caseSensitive: void 0,
    module: route78
  },
  "routes/admin.clients.$id": {
    id: "routes/admin.clients.$id",
    parentId: "routes/admin",
    path: "clients/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route79
  },
  "routes/admin.clients.$id.edit": {
    id: "routes/admin.clients.$id.edit",
    parentId: "routes/admin.clients.$id",
    path: "edit",
    index: void 0,
    caseSensitive: void 0,
    module: route80
  },
  "routes/admin.clients.new": {
    id: "routes/admin.clients.new",
    parentId: "routes/admin",
    path: "clients/new",
    index: void 0,
    caseSensitive: void 0,
    module: route81
  },
  "routes/admin.drivers.new": {
    id: "routes/admin.drivers.new",
    parentId: "routes/admin",
    path: "drivers/new",
    index: void 0,
    caseSensitive: void 0,
    module: route82
  },
  "routes/admin.parcels.new": {
    id: "routes/admin.parcels.new",
    parentId: "routes/admin",
    path: "parcels/new",
    index: void 0,
    caseSensitive: void 0,
    module: route83
  },
  "routes/admin.routes.new": {
    id: "routes/admin.routes.new",
    parentId: "routes/admin",
    path: "routes/new",
    index: void 0,
    caseSensitive: void 0,
    module: route84
  },
  "routes/admin.dashboard": {
    id: "routes/admin.dashboard",
    parentId: "routes/admin",
    path: "dashboard",
    index: void 0,
    caseSensitive: void 0,
    module: route85
  },
  "routes/admin.trips.$id": {
    id: "routes/admin.trips.$id",
    parentId: "routes/admin",
    path: "trips/:id",
    index: void 0,
    caseSensitive: void 0,
    module: route86
  },
  "routes/admin.trips.new": {
    id: "routes/admin.trips.new",
    parentId: "routes/admin",
    path: "trips/new",
    index: void 0,
    caseSensitive: void 0,
    module: route87
  },
  "routes/admin.users.new": {
    id: "routes/admin.users.new",
    parentId: "routes/admin",
    path: "users/new",
    index: void 0,
    caseSensitive: void 0,
    module: route88
  },
  "routes/login": {
    id: "routes/login",
    parentId: "root",
    path: "login",
    index: void 0,
    caseSensitive: void 0,
    module: route89
  }
};
const allowedActionOrigins = false;
export {
  allowedActionOrigins,
  serverManifest as assets,
  assetsBuildDirectory,
  basename,
  entry,
  future,
  isSpaMode,
  prerender,
  publicPath,
  routeDiscovery,
  routes,
  ssr
};
