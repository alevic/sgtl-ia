import{r as n,j as e}from"./forgot-password-Cd1Knve9.js";import{a as j,b as g,F as v}from"./chunk-JZWAC4HX-DumfKpwM.js";import{F as r}from"./FormSection-BVV1rFH3.js";import{B as m}from"./button-D5icbzZz.js";import{I as l}from"./input-emgR2opu.js";import{T as c,S as t}from"./types-DFYgxmzW.js";import{W as f}from"./wrench-sIQVKmUa.js";import{D as E}from"./dollar-sign-c_abpx4r.js";import{C as y}from"./calendar-B2-DO3Xm.js";import{T as S}from"./triangle-alert-ChAdqAq2.js";import{L as O}from"./loader-circle-ic6ikmbW.js";function k({intent:x,defaultValues:a={},vehicles:p}){const u=j(),o=g().state!=="idle",b=x==="edit",[i,h]=n.useState(parseFloat(a.custo_pecas)||0),[d,N]=n.useState(parseFloat(a.custo_mao_de_obra)||0);return e.jsxs(v,{method:"post",className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(r,{title:"Dados da Ordem",icon:f,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Veículo *"}),e.jsxs("select",{name:"vehicle_id",defaultValue:a.vehicle_id,required:!0,className:"w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none",children:[e.jsx("option",{value:"",children:"Selecione um veículo..."}),p.map(s=>e.jsxs("option",{value:s.id,children:[s.placa," - ",s.modelo]},s.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Tipo de Serviço"}),e.jsxs("select",{name:"tipo",defaultValue:a.tipo,required:!0,className:"w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none",children:[e.jsx("option",{value:c.PREVENTIVE,children:"PREVENTIVA"}),e.jsx("option",{value:c.CORRECTIVE,children:"CORRETIVA"}),e.jsx("option",{value:c.PREDICTIVE,children:"PREDITIVA"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Descrição do Problema/Serviço"}),e.jsx("textarea",{name:"descricao",defaultValue:a.descricao,required:!0,rows:3,className:"w-full p-4 bg-muted/40 border-none rounded-2xl font-bold text-sm focus:ring-2 focus:ring-primary/20 outline-none resize-none",placeholder:"Relato técnico..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Vincular Oficina"}),e.jsx(l,{name:"oficina",defaultValue:a.oficina,placeholder:"Nome da oficina ou fornecedor",className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"KM do Veículo na Entrada"}),e.jsx(l,{type:"number",name:"km_veiculo",defaultValue:a.km_veiculo,required:!0,placeholder:"Ex: 125400",className:"h-14 rounded-xl bg-muted/40"})]})]})]})}),e.jsx(r,{title:"Custos e Peças",icon:E,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Custo Peças (R$)"}),e.jsx(l,{type:"number",step:"0.01",name:"custo_pecas",value:i,onChange:s=>h(Number(s.target.value)),className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Mão de Obra (R$)"}),e.jsx(l,{type:"number",step:"0.01",name:"custo_mao_de_obra",value:d,onChange:s=>N(Number(s.target.value)),className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Investimento Total"}),e.jsxs("div",{className:"h-14 flex items-center px-4 bg-muted/20 border-2 border-primary/20 rounded-xl text-primary font-black text-xl",children:["R$ ",(i+d).toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(r,{title:"Cronograma",icon:y,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Data Agendada"}),e.jsx(l,{type:"date",name:"data_agendada",required:!0,defaultValue:a.data_agendada?new Date(a.data_agendada).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Status Inicial"}),e.jsxs("select",{name:"status",defaultValue:a.status,className:"w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-xl font-bold outline-none",children:[e.jsx("option",{value:t.SCHEDULED,children:"AGENDADO"}),e.jsx("option",{value:t.IN_PROGRESS,children:"EM EXECUÇÃO"}),e.jsx("option",{value:t.COMPLETED,children:"CONCLUÍDO"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Responsável Interno"}),e.jsx(l,{name:"responsavel",defaultValue:a.responsavel,placeholder:"Quem autorizou ou acompanha",className:"h-14 rounded-xl bg-muted/40"})]})]})}),e.jsxs("div",{className:"p-6 bg-amber-500/5 border border-amber-500/10 rounded-3xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16,className:"text-amber-500"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-500",children:"Atenção Crítica"})]}),e.jsx("p",{className:"text-[11px] font-bold text-muted-foreground leading-relaxed uppercase",children:"VEÍCULOS EM MANUTENÇÃO SÃO BLOQUEADOS PARA NOVAS VIAGENS ATÉ A CONCLUSÃO."})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(m,{type:"submit",disabled:o,className:"h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20",children:o?e.jsx(O,{className:"animate-spin"}):b?"SALVAR ALTERAÇÕES":"ABRIR ORDEM DE SERVIÇO"}),e.jsx(m,{type:"button",variant:"ghost",onClick:()=>u(-1),className:"h-14 rounded-xl font-black uppercase text-[10px] tracking-widest",children:"CANCELAR"})]})]})]})}export{k as M};
