import{w as D,u as $,c as B}from"./chunk-JZWAC4HX-DumfKpwM.js";import{r as a,a as A,j as e}from"./forgot-password-Cd1Knve9.js";import{U as F}from"./users-BFoA2Uj7.js";import{S as P}from"./search-CnuVL9vz.js";import{L as T}from"./loader-circle-ic6ikmbW.js";import{T as U}from"./trash-2-BO5CKzGP.js";import{u as V}from"./AppContext-CqFrqiNi.js";import{B as C}from"./button-D5icbzZz.js";import{C as y}from"./card-Cg68uFrF.js";import{B as _}from"./badge-OnEQOSZY.js";import{P as z}from"./PageHeader-BWRrOg2b.js";import{c as R}from"./utils-CDN07tui.js";import{B as O}from"./building-2-gEJPO4Fu.js";import{C as G}from"./chevron-right-DQu5sotq.js";import"./createLucideIcon-C45Xejds.js";import"./types-DFYgxmzW.js";import"./reset-password-P0kMDf4s.js";const H=({themeColor:u,context:g})=>{const[i,f]=a.useState([]),[l,n]=a.useState(""),[d,p]=a.useState("user"),[j,h]=a.useState(!0),[b,c]=a.useState(!1),[m,t]=a.useState(""),[o,v]=a.useState(""),[w,S]=a.useState([]),[M,E]=a.useState(!1),[L,x]=a.useState(!1),N=async()=>{h(!0);try{const s=await fetch("https://api.yourdomain.com/api/organization/members",{credentials:"include"});if(s.ok){const r=await s.json();f(r)}}catch{console.error("Failed to fetch members")}finally{h(!1)}};A.useEffect(()=>{N()},[g]),A.useEffect(()=>{const s=setTimeout(async()=>{if(l.length>=2&&!l.includes("@")){E(!0);try{const r=await fetch(`https://api.yourdomain.com/api/organization/candidates?q=${l}`,{credentials:"include"});if(r.ok){const k=await r.json();S(k),x(!0)}}catch(r){console.error(r)}finally{E(!1)}}else S([]),x(!1)},300);return()=>clearTimeout(s)},[l]);const q=async s=>{s.preventDefault(),c(!0),t(""),v("");try{const r=await fetch("https://api.yourdomain.com/api/organization/members",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:l,role:d})}),k=await r.json();r.ok?(v("Membro adicionado com sucesso!"),n(""),N()):t(k.error||"Erro ao adicionar membro")}catch{t("Erro ao conectar com o servidor")}finally{c(!1)}},I=async s=>{if(confirm("Tem certeza que deseja remover este membro da equipe?"))try{(await fetch(`https://api.yourdomain.com/api/organization/members/${s}`,{method:"DELETE",credentials:"include"})).ok?N():alert("Erro ao remover membro")}catch{alert("Erro ao remover membro")}};return e.jsxs("div",{className:"space-y-8 max-w-3xl",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-6 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(F,{size:20,className:`text-${u}-600`}),"Adicionar Membro à Equipe"]}),e.jsxs("form",{onSubmit:q,className:"flex gap-4 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email do Usuário"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",value:l,onChange:s=>{n(s.target.value),x(!0)},onFocus:()=>x(!0),placeholder:"Buscar por nome ou email...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,autoComplete:"off"}),M&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(T,{className:"animate-spin text-slate-400",size:16})})]}),L&&w.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:w.map(s=>e.jsxs("button",{type:"button",onClick:()=>{n(s.email),x(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors border-b border-slate-100 dark:border-slate-700 last:border-0",children:[e.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:s.name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.email})]},s.id))})]})]}),e.jsxs("div",{className:"w-48",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Função"}),e.jsxs("select",{value:d,onChange:s=>p(s.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsx("option",{value:"user",children:"Usuário"}),e.jsx("option",{value:"operacional",children:"Operacional"}),e.jsx("option",{value:"financeiro",children:"Financeiro"}),e.jsx("option",{value:"admin",children:"Administrador"})]})]}),e.jsx("button",{type:"submit",disabled:b,className:`px-6 py-2 bg-${u}-600 hover:bg-${u}-700 text-white font-medium rounded-lg transition-colors disabled:opacity-70 h-[42px]`,children:b?"Adicionando...":"Adicionar"})]}),m&&e.jsx("p",{className:"mt-3 text-sm text-red-600 dark:text-red-400",children:m}),o&&e.jsx("p",{className:"mt-3 text-sm text-green-600 dark:text-green-400",children:o})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Membros Atuais"}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Nome"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Função"}),e.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-500",children:"Carregando equipe..."})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-slate-500",children:"Nenhum membro encontrado nesta organização."})}):i.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-slate-900 dark:text-white",children:s.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 dark:text-slate-400",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 capitalize",children:s.role})}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:e.jsx("button",{onClick:()=>I(s.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Remover membro",children:e.jsx(U,{size:18})})})]},s.id))})]})})]})]})},ce=D(function(){const{organizations:g}=$(),i=B(),{currentContext:f}=V(),[l,n]=a.useState(null),[d,p]=a.useState("geral"),[j,h]=a.useState(""),[b,c]=a.useState(""),m=g;if(l){const t=m.find(o=>o.id===l);return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in duration-300",children:[e.jsx(z,{title:(t==null?void 0:t.name)||"Organização",subtitle:"Gerenciando detalhes corporativos e equipe",icon:O,onClickBack:()=>n(null),backLabel:"VOLTAR"}),e.jsxs("div",{className:"flex gap-2 p-1.5 bg-muted/40 backdrop-blur-sm border border-border/40 rounded-2xl w-fit",children:[e.jsx("button",{onClick:()=>p("geral"),className:R("px-6 py-3 text-[12px] font-black uppercase tracking-widest transition-all rounded-xl",d==="geral"?"bg-background text-primary shadow-lg":"text-muted-foreground"),children:"DADOS GERAIS"}),e.jsx("button",{onClick:()=>p("equipe"),className:R("px-6 py-3 text-[12px] font-black uppercase tracking-widest transition-all rounded-xl",d==="equipe"?"bg-background text-primary shadow-lg":"text-muted-foreground"),children:"EQUIPE"})]}),d==="geral"?e.jsx(y,{className:"p-8 shadow-2xl bg-card/50 rounded-[2.5rem]",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground ml-1",children:"Razão Social"}),e.jsx("input",{type:"text",value:t==null?void 0:t.name,disabled:!0,className:"w-full h-14 px-4 bg-muted/20 border border-border/40 rounded-2xl font-bold opacity-60"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-muted-foreground ml-1",children:"Slug"}),e.jsx("input",{type:"text",value:t==null?void 0:t.slug,disabled:!0,className:"w-full h-14 px-4 bg-muted/20 border border-border/40 rounded-2xl font-bold opacity-60"})]})]}),e.jsx(C,{className:"h-14 px-8 rounded-xl font-black uppercase text-xs tracking-widest shadow-lg",children:"SALVAR ALTERAÇÕES"})]})}):e.jsx(H,{themeColor:"blue",context:f})]})}return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsx(z,{title:"Multigestão de Organizações",subtitle:"Administre múltiplas entidades e sessões multi-tenant",icon:O}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(y,{className:"lg:col-span-1 shadow-2xl bg-card/50 rounded-[2.5rem] p-8 h-fit",children:[e.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-muted-foreground mb-6",children:"Cadastrar Entidade"}),e.jsxs(i.Form,{method:"post",className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"intent",value:"create"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[12px] font-bold uppercase text-muted-foreground ml-1",children:"Nome Comercial"}),e.jsx("input",{name:"name",type:"text",value:j,onChange:t=>{h(t.target.value),c(t.target.value.toLowerCase().replace(/[^a-z0-9]/g,"-"))},className:"w-full h-14 px-4 bg-muted/40 border border-border/50 rounded-2xl font-bold",required:!0})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-[12px] font-bold uppercase text-muted-foreground ml-1",children:"Slug (Identificador)"}),e.jsx("input",{name:"slug",type:"text",value:b,onChange:t=>c(t.target.value),className:"w-full h-14 px-4 bg-muted/20 border border-border/50 rounded-2xl font-bold",required:!0})]}),e.jsx(C,{type:"submit",disabled:i.state!=="idle",className:"w-full h-14 rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg",children:i.state!=="idle"?e.jsx(T,{className:"animate-spin",size:18}):"PROCESSAR CRIAÇÃO"})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx("h2",{className:"text-xs font-black uppercase tracking-widest text-muted-foreground ml-4",children:"Sincronização de Entidades"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map(t=>{var o;return e.jsxs(y,{onClick:()=>n(t.id),className:"group shadow-xl bg-card/50 rounded-[2.5rem] p-8 hover:border-primary/40 cursor-pointer transition-all hover:bg-muted/20",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-2xl transition-transform group-hover:scale-110 shadow-lg",children:(o=t.name)==null?void 0:o.charAt(0)}),e.jsx(_,{className:"bg-emerald-500/10 text-emerald-500 text-[10px] font-black uppercase tracking-widest rounded-lg",children:"ATIVO"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-lg uppercase tracking-tight",children:t.name}),e.jsx("p",{className:"text-[10px] font-black text-muted-foreground uppercase mt-1",children:t.slug})]}),e.jsxs("div",{className:"mt-8 flex items-center text-[10px] font-black uppercase tracking-widest text-primary gap-2 opacity-0 group-hover:opacity-100 transition-all",children:["EXPLORAR ENTIDADE ",e.jsx(G,{size:14})]})]},t.id)})})]})]})]},"org-main")});export{ce as default};
