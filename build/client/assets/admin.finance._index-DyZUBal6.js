import{a as L,w as O,u as _,c as z,L as D}from"./chunk-JZWAC4HX-DumfKpwM.js";import{r as y,j as e}from"./forgot-password-Cd1Knve9.js";import{n as r,a as h,o as B}from"./types-DFYgxmzW.js";import{u as W}from"./AppContext-CqFrqiNi.js";import{u as $}from"./useDateFormatter-CNVcwzUI.js";import{D as G,a as U,b as H,e as A,c as v,d as P}from"./dropdown-menu-CNNo2K3q.js";import{D as q,a as X,b as J,c as Y,d as Z,e as K}from"./dialog-GXWVtUJA.js";import{B as p}from"./button-D5icbzZz.js";import{E as Q}from"./ellipsis-DBh4irOy.js";import{S as ee}from"./square-pen-DbBn1E1l.js";import{C as se}from"./circle-check-big-I14bXISs.js";import{C as ae}from"./clock-BRAlDuTD.js";import{T as te}from"./trash-2-BO5CKzGP.js";import{T as re}from"./triangle-alert-ChAdqAq2.js";import{L as oe}from"./loader-circle-ic6ikmbW.js";import{T as ie,a as ne,b as C,c as g,d as le,e as x}from"./table-B8EXJzV4.js";import{B as R}from"./badge-OnEQOSZY.js";import{C as ce}from"./card-Cg68uFrF.js";import{T as de,a as me,b as k}from"./tabs-C5PlI2Of.js";import{P as xe}from"./PageHeader-BWRrOg2b.js";import{D as w}from"./DashboardCard-CAo4eudV.js";import{c as b}from"./utils-CDN07tui.js";import{P as pe}from"./plus-D5F9e-Lx.js";import{T as ue}from"./trending-up-BKzFUhqw.js";import{c as T}from"./createLucideIcon-C45Xejds.js";import{W as he}from"./wallet-BvBE24dE.js";import{C as ge}from"./circle-alert-NJ6oZxKs.js";import{A as S,a as I}from"./arrow-up-right-BWtbCpyw.js";import{F as be}from"./file-text-BwHme3NP.js";import{C as fe}from"./chart-pie-CWj8mufS.js";import{I as Ne}from"./inbox-DZlonFmr.js";import"./reset-password-P0kMDf4s.js";import"./pt-BR-Dxhrr4Mm.js";import"./format-Teop82l3.js";import"./index-Ds5WWjjE.js";import"./index-r0Cach5g.js";import"./index-CNk52wy-.js";import"./Combination-Bzd-zPU3.js";import"./index-CzPzUr9r.js";import"./index-BDGasEjq.js";import"./index-BTyV9z74.js";import"./index-CGIZjBuz.js";import"./chevron-right-DQu5sotq.js";import"./check-DPa0jV58.js";import"./circle-Inv2uPuq.js";import"./index-BCt1EX5H.js";import"./x-CitWcJvG.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ve=T("arrow-up-down",je);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ye=T("receipt",we);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],De=T("trending-down",Ee),Ce=({transacao:o,onUpdate:c})=>{const f=L(),[E,m]=y.useState(!1),[u,N]=y.useState(!1),n=async()=>{N(!0);try{if(!(await fetch(`https://api.yourdomain.com/api/finance/transactions/${o.id}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Falha ao excluir");c()}catch(t){console.error("Erro ao excluir:",t),alert("Erro ao excluir transação")}finally{N(!1),m(!1)}},i=async t=>{try{if(!(await fetch(`https://api.yourdomain.com/api/finance/transactions/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,status:t}),credentials:"include"})).ok)throw new Error("Falha ao atualizar status");c()}catch(j){console.error("Erro ao atualizar status:",j),alert("Erro ao atualizar status")}},l=o.status===r.PAID||o.status==="PAGA",s=o.status===r.PENDING||o.status==="PENDENTE";return e.jsxs(e.Fragment,{children:[e.jsxs(G,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(p,{variant:"ghost",className:"h-10 w-10 p-0 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Abrir menu"}),e.jsx(Q,{className:"h-5 w-5",strokeWidth:2.5})]})}),e.jsxs(H,{align:"end",className:"w-56 p-2 rounded-2xl shadow-2xl border-none bg-card/95 backdrop-blur-md",children:[e.jsx(A,{className:"text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2",children:"Operações"}),e.jsxs(v,{onClick:()=>f("/admin/financeiro/transacoes/nova",{state:o}),className:"rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",children:[e.jsx(ee,{className:"h-4 w-4"}),"Editar Registro"]}),e.jsx(P,{className:"bg-border/50 my-2"}),e.jsx(A,{className:"text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2",children:"Alterar Status"}),!l&&e.jsxs(v,{onClick:()=>i(r.PAID),className:"rounded-xl px-3 py-2.5 font-bold text-emerald-600 focus:bg-emerald-500 focus:text-white gap-3",children:[e.jsx(se,{className:"h-4 w-4"}),"Marcar como Paga"]}),!s&&e.jsxs(v,{onClick:()=>i(r.PENDING),className:"rounded-xl px-3 py-2.5 font-bold text-amber-600 focus:bg-amber-500 focus:text-white gap-3",children:[e.jsx(ae,{className:"h-4 w-4"}),"Marcar como Pendente"]}),e.jsx(P,{className:"bg-border/50 my-2"}),e.jsxs(v,{onClick:()=>m(!0),className:"rounded-xl px-3 py-2.5 font-bold text-destructive focus:bg-destructive focus:text-destructive-foreground gap-3",children:[e.jsx(te,{className:"h-4 w-4"}),"Excluir Transação"]})]})]}),e.jsx(q,{open:E,onOpenChange:m,children:e.jsxs(X,{className:"rounded-[2rem] border-none shadow-2xl max-w-sm p-8 bg-card/95 backdrop-blur-md",children:[e.jsxs(J,{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"h-8 w-8 text-destructive",strokeWidth:2.5})}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(Y,{className:"text-2xl font-black tracking-tight",children:"Confirmar Exclusão"}),e.jsxs(Z,{className:"font-medium text-muted-foreground leading-relaxed",children:["Você tem certeza que deseja excluir esta transação de ",e.jsxs("strong",{className:"text-foreground",children:["R$ ",Number(o.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),"?",e.jsx("br",{}),e.jsx("span",{className:"text-xs uppercase font-black tracking-widest opacity-50 text-destructive",children:"Esta ação é irreversível"})]})]})]}),e.jsxs(K,{className:"mt-8 flex-col sm:flex-col gap-3",children:[e.jsx(p,{variant:"destructive",onClick:n,disabled:u,className:"w-full h-12 rounded-2xl font-black tracking-tighter text-base shadow-lg shadow-destructive/20 active:scale-95 transition-all",children:u?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-5 w-5 animate-spin"}),"EXCLUINDO..."]}):"EXCLUIR DEFINITIVAMENTE"}),e.jsx(p,{variant:"ghost",onClick:()=>m(!1),disabled:u,className:"w-full h-12 rounded-2xl font-black tracking-tighter text-muted-foreground hover:bg-muted/50 transition-all",children:"CANCELAR"})]})]})})]})},ke=({status:o})=>{const c={[r.PAID]:{className:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20"},[r.PENDING]:{className:"bg-amber-500/10 text-amber-600 border-amber-500/20"},[r.OVERDUE]:{className:"bg-destructive/10 text-destructive border-destructive/20"},[r.CANCELLED]:{className:"bg-muted text-muted-foreground border-border"},[r.PARTIALLY_PAID]:{className:"bg-blue-500/10 text-blue-600 border-blue-500/20"}},f=c[o]||c[r.PENDING];return e.jsx(R,{variant:"outline",className:b("font-bold px-2 py-0.5 rounded-xl text-[12px] uppercase tracking-wider",f.className),children:B[o]||o})},vs=O(function(){const{transactions:c}=_();z();const{currentContext:f}=W(),{formatDate:E}=$(),[m,u]=y.useState("mes"),N=L(),n=c,i=y.useMemo(()=>{const s=n.filter(a=>(a.type===h.INCOME||a.type==="RECEITA")&&a.status!==r.CANCELLED).reduce((a,d)=>a+Number(d.amount),0),t=n.filter(a=>(a.type===h.EXPENSE||a.type==="DESPESA")&&a.status!==r.CANCELLED).reduce((a,d)=>a+Number(d.amount),0),j=s-t,M=n.filter(a=>a.type===h.INCOME&&a.status===r.PAID).reduce((a,d)=>a+Number(d.amount),0),F=n.filter(a=>a.type===h.EXPENSE&&a.status===r.PAID).reduce((a,d)=>a+Number(d.amount),0),V=n.filter(a=>a.status===r.PENDING&&new Date(a.due_date)<new Date).length;return{receitas:s,despesas:t,saldo:j,receitasPagas:M,despesasPagas:F,contasVencidas:V}},[n]),l=s=>s.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsx(xe,{title:"Gestão Financeira",subtitle:"Fluxo de caixa e controle de transações",rightElement:e.jsx(p,{asChild:!0,className:"h-14 px-8 rounded-xl font-black shadow-lg shadow-primary/20",children:e.jsxs(D,{to:"/admin/finance/transactions/new",children:[e.jsx(pe,{size:20,className:"mr-2",strokeWidth:3}),"NOVA TRANSAÇÃO"]})})}),e.jsx(de,{value:m,onValueChange:s=>u(s),className:"w-fit bg-muted/40 p-1 rounded-xl border border-border/50",children:e.jsxs(me,{className:"bg-transparent h-10 gap-1",children:[e.jsx(k,{value:"mes",className:"rounded-xl font-bold text-xs px-6",children:"ESTE MÊS"}),e.jsx(k,{value:"trimestre",className:"rounded-xl font-bold text-xs px-6",children:"TRIMESTRE"}),e.jsx(k,{value:"ano",className:"rounded-xl font-bold text-xs px-6",children:"ESTE ANO"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(w,{title:"Receitas Totais",value:l(i.receitas),icon:ue,variant:"emerald",trend:`${l(i.receitasPagas)} recebidas`}),e.jsx(w,{title:"Despesas Totais",value:l(i.despesas),icon:De,variant:"rose",trend:`${l(i.despesasPagas)} pagas`}),e.jsx(w,{title:"Saldo Atual",value:l(i.saldo),icon:he,variant:i.saldo>=0?"blue":"rose",trend:i.saldo>=0?"Superávit":"Déficit"}),e.jsx(w,{title:"Contas Vencidas",value:i.contasVencidas,icon:ge,variant:i.contasVencidas>0?"amber":"primary",trend:i.contasVencidas>0?"Ação necessária":"Em dia"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[{label:"Contas a Receber",icon:S,color:"emerald",path:"/admin/finance/receivables"},{label:"Contas a Pagar",icon:I,color:"red",path:"/admin/finance/payables"},{label:"Relatórios",icon:be,color:"blue",path:"/admin/reports"},{label:"Centros de Custo",icon:fe,color:"purple",path:"/admin/finance/cost-centers"},{label:"Conciliação",icon:ye,color:"amber",path:"/admin/finance/reconciliation"}].map((s,t)=>e.jsx(p,{asChild:!0,variant:"outline",className:"h-24 p-5 flex items-center justify-start gap-4 bg-card/50 hover:bg-card border-border/50 transition-all group overflow-hidden active:scale-95 shadow-lg shadow-muted/10",children:e.jsxs(D,{to:s.path,children:[e.jsx("div",{className:b("w-12 h-14 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110",s.color==="emerald"?"bg-emerald-500/10 text-emerald-600":s.color==="red"?"bg-destructive/10 text-destructive":s.color==="blue"?"bg-blue-500/10 text-blue-600":s.color==="purple"?"bg-purple-500/10 text-purple-600":"bg-amber-500/10 text-amber-600"),children:e.jsx(s.icon,{size:24,strokeWidth:2.5})}),e.jsx("div",{className:"space-y-0.5 ml-2",children:e.jsx("p",{className:"font-black text-sm tracking-tight text-foreground group-hover:text-primary transition-colors",children:s.label})})]})},t))}),e.jsxs(ce,{className:"shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"p-8 border-b border-border/50 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-14 bg-primary/10 rounded-xl flex items-center justify-center text-primary",children:e.jsx(ve,{size:20,strokeWidth:2.5})}),e.jsx("h2",{className:"text-xl font-black tracking-tight",children:"Transações Recentes"})]}),e.jsx(p,{variant:"ghost",asChild:!0,className:"rounded-xl font-black text-xs hover:bg-primary/10 text-primary",children:e.jsx(D,{to:"/admin/finance/transactions",children:"VER TODAS"})})]}),e.jsxs(ie,{children:[e.jsx(ne,{className:"bg-muted/30",children:e.jsxs(C,{className:"hover:bg-transparent border-border/50",children:[e.jsx(g,{className:"pl-8 h-14 text-table-head",children:"Descrição / Emissão"}),e.jsx(g,{className:"h-14 text-table-head",children:"Tipo"}),e.jsx(g,{className:"h-14 text-table-head",children:"Status"}),e.jsx(g,{className:"h-14 text-table-head",children:"Valor"}),e.jsx(g,{className:"pr-8 h-14 text-table-head text-right",children:"Ações"})]})}),e.jsx(le,{children:n.length===0?e.jsx(C,{children:e.jsxs(x,{colSpan:5,className:"h-64 text-center",children:[e.jsx(Ne,{className:"w-12 h-14 mx-auto text-muted-foreground/30"}),e.jsx("p",{className:"font-bold text-sm text-muted-foreground",children:"Nenhuma transação encontrada"})]})}):n.slice(0,10).map(s=>{const t=s.tipo===h.INCOME||s.tipo==="RECEITA";return e.jsxs(C,{className:"group hover:bg-muted/20 border-border/30 transition-colors",children:[e.jsx(x,{className:"pl-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:b("w-10 h-10 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110",t?"bg-emerald-500/10 text-emerald-600":"bg-destructive/10 text-destructive"),children:t?e.jsx(S,{size:20,strokeWidth:2.5}):e.jsx(I,{size:20,strokeWidth:2.5})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-black text-sm tracking-tight text-foreground",children:s.descricao}),e.jsx("span",{className:"text-[12px] font-bold text-muted-foreground/60",children:E(new Date(s.data_emissao))})]})]})}),e.jsx(x,{children:e.jsx(R,{variant:"secondary",className:b("font-black text-[9px] uppercase",t?"bg-emerald-500/10 text-emerald-600":"bg-destructive/10 text-destructive"),children:t?"Receita":"Despesa"})}),e.jsx(x,{children:e.jsx(ke,{status:s.status})}),e.jsx(x,{children:e.jsxs("span",{className:b("text-sm font-black",t?"text-emerald-600":"text-destructive"),children:[t?"+":"-"," ",l(Number(s.valor))]})}),e.jsx(x,{className:"pr-8 text-right",children:e.jsx(Ce,{transacao:s,onUpdate:()=>N(".",{replace:!0})})})]},s.id)})})]})]})]},"finance-main")});export{vs as default};
