import{r as c,j as e,a as F}from"./forgot-password-Cd1Knve9.js";import{a as U,b as $,F as q}from"./chunk-JZWAC4HX-DumfKpwM.js";import{F as N}from"./FormSection-BVV1rFH3.js";import{b as H,u as k,B as w}from"./button-D5icbzZz.js";import{I as f}from"./input-emgR2opu.js";import{a as W,c as z}from"./index-Ds5WWjjE.js";import{u as G}from"./index-COQIOskD.js";import{u as J}from"./index-BDGasEjq.js";import"./index-r0Cach5g.js";import{c as S}from"./utils-CDN07tui.js";import{U as X}from"./user-BQEge37k.js";import{L as R}from"./lock-DeC39RxH.js";import{S as V}from"./shield-Ba35X56A.js";import{B as P}from"./building-2-gEJPO4Fu.js";import{C as Z}from"./calendar-B2-DO3Xm.js";import{L as K}from"./loader-circle-ic6ikmbW.js";function Q(t,s=[]){let a=[];function n(o,l){const i=c.createContext(l),m=a.length;a=[...a,l];const u=p=>{var j;const{scope:x,children:b,...h}=p,g=((j=x==null?void 0:x[t])==null?void 0:j[m])||i,v=c.useMemo(()=>h,Object.values(h));return e.jsx(g.Provider,{value:v,children:b})};u.displayName=o+"Provider";function d(p,x){var g;const b=((g=x==null?void 0:x[t])==null?void 0:g[m])||i,h=c.useContext(b);if(h)return h;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[u,d]}const r=()=>{const o=a.map(l=>c.createContext(l));return function(i){const m=(i==null?void 0:i[t])||o;return c.useMemo(()=>({[`__scope${t}`]:{...i,[t]:m}}),[i,m])}};return r.scopeName=t,[n,Y(r,...s)]}function Y(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const n=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=n.reduce((i,{useScope:m,scopeName:u})=>{const p=m(o)[`__scope${u}`];return{...i,...p}},{});return c.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return a.scopeName=s.scopeName,a}function ee(t){const s=se(t),a=c.forwardRef((n,r)=>{const{children:o,...l}=n,i=c.Children.toArray(o),m=i.find(re);if(m){const u=m.props.children,d=i.map(p=>p===m?c.Children.count(u)>1?c.Children.only(null):c.isValidElement(u)?u.props.children:null:p);return e.jsx(s,{...l,ref:r,children:c.isValidElement(u)?c.cloneElement(u,void 0,d):null})}return e.jsx(s,{...l,ref:r,children:o})});return a.displayName=`${t}.Slot`,a}function se(t){const s=c.forwardRef((a,n)=>{const{children:r,...o}=a;if(c.isValidElement(r)){const l=ne(r),i=ae(o,r.props);return r.type!==c.Fragment&&(i.ref=n?H(n,l):l),c.cloneElement(r,i)}return c.Children.count(r)>1?c.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var te=Symbol("radix.slottable");function re(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===te}function ae(t,s){const a={...s};for(const n in s){const r=t[n],o=s[n];/^on[A-Z]/.test(n)?r&&o?a[n]=(...i)=>{const m=o(...i);return r(...i),m}:r&&(a[n]=r):n==="style"?a[n]={...r,...o}:n==="className"&&(a[n]=[r,o].filter(Boolean).join(" "))}return{...t,...a}}function ne(t){var n,r;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var oe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],E=oe.reduce((t,s)=>{const a=ee(`Primitive.${s}`),n=c.forwardRef((r,o)=>{const{asChild:l,...i}=r,m=l?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(m,{...i,ref:o})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),C="Switch",[ie]=Q(C),[ce,le]=ie(C),A=c.forwardRef((t,s)=>{const{__scopeSwitch:a,name:n,checked:r,defaultChecked:o,required:l,disabled:i,value:m="on",onCheckedChange:u,form:d,...p}=t,[x,b]=c.useState(null),h=k(s,y=>b(y)),g=c.useRef(!1),v=x?d||!!x.closest("form"):!0,[j,L]=W({prop:r,defaultProp:o??!1,onChange:u,caller:C});return e.jsxs(ce,{scope:a,checked:j,disabled:i,children:[e.jsx(E.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":T(j),"data-disabled":i?"":void 0,disabled:i,value:m,...p,ref:h,onClick:z(t.onClick,y=>{L(M=>!M),v&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),v&&e.jsx(_,{control:x,bubbles:!g.current,name:n,value:m,checked:j,required:l,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});A.displayName=C;var I="SwitchThumb",O=c.forwardRef((t,s)=>{const{__scopeSwitch:a,...n}=t,r=le(I,a);return e.jsx(E.span,{"data-state":T(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:s})});O.displayName=I;var de="SwitchBubbleInput",_=c.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:n=!0,...r},o)=>{const l=c.useRef(null),i=k(l,o),m=G(a),u=J(s);return c.useEffect(()=>{const d=l.current;if(!d)return;const p=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(p,"checked").set;if(m!==a&&b){const h=new Event("click",{bubbles:n});b.call(d,a),d.dispatchEvent(h)}},[m,a,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:i,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});_.displayName=de;function T(t){return t?"checked":"unchecked"}var B=A,me=O;const D=c.forwardRef(({className:t,...s},a)=>e.jsx(B,{className:S("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:e.jsx(me,{className:S("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));D.displayName=B.displayName;function ke({intent:t,defaultValues:s={}}){const a=U(),r=$().state!=="idle",o=t==="edit",l=s.role?s.role.split(","):["user"],[i,m]=F.useState(l),u=d=>{m(p=>p.includes(d)?p.filter(x=>x!==d):[...p,d])};return e.jsxs(q,{method:"post",className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(N,{title:"Identidade",icon:X,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Nome Completo"}),e.jsx(f,{name:"name",defaultValue:s.name,required:!0,placeholder:"Ex: Alexandre de Moraes",className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Username (Identificador)"}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{name:"username",defaultValue:s.username,required:!0,readOnly:o,placeholder:"ex: alexandre.m",className:S("h-14 rounded-xl bg-muted/40 lowercase",o&&"opacity-60 cursor-not-allowed"),id:"username-input"},s.username),!o&&e.jsx("button",{type:"button",onClick:()=>{const d=document.querySelector('input[name="name"]'),p=document.getElementById("username-input");if(d&&d.value){const x=d.value.toLowerCase().split(" ")[0]+"."+Math.floor(Math.random()*1e3);p.value=x}},className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-black uppercase tracking-widest text-primary hover:text-primary/80 transition-colors",children:"SUGERIR"})]})]}),o?e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Status da Conta"}),e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 bg-muted/40 rounded-xl border border-input",children:[e.jsx(D,{name:"isActive",defaultChecked:s.isActive}),e.jsx("span",{className:"text-sm font-bold",children:s.isActive?"ATIVO":"INATIVO"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Email Corporativo"}),e.jsx(f,{type:"email",name:"email",defaultValue:s.email,required:!0,placeholder:"email@sgtl.com.br",className:"h-14 rounded-xl bg-muted/40"})]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Email"}),e.jsx(f,{type:"email",name:"email",defaultValue:s.email,className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Telefone"}),e.jsx(f,{name:"phone",defaultValue:s.phone,placeholder:"(00) 00000-0000",className:"h-14 rounded-xl bg-muted/40"})]})]}),e.jsx(N,{title:"Segurança da Conta",icon:R,children:e.jsxs("div",{className:"p-4 border border-dashed border-border rounded-xl space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Nova Senha (Opcional)"}),e.jsx(f,{type:"password",name:"newPassword",placeholder:"Deixe em branco para manter",className:"h-14 rounded-xl bg-muted/40"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Confirmar Senha"}),e.jsx(f,{type:"password",name:"confirmPassword",placeholder:"Repita a nova senha",className:"h-14 rounded-xl bg-muted/40"})]})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-bold uppercase tracking-widest px-1",children:"Preencha apenas se desejar alterar a senha do usuário manualmente."})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Documento"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{name:"documento_tipo",defaultValue:s.documento_tipo||"CPF",className:"w-24 h-14 px-2 bg-muted/40 border-none rounded-xl font-bold bg-transparent outline-none focus:ring-2 focus:ring-primary/20",children:[e.jsx("option",{value:"CPF",children:"CPF"}),e.jsx("option",{value:"RG",children:"RG"}),e.jsx("option",{value:"CNPJ",children:"CNPJ"}),e.jsx("option",{value:"PASSAPORTE",children:"PASSP"})]}),e.jsx(f,{name:"documento",defaultValue:s.documento||s.cpf,className:"h-14 rounded-xl bg-muted/40",placeholder:"Número do documento"})]})]})]})}),!o&&e.jsx(N,{title:"Segurança",icon:R,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Senha Inicial"}),e.jsx(f,{type:"password",name:"password",required:!0,placeholder:"Mínimo 8 caracteres",className:"h-14 rounded-xl bg-muted/40"}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-bold uppercase tracking-widest mt-2 px-1",children:"O usuário deverá alterar a senha no primeiro acesso."})]})}),e.jsx(N,{title:"Níveis de Acesso",icon:V,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{id:"admin",label:"ADMINISTRADOR",desc:"Acesso total ao sistema"},{id:"operacional",label:"OPERACIONAL",desc:"Gestão de viagens e frotas"},{id:"financeiro",label:"FINANCEIRO",desc:"Controle de caixa e relatórios"},{id:"user",label:"USUÁRIO PADRÃO",desc:"Acesso básico e consultas"}].map(d=>e.jsxs("button",{type:"button",onClick:()=>u(d.id),className:S("p-4 rounded-2xl border-2 transition-all text-left flex flex-col gap-1",i.includes(d.id)?"border-primary bg-primary/5 text-primary shadow-lg shadow-primary/5":"border-border/50 text-muted-foreground hover:border-border"),children:[e.jsx("span",{className:"font-black text-xs tracking-widest",children:d.label}),e.jsx("span",{className:"text-[10px] font-bold opacity-60 uppercase leading-none",children:d.desc}),i.includes(d.id)&&e.jsx("input",{type:"hidden",name:"roles",value:d.id})]},d.id))})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(N,{title:"Organização",icon:P,children:e.jsxs("div",{className:"p-6 bg-primary/5 border border-primary/10 rounded-3xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{size:16,className:"text-primary"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-primary",children:"Unidade Principal"})]}),e.jsx("p",{className:"text-[11px] font-bold text-muted-foreground leading-relaxed uppercase",children:"J JÊ TURISMO E EXPRESS LTDA"})]})}),o&&s.createdAt&&e.jsxs("div",{className:"p-6 bg-amber-500/10 border border-amber-500/20 rounded-3xl space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:16,className:"text-amber-600"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-amber-700",children:"Metadados"})]}),e.jsxs("div",{className:"space-y-1 text-xs text-amber-800/80 font-medium",children:[e.jsxs("p",{children:["Criado em: ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("p",{children:["ID: ",e.jsx("span",{className:"font-mono text-[10px]",children:s.id})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(w,{type:"submit",disabled:r,className:"h-16 rounded-[1.25rem] bg-primary text-primary-foreground font-black uppercase text-xs tracking-widest shadow-xl shadow-primary/20",children:r?e.jsx(K,{className:"animate-spin"}):o?"SALVAR ALTERAÇÕES":"CRIAR OPERADOR"}),e.jsx(w,{type:"button",variant:"ghost",onClick:()=>a(-1),className:"h-14 rounded-xl font-black uppercase text-[10px] tracking-widest",children:"CANCELAR"})]})]})]})}export{ke as U};
