import{a as M,w as F,u as U,L as V}from"./chunk-JZWAC4HX-DumfKpwM.js";import{r as D,j as e}from"./forgot-password-Cd1Knve9.js";import{u as H}from"./useDateFormatter-CNVcwzUI.js";import{S as t,T as b,i as N}from"./types-DFYgxmzW.js";import{T as W,a as z,b as S,c as h,d as $,e as m}from"./table-B8EXJzV4.js";import{B as G}from"./badge-OnEQOSZY.js";import{B as w}from"./button-D5icbzZz.js";import{I as q}from"./input-emgR2opu.js";import{C as X}from"./card-Cg68uFrF.js";import{T as K,a as J,b as j}from"./tabs-C5PlI2Of.js";import{P as Q}from"./PageHeader-BWRrOg2b.js";import{D as v}from"./DashboardCard-CAo4eudV.js";import{L as Y}from"./ListFilterSection-C2yv81r0.js";import{c as O}from"./utils-CDN07tui.js";import{D as Z,a as ee,b as se,e as te,c as L,d as ae}from"./dropdown-menu-CNNo2K3q.js";import{D as re,a as oe,b as le,c as ie,d as ne,e as ce}from"./dialog-GXWVtUJA.js";import{E as de}from"./ellipsis-DBh4irOy.js";import{S as me}from"./square-pen-DbBn1E1l.js";import{T as xe}from"./trash-2-BO5CKzGP.js";import{T as k}from"./triangle-alert-ChAdqAq2.js";import{L as pe}from"./loader-circle-ic6ikmbW.js";import{W as f}from"./wrench-sIQVKmUa.js";import{P as ue}from"./plus-D5F9e-Lx.js";import{C}from"./clock-BRAlDuTD.js";import{D as he}from"./dollar-sign-c_abpx4r.js";import{C as I}from"./calendar-B2-DO3Xm.js";import{S as fe}from"./search-CnuVL9vz.js";import{I as ge}from"./inbox-DZlonFmr.js";import{C as P}from"./circle-check-big-I14bXISs.js";import{T as be}from"./trending-up-BKzFUhqw.js";import"./AppContext-CqFrqiNi.js";import"./reset-password-P0kMDf4s.js";import"./pt-BR-Dxhrr4Mm.js";import"./format-Teop82l3.js";import"./index-Ds5WWjjE.js";import"./index-CGIZjBuz.js";import"./index-CNk52wy-.js";import"./index-CzPzUr9r.js";import"./index-r0Cach5g.js";import"./index-BTyV9z74.js";import"./createLucideIcon-C45Xejds.js";import"./Combination-Bzd-zPU3.js";import"./index-BDGasEjq.js";import"./chevron-right-DQu5sotq.js";import"./check-DPa0jV58.js";import"./circle-Inv2uPuq.js";import"./index-BCt1EX5H.js";import"./x-CitWcJvG.js";const Ne=({manutencao:r,onDelete:x})=>{const a=M(),[n,l]=D.useState(!1),[p,c]=D.useState(!1),E=async()=>{c(!0);try{if(!(await fetch(`https://api.yourdomain.com/api/maintenance/${r.id}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Falha ao excluir");x(r.id)}catch(i){console.error("Erro ao excluir:",i),alert("Erro ao excluir manutenção")}finally{c(!1),l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(ee,{asChild:!0,children:e.jsxs(w,{variant:"ghost",className:"h-10 w-10 p-0 rounded-xl hover:bg-primary/10 hover:text-primary transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Abrir menu"}),e.jsx(de,{className:"h-5 w-5",strokeWidth:2.5})]})}),e.jsxs(se,{align:"end",className:"w-56 p-2 rounded-2xl shadow-2xl border-none bg-card/95 backdrop-blur-md",children:[e.jsx(te,{className:"text-[12px] font-black uppercase tracking-widest text-muted-foreground px-3 py-2",children:"Operações"}),e.jsxs(L,{onClick:()=>a(`/admin/manutencao/${r.id}/editar`),className:"rounded-xl px-3 py-2.5 font-bold focus:bg-primary focus:text-primary-foreground gap-3",children:[e.jsx(me,{className:"h-4 w-4"}),"Editar Registro"]}),e.jsx(ae,{className:"bg-border/50 my-2"}),e.jsxs(L,{onClick:()=>l(!0),className:"rounded-xl px-3 py-2.5 font-bold text-destructive focus:bg-destructive focus:text-destructive-foreground gap-3",children:[e.jsx(xe,{className:"h-4 w-4"}),"Excluir Manutenção"]})]})]}),e.jsx(re,{open:n,onOpenChange:l,children:e.jsxs(oe,{className:"rounded-[2rem] border-none shadow-2xl max-w-sm p-8 bg-card/95 backdrop-blur-md",children:[e.jsxs(le,{className:"space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"h-8 w-8 text-destructive",strokeWidth:2.5})}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(ie,{className:"text-2xl font-black tracking-tight",children:"Confirmar Exclusão"}),e.jsxs(ne,{className:"font-medium text-muted-foreground leading-relaxed",children:["Você tem certeza que deseja excluir este registro de manutenção?",e.jsx("br",{}),e.jsx("span",{className:"text-xs uppercase font-black tracking-widest opacity-50",children:"Esta ação é irreversível"})]})]})]}),e.jsxs(ce,{className:"mt-8 flex-col sm:flex-col gap-3",children:[e.jsx(w,{variant:"destructive",onClick:E,disabled:p,className:"w-full h-12 rounded-2xl font-black tracking-tighter text-base shadow-lg shadow-destructive/20 active:scale-95 transition-all",children:p?e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"mr-2 h-5 w-5 animate-spin"}),"EXCLUINDO..."]}):"EXCLUIR DEFINITIVAMENTE"}),e.jsx(w,{variant:"ghost",onClick:()=>l(!1),disabled:p,className:"w-full h-12 rounded-2xl font-black tracking-tighter text-muted-foreground hover:bg-muted/50 transition-all",children:"CANCELAR"})]})]})})]})},je=({status:r})=>{const a={[t.SCHEDULED]:{label:N[t.SCHEDULED],icon:C,className:"bg-blue-500/10 text-blue-600 border-blue-500/20"},[t.IN_PROGRESS]:{label:N[t.IN_PROGRESS],icon:f,className:"bg-amber-500/10 text-amber-600 border-amber-500/20"},[t.COMPLETED]:{label:N[t.COMPLETED],icon:P,className:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20"},[t.CANCELLED]:{label:N[t.CANCELLED],icon:k,className:"bg-destructive/10 text-destructive border-destructive/20"}}[r]||{label:r,className:"bg-muted text-muted-foreground",icon:C},n=a.icon;return e.jsxs(G,{variant:"outline",className:O("gap-1.5 font-bold px-2 py-0.5 rounded-lg",a.className),children:[e.jsx(n,{size:12,strokeWidth:2.5}),a.label]})},ve=({tipo:r})=>{const a={[b.PREVENTIVE]:{label:"Preventiva",icon:C,className:"text-blue-600"},[b.CORRECTIVE]:{label:"Corretiva",icon:k,className:"text-rose-600"},[b.PREDICTIVE]:{label:"Preditiva",icon:be,className:"text-violet-600"},[b.INSPECTION]:{label:"Inspeção",icon:P,className:"text-emerald-600"}}[r]||{label:r,className:"text-muted-foreground",icon:f},n=a.icon;return e.jsxs("div",{className:O("flex items-center gap-1.5 font-bold text-[12px] tracking-tight",a.className),children:[e.jsx(n,{size:12,strokeWidth:2.5}),e.jsx("span",{className:"uppercase",children:a.label})]})},fs=F(function(){const{maintenances:x}=U(),a=M(),{formatDate:n}=H(),[l,p]=D.useState(""),[c,E]=D.useState("TODOS"),i=x,T=i.filter(s=>{var g,u,y;const o=((g=s.description)==null?void 0:g.toLowerCase().includes(l.toLowerCase()))||""||((y=(u=s.vehicle)==null?void 0:u.placa)==null?void 0:y.toLowerCase().includes(l.toLowerCase()))||"",d=c==="TODOS"||s.status===c;return o&&d}),R=i.length,_=i.filter(s=>s.status===t.IN_PROGRESS).length,A=i.reduce((s,o)=>s+Number(o.cost_parts||0)+Number(o.cost_labor||0),0),B=i.filter(s=>{if(s.status!==t.SCHEDULED)return!1;const o=new Date(s.scheduledDate),d=new Date,g=o.getTime()-d.getTime(),u=Math.ceil(g/(1e3*60*60*24));return u>=0&&u<=7}).length;return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsx(Q,{title:"Gestão de Manutenção",subtitle:"Controle preventivo e corretivo da frota",icon:f,rightElement:e.jsx(w,{asChild:!0,className:"h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",children:e.jsxs(V,{to:"/admin/maintenance/new",children:[e.jsx(ue,{size:20,className:"mr-2",strokeWidth:3}),"NOVA MANUTENÇÃO"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(v,{title:"Total Registros",value:R,icon:f,variant:"primary"}),e.jsx(v,{title:"Na Oficina",value:_,icon:C,variant:"amber"}),e.jsx(v,{title:"Investimento Total",value:`R$ ${A.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,icon:he,variant:"emerald"}),e.jsx(v,{title:"Agendadas (7d)",value:B,icon:I,variant:"purple"})]}),e.jsxs(Y,{children:[e.jsxs("div",{className:"space-y-1.5 flex flex-col lg:col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.15em] text-muted-foreground/80 ml-1",children:"Buscar Manutenção"}),e.jsxs("div",{className:"relative group flex-1",children:[e.jsx(fe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",size:18}),e.jsx(q,{placeholder:"Descrição ou placa...",value:l,onChange:s=>p(s.target.value),className:"pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20"})]})]}),e.jsxs("div",{className:"space-y-1.5 flex flex-col lg:col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold uppercase tracking-[0.15em] text-muted-foreground/80 ml-1",children:"Status da Manutenção"}),e.jsx(K,{value:c,onValueChange:E,className:"w-full",children:e.jsxs(J,{className:"bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",children:[e.jsx(j,{value:"TODOS",className:"flex-1 rounded-xl font-black text-[10px] tracking-widest",children:"TODOS"}),e.jsx(j,{value:t.SCHEDULED,className:"flex-1 rounded-xl font-black text-[10px] tracking-widest",children:"Agendadas"}),e.jsx(j,{value:t.IN_PROGRESS,className:"flex-1 rounded-xl font-black text-[10px] tracking-widest",children:"Oficina"}),e.jsx(j,{value:t.COMPLETED,className:"flex-1 rounded-xl font-black text-[10px] tracking-widest",children:"Concluídas"})]})})]})]}),e.jsx(X,{className:"shadow-2xl shadow-muted/20 overflow-hidden rounded-[2.5rem] bg-card/50 backdrop-blur-sm",children:e.jsxs(W,{children:[e.jsx(z,{className:"bg-muted/30",children:e.jsxs(S,{className:"hover:bg-transparent border-border/50",children:[e.jsx(h,{className:"pl-8 h-14 text-[12px] font-semibold uppercase tracking-widest",children:"Veículo"}),e.jsx(h,{className:"h-14 text-[12px] font-semibold uppercase tracking-widest",children:"Descrição / Tipo"}),e.jsx(h,{className:"h-14 text-[12px] font-semibold uppercase tracking-widest",children:"Data & Status"}),e.jsx(h,{className:"h-14 text-[12px] font-semibold uppercase tracking-widest",children:"Investimento"}),e.jsx(h,{className:"pr-8 h-14 text-[12px] font-semibold uppercase tracking-widest text-right",children:"Ações"})]})}),e.jsx($,{children:T.length===0?e.jsx(S,{children:e.jsxs(m,{colSpan:5,className:"h-64 text-center",children:[e.jsx(ge,{className:"w-12 h-14 mx-auto text-muted-foreground/30"}),e.jsx("p",{className:"font-bold text-sm text-muted-foreground",children:"Nenhuma manutenção encontrada"})]})}):T.map(s=>{var o,d;return e.jsxs(S,{className:"group hover:bg-muted/20 border-border/30 transition-colors",children:[e.jsx(m,{className:"pl-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-14 rounded-2xl bg-gradient-to-br from-slate-500 to-slate-700 flex items-center justify-center text-white shadow-lg transition-transform group-hover:scale-110",children:e.jsx(f,{size:22})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm tracking-tight text-foreground",children:((o=s.vehicle)==null?void 0:o.placa)||"Sem Placa"}),e.jsx("span",{className:"text-[11px] font-bold text-muted-foreground/80",children:((d=s.vehicle)==null?void 0:d.modelo)||"N/D"}),e.jsxs("span",{className:"text-[12px] font-semibold text-primary/60 uppercase",children:[s.km_veiculo.toLocaleString()," KM"]})]})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col gap-1 max-w-[200px]",children:[e.jsx(ve,{tipo:s.type}),e.jsx("span",{className:"text-sm font-bold tracking-tight text-foreground truncate",children:s.description})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-semibold text-foreground",children:[e.jsx(I,{className:"w-3.5 h-3.5 text-primary",strokeWidth:3}),n(new Date(s.scheduledDate))]}),e.jsx(je,{status:s.status})]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col text-sm font-semibold text-emerald-600",children:[e.jsxs("span",{children:["R$ ",(Number(s.cost_parts)+Number(s.cost_labor)).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest opacity-60",children:["P: ",Number(s.cost_parts).toLocaleString()," / M: ",Number(s.cost_labor).toLocaleString()]})]})}),e.jsx(m,{className:"pr-8 text-right",children:e.jsx(Ne,{manutencao:s,onUpdate:()=>a(".",{replace:!0})})})]},s.id)})})]})})]},"maintenance-main")});export{fs as default};
