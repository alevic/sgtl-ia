import{w as M,u as B,c as _,a as z,L as S}from"./chunk-JZWAC4HX-DumfKpwM.js";import{r as b,j as e}from"./forgot-password-Cd1Knve9.js";import{u as U}from"./useDateFormatter-CNVcwzUI.js";import{F as a,b as o}from"./types-DFYgxmzW.js";import{C as Q}from"./card-Cg68uFrF.js";import{B as D}from"./button-D5icbzZz.js";import{I as G}from"./input-emgR2opu.js";import{B as V}from"./badge-OnEQOSZY.js";import{T as H,a as $,b as c}from"./tabs-C5PlI2Of.js";import{T as q,a as W,b as w,c as l,d as X,e as i}from"./table-B8EXJzV4.js";import{D as J,a as K,b as Y,c as g,d as Z}from"./dropdown-menu-CNNo2K3q.js";import{A as ee,a as se,b as ae,c as te,d as re,e as oe,f as le,g as ie}from"./alert-dialog-BsWUNK-P.js";import{P as ne}from"./PageHeader-BWRrOg2b.js";import{D as u}from"./DashboardCard-CAo4eudV.js";import{L as ce}from"./ListFilterSection-C2yv81r0.js";import{c as de}from"./utils-CDN07tui.js";import{B as me}from"./building-2-gEJPO4Fu.js";import{P as xe}from"./plus-D5F9e-Lx.js";import{F as T}from"./file-text-BwHme3NP.js";import{C as ue}from"./clock-BRAlDuTD.js";import{C as pe}from"./circle-check-big-I14bXISs.js";import{T as he}from"./trending-up-BKzFUhqw.js";import{S as be}from"./search-CnuVL9vz.js";import{M as R}from"./map-pin-BU3OPG7D.js";import{C as ge}from"./calendar-B2-DO3Xm.js";import{E as je}from"./ellipsis-DBh4irOy.js";import{S as fe}from"./square-pen-DbBn1E1l.js";import{T as Ne}from"./trash-2-BO5CKzGP.js";import"./AppContext-CqFrqiNi.js";import"./reset-password-P0kMDf4s.js";import"./pt-BR-Dxhrr4Mm.js";import"./format-Teop82l3.js";import"./index-Ds5WWjjE.js";import"./index-CGIZjBuz.js";import"./index-CNk52wy-.js";import"./index-CzPzUr9r.js";import"./index-r0Cach5g.js";import"./index-BTyV9z74.js";import"./Combination-Bzd-zPU3.js";import"./index-BDGasEjq.js";import"./chevron-right-DQu5sotq.js";import"./createLucideIcon-C45Xejds.js";import"./check-DPa0jV58.js";import"./circle-Inv2uPuq.js";import"./index-BCt1EX5H.js";const ve=({status:j})=>{const d={[a.REQUEST]:{className:"bg-slate-500/10 text-slate-600 border-slate-500/20",label:o[a.REQUEST]},[a.QUOTED]:{className:"bg-amber-500/10 text-amber-600 border-amber-500/20",label:o[a.QUOTED]},[a.CONFIRMED]:{className:"bg-emerald-500/10 text-emerald-600 border-emerald-500/20",label:o[a.CONFIRMED]},[a.IN_PROGRESS]:{className:"bg-blue-500/10 text-blue-600 border-blue-500/20",label:o[a.IN_PROGRESS]},[a.COMPLETED]:{className:"bg-slate-500/10 text-slate-600 border-slate-500/20",label:o[a.COMPLETED]},[a.CANCELLED]:{className:"bg-rose-500/10 text-rose-600 border-rose-500/20",label:o[a.CANCELLED]}},m=d[j]||d[a.REQUEST];return e.jsx(V,{variant:"outline",className:de("rounded-lg font-bold px-2 py-0.5 border-none",m.className),children:m.label})},us=M(function(){const{charters:d}=B(),m=_();z();const{formatDate:f}=U(),[x,k]=b.useState(""),[t,O]=b.useState("todos"),[p,h]=b.useState(null),n=d,L=n.length,I=n.filter(s=>s.status===a.REQUEST).length,A=n.filter(s=>s.status===a.CONFIRMED||s.status===a.IN_PROGRESS).length,F=n.filter(s=>s.status===a.CONFIRMED||s.status===a.IN_PROGRESS).reduce((s,r)=>s+Number(r.total_value||0),0),P=n.filter(s=>{var N,v,C,E;const r=((N=s.origin)==null?void 0:N.toLowerCase().includes(x.toLowerCase()))||((v=s.destination)==null?void 0:v.toLowerCase().includes(x.toLowerCase()))||((E=(C=s.client)==null?void 0:C.nome)==null?void 0:E.toLowerCase().includes(x.toLowerCase())),y=t==="todos"||t==="solicitacao"&&s.status===a.REQUEST||t==="orcamento"&&s.status===a.QUOTED||t==="confirmado"&&s.status===a.CONFIRMED||t==="andamento"&&s.status===a.IN_PROGRESS;return r&&y});return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsx(ne,{title:"Fretamento B2B",subtitle:"Gestão corporativa de aluguel de frota",icon:me,rightElement:e.jsx(D,{asChild:!0,className:"h-14 px-6 rounded-xl font-semibold gap-2 shadow-lg shadow-primary/20 transition-all hover:scale-105 active:scale-95",children:e.jsxs(S,{to:"/admin/charter/new",children:[e.jsx(xe,{size:20,strokeWidth:2.5}),"NOVA SOLICITAÇÃO"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(u,{title:"Total de Solicitações",value:L,icon:T,variant:"primary"}),e.jsx(u,{title:"Orçamentos Pendentes",value:I,icon:ue,variant:"amber"}),e.jsx(u,{title:"Contratos Ativos",value:A,icon:pe,variant:"emerald"}),e.jsx(u,{title:"Receita Projetada",value:`R$ ${(F/1e3).toFixed(0)}k`,icon:he,variant:"blue"})]}),e.jsxs(ce,{children:[e.jsxs("div",{className:"space-y-1.5 flex flex-col lg:col-span-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Buscar Solicitação"}),e.jsxs("div",{className:"relative group flex-1",children:[e.jsx(be,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors",size:18}),e.jsx(G,{placeholder:"Cliente, origem ou destino...",className:"pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold transition-all focus-visible:ring-2 focus-visible:ring-primary/20",value:x,onChange:s=>k(s.target.value)})]})]}),e.jsxs("div",{className:"space-y-1.5 flex flex-col lg:col-span-2",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Status da Solicitação"}),e.jsx(H,{value:t,onValueChange:O,className:"w-full",children:e.jsxs($,{className:"bg-muted/40 p-1.5 rounded-xl h-14 flex w-full border border-border/50",children:[e.jsx(c,{value:"todos",className:"flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",children:"TODOS"}),e.jsx(c,{value:"solicitacao",className:"flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",children:"SOLICIT."}),e.jsx(c,{value:"orcamento",className:"flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",children:"ORÇAM."}),e.jsx(c,{value:"confirmado",className:"flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",children:"CONFIRM."}),e.jsx(c,{value:"andamento",className:"flex-1 rounded-xl px-2 font-black text-[10px] tracking-widest",children:"ATIVO"})]})})]})]}),e.jsx(Q,{className:"border-none shadow-2xl shadow-muted/20 overflow-hidden rounded-[2.5rem] bg-card/50 backdrop-blur-sm",children:e.jsxs(q,{children:[e.jsx(W,{className:"bg-muted/30",children:e.jsxs(w,{className:"hover:bg-transparent border-border/50",children:[e.jsx(l,{className:"pl-8 h-14 text-table-head",children:"Cliente"}),e.jsx(l,{className:"h-14 text-table-head",children:"Rota"}),e.jsx(l,{className:"h-14 text-table-head",children:"Período"}),e.jsx(l,{className:"h-14 text-table-head",children:"Valor"}),e.jsx(l,{className:"h-14 text-table-head",children:"Status"}),e.jsx(l,{className:"pr-8 text-right h-14 text-table-head",children:"Ações"})]})}),e.jsx(X,{children:P.map(s=>{var r;return e.jsxs(w,{className:"group hover:bg-muted/20 border-border/30 transition-colors h-24",children:[e.jsx(i,{className:"pl-8",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold text-base group-hover:text-primary transition-colors",children:((r=s.client)==null?void 0:r.nome)||"Cliente Indefinido"}),e.jsxs("p",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest",children:["ID: ",s.id.substring(0,8)]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold",children:[e.jsx(R,{size:14,className:"text-emerald-500"}),s.origin]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-muted-foreground",children:[e.jsx(R,{size:14,className:"text-rose-500"}),s.destination]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-1 text-xs font-bold",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ge,{size:14,className:"text-primary"})," ",f(s.start_date)]}),e.jsxs("div",{className:"text-muted-foreground opacity-60 ml-5",children:["até ",f(s.end_date)]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"font-black text-base text-emerald-600 tracking-tighter",children:[s.currency||"R$"," ",Number(s.total_value).toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsx(i,{children:e.jsx(ve,{status:s.status})}),e.jsx(i,{className:"pr-8 text-right",children:e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsx(D,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-xl transition-all hover:bg-muted/80",children:e.jsx(je,{size:20})})}),e.jsxs(Y,{align:"end",className:"w-56 rounded-2xl p-2 bg-card/95 backdrop-blur-md shadow-2xl border-none",children:[e.jsx(g,{asChild:!0,className:"rounded-xl h-11 px-3 cursor-pointer",children:e.jsxs(S,{to:`/admin/charter/${s.id}`,className:"flex items-center gap-3 font-bold text-xs uppercase tracking-widest",children:[e.jsx(T,{size:16})," Ver Detalhes"]})}),e.jsxs(g,{className:"rounded-xl h-11 px-3 cursor-pointer flex items-center gap-3 font-bold text-xs uppercase tracking-widest",children:[e.jsx(fe,{size:16})," Editar"]}),e.jsx(Z,{className:"bg-border/40 my-1"}),e.jsxs(g,{onClick:()=>h(s.id),className:"rounded-xl h-11 px-3 cursor-pointer flex items-center gap-3 font-bold text-xs uppercase tracking-widest text-destructive focus:bg-destructive/10",children:[e.jsx(Ne,{size:16})," Excluir"]})]})]})})]},s.id)})})]})}),e.jsx(ee,{open:!!p,onOpenChange:s=>!s&&h(null),children:e.jsxs(se,{className:"rounded-[2rem] border-none shadow-2xl bg-card/95 backdrop-blur-md",children:[e.jsxs(ae,{children:[e.jsx(te,{className:"text-2xl font-black uppercase tracking-tighter",children:"Confirmar Exclusão"}),e.jsx(re,{className:"font-medium text-muted-foreground",children:"Tem certeza que deseja excluir esta solicitação de fretamento? Esta ação é irreversível e removerá todos os dados associados."})]}),e.jsxs(oe,{className:"gap-3",children:[e.jsx(le,{className:"rounded-xl font-bold border-none bg-muted hover:bg-muted/80 h-12 px-6",children:"CANCELAR"}),e.jsx(ie,{onClick:()=>{p&&(m.submit({intent:"delete",id:p},{method:"post"}),h(null))},className:"rounded-xl font-black uppercase text-[10px] tracking-widest bg-destructive text-destructive-foreground hover:bg-destructive/90 h-12 px-8",children:"CONFIRMAR EXCLUSÃO"})]})]})})]},"charter-main")});export{us as default};
