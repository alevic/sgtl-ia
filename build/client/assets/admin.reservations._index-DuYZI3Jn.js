import{w as G,u as H,c as K,a as U,L as W}from"./chunk-JZWAC4HX-DumfKpwM.js";import{r as i,j as e}from"./forgot-password-Cd1Knve9.js";import{u as q}from"./useDateFormatter-CNVcwzUI.js";import{R as t,h as a}from"./types-DFYgxmzW.js";import{T as $,a as J,b as C,c as m,d as Q,e as u}from"./table-B8EXJzV4.js";import{B as I}from"./badge-OnEQOSZY.js";import{B as g}from"./button-D5icbzZz.js";import{I as X}from"./input-emgR2opu.js";import{S as v,a as D,b as E,c as S,d as x}from"./select-PWih0cLE.js";import{P as Y,a as Z,b as ee}from"./popover-BPpg6i3_.js";import{D as se,a as ae,b as te,c as w}from"./dropdown-menu-CNNo2K3q.js";import{C as le}from"./card-Cg68uFrF.js";import{P as oe}from"./PageHeader-BWRrOg2b.js";import{D as h}from"./DashboardCard-CAo4eudV.js";import{L as re}from"./ListFilterSection-C2yv81r0.js";import{c as T}from"./utils-CDN07tui.js";import{T as ie}from"./ticket-DleTbqHz.js";import{P as ne}from"./plus-D5F9e-Lx.js";import{I as de}from"./inbox-DZlonFmr.js";import{C as ce}from"./clock-BRAlDuTD.js";import{c as me}from"./createLucideIcon-C45Xejds.js";import{G as ue}from"./gauge-ysNVctcQ.js";import{S as xe}from"./search-CnuVL9vz.js";import{F as he}from"./funnel-CYVAQuTw.js";import{C as pe}from"./chevron-down-Dfyi3Exh.js";import{C as be}from"./check-DPa0jV58.js";import{E as fe}from"./ellipsis-DBh4irOy.js";import"./AppContext-CqFrqiNi.js";import"./reset-password-P0kMDf4s.js";import"./pt-BR-Dxhrr4Mm.js";import"./format-Teop82l3.js";import"./index-r0Cach5g.js";import"./index-Ds5WWjjE.js";import"./index-CNk52wy-.js";import"./Combination-Bzd-zPU3.js";import"./index-CzPzUr9r.js";import"./index-BDGasEjq.js";import"./index-COQIOskD.js";import"./index-BTyV9z74.js";import"./index-CGIZjBuz.js";import"./chevron-right-DQu5sotq.js";import"./circle-Inv2uPuq.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ne=me("shield-check",ge),je=({status:N})=>{const n={[a.PENDING]:{color:"bg-amber-500",text:"text-amber-500",label:t[a.PENDING]},[a.CONFIRMED]:{color:"bg-emerald-500",text:"text-emerald-500",label:t[a.CONFIRMED]},[a.CANCELLED]:{color:"bg-destructive",text:"text-destructive",label:t[a.CANCELLED]},[a.USED]:{color:"bg-blue-500",text:"text-blue-500",label:t[a.USED]},[a.CHECKED_IN]:{color:"bg-indigo-500",text:"text-indigo-500",label:t[a.CHECKED_IN]}},o=n[N]||n[a.PENDING];return e.jsx(I,{variant:"outline",className:T("rounded-xl font-semibold text-[10px] px-2 py-0.5 uppercase tracking-tighter",o.color+"/10",o.text),children:o.label})},ds=G(function(){const{reservations:n,vehicles:o,trips:O}=H(),j=K(),{formatDate:k}=q(),[l,L]=i.useState([]),[p,P]=i.useState("TODOS"),[b,R]=i.useState("TODOS"),[d,_]=i.useState(""),[y,V]=i.useState(!1);U();const c=n,F=c.filter(s=>{const r=l.length===0||l.includes(s.status),f=p==="TODOS"||s.vehicle_id===p,A=b==="TODOS"||s.trip_id===b,B=d===""||(s.passenger_name||"").toLowerCase().includes(d.toLowerCase())||(s.ticket_code||"").toLowerCase().includes(d.toLowerCase());return r&&f&&A&&B}),z=[{value:a.PENDING,label:t[a.PENDING]},{value:a.CONFIRMED,label:t[a.CONFIRMED]},{value:a.CHECKED_IN,label:t[a.CHECKED_IN]},{value:a.USED,label:t[a.USED]},{value:a.CANCELLED,label:t[a.CANCELLED]}],M=s=>{L(r=>r.includes(s)?r.filter(f=>f!==s):[...r,s])};return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsx(oe,{title:"Gestão de Reservas",subtitle:"Painel de controle de tickets e embarques",icon:ie,rightElement:e.jsx(g,{asChild:!0,className:"h-14 px-6 rounded-xl font-semibold shadow-lg shadow-primary/20",children:e.jsxs(W,{to:"/admin/reservations/new",children:[e.jsx(ne,{size:20,className:"mr-2",strokeWidth:3})," NOVA RESERVA"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(h,{title:"Total Reservas",value:c.length,icon:de,variant:"primary"}),e.jsx(h,{title:"Aguardando",value:c.filter(s=>s.status===a.PENDING).length,icon:ce,variant:"amber"}),e.jsx(h,{title:"Confirmadas",value:c.filter(s=>s.status===a.CONFIRMED).length,icon:Ne,variant:"emerald"}),e.jsx(h,{title:"Performance",value:"94%",icon:ue,variant:"blue"})]}),e.jsxs(re,{className:"lg:grid-cols-4",children:[e.jsxs("div",{className:"space-y-1.5 flex flex-col",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Buscar"}),e.jsxs("div",{className:"relative group flex-1",children:[e.jsx(xe,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(X,{placeholder:"Código ou passageiro...",value:d,onChange:s=>_(s.target.value),className:"h-14 pl-12 bg-muted/40 border-input rounded-xl font-bold"})]})]}),e.jsxs("div",{className:"space-y-1.5 flex flex-col",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Veículo"}),e.jsxs(v,{value:p,onValueChange:P,children:[e.jsx(D,{className:"h-14 w-full bg-muted/40 border-input rounded-xl font-bold",children:e.jsx(E,{placeholder:"Todos"})}),e.jsxs(S,{className:"rounded-xl border-none shadow-2xl",children:[e.jsx(x,{value:"TODOS",className:"rounded-xl font-bold",children:"Todos os Veículos"}),o.map(s=>e.jsxs(x,{value:s.id,className:"rounded-xl font-bold",children:[s.modelo," - ",s.placa]},s.id))]})]})]}),e.jsxs("div",{className:"space-y-1.5 flex flex-col",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Viagem"}),e.jsxs(v,{value:b,onValueChange:R,children:[e.jsx(D,{className:"h-14 w-full bg-muted/40 border-input rounded-xl font-bold",children:e.jsx(E,{placeholder:"Todas"})}),e.jsxs(S,{className:"rounded-xl border-none shadow-2xl",children:[e.jsx(x,{value:"TODOS",className:"rounded-xl font-bold",children:"Todas as Viagens"}),O.map(s=>e.jsx(x,{value:s.id,className:"rounded-xl font-bold",children:k(s.departure_date)},s.id))]})]})]}),e.jsxs("div",{className:"space-y-1.5 flex flex-col",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Status"}),e.jsxs(Y,{open:y,onOpenChange:V,children:[e.jsx(Z,{asChild:!0,children:e.jsxs(g,{variant:"outline",className:"h-14 w-full bg-muted/40 border-input rounded-xl font-bold justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:16,strokeWidth:2.5}),e.jsx("span",{children:l.length===0?"Todos Status":`${l.length} selecionado(s)`})]}),e.jsx(pe,{size:16})]})}),e.jsx(ee,{className:"w-[200px] p-2 rounded-xl shadow-2xl border-none",children:z.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 hover:bg-muted rounded-lg cursor-pointer",onClick:()=>M(s.value),children:[e.jsx("div",{className:T("w-4 h-4 rounded border-2",l.includes(s.value)?"bg-primary":"border-muted-foreground"),children:l.includes(s.value)&&e.jsx(be,{size:12,className:"text-white"})}),e.jsx("span",{className:"text-xs font-bold",children:s.label})]},s.value))})]})]})]}),e.jsx(le,{className:"shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",children:e.jsxs($,{children:[e.jsx(J,{className:"bg-muted/30",children:e.jsxs(C,{className:"hover:bg-transparent border-border/50",children:[e.jsx(m,{className:"pl-8 h-14 text-table-head",children:"Passageiro"}),e.jsx(m,{className:"h-14 text-table-head",children:"Assento"}),e.jsx(m,{className:"h-14 text-table-head text-center",children:"Status"}),e.jsx(m,{className:"pr-8 text-right h-14 text-table-head",children:"Ações"})]})}),e.jsx(Q,{children:F.map(s=>e.jsxs(C,{className:"group hover:bg-muted/20 border-border/30 transition-colors h-20",children:[e.jsx(u,{className:"pl-8",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm tracking-tight",children:s.passenger_name}),e.jsxs("span",{className:"text-[10px] font-bold text-muted-foreground uppercase",children:["#",s.ticket_code||s.id.substring(0,8)]})]})}),e.jsx(u,{children:e.jsx(I,{variant:"outline",className:"rounded-lg font-bold",children:s.seat_number})}),e.jsx(u,{className:"text-center",children:e.jsx(je,{status:s.status})}),e.jsx(u,{className:"pr-8 text-right",children:e.jsxs(se,{children:[e.jsx(ae,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"rounded-xl hover:bg-primary/10 transition-colors",children:e.jsx(fe,{size:18})})}),e.jsxs(te,{align:"end",className:"w-56 p-2 rounded-xl shadow-2xl border-none",children:[e.jsx(w,{onClick:()=>j.submit({intent:"update-status",id:s.id,status:a.CHECKED_IN},{method:"post"}),className:"rounded-xl font-bold h-11",children:"Realizar Check-in"}),e.jsx(w,{onClick:()=>j.submit({intent:"delete",id:s.id},{method:"post"}),className:"rounded-xl font-bold h-11 text-destructive",children:"Excluir Reserva"})]})]})})]},s.id))})]})})]},"reservas-main")});export{ds as default};
