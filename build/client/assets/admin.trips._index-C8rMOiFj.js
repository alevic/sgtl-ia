import{w as y,u as M,c as k,a as _,L as z}from"./chunk-JZWAC4HX-DumfKpwM.js";import{r as i,j as e}from"./forgot-password-Cd1Knve9.js";import{u as H}from"./useDateFormatter-CNVcwzUI.js";import{f as l,g as a}from"./types-DFYgxmzW.js";import{T as F,a as U,b as C,c as d,d as V,e as c}from"./table-B8EXJzV4.js";import{B as G}from"./badge-OnEQOSZY.js";import{B as g}from"./button-D5icbzZz.js";import{I as W}from"./input-emgR2opu.js";import{D as $,a as Q,b as q,c as D}from"./dropdown-menu-CNNo2K3q.js";import{P as J,a as K,b as X}from"./popover-BPpg6i3_.js";import{C as Y}from"./card-Cg68uFrF.js";import{A as Z,a as ee,b as se,c as ae,d as te,e as re,f as le,g as oe}from"./alert-dialog-BsWUNK-P.js";import{P as ie}from"./PageHeader-BWRrOg2b.js";import{D as u}from"./DashboardCard-CAo4eudV.js";import{L as ne}from"./ListFilterSection-C2yv81r0.js";import{c as S}from"./utils-CDN07tui.js";import{B as T}from"./bus-D0L2JeBO.js";import{P as de}from"./plus-D5F9e-Lx.js";import{C as v}from"./calendar-B2-DO3Xm.js";import{L as f}from"./loader-CBdNOhxw.js";import{T as ce}from"./trending-up-BKzFUhqw.js";import{S as me}from"./search-CnuVL9vz.js";import{F as pe}from"./funnel-CYVAQuTw.js";import{C as xe}from"./chevron-down-Dfyi3Exh.js";import{C as ue}from"./check-DPa0jV58.js";import{U as he}from"./users-BFoA2Uj7.js";import{E as be}from"./ellipsis-DBh4irOy.js";import{C as ge}from"./circle-check-big-I14bXISs.js";import{C as fe}from"./clock-BRAlDuTD.js";import"./AppContext-CqFrqiNi.js";import"./reset-password-P0kMDf4s.js";import"./pt-BR-Dxhrr4Mm.js";import"./format-Teop82l3.js";import"./index-Ds5WWjjE.js";import"./index-r0Cach5g.js";import"./index-CNk52wy-.js";import"./Combination-Bzd-zPU3.js";import"./index-CzPzUr9r.js";import"./index-BDGasEjq.js";import"./index-BTyV9z74.js";import"./index-CGIZjBuz.js";import"./chevron-right-DQu5sotq.js";import"./createLucideIcon-C45Xejds.js";import"./circle-Inv2uPuq.js";import"./index-BCt1EX5H.js";const je=({status:m})=>{const p={[a.SCHEDULED]:{color:"yellow",icon:fe,label:l[a.SCHEDULED],class:"bg-amber-500/15 text-amber-700"},[a.BOARDING]:{color:"blue",icon:f,label:l[a.BOARDING],class:"bg-blue-500/15 text-blue-700"},[a.IN_TRANSIT]:{color:"blue",icon:f,label:l[a.IN_TRANSIT],class:"bg-indigo-500/15 text-indigo-700"},[a.COMPLETED]:{color:"slate",icon:ge,label:l[a.COMPLETED],class:"bg-slate-500/15 text-slate-700"}},n=p[m]||p[a.SCHEDULED],t=n.icon;return e.jsxs(G,{variant:"outline",className:S("flex items-center gap-1 font-bold px-2 py-0.5 rounded-full",n.class),children:[e.jsx(t,{size:12,className:m===a.BOARDING||m===a.IN_TRANSIT?"animate-spin":""}),n.label]})},hs=y(function(){const{trips:p}=M(),n=k(),[t,E]=i.useState([]),[h,w]=i.useState(""),[A,I]=i.useState(!1),[b,j]=i.useState(null),[Ne,Ce]=i.useState(!1),[De,Te]=i.useState(null),{formatDate:L}=H(),O=_(),x=p,P=x.filter(s=>{var N;const r=t.length===0||t.includes(s.status),o=h===""||(((N=s.route)==null?void 0:N.name)||"").toLowerCase().includes(h.toLowerCase());return r&&o}),B=[{value:a.SCHEDULED,label:l[a.SCHEDULED]},{value:a.BOARDING,label:l[a.BOARDING]},{value:a.IN_TRANSIT,label:l[a.IN_TRANSIT]},{value:a.COMPLETED,label:l[a.COMPLETED]}],R=s=>{E(r=>r.includes(s)?r.filter(o=>o!==s):[...r,s])};return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-10",children:[e.jsx(ie,{title:"Quadro de Viagens",subtitle:"Monitoramento operacional de itinerários ativos",icon:T,rightElement:e.jsx(g,{asChild:!0,className:"h-14 px-6 rounded-xl font-semibold gap-2 shadow-lg shadow-primary/20",children:e.jsxs(z,{to:"/admin/trips/new",children:[e.jsx(de,{size:20,strokeWidth:2.5})," NOVA VIAGEM"]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(u,{title:"Total Viagens",value:x.length,icon:T,variant:"primary"}),e.jsx(u,{title:"Agendadas",value:x.filter(s=>s.status===a.SCHEDULED).length,icon:v,variant:"emerald"}),e.jsx(u,{title:"Em Curso",value:x.filter(s=>s.status===a.IN_TRANSIT).length,icon:f,variant:"blue"}),e.jsx(u,{title:"Ocupação",value:"82%",icon:ce,variant:"amber"})]}),e.jsxs(ne,{className:"lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-1.5 flex flex-col",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Buscar Rota"}),e.jsxs("div",{className:"relative group flex-1",children:[e.jsx(me,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(W,{placeholder:"Nome da rota...",value:h,onChange:s=>w(s.target.value),className:"pl-12 h-14 bg-muted/40 border-input rounded-xl font-bold"})]})]}),e.jsxs("div",{className:"space-y-1.5 flex flex-col",children:[e.jsx("label",{className:"text-label-caps ml-1",children:"Status Operacional"}),e.jsxs(J,{open:A,onOpenChange:I,children:[e.jsx(K,{asChild:!0,children:e.jsxs(g,{variant:"outline",className:"h-14 w-full bg-muted/40 border-input rounded-xl font-bold justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{size:16,strokeWidth:2.5}),e.jsx("span",{children:t.length===0?"Todos Status":`${t.length} selecionado(s)`})]}),e.jsx(xe,{size:16})]})}),e.jsx(X,{className:"w-[220px] p-2 rounded-xl shadow-2xl border-none",children:B.map(s=>e.jsxs("div",{className:"flex items-center gap-2 p-2 hover:bg-muted rounded-lg cursor-pointer",onClick:()=>R(s.value),children:[e.jsx("div",{className:S("w-4 h-4 rounded border-2",t.includes(s.value)?"bg-primary":"border-muted-foreground"),children:t.includes(s.value)&&e.jsx(ue,{size:12,className:"text-white"})}),e.jsx("span",{className:"text-xs font-bold",children:s.label})]},s.value))})]})]})]}),e.jsx(Y,{className:"shadow-2xl shadow-muted/20 overflow-hidden rounded-3xl bg-card/50 backdrop-blur-sm",children:e.jsxs(F,{children:[e.jsx(U,{className:"bg-muted/30",children:e.jsxs(C,{className:"hover:bg-transparent border-border/50",children:[e.jsx(d,{className:"pl-8 h-14 text-table-head",children:"Viagem / Rota"}),e.jsx(d,{className:"h-14 text-table-head",children:"Partida"}),e.jsx(d,{className:"h-14 text-table-head",children:"Ocupação"}),e.jsx(d,{className:"h-14 text-table-head",children:"Status"}),e.jsx(d,{className:"pr-8 text-right h-14 text-table-head",children:"Ações"})]})}),e.jsx(V,{children:P.map(s=>{var r,o;return e.jsxs(C,{className:"group hover:bg-muted/20 border-border/30 transition-colors h-20",children:[e.jsx(c,{className:"pl-8",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-sm tracking-tight",children:((r=s.route)==null?void 0:r.name)||"Rota Independente"}),e.jsxs("span",{className:"text-[10px] font-bold text-muted-foreground uppercase",children:["ID: ",s.id.substring(0,8)]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold",children:[e.jsx(v,{size:14,className:"text-primary"}),L(s.departure_date)," - ",(o=s.departure_time)==null?void 0:o.substring(0,5)]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:14,className:"text-muted-foreground"}),e.jsx("span",{className:"text-xs font-bold",children:"---"})]})}),e.jsx(c,{children:e.jsx(je,{status:s.status})}),e.jsx(c,{className:"pr-8 text-right",children:e.jsxs($,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"rounded-xl hover:bg-primary/10 transition-colors",children:e.jsx(be,{size:18})})}),e.jsxs(q,{align:"end",className:"w-56 p-2 rounded-xl shadow-2xl border-none",children:[e.jsx(D,{onClick:()=>O(`/admin/trips/${s.id}`),className:"rounded-xl h-11 font-bold",children:"Editar Escala"}),e.jsx(D,{onClick:()=>j(s.id),className:"rounded-xl h-11 font-bold text-destructive",children:"Cancelar Viagem"})]})]})})]},s.id)})})]})}),e.jsx(Z,{open:!!b,onOpenChange:s=>!s&&j(null),children:e.jsxs(ee,{className:"rounded-3xl border-none shadow-2xl",children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Confirmar Cancelamento"}),e.jsx(te,{children:"Esta ação removerá a escala permanentemente."})]}),e.jsxs(re,{children:[e.jsx(le,{className:"rounded-xl border-none font-bold",children:"Voltar"}),e.jsx(oe,{onClick:()=>b&&n.submit({intent:"delete",id:b},{method:"post"}),className:"rounded-xl bg-destructive font-bold",children:"CANCELAR VIAGEM"})]})]})})]},"trips-main")});export{hs as default};
