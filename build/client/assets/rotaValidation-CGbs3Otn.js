import{r as d,j as n}from"./forgot-password-Cd1Knve9.js";import{I as R}from"./input-emgR2opu.js";import{L as A}from"./alert-vCj8ckqs.js";import{c as p}from"./utils-CDN07tui.js";import{C as b}from"./clock-BRAlDuTD.js";const S=({value:e,onChange:t,label:o,required:a=!1,placeholder:s="HH:MM",showIcon:i=!0,className:g="",containerClassName:_=""})=>{const[v,f]=d.useState(e||""),[u,l]=d.useState(!1);d.useEffect(()=>{f(e||"")},[e]);const x=E=>{let r=E.target.value.replace(/\D/g,"");r.length>4&&(r=r.substring(0,4));let h=r;if(r.length>=3&&(h=`${r.substring(0,2)}:${r.substring(2)}`),f(h),r.length===4){const c=parseInt(r.substring(0,2)),m=parseInt(r.substring(2,4));if(c>=0&&c<=23&&m>=0&&m<=59){const I=`${String(c).padStart(2,"0")}:${String(m).padStart(2,"0")}`;t(I),l(!1)}else l(!0)}else r.length===0&&(a||(t(""),l(!1)))};return n.jsxs("div",{className:p("space-y-2",_),children:[o&&n.jsxs(A,{className:"flex items-center gap-1",children:[o," ",a&&n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs("div",{className:"relative",children:[i&&n.jsx("div",{className:p("absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground transition-colors",u&&"text-destructive"),children:n.jsx(b,{size:18})}),n.jsx(R,{type:"text",inputMode:"numeric",value:v,onChange:x,placeholder:s,maxLength:5,className:p("h-14",i?"pl-10":"px-4",u?"border-destructive focus-visible:ring-destructive":"",g)})]}),u&&n.jsx("p",{className:"text-[0.8rem] font-medium text-destructive",children:"Hora inválida (00:00 - 23:59)"})]})};function P(e){const t=[];if(!e.pontos||e.pontos.length<2)return t.push("A rota deve ter pelo menos uma origem e um destino"),{valida:!1,erros:t};e.pontos[0].tipo!=="ORIGEM"&&t.push("O primeiro ponto da rota deve ser do tipo ORIGEM"),e.pontos[e.pontos.length-1].tipo!=="DESTINO"&&t.push("O último ponto da rota deve ser do tipo DESTINO");for(let a=1;a<e.pontos.length-1;a++)e.pontos[a].tipo!=="PARADA_INTERMEDIARIA"&&t.push(`O ponto #${a+1} deve ser do tipo PARADA_INTERMEDIARIA`);return e.pontos.forEach((a,s)=>{(!a.nome||a.nome.trim()==="")&&t.push(`O ponto #${s+1} deve ter um nome`)}),N(e.pontos),{valida:t.length===0,erros:t}}function N(e){for(let t=0;t<e.length-1;t++){const o=e[t],a=e[t+1],s=o.horario_partida||o.horario_chegada,i=a.horario_chegada||a.horario_partida;s&&i&&new Date(a.horario_chegada||a.horario_partida)}return!0}function T(e){if(e.length<2)return 0;let t=0;for(let o=1;o<e.length;o++){const a=e[o];a.duracao_deslocamento_minutos&&(t+=a.duracao_deslocamento_minutos),o<e.length-1&&a.duracao_parada_minutos&&(t+=a.duracao_parada_minutos)}return t}function y(e){if(e.length<2)return"";const t=e[0].nome,o=e[e.length-1].nome;if(e.length===2)return`${t} → ${o}`;const s=e.slice(1,e.length-1).map(i=>i.nome).join(", ");return`${t} → ${o} (via ${s})`}function C(e,t){return{id:`ponto_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,nome:"",ordem:t,tipo:e,permite_embarque:e!=="DESTINO",permite_desembarque:e!=="ORIGEM",observacoes:""}}function H(e){let t=0;return e.map((o,a)=>{if(a===0)return{...o,tempo_acumulado_minutos:0};t+=o.duracao_deslocamento_minutos||0;const s={...o,tempo_acumulado_minutos:t};return o.duracao_parada_minutos&&(t+=o.duracao_parada_minutos),s})}export{S as T,T as a,C as b,H as c,y as g,P as v};
