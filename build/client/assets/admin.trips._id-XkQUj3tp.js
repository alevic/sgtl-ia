import{w as C,u as A,a as D,L as l}from"./chunk-JZWAC4HX-DumfKpwM.js";import{j as e}from"./forgot-password-Cd1Knve9.js";import{B as r}from"./button-D5icbzZz.js";import{C as t}from"./card-Cg68uFrF.js";import{B as i}from"./badge-OnEQOSZY.js";import{P as E}from"./PageHeader-BWRrOg2b.js";import{D as d}from"./DashboardCard-CAo4eudV.js";import{P as T}from"./printer-DssbX2JM.js";import{C as L}from"./chart-pie-CWj8mufS.js";import{U as k}from"./users-BFoA2Uj7.js";import{B as w}from"./bus-D0L2JeBO.js";import{U as M}from"./user-plus-CLYU4vXU.js";import{c as S}from"./createLucideIcon-C45Xejds.js";import"./utils-CDN07tui.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],B=S("map",z),Y=C(function(){var o,c,n,x,p,m,h,u,b,f,g,j,v,N,y;const{trip:a,revenue:P}=A();D();const _=a.reservations.length/(((o=a.vehicle)==null?void 0:o.capacity)||40)*100;return e.jsxs("div",{className:"p-8 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",children:[e.jsx(E,{title:((c=a.route)==null?void 0:c.name)||"Detalhes da Escala",subtitle:"Gestão operacional e financeira da viagem",backLink:"/admin/trips",rightElement:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{variant:"outline",onClick:()=>window.print(),className:"h-14 rounded-xl px-6 font-bold uppercase text-[12px] border-border/50",children:[e.jsx(T,{size:18,className:"mr-2"})," Manifesto"]}),e.jsx(r,{asChild:!0,className:"h-14 rounded-xl px-8 bg-primary font-bold uppercase text-[12px] shadow-lg shadow-primary/20",children:e.jsx(l,{to:`/admin/trips/edit/${a.id}`,children:"EDITAR ESCALA"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Ocupação",value:`${_.toFixed(1)}%`,icon:L,variant:"primary"}),e.jsx(d,{title:"Passageiros",value:a.reservations.length,icon:k,variant:"blue"}),e.jsx(d,{title:"Vaga(s) Disponível",value:(((n=a.vehicle)==null?void 0:n.capacity)||40)-a.reservations.length,icon:w,variant:"amber"}),e.jsx(d,{title:"Receita Prevista",value:`R$ ${P.toFixed(2)}`,icon:DollarSign,variant:"emerald"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsxs(t,{className:"rounded-[32px] border-none shadow-xl overflow-hidden bg-card/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"p-8 border-b border-border/50 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-black uppercase text-[14px] tracking-widest flex items-center gap-2",children:[e.jsx(k,{size:18,className:"text-primary"})," Manifesto de Passageiros"]}),e.jsx(r,{variant:"ghost",className:"rounded-xl h-10 font-bold text-[11px] uppercase",asChild:!0,children:e.jsxs(l,{to:"/admin/reservations/new",children:[e.jsx(M,{size:16,className:"mr-2"})," Vender Ticket"]})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted/30",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-4 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Assento"}),e.jsx("th",{className:"px-8 py-4 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Passageiro"}),e.jsx("th",{className:"px-8 py-4 text-left text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Status"}),e.jsx("th",{className:"px-8 py-4 text-right text-[10px] font-black uppercase tracking-widest text-muted-foreground",children:"Ticket"})]})}),e.jsxs("tbody",{className:"divide-y divide-border/30",children:[a.reservations.map(s=>e.jsxs("tr",{className:"hover:bg-muted/10 transition-colors",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsx(i,{variant:"outline",className:"h-8 w-8 rounded-lg flex items-center justify-center font-black p-0 border-primary/20 bg-primary/5 text-primary",children:s.seat_number})}),e.jsx("td",{className:"px-8 py-6 font-bold",children:s.passenger_name}),e.jsx("td",{className:"px-8 py-6",children:e.jsx(i,{className:"bg-emerald-500/10 text-emerald-500 border-none rounded-lg text-[10px] font-black uppercase",children:s.status})}),e.jsxs("td",{className:"px-8 py-6 text-right font-mono text-[10px] font-bold text-muted-foreground",children:["#",s.ticket_code||s.id.substring(0,8)]})]},s.id)),a.reservations.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-8 py-20 text-center text-muted-foreground italic",children:"Nenhum passageiro embarcado nesta escala."})})]})]})})]}),e.jsxs(t,{className:"p-8 rounded-[32px] border-none shadow-xl bg-card/50 backdrop-blur-sm space-y-6",children:[e.jsxs("h3",{className:"font-black uppercase text-[14px] tracking-widest flex items-center gap-2",children:[e.jsx(B,{size:18,className:"text-primary"})," Itinerário de Paradas"]}),e.jsxs("div",{className:"space-y-8 relative pl-6 before:absolute before:left-[27px] before:top-4 before:bottom-4 before:w-0.5 before:bg-muted/50 before:border-dashed",children:[e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shrink-0 mt-2 z-10"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-bold text-sm",children:[(x=a.route)==null?void 0:x.origin_city," - ",(p=a.route)==null?void 0:p.origin_state]}),e.jsxs("p",{className:"text-[11px] text-muted-foreground font-black uppercase",children:["Saída: ",a.departure_time]})]})]}),e.jsxs("div",{className:"flex gap-4 relative",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-destructive shrink-0 mt-2 z-10"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-bold text-sm",children:[(m=a.route)==null?void 0:m.destination_city," - ",(h=a.route)==null?void 0:h.destination_state]}),e.jsxs("p",{className:"text-[11px] text-muted-foreground font-black uppercase",children:["Chegada Prevista: ",a.arrival_time]})]})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[e.jsxs(t,{className:"p-8 rounded-[32px] border-none shadow-xl bg-gradient-to-br from-slate-800 to-slate-900 text-white space-y-6 relative overflow-hidden",children:[e.jsx(w,{className:"absolute -right-8 -bottom-8 w-40 h-40 opacity-10 rotate-12"}),e.jsx("h3",{className:"text-[11px] font-black uppercase tracking-widest opacity-60",children:"Recurso Atribuído"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-3xl font-black uppercase tracking-tighter",children:((u=a.vehicle)==null?void 0:u.placa)||"Sem Placa"}),e.jsx("p",{className:"text-sm font-bold opacity-80",children:((b=a.vehicle)==null?void 0:b.modelo)||"Veículo Não Alocado"})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-white/10",children:[e.jsx(i,{className:"bg-white/10 text-white rounded-lg font-bold text-[10px] uppercase border-none",children:((f=a.vehicle)==null?void 0:f.tipo)||"EXECUTIVO"}),e.jsxs(i,{className:"bg-white/10 text-white rounded-lg font-bold text-[10px] uppercase border-none",children:[((g=a.vehicle)==null?void 0:g.capacidade)||40," Lugares"]})]})]}),e.jsxs(t,{className:"p-8 rounded-[32px] border-none shadow-xl bg-card/50 backdrop-blur-sm space-y-6",children:[e.jsx("h3",{className:"text-[12px] font-black uppercase tracking-widest text-muted-foreground",children:"Tripulação"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-primary font-black text-xl",children:((v=(j=a.driver)==null?void 0:j.nome)==null?void 0:v.charAt(0))||"M"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:((N=a.driver)==null?void 0:N.nome)||"Não Atribuído"}),e.jsxs("p",{className:"text-[10px] font-black uppercase text-muted-foreground tracking-widest",children:["Cat. ",((y=a.driver)==null?void 0:y.categoria_cnh)||"---"]})]})]}),e.jsx(r,{asChild:!0,variant:"outline",className:"w-full h-14 rounded-xl font-bold uppercase text-[11px] tracking-widest border-border/50",children:e.jsx(l,{to:`/admin/drivers/${a.driver_id}`,children:"DETALHES DO MOTORISTA"})})]}),e.jsxs(t,{className:"p-8 rounded-[32px] border-none shadow-xl bg-card/50 backdrop-blur-sm space-y-4",children:[e.jsx("h3",{className:"text-[12px] font-black uppercase tracking-widest text-muted-foreground",children:"Notas Internas"}),e.jsx("p",{className:"text-sm italic text-muted-foreground leading-relaxed",children:a.notes||"Nenhuma observação operacional registrada para esta escala."})]})]})]})]})});export{Y as default};
